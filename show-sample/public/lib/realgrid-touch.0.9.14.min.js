
/** 
 * RealGrid-Touch v1.0.0
 * Copyright (C) 2020-2023 WooriTech Inc.
 * All Rights Reserved. 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).RealTouch=e()}(this,(function(){"use strict";const t=(new Date).getTime();Element.prototype.animate||(Element.prototype.animate=function(t){});const e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,s=!!window.chrome&&!e,i=Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!s&&!e&&navigator.userAgent.indexOf("Safari")>=0,r=/\r\n|\n/g,n=/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)(?=(?:[^\']*\'[^\']*\')*[^\']*$)/,o=/\t/g,h=/\t+/g,a=/"([^"]*(?="))"/,l=/'([^']*(?='))'/,d='"'.charCodeAt(0),_="'".charCodeAt(0);let c=class e{static now(){return+new Date}static stopEvent(t,e=!1){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()}static getErrorStack(t){const e=t.stack;return e?e.split("\n").map((t=>t+"<br/>")):""}static getBaseClassName(t){return Object.getPrototypeOf(t.constructor).name}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static assign(t,e){this.isObject(e)&&Object.assign(t,e)}static isValidObject(t){if(this.isObject(t))for(let e in t)if(t.hasOwnProperty(e))return!0}static copyObject(t){if(t&&"object"==typeof t&&!Array.isArray(t))return Object.assign({},t)}static checkArray(t){return Array.isArray(t)?t:void 0}static makeArray(t,e=!1){return null!=t?Array.isArray(t)?t:[t]:e?[]:void 0}static makeNumArray(t){return Array.isArray(t)?t.map((t=>+t)):null!=t?[+t]:[]}static getIntArray(t,e=0){const s=[];for(let i=e,r=e+t;i<r;i++)s.push(i);return s}static isValueArray(t){if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)if(null!=t[e]&&"object"==typeof t[e])return!1;return!0}return!1}static toArray(t){return Array.isArray(t)?t:null!=t?[t]:null}static copyArray(t){return Array.isArray(t)?t.slice(0):null!=t?[t]:void 0}static push(t,e){if(e&&e.length>0)for(let s=0,i=e.length;s<i;s++)t.push(e[s])}static isDefined(t){return null!=t}static isNotDefined(t){return null==t}static isNumber(t){return"number"==typeof t}static isValidNumber(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}static toNumber(t,e=0){return isNaN(t)||null===t||""===t?e:+t}static getEnumValues(t){return Object.keys(t).map((e=>t[e]))}static compareText(t,e,s=!1){return t=t||"",e=e||"",s&&(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()),t>e?1:t<e?-1:0}static getTimeF(){return(new Date).getTime()/1e3}static getTimer(){return(new Date).getTime()-t}static isWhiteSpace(t){return!t||!t.trim()}static pad(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-String(t).length+1).join(s)+t}static pad16(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-t.toString(16).length+1).join(s)+t.toString(16)}static pick(...t){const e=t.length;let s;for(let i=0;i<e;i++)if(s=t[i],null!=s)return s}static pickNum(...t){const e=t.length;for(let s=0;s<e;s++)if(!isNaN(t[s])&&null!==t[s])return t[s];return NaN}static included(t,...e){const s=e.length;for(let i=0;i<s;i++)if(e[i]==t)return!0;return!1}static compareTextValue(t,e,s,i){if(t===e)return!0;let r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(s||(r=r.toLowerCase(),n=n.toLowerCase()),i?n.indexOf(r)>=0:r==n)}static cast(t,e){return t instanceof e?t:null}static irandom(t,e){if(void 0!==e){const s=t>>0,i=e>>0;return Math.random()*(i-s)+s>>>0}{const e=t>>0;return Math.random()*e>>0}}static irandomExcept(t,e,s){if(0===t&&1===e&&isNaN(s))throw new Error("Invalid irandom2");for(;;){const i=this.irandom(e,s);if(i!==t)return i}}static brandom(){return Math.random()>.5}static srandom(t,e){let s="";const i=this.irandom(t,e);for(let t=0;t<i;t++)s+=String.fromCharCode(this.irandom(97,123));return s}static erandom(t){const e=Object.values(t);return e[this.irandom(e.length)]}static arandom(t){return t[Math.random()*t.length>>0]}static iarandom(t,s,i){const r=new Array;for(let e=t;e<s;e++)r.push(e);for(;r.length>i;)r.splice(e.irandom(r.length),1);return r}static alert(t){window.alert(t)}static toInt(t,e){const s=parseInt(t,e||10);return isNaN(s)?0:s}static toFloat(t){const e=parseFloat(t);return isNaN(e)?0:e}static toEven(t){return 1&t?t+1:t}static hex(t,e=2,s="0"){e=Math.max(e||2,1);const i=t.toString(16);return s=s||"0",new Array(e-i.length+1).join(s)+i}static toStr(t){return Number.isNaN(t)||null==t?"":String(t)}static extend(t,e){t=t||{};for(let s in e)t[s]=e[s];return t}static equalNumbers(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e}static equalArrays(t,e){if(t===e)return!0;if(null==t||null==e)return!1;const s=t.length;if(s!=e.length)return!1;for(let i=0;i<s;++i)if(t[i]!==e[i])return!1;return!0}static equalObjects(t,e){if(t===e)return!0;if(!t&&!e)return!0;if(!t||!e)return!1;for(var s in t)if(t.hasOwnProperty(s)&&t[s]!==e[s])return!1;for(var s in e)if(e.hasOwnProperty(s)&&t[s]!==e[s])return!1;return!0}static parseDate(t,e){const s=new Date(t);return isNaN(s.getTime())?e||new Date:s}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static incMonth(t,s){const i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+s),t.setDate(Math.min(i,e.month_days[e.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t}static minDate(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e}static maxDate(t,e){return null!==t?e:null!==e||t.getTime()>e.getTime()?t:e}static getTextLength2(t){let e=0,s=0,i=0;for(;i=t.charCodeAt(s++);e+=i>>7?2:1);return e}static getClassName(t){if(t&&t.constructor)return t.constructor.name||function(t){let e=t.toString();return e=e.substring("function ".length),e=e.substring(0,e.indexOf("(")),e}(t.constructor)}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isEmpty(t){if(t)for(let e in t)return!1;return!0}static isNotEmpty(t){if(t)for(let e in t)return!0;return!1}static capitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)}static uncapitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="a"&&e<="z"?t:e.toLowerCase()+t.slice(1)}static labelize(t){if("string"!=typeof t)return"";const e=t.charAt(0);let s=(t=e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)).charAt(0);for(let e=1;e<t.length;e++){const i=t.charAt(e);i>="A"&&i<="Z"&&(s+=" "),s+=i}return s}static deepClone(t){if(null===t||"object"!=typeof t)return t;const s=Array.isArray(t)?[]:{};for(let i of Object.keys(t))s[i]=e.deepClone(t[i]);return s}static getArray(t,e){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static getNumArray(t,e=0){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static hasSetter(t,e){for(;t;){const s=Reflect.getOwnPropertyDescriptor(t,e);if(s)return s.writable||!!s.set;t=Object.getPrototypeOf(t)}return!1}static dataUriToBinary(t){const e=";base64,",s=t.indexOf(e)+e.length,i=t.substring(s),r=window.atob(i),n=r.length,o=new Uint8Array(new ArrayBuffer(n));for(let t=0;t<n;t++)o[t]=r.charCodeAt(t);return o}static assignProps(t,e){let s=!1;if(e)for(let i in e)e[i]!==t[i]&&(t[i]=e[i],s=!0);return s}static assignStyleAndProps(t,e){let s=!1;if(e)for(let i in e)("style"===i||t.hasOwnProperty(i))&&(t[i]=e[i],s=!0);return s}static dedupe(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)t[s]===t[s-1]&&t.splice(s,1);return t}static isUnique(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)if(t[s]===t[s-1])return!1;return!0}static sortNum(t){return t.sort(((t,e)=>t-e))}static logElapsed(t,e){const s=+new Date;e(),console.log(t,+new Date-s+"ms")}static clamp(t,e,s){return isNaN(s)||(t=Math.min(t,s)),isNaN(e)||(t=Math.max(t,e)),t}static splice(t,e,s,i){const r=[e,s].concat(i);Array.prototype.splice.apply(t,r)}static makeIntArray(t,e){const s=new Array(Math.max(0,e-t));for(let i=t;i<e;i++)s[i-t]=i;return s}static setInterval(t,e){return setInterval(t,e)}static clearInterval(t){clearInterval(t)}static isStringArray(t){return Array.isArray(t)&&t.every((t=>"string"==typeof t))}static isNumberArray(t){return Array.isArray(t)&&t.every((t=>"number"==typeof t))}static makeLineSeparator(t){if(Array.isArray(t)){if(t.length>0){let e=t[0];for(let s=1,i=t.length;s<i;s++)e+="|"+t[s];return new RegExp(e,"g")}}else if(t)return new RegExp(t,"g")}static stripQuotes(t){const e=t.charCodeAt(0);return e===d?t=t.replace(a,"$1"):e===_&&(t=t.replace(l,"$1")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isValidDate(t){return t.getTime()==t.getTime()}static asFunction(t){return"function"==typeof t?t:void 0}static getFieldProp(t){const e=t.indexOf(".");if(e>=0)return{field:t.substring(0,e),props:t.substring(e+1).split(".")}}static watch(){return new u}};c.week_days=["일","월","화","수","목","금","토"],c.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];class u{constructor(){this._started=+new Date}elapsed(t=!1){const e=+new Date-this._started;return t&&(this._started=+new Date),e}elapsedText(t=!1,e="ms."){return this.elapsed(t)+e}}let g=0;class p{static destroy(t){return t&&t.destroy()}constructor(t){this.$_destroyed=!1,this.$_destroying=!1,t||(this.$_hash=String(g++))}destroy(){return this.$_destroyed||this.$_destroying||(this.$_destroyed=!0,this.$_destroying=!0,this._doDestory()),null}_doDestory(){}get destroying(){return this.$_destroying}get hash(){return this.$_hash}isMe(t){return t===this.$_hash}_doAssignProps(t){return!1}assignProps(t){if(!0===this._doAssignProps(t))return this;if(t){const e=Object.getPrototypeOf(this);for(let s in t){const i=t[s];let r=Object.getOwnPropertyDescriptor(e,s);if(r){if(r.set)r.set.call(this,i);else if(r.get){const t=r.get.call(this);t instanceof p&&t.assignProps(i)}}else{let t=Object.getPrototypeOf(e);for(;t;){let e=Object.getOwnPropertyDescriptor(t,s);if(e){if(e.set)e.set.call(this,i);else if(e.get){const t=e.get.call(this);t instanceof p&&t.assignProps(i)}break}t=Object.getPrototypeOf(t)}}}}return this}assignObject(t,e){if(!0!==this._doAssignProps(t)&&c.isObject(t))if(Array.isArray(e)&&e.length>0){const s=Object.assign({},t);e.forEach((t=>delete s[t])),Object.assign(this,s)}else Object.assign(this,t);return this}toString(){return this.constructor.name}toBool(t){return"string"==typeof t?"true"===t:t}toNum(t,e=NaN){return t=parseFloat(t),isNaN(t)?e:t}}class f extends p{wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}createWrapper(t){const e=this._wrapper=new t;return e.$_c=this,e}setWrapper(t){return this._wrapper=t,t.$_c=this,t}isWrapper(t){return t===this._wrapper}}class w extends p{_doDestory(){this.$_c=null}}class m extends p{constructor(){super(...arguments),this._listeners=[]}addListener(t){t&&this._listeners.indexOf(t)<0&&this._listeners.push(t)}removeListener(t){const e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}_fireEvent(t,...e){const s=Array.prototype.slice.call(arguments,0);s[0]=this;for(const e of this._listeners){const i=e[t];if(i){const t=i.apply(e,s);if(void 0!==t)return t}}}}const y={ko:{dateFormat:"yyyy.MM.dd",am:"오전",pm:"오후",notExistsDataField:"존재하지 않는 필드입니다: %1",notSpecifiedDataField:"하나 이상의 데이터필드가 설정돼야 합니다.",invalidFieldName:"잘못된 데이터필드 이름입니다: %1",invalidFieldIndex:"잘못된 데이터필드 index입니다: %1",invalidRowIndex:"잘못된 데이터행 index입니다: %1",canNotModifyData:"읽기 전용 데이터를 변경할 수 없습니다.",canNotModifyDeleted:"삭제 상태 행을 변경할 수 없습니다: %1",requiredField:"반드시 값을 지정해야 하는 필드입니다: %1",invalidValueInDomain:"값이 필드 값 도메인에 포함되지 않습니다: %1",invalidValueInRange:"값이 필드 값 범위에 포함되지 않습니다: %1",invalidToIndex:"잘못된 'to' index입니다.: %1",requireSourceData:"원본 data가 반드시 지정돼야 합니다.",requireFilterName:"필터 이름이 반드시 지정돼야 합니다.",invalidDateFormat:"잘못된 시간 날짜 형식입니다: %1",invalidSizeValue:"잘못된 Size 값입니다: %1",invalidOuterDiv:"잘못된 외부 div 입니다: %1",canNotHorzGrouping:"수평 모드일 때 그룹핑할 수 없습니다.",dataMustSet:"데이터가 먼저 설정돼야 합니다.",requireGroupingInfos:"하나 이상의 행 그룹핑 정보가 설정돼야 합니다.",canNotRowGrouping:"데이터링크 view에 대해 행그룹핑 할 수 없습니다. dataGroupBy()를 사용하세요.",canNotDataGrouping:"데이터링크 view가 아니면 데이터그룹핑할 수 없습니다. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"그룹핑 상태일 때 수평모드로 변경할 수 없습니다.",unknownLayoutType:"잘못된 layout 종류입니다: %1",layoutMustSet:"레이아웃 모델이 반드시 설정돼야 합니다.",unknownItemViewType:"잘못된 item view 종류입니다: %1",requireCommandName:"Command 이름이 지정돼야 합니다.",commandNameDuplicated:"이미 존재하는 command 이름입니다: %1",requireDataOrGroup:"데이터소스나 그룹 모델이 반드시 지정돼야 합니다.",requireTableName:"테이블모델의 이름이 지정돼야 합니다.",alreadyTableExists:"이미 존해하는 테이블모델입니다: %1"},en:{dateFormat:"M/d/yyyy",am:"AM",pm:"PM",notExistsDataField:"A data field is not exists: %1",notSpecifiedDataField:"At least one datafield must be set.",invalidFieldName:"Invalid field name: %1",invalidFieldIndex:"Invalid field index: %1",invalidRowIndex:"Invalid row index: %1",canNotModifyData:"Can not modify a readonly data.",canNotModifyDeleted:"Can not modify a deleted row: %1",requiredField:"Required field: %1",invalidValueInDomain:"The value is not int the domain: %1",invalidValueInRange:"The value is not int the range: %1",invalidToIndex:"Invalid 'to' index: %1",requireSourceData:"A source data must be set.",requireFilterName:"A filter name must be set.",invalidDateFormat:"Invalid datetime format: %1",invalidSizeValue:"Invalid size value: %1",invalidOuterDiv:"Invalid outer div element: %1",canNotHorzGrouping:"Can not row grouping in horz mode.",dataMustSet:"A data must be set first.",requireGroupingInfos:"At least one grouping info must be set.",canNotRowGrouping:"Can not row grouping by data link view. use dataGroupBy().",canNotDataGrouping:"Can not data grouping without data link view. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"Can not change to horz mode while grouping",unknownLayoutType:"Invalid layout: %1",layoutMustSet:"A layout model must be set.",unknownItemViewType:"Unknow item view type: %1",requireCommandName:"Command name must be supplied.",commandNameDuplicated:"Command name is already exists: %1",requireDataOrGroup:"A data or group view must be set.",requireTableName:"The name of table model is required.",alreadyTableExists:"A table model is already exists: %1"}};let b="ko",v=y[b];const C=(t,e)=>{if(t&&c.isObject(e)&&(v=y[t]=e,"en"!==t)){const t=y.en;for(const e in t)v[e]=v[e]||t[e]}},S=(t,e)=>t.replace("%1",e);class R{static setLogging(t=!0){this._logging=t}static log(...t){this._logging&&console.log.apply(console,t)}}R._logging=!1;class x{static setDebugging(t=!0){this._debugging=t}static debugging(){this._debugging}}x._debugging=!1;const V=new Error("Not Implemented."),E="①".charCodeAt(0),$="*".charCodeAt(0),A="%".charCodeAt(0),L=function(t){return t.fixed?t.size+"px":t.size+"%"},T=function(t){return t?t.fixed?t.size+"px":t.size+"%":""};function k(t,e){let s,i;if(null==t||Number.isNaN(t)){if(e)return null;i=0,s=!0}else if(!(s=!isNaN(i=+t))){const s=t.trim();if(s.charCodeAt(s.length-1)===A&&(i=1===s.length?NaN:parseFloat(s)),isNaN(i)){if(e)return null;G(v.invalidSizeValue,t)}}return{size:i,fixed:s}}function D(t,e){return t?t.fixed?t.size:t.size*e/100:NaN}function N(t,e){let s,i,r;if(null==t||Number.isNaN(t)){if(e)return null;r=0,s=!0}else if(!(s=!isNaN(r=+t))){const s=t.trim(),n=s.charCodeAt(s.length-1);if(n===A?r=1===s.length?NaN:parseFloat(s):n===$&&(r=1===s.length?1:parseFloat(s),i=!0),isNaN(r)){if(e)return null;G(v.invalidSizeValue,t)}}return{size:r,rated:i,fixed:s}}function P(t){return t&&!t.fixed?t.size:NaN}class M extends Error{}const I=function(t,e){if(!t)throw new M(e)},O=Object.freeze({width:0,height:0});const B=Object.freeze({left:0,right:0,top:0,bottom:0,horz:0,vert:0}),F=Object.freeze({left:0,right:0,top:0,bottom:0,borderLeft:0,borderRight:0,borderTop:0,borderBottom:0,horz:0,vert:0});class H extends p{constructor(){super(...arguments),this._items={}}_doDestory(){this.clear()}get(t){return this._items[t]}clear(){for(let t in this._items)this._items[t].destroy();this._items={}}add(t,e){t&&e&&(this._items[t]=e)}remove(t){delete this._items[t]}removeAll(t){if(Array.isArray(t)){const e=this._items;t.forEach((t=>{const s=e[t];s&&(s.destroy(),delete e[t])}))}}}var W;!function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right"}(W||(W={}));const z=t=>{throw new Error(t)},G=(t,e)=>{throw new Error(S(t,e))},U=/[;\:]/;class j{static getFormatter(t){let e=j.Formatters[t];return e||(j.Formatters[t]=e=new j(t)),e}constructor(t){this.$_parse(this._format=t)}get format(){return this._format}toStr(t){return!0===t?this._trueText:this._falseText}$_parse(t){if(this._falseText=this._trueText=null,t){const e=t.split(U);this._falseText=e[0],e.length>0&&(this._trueText=e[1])}}}j.Formatters={};const q=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],Y=[".","/","-",":"],Q="Z".charCodeAt(0),Z="z".charCodeAt(0),X="A".charCodeAt(0),K="a".charCodeAt(0),J="y".charCodeAt(0),tt="M".charCodeAt(0),et="m".charCodeAt(0),st="d".charCodeAt(0),it="H".charCodeAt(0),rt="h".charCodeAt(0),nt="S".charCodeAt(0),ot="s".charCodeAt(0),ht=function(t){return t<10?"0"+t:String(t)},at=function(t){return t<10?"00"+t:t<100?"0":String(t)};class lt{static getFormatter(t){let e=lt.Formatters[t];return e||(lt.Formatters[t]=e=new lt(t)),e}static get Default(){return lt.getFormatter(v.dateFormat)}constructor(t){this._baseYear=2e3,this._preserveTime=!1,this._hasAmPm=!1,this._formatString="",this.formatString=t}get format(){return this._format}get formatString(){return this._formatString}set formatString(t){(t=t||v.dateFormat)!=this._formatString&&(this._tokens=[],this.parse(t),this._formatString=t)}toStr(t){if(!this._tokens)return"";const e=this._tokens;let s="";for(var i=0,r=e.length;i<r;i++){var n=e[i],o=n.length;switch(n.charCodeAt(0)){case J:s+=o>2?t.getFullYear():ht(t.getFullYear()%100);break;case tt:s+=o>1?ht(t.getMonth()+1):t.getMonth()+1;break;case st:s+=o>1?ht(t.getDate()):t.getDate();break;case it:s+=o>1?ht(t.getHours()):t.getHours();break;case rt:if(this._hasAmPm){let e=t.getHours();0==e?e=12:e>12&&(e-=12),s+=o>1?ht(e):e}else s+=o>1?ht(t.getHours()):t.getHours();break;case et:s+=o>1?ht(t.getMinutes()):t.getMinutes();break;case ot:s+=o>1?ht(t.getSeconds()):t.getSeconds();break;case K:case X:t.getHours()<12?s+=v.am:s+=v.pm;break;case nt:let e=t.getMilliseconds();s+=3==o?at(e):2==o?ht(e):e.toString().substr(0,o);break;default:s+=n}}return s}parseDateFormatTokens(t){var e=[];if(t){const s=t.trim(),i=s.length;let r=0;for(;r<i;){let n=s.charAt(r);if(Y.indexOf(n)>=0)e.push(n),r++;else{let o=r++;for(;r<i&&s.charAt(r)==n;)r++;if(n=s.substring(o,r),q.indexOf(n)<0){let e=n.charCodeAt(0);(e>=X&&e<=Q||e>=K&&e<=Z)&&G(v.invalidDateFormat,t)}e.push(n)}if(r<i&&c.isWhiteSpace(n=s.charAt(r)))for(e.push(n);r<i&&c.isWhiteSpace(s.charAt(r));)r++}}return e}parse(t){t&&(this._format=t||v.dateFormat,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0)}}lt.Formatters={};const dt="0".charCodeAt(0),_t="#".charCodeAt(0),ct=",".charCodeAt(0),ut="s".charCodeAt(0),gt="a".charCodeAt(0);class pt{static getFormatter(t){let e=pt.Formatters[t];return e||(pt.Formatters[t]=e=new pt(t)),e}static get Default(){return pt.getFormatter(pt.DEFAULT_FORMAT)}constructor(t){t=t.trim(),this._options=t?this.$_parse(this._format=t):{useGrouping:!1}}get format(){return this._format}toStr(t){return t.toLocaleString(void 0,this._options)}$_parse(t){const e=t.length;if(e>0){const s={useGrouping:!1,minimumIntegerDigits:0,minimumFractionDigits:0,maximumFractionDigits:0};let i=t.indexOf(".");if(i>=0){let r=i+1;for(;r<e&&t.charCodeAt(r)===dt;)s.minimumFractionDigits++,r++;for(s.maximumFractionDigits=s.minimumFractionDigits;r<e&&t.charCodeAt(r)===_t;)s.maximumFractionDigits++,r++;i-=1}else i=e-1;let r=i;for(;r>=0&&t.charCodeAt(r)===dt;)s.minimumIntegerDigits++,r--;for(;r>=0;){if(t.charCodeAt(r--)===ct){s.useGrouping=!0;break}}for(r=i;r>=0;){if(t.charCodeAt(r--)===ut){s.signDisplay="always";break}}if(!s.signDisplay)for(r=i;r>=0;){if(t.charCodeAt(r--)===gt){s.signDisplay="never";break}}return s.minimumIntegerDigits=Math.max(1,s.minimumIntegerDigits),s}}}pt.DEFAULT_FORMAT="",pt.Formatters={};const ft=/(.*)/,wt=new RegExp(';(?=(?:[^"]*"[^"]*")*(?![^"]*"))');class mt{static getFormatter(t){let e=mt.Formatters[t];return e||(mt.Formatters[t]=e=new mt(t)),e}constructor(t){this._pattern=ft,this._replace="$1",this.$_parse(this._format=t)}get format(){return this._format}toStr(t){return t&&t.replace(this._pattern,this._replace)}$_parse(t){if(t){const e=t.trim().split(wt);if(e.length>1){let t=e[0].trim(),s=e[1].trim();t&&s&&('"'==t.charAt(0)&&(t=t.substr(1,t.length-2)),t&&('"'==s.charAt(0)&&(s=t.substr(1,s.length-2)),s&&(this._pattern=new RegExp(t,e[2]||""),this._replace=s)))}}}}mt.Formatters={};const yt="_rnd_",bt="_fld_",vt="_row_",Ct="_idx_",St="_url_",Rt="_width_",xt="_height_",Vt="_name_",Et="_sts_",$t="_sts_",At="_span",Lt="_img",Tt="_btn",kt="_box",Dt="_group",Nt="_bar",Pt="_shape",Mt="_svg",It="_clkable",Ot="hgrow",Bt="vgrow",Ft=/(\$|%)\{[^(\$|%)\{\}\;\|]+[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*\}/g,Ht="@".charCodeAt(0);class Wt{static create(t,e,s){return new Wt(void 0,t,e,s)}constructor(t,e,s,i){this.source=t,this.stock=e.charCodeAt(0)===Ht,this.default=s,this.format=i;const r=(e=this.stock?e.substring(1):e).indexOf(".");r>=0?(this.field=e.substring(r+1),this.name=e.substring(0,r)):this.name=e}}class zt{static parse(t){if("string"==typeof t){const e=t.match(Ft);if(e)return new zt(t,e)}return t}static load(t){const e={};for(const s in t){const i=t[s];e[s]="string"==typeof i?zt.parse(i):i}return e}constructor(t,e){function s(t,e){let s=t.indexOf("|",e),i=t.indexOf(";",e);return s>=0&&i>=0?Math.min(s,i):s>=0?s:i}this._params=[],this._args={context:void 0,field:void 0};const i=this._params;let r=0;for(let n of e){const e=t.indexOf(n,r),o=n.substring(2,n.length-1),h=s(o);let a;if(e>r&&(i.push(t.substring(r,e)),r=e),h>=0){const t=o.substring(0,h),e=s(o,h+1);let i,r;e>=0?(i=o.substring(h+1,e),r=o.substring(e+1)):i=o.substring(h+1),a=new Wt(n,t,i,r)}else a=new Wt(n,o,void 0,void 0);i.push(a),r+=n.length}r<t.length&&i.push(t.substring(r))}get count(){return this._params.length}get(t){return this._params[t]}inflate(t,e,s,i){const r=this._args,n=this._params;let o="";r.context=t,r.field=s;for(let t=0,h=n.length;t<h;t++){const a=n[t];if(a instanceof Wt){let t;if(i.inflateParam)if(a.stock){if(t=i.inflateStock(e,s,a),a.format){const e=typeof t;if(("number"===e||"bigint"===e)&&!Number.isNaN(t)){const e=pt.getFormatter(a.format);e&&(t=e.toStr(t))}}}else t=i.inflateParam(e,s,a);else t=i[a.name],"function"==typeof t&&(t=t(r));if(1===h)return null!=t?t:a.default;o+=null!=t?t:a.default||""}else o+=a}return o}}var Gt,Ut,jt,qt,Yt;!function(t){t.NORMAL="normal",t.TABLE="table"}(Gt||(Gt={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Ut||(Ut={})),function(t){t.PORTRAIT="portrait",t.LANDSCAPE="landscape"}(jt||(jt={})),function(t){t.START="start",t.CENTER="center",t.END="end"}(qt||(qt={})),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(Yt||(Yt={}));const Qt={left:"flex-start",center:"center",right:"flex-end","":""};var Zt;!function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(Zt||(Zt={}));const Xt={top:"flex-start",middle:"center",bottom:"flex-end","":""};var Kt,Jt,te;!function(t){t.DEFAULT="default",t.ROW="row",t.PIXEL="pixel"}(Kt||(Kt={})),function(t){t.START="start",t.END="end",t.CENTER="center",t.SPACE_BETWEEN="spaceBetween",t.SPACE_AROUND="spaceAround"}(Jt||(Jt={}));class ee extends p{constructor(t){super(),this._icons={},c.isObject(t)&&(this._width=+t.width,this._height=+t.height,this._root=t.root,Object.assign(this._icons,t.icons))}get width(){return this._width}get height(){return this._height}getUrl(t){let e=this._icons[t];if(e)return this._root&&(e=this._root+e),e}get(t){return this._icons[t]}set(t,e){this._icons[t]=e}}!function(t){t.ASCENDING="ascending",t.DESCENDING="descending"}(te||(te={}));const se=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},ie=function(t,e){return void 0===t?e:t},re=function(t,e,s){return void 0===t?void 0===e?s:e:t},ne=function(t,e){return t=parseFloat(t),isNaN(t)?e:t},oe=function(t,e){return t=parseFloat(t),isNaN(t)?parseFloat(e):t},he=function(t,e,s){return isNaN(t)?isNaN(e)?s:e:t},ae=function(t){return t+"px"},le=function(t){return isNaN(t)?t:t+"px"},de=function(t){return t+"%"},_e="0px",ce="가나다라마바사아자차카타파하힣";class ue{}const ge=function(t){const e=c.copyObject(t);let s;if(e){s=new ue,e.alternate&&(s.alternate=Object.assign({},e.alternate),delete e.alternate),e.updated&&(s.updated=Object.assign({},e.updated),delete e.updated),e.deleted&&(s.deleted=Object.assign({},e.deleted),delete e.deleted),e.selected&&(s.selected=Object.assign({},e.selected),delete e.selected),e.checked&&(s.checked=Object.assign({},e.checked),delete e.checked),e.searched&&(s.searched=Object.assign({},e.searched),delete e.searched),"function"==typeof e.callback&&(s.callback=e.callback);const t=e.default;t&&delete e.default,s.default=e,t&&Object.assign(s.default,t)}return s};var pe,fe;!function(t){t.DEFAULT="default",t.CARD="card"}(pe||(pe={})),function(t){t.DEFAULT="default",t.PRE="pre",t.FULL="full"}(fe||(fe={}));const we={},me={},ye={},be=function(t){let e=we[t];if(e)return e;if(t){const s=mt.getFormatter(t);return we[t]=e=t=>s.toStr(t),e}return null},ve=function(t){let e=me[t];if(e)return e;if(t){const s=j.getFormatter(t);return me[t]=e=t=>s.toStr(t),e}return null},Ce=function(t){let e=ye[t];if(e)return e;if(t){const s=pt.getFormatter(t);return ye[t]=e=t=>s.toStr(t),e}return null},Se=function(t){let e=ye[t];if(e)return e;if(t){const s=lt.getFormatter(t);return e=t=>s.toStr(t),e}return null};var Re,xe,Ve,Ee,$e,Ae,Le,Te,ke,De,Ne,Pe;!function(t){t.NONE="none",t.CHECK="check",t.COMMAND="command",t.EXPAND="expand",t.DETAIL="detail",t.DETAILEX="detailex",t.INFO="info",t.EDIT="edit",t.LINK="link",t.MOVE="move",t.SELECT="select"}(Re||(Re={})),function(t){t.NONE="none",t.BALLOON="balloon",t.BOUNCE="bounce"}(xe||(xe={})),function(t){t.NONE="none",t.COMMAND="command",t.PAGE="page",t.TAP="tap",t.INFO="info",t.EDIT="edit",t.ROW_BAR="rowBar",t.EDIT_BAR="editBar"}(Ve||(Ve={})),function(t){t.DEFAULT="default",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.BOTH="both"}(Ee||(Ee={})),function(t){t.FORM="form",t.BUTTON="button",t.SEARCH="search"}($e||($e={})),function(t){t.NONE="none",t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(Ae||(Ae={})),function(t){t.AFTER="after",t.BEFORE="before"}(Le||(Le={}));class Me extends f{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,!e&&this._doInitDefaults()}owner(){return this._owner}_changed(){this._owner&&this._owner.optionItemChanged(this)}}!function(t){t.DEFAULT="default",t.RANDOM="random",t.LEFT="left",t.RIGHT="right",t.UP="up",t.DOWN="down"}(Te||(Te={})),function(t){t.GRID="grid",t.LIST="list",t.MENU="menu"}(ke||(ke={})),function(t){t.ROW="row",t.BODY="body"}(De||(De={})),function(t){t.NONE="none",t.PARENT="parent",t.INNER="inner"}(Ne||(Ne={})),function(t){t.TOP_LEFT="topLeft",t.TOP_RIGHT="topRight",t.BOTTOM_LEFT="bottomLeft",t.BOTTOM_RIGHT="bottomRight"}(Pe||(Pe={}));let Ie=651212;const Oe="div",Be={t:"borderTop",b:"borderBottom",l:"borderLeft",r:"borderRight"};class Fe{static getWin(t){return t.defaultView||t.parentWindow}static isVisible(t){return t&&"none"!==t.style.display}static setVisible(t,e,s=""){return t.style.display=e?s||"":"none",e}static hide(t){t.style.display="none"}static show(t,e=""){t.style.display=e}static addClass(t,e){e&&t.classList.add(e)}static getImageUrl(t){const e=t.backgroundImage;if(e&&e.startsWith('url("'))return e.substring(5,e.length-2)}static getFocused(){let t=document.getSelection().focusNode;for(;t;){if(t instanceof HTMLElement)return t;t=t.parentElement}}static isAncestorOf(t,e){let s=e;for(;s;){if(s==t)return!0;s=s.parentElement}return!1}static getOffset(t){const e=t.ownerDocument,s=e.defaultView,i=t.getBoundingClientRect(),r=e.body,n=e.documentElement,o=s.pageYOffset||n.scrollTop||r.scrollTop,h=s.pageXOffset||n.scrollLeft||r.scrollLeft,a=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,d=i.left+h-l,_=i.top+o-a;return{x:Math.round(d),y:Math.round(_)}}static getSize(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}static moveX(t,e){t.style.left=e+"px"}static moveY(t,e){t.style.top=e+"px"}static move(t,e,s){t.style.left=e+"px",t.style.top=s+"px"}static moveI(t,e,s){t.style.left=(e>>>0)+"px",t.style.top=(s>>>0)+"px"}static resize(t,e,s){t.style.width=e+"px",t.style.height=s+"px"}static resizeSVG(t,e,s){t.setAttribute("viewBox",`0 0 ${e} ${s}`)}static setWidth(t,e){t.style.width=e+"px"}static setHeight(t,e){t.style.height=e+"px"}static getBrowserSize(t){const e=t?t.ownerDocument:document,s=e.defaultView;return{width:s.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:s.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}}static setRect(t,e){const s=t.style;s.left=e.x+"px",s.top=e.y+"px",s.width=e.width+"px",s.height=e.height+"px"}static setBounds(t,e,s,i,r){const n=t.style;n.left=e+"px",n.top=s+"px",n.width=i+"px",n.height=r+"px"}static setBoundsEx(t,e,s,i,r){const n=t.style;!isNaN(e)&&(n.left=e+"px"),!isNaN(s)&&(n.top=s+"px"),!isNaN(e)&&(n.width=i+"px"),!isNaN(e)&&(n.height=r+"px")}static getClientRect(t){const e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e}static getChildIndex(t){if(t){const e=t.parentNode;if(e){const s=e.children;for(let e=s.length;e--;)if(s[e]===t)return e}}return-1}static clearChildren(t){let e;for(;e=t.lastChild;)t.removeChild(e)}static clearElements(t){let e;for(;e=t.lastChild;)Fe.clearElements(e),t.removeChild(e)}static append(t,e){e.parentNode!==t&&t.appendChild(e)}static addChild(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)}static removeChild(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)}static removeChildren(t,e){e.forEach((e=>{e instanceof Element?e.parentNode===t&&t.removeChild(e):e&&e.dom().parentNode==t&&t.removeChild(e.dom())}))}static remove(t){const e=t&&t.parentElement;return e&&e.removeChild(t),null}static clearStyle(t){t.style.cssText=""}static setStyle(t,e){e&&Object.assign(t.style,e)}static resetClassList(t,e){const s=t.classList;for(;s.length>0;)s.remove(s.item(0));e&&s.add(e)}static createElement(t,e,s){const i=t.createElement(e);return s&&Object.assign(i.style,s),i}static htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}static setData(t,e,s){null==s||""===s?delete t.dataset[e]:t.dataset[e]=s}static getData(t,e){return t.dataset[e]}static hasData(t,e){return void 0!==t.dataset[e]}static animate(t,e,s,i,r=150,n="none"){const o={},h={};return o[e]=s,h[e]=i,t.animate([o,h],{duration:r,fill:n})}static setAttr(t,e,s){null!=s&&""!==s?t.setAttribute(e,s):t.removeAttribute(e)}static setAttrs(t,e){for(const s in e)t.setAttribute(s,e[s])}static getDomId(){return"-rtc-"+Ie++}static createBR(t,e){const s=t.createElement("br");return s.className=e,s}static createSpan(t,e){const s=t.createElement("span");return e&&Object.assign(s.style,e),s}static createCheckBox(t,e){const s=t.createElement("input");return s.type="checkbox",e&&Object.assign(s.style,e),s}static createRadio(t,e){const s=t.createElement("input");return s.type="radio",e&&Object.assign(s.style,e),s}static getPadding(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}}static getPaddingEx(t){const e=this.getPadding(t);return e.horz=e.left+e.right,e.vert=e.top+e.bottom,e}static getPaddingBorder(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0,borderLeft:parseFloat(e.borderLeftWidth)||0,borderRight:parseFloat(e.borderRightWidth)||0,borderTop:parseFloat(e.borderTopWidth)||0,borderBottom:parseFloat(e.borderBottomWidth)||0}}static stopAnimation(t){if(t)try{t.finish()}catch(t){x.debugging(),console.error(t)}return null}static childByPath(t,e){let s=t;if(e){let t=0;for(;t<e.length;)s=s.childNodes[e[t++]]}return s}static childByClass(t,e){return t.getElementsByClassName(e)[0]}static setDisabled(t,e){this.setAttr(t,"disabled",!!e||void 0)}static setImportantStyle(t,e,s){t.setProperty(e,s,"important")}}class He extends f{constructor(t,e,s){super(),this._syncOrientation=!0,this._syncScreenOrientation=!0,this.longPressDelay=1e3,this._inited=!1,this._testing=!1,this._dirty=!0,this._invalidElements=[],this._toAnimation=0,this._invalidateLock=!1,this._lockDirty=!1,this._cssVars={},this._screenOrientationChangeHandler=t=>{this._screenOrientation=this.$_getScreenOrientation(),this.$_checkOrientation()},this._windowResizeHandler=t=>{this.$_checkOrientation(),this._windowResized(),this.doc().getElementById(He.currentInput),He.currentInput=null},this._clickHandler=t=>{this._doClick(t),this._tool.click(t)},this._dblClickHandler=t=>{this._doDblClick(t),this._tool.dblClick(t)},this._touchMoveHandler=t=>{this._doTouchMove(t),this._tool.touchMove(t)},this._pointerDownHandler=t=>{this._doPointerDown(t)||this._tool.pointerDown(t)},this._pointerMoveHandler=t=>{this._doPointerMove(t),this._tool.pointerMove(t)},this._pointerUpHandler=t=>{this._doPointerUp(t),this._tool.pointerUp(t)},this._pointerCancelHandler=t=>{this._doPointerCancel(t),this._tool.pointerCancel(t)},this._pointerLeaveHandler=t=>{this._doPointerLeave(t),this._tool.pointerLeave(t)},this._keyPressHandler=t=>{this._doKeyPress(t),this._tool.keyPress(t)},this._wheelHandler=t=>{this._doWheel(t),this._tool.wheel(t)},!t&&e instanceof HTMLDivElement&&(t=e.ownerDocument),this.$_initControl(t||document,e,s),this._resigterEventHandlers(this._dom),this._inited=!0,this.invalidate(!0)}_doDestory(){this._unresigterEventHandlers(this._dom),Fe.remove(this._dom),this._dom=null,this._container=null}isInited(){return this._inited}isTesting(){return this._testing}doc(){return this._dom.ownerDocument}dom(){return this._dom}width(){return this._container.offsetWidth}height(){return this._container.offsetHeight}activeTool(){return this._activeTool||this._tool}setSctiveTool(t){t!==this._activeTool&&(this._activeTool=t,this._tool=t||this._defaultTool)}orientation(){return this._orientation}setOrientation(t){t!==this._orientation&&(this._orientation=t,this.$_orientationChanged(t))}isPortrait(){return this._orientation!==jt.LANDSCAPE}isLandscape(){return this._orientation===jt.LANDSCAPE}syncOrientation(){return this._syncOrientation}setSyncOrientation(t){this._syncOrientation=t}screenOrientation(){return this._screenOrientation}syncScreenOrientation(){return this._syncScreenOrientation}setScreenSyncOrientation(t){this._syncScreenOrientation=t}addElement(t){t&&this._root.addChild(t)}removeElement(t){this._root.removeChild(t)}invalidate(t=!1){t||!this._invalidateLock&&!this._dirty&&this._inited?(this._dirty=!0,this._requestTimer||this._testing||this.$_requestRender()):this._invalidateLock&&(this._lockDirty=!0)}invalidateLayout(t=!1){this.invalidate(t)}setLock(){this._invalidateLock=!0}releaseLock(t=!0){this._invalidateLock&&(this._invalidateLock=!1),this._lockDirty&&t&&this.invalidate(),this._lockDirty=!1}lock(t){this.setLock();try{t(this)}finally{this.releaseLock()}}silentLock(t){this.setLock();try{t(this)}finally{this.releaseLock(!1)}}elementOfDom(t){return t&&this._root.childOfDom(t)}getBounds(){return this._dom.getBoundingClientRect()}toElement(t,e,s){const i=this.getBounds(),r=t.getClientRect();return{x:e-=r.left-i.left,y:s-=r.top-i.top}}setAnimation(t){this._toAnimation=t||0}fling(t,e){}getCssVar(t){let e=this._cssVars[t];return t in this._cssVars?this._cssVars[t]:(e=getComputedStyle(this._root.dom).getPropertyValue(t),this._cssVars[t]=e,e)}_setTesting(){this._testing=!0,We.TESTING=!0}_setSize(t,e){isNaN(t)||(this._container.style.width=t+"px"),isNaN(e)||(this._container.style.height=e+"px")}$_getScreenOrientation(){return window.screen.orientation?window.screen.orientation.type.startsWith("landscape")?jt.LANDSCAPE:jt.PORTRAIT:"orientation"in window?90===Math.abs(+window.orientation)?jt.LANDSCAPE:jt.PORTRAIT:window.innerWidth>window.innerHeight?jt.LANDSCAPE:jt.PORTRAIT}$_getOrientation(){return this._dom.clientWidth>this._dom.clientHeight?jt.LANDSCAPE:jt.PORTRAIT}$_checkOrientation(){this._syncOrientation&&(this._syncScreenOrientation?this.setOrientation(this._screenOrientation):this.setOrientation(this.$_getOrientation()))}$_addListener(t,e,s){t.addEventListener(e,s)}_resigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",this._screenOrientationChangeHandler),window.addEventListener("resize",this._windowResizeHandler),this.$_addListener(t,"click",this._clickHandler),this.$_addListener(t,"dblclick",this._dblClickHandler),this.$_addListener(t,"touchmove",this._touchMoveHandler),this.$_addListener(t,"pointerdown",this._pointerDownHandler),this.$_addListener(t,"pointermove",this._pointerMoveHandler),this.$_addListener(t,"pointerup",this._pointerUpHandler),this.$_addListener(t,"pointercancel",this._pointerCancelHandler),this.$_addListener(t,"pointerleave",this._pointerLeaveHandler),this.$_addListener(t,"keypress",this._keyPressHandler),this.$_addListener(t,"wheel",this._wheelHandler)}_unresigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",this._screenOrientationChangeHandler),window.removeEventListener("resize",this._windowResizeHandler),t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblClickHandler),t.removeEventListener("touchmove",this._touchMoveHandler),t.removeEventListener("pointerdown",this._pointerDownHandler),t.removeEventListener("pointermove",this._pointerMoveHandler),t.removeEventListener("pointerup",this._pointerUpHandler),t.removeEventListener("pointercancel",this._pointerCancelHandler),t.removeEventListener("pointerleave",this._pointerLeaveHandler),t.removeEventListener("keypress",this._keyPressHandler),t.removeEventListener("wheel",this._wheelHandler)}$_orientationChanged(t){this._doOrientationChanged(t);const e=this.onOrientationChanged;e&&e(t)}_doOrientationChanged(t){}_prepareRenderers(t){}$_initControl(t,e,s){if(this._inited)return;e instanceof HTMLDivElement?this._container=e:this._container=t.getElementById(e),this._container instanceof HTMLDivElement||G(v.invalidOuterDiv,e);const i=this._container.getElementsByClassName("rtc-renderers")[0];i&&(this._prepareRenderers(i),i.remove());const r=this._dom=t.createElement("div");if(Object.assign(r.style,{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"}),r.className=s,this._container.appendChild(r),this._screenOrientation=this.$_getScreenOrientation(),this._orientation=this.$_getOrientation(),this._root=new Ge(t,this),r.appendChild(this._root._dom),this._defaultTool=this._tool=this._creatDefaultTool(),this._doInitModel(),this._doInitView(t),void 0===We.ANIMATABLE){const t=r.animate&&r.animate([{left:0},{left:0}],{duration:0,fill:"none"});We.ANIMATABLE=!!t}}_render(){this.$_render()}$_invalidateElement(t){this._invalidElements.push(t),this.invalidate()}$_requestRender(){window.requestAnimationFrame?this._requestTimer=requestAnimationFrame((()=>this.$_render())):setTimeout((()=>{this.$_render()}),0)}updateNow(){this.$_render()}$_render(){const t=+new Date;if(t<=this._toAnimation)this.$_requestRender();else{try{this._doBeforeRender();const t=this._dom.clientWidth,e=this._dom.clientHeight;this._doRender({x:0,y:0,width:t,height:e})}finally{this._dirty=!1,this._requestTimer=null,this._invalidElements.forEach((t=>t.validate())),this._invalidElements=[],this._doAfterRender()}R.log("render in "+(+new Date-t)+"ms.")}}_doBeforeRender(){}_doAfterRender(){}_doControlObjectChanged(t,e){}_doClick(t){}_doDblClick(t){}_doTouchMove(t){return!1}_doPointerDown(t){return!1}_doPointerMove(t){}_doPointerUp(t){}_doPointerCancel(t){}_doPointerLeave(t){}_doKeyPress(t){}_doWheel(t){}_windowResized(){this.invalidateLayout()}}class We extends p{constructor(t,e,s,i){super(),this._visible=!0,this._dirty=!1;const r=this._dom=t.createElement(i||"div");s&&(r.className=s);const n={display:this._getDisplayStyle(),position:this._getPositionStyle(),boxSizing:"border-box",overflow:this._getOverflow()};this._doInitStyle(n),Object.assign(r.style,n),e&&(r.appendChild(this._content=t.createElement("div")),this._content.className="rtc-view-content",this._content.style.position=this._getContentPosition()),this._doInitDom(t,r),this._content&&this._doInitContent(t,this._content)}_doDestory(){this._dom=null}get doc(){return this._dom.ownerDocument}get win(){const t=this._dom.ownerDocument;return t.defaultView||t.parentWindow}get dom(){return this._dom}get content(){return this._content}get parent(){return this._parent}get childCount(){return this._children?this._children.length:0}get control(){return this._parent&&this._parent.control}get x(){return this._x}right(){return this._x+this._width}get y(){return this._y}bottom(){return this._y+this._height}get width(){return this._width}get height(){return this._height}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed())}setVisible(t){return t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed()),this._visible}_internalVisible(t){return this._visible=t,this._dom.style.display=this._visible?this._getDisplayStyle():"none",t}setHidden(t){this._dom.style.visibility=t?"hidden":""}canAnimate(){return We.ANIMATABLE&&void 0!==Element.prototype.animate}setAnimating(t){this._dom.dataset.animating=t?"1":"0"}animating(){return"1"===this._dom.dataset.animating}get hidden(){return"hidden"===this._dom.style.visibility}set hidden(t){this._dom.style.visibility=t?"hidden":"visible"}setStyles(t){return Object.assign(this._dom.style,t),this}getClientSize(){return{width:this._dom.clientWidth,height:this._dom.clientHeight}}getOffsetSize(){return{width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getOffsetBounds(){return{x:this._dom.offsetLeft,y:this._dom.offsetTop,width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getClientRect(){return this._dom.getBoundingClientRect()}getSize(){return{width:this._width,height:this._height}}getBounds(){return{x:this._x,y:this._y,width:this._width,height:this._height}}validate(){this._dirty=!1}getLabel(){}getChildren(){return this._children&&this._children.slice(0)}getChild(t){return this._children&&this._children[t]}indexOf(t){return this._children?this._children.indexOf(t):-1}contains(t,e=!1){const s=this._children;if(s){if(s.indexOf(t)>=0)return!0;if(e)for(const e of s){if(e.contains(t,!0))return!0}}}insertChild(t,e){if(e&&!this.contains(e)){e._parent&&e._parent.removeChild(e),this._children||(this._children=[]);const s=this._children,i=this._content||this._dom,r=e.getLabel();t<0||t>=s.length?(r&&i.appendChild(r),i.appendChild(e._dom),s.push(e)):(i.insertBefore(e._dom,s[t]._dom),r&&i.insertBefore(r,e._dom),s.splice(t,0,e)),e._parent=this,e.$_attached(),this._changed()}}insertBefore(t,e){this.insertChild(this.indexOf(e),t)}addChild(t){this.insertChild(-1,t)}remove(){this._parent&&this._parent.removeChild(this)}removeChildAt(t){if(this._children&&t>=0&&t<this._children.length){const e=this._children[t],s=e.getLabel();return s&&(this._content||this._dom).removeChild(s),(this._content||this._dom).removeChild(e._dom),this._children.splice(t,1),this.$_removeChild(e),this._changed(),e}}removeChild(t){return this.removeChildAt(this.indexOf(t))}removeLast(){const t=this._children;return t&&this.removeChildAt(t.length-1)}clear(){const t=this._children;if(t&&t.length>0){for(let e of t)this.$_removeChild(e);this._children=[];const e=this._content||this._dom;let s;for(;s=e.lastChild;)e.removeChild(s);return this._changed(),!0}return!1}moveIndex(t,e){const s=this._children,i=s.indexOf(t);if(e=Math.max(0,Math.min(s.length-1)),i>=0&&i!==e){const r=s[i]._dom;return s.splice(i,1),s.splice(e,0,t),this._dom.insertBefore(r,t._dom),this._changed(),!0}}isDom(t){return this._dom===t||this._content&&this._content===t}containsDom(t){return(this._content||this._dom).contains(t)}isView(t){return this.isDom(t)||this.containsDom(t)}containsClass(t){return(this._content||this._dom).classList.contains(t)}domByClass(t,e){const s=this._dom.getElementsByClassName(t),i=s?s.length:0;if(i>0){if(!e)return s[0];for(let t=0;t<i;t++){const i=s[t];if(Array.isArray(e)){if(e.indexOf(i.textContent)>=0)return i}else if(i.textContent===e)return i}}}childOfDom(t){const e=this._children;if(e&&e.length>0)for(const s of e){if(s.isDom(t))return s;const e=s.childOfDom(t);if(e)return e}}hasData(t){return!!this._dom.dataset[t]}setData(t,e){null==e||""===e?delete this._dom.dataset[t]:this._dom.dataset[t]=e}setBounds(t,e,s,i){return this.move(t,e).resize(s,i)}setRect(t){return this.move(t.x,t.y).resize(t.width,t.height)}moveX(t){return isNaN(t)?(this._x=t,this._dom.style.left=""):t!=this._x&&(this._x=t,this._dom.style.left=t+"px"),this}moveY(t){return isNaN(t)?(this._y=t,this._dom.style.top=""):t!==this._y&&(this._y=t,this._dom.style.top=t+"px"),this}move(t,e){return this.moveX(t).moveY(e)}center(t,e){return this.moveX((t-this.width)/2).moveY((e-this.height)/2)}moveI(t,e){return this.moveX(t>>0).moveY(e>>0)}resetPosition(){isNaN(this._x)&&(this._dom.style.left=this._x+"px"),isNaN(this._y)&&(this._dom.style.top=this._y+"px")}setWidth(t){return t!==this._width&&(this._width=t,this._dom.style.width=isNaN(t)?"":t+"px"),this}setHeight(t){return t!==this._height&&(this._height=t,this._dom.style.height=isNaN(t)?"":t+"px"),this}clearSize(){this._width=this._height=NaN,this._dom.style.width=this._dom.style.height="",this._content&&(this._content.style.width=this._dom.style.height="")}resize(t,e){return this.setWidth(t).setHeight(e)}internalClearSize(){return this._dom.style.width=this._dom.style.height="",this._content&&(this._content.style.width=this._dom.style.height=""),this}internalResize(t,e){return this._dom.style.width=t+"px",this._dom.style.height=e+"px",this}internalSetSize(t,e){return this._width=t,this._height=e,this}syncSize(){this.resize(Math.ceil(this._dom.offsetWidth),Math.ceil(this._dom.offsetHeight))}resizeContent(t,e){this._content.style.width=isNaN(t)?"":t+"px",this._content.style.height=isNaN(e)?"":e+"px"}setContentBounds(t,e,s,i){const r=this._content.style;r.left=t+"px",r.top=e+"px",r.width=s+"px",r.height=i+"px"}saveSize(){return this._width=this._dom.offsetWidth,this._height=this._dom.offsetHeight,this}forEach(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++)t(e[s],s,i)}some(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i&&!0!==t(e[s],s,i);s++);}findChild(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++)if(1==t(e[s],s,i))return e[s]}findDescendant(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++){if(1==t(e[s]))return e[s];const i=e[s].findDescendant(t);if(i)return i}}findDescendants(t,e){const s=this._children;if(s)for(const i of s)1==t(i)&&e.push(i),i.findDescendants(t,e)}applyStyle(t){t&&Object.assign(this._dom.style,t)}setImportantStyle(t,e,s){return t.setProperty(e,s,"important"),this}setPressed(t){t?this._dom.dataset.pressed="1":delete this._dom.dataset.pressed}appendSpan(t,e){const s=(t||this.doc).createElement("span");return this._dom.appendChild(s),e&&(s.className=e),s}appendDom(t){return this._dom.appendChild(t),t}removeDom(t){this._dom.removeChild(t)}detachDom(){this._dom.remove()}createElement(t){return this._dom.ownerDocument.createElement(t)}setClassName(t){this._dom.className=t}_testing(){return We.TESTING}_doInitStyle(t){}_doInitDom(t,e){}_doInitContent(t,e){}_getPositionStyle(){return"absolute"}_getDisplayStyle(){return"block"}_getContentPosition(){return"relative"}_getOverflow(){return""}$_attached(){this._doAttached()}_doAttached(){}$_detached(t){this._doDetached(t)}_doDetached(t){}$_removeChild(t){t.validate(),t._parent=null,t.$_detached(this)}_changed(){var t;this._dirty||(this._dirty=!0,null===(t=this.control)||void 0===t||t.$_invalidateElement(this))}}We.TESTING=!1,We.BOUNDING=!1,We.BOUNDING_BORDER="1px solid #ff000080",We.BOUNDING_BORDER_2="1px solid #0000ff40";class ze extends We{_doInitStyle(t){t.pointerEvents="none"}}class Ge extends We{constructor(t,e){super(t,!1,"rtc-root",Oe),this._control=e}get control(){return this._control}}class Ue extends f{constructor(t){super(),this._control=t}control(){return this._control}_changed(t){var e;null===(e=this._control)||void 0===e||e._doControlObjectChanged(this,t)}}var je;!function(t){t.NONE="none",t.EXPAND="expand",t.COMMAND="command"}(je||(je={}));class qe extends p{constructor(){super(...arguments),this._expanded=!0}expanded(){return this._expanded}}class Ye{constructor(t){this.index=-1,this.vindex=-1,this.group=t}row(){return-1}getParamValue(t){return this.group.getParamValue(t)}}class Qe extends Ye{constructor(t,e){super(t),this._row=e}isLeaf(){return!0}row(){return this._row}}class Ze extends Ye{}class Xe extends Ze{getStyle(){var t,e;return{itemDef:this.group.model().header().style,levelDef:null===(e=null===(t=this.group.info)||void 0===t?void 0:t.header)||void 0===e?void 0:e.style}}}class Ke extends Ze{getStyle(){var t,e;return{itemDef:this.group.model().footer().style,levelDef:null===(e=null===(t=this.group.info)||void 0===t?void 0:t.footer)||void 0===e?void 0:e.style}}}class Je extends m{}class ts extends f{constructor(t,e){super(),this._owner=t,this._defs=e,e||this._doInitDefaults()}_doDestory(){this._owner=this._defs=null}_doInitDefaults(){this._visible=!0,this._collapsedVisible=!0,this._template=this._defTemplate(),this._clickAction=je.EXPAND}get visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}get collapsedVisible(){return ie(this._collapsedVisible,this._defs&&this._defs._collapsedVisible)}setCollapsedVisible(t){t!==this._collapsedVisible&&(this._collapsedVisible=t,this._changed())}get template(){return ie(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._changed())}clickAction(){return ie(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}_defTemplate(){return"@it_group_header"}_changed(){var t;null===(t=this._owner)||void 0===t||t.groupSectionChanged(this)}}class es extends ts{_doInitDefaults(){super._doInitDefaults(),this._collapsedVisible=!1}_defTemplate(){return"@it_group_footer"}}class ss extends qe{constructor(t,e,s,i,r,n){super(),this._checked=!1,this._summary={},this._parent=t,this.info=e,this._value=s,this._startRow=i,this._startId=r,this._endRow=n}_doDestory(){}level(){return this._parent.level()+1}parent(){return this._parent}model(){return this._parent.model()}field(){return this.info.field}headerInfo(){return this.info.header}footerInfo(){return this.info.footer}value(){return this._value}startRow(){return this._startRow}endRow(){return this._endRow}rowCount(){return this._endRow-this._startRow+1}children(){var t;return null===(t=this._children)||void 0===t?void 0:t.slice()}count(){return this._children?this._children.length:0}isLeaf(){return!this._children||0===this._children.length}header(){return this._header}footer(){return this._footer}visible(){return this._parent._expanded&&this._parent.visible()}checked(){return this._checked}setChecked(t){var e;(t=!!t)!=this._checked&&(this._checked=t,null===(e=this.model())||void 0===e||e.$_checkedChanged(this))}firstVis(){return this._firstVis}lastVis(){return this._lastVis}get(t){return this._children[t]}getItems(t=!1){const e=this.model();if(e)return t?e._items.slice(this._header.index,this._footer.index+1):e.getItemsOf(this)}getVisItems(t=!1){const e=this.model();if(e)return t?e._visItems.slice(this._firstVis.vindex,this._lastVis.vindex+1):e.getVisItemsOf(this)}isLast(t){return t===this._endRow}clear(){this._children=null,this.$_clearSummary()}visit(t,e){if(t&&this._children)for(let s of this._children){if(!0===t(s))return!0;if(e){if(!0===s.visit(t,!0))return!0}}}visitItems(t,e){var s;t&&(null===(s=this.model())||void 0===s||s.forEachVisItem(this._firstVis.index,this._lastVis.index,e))}visitVisItems(t,e){var s;t&&(null===(s=this.model())||void 0===s||s.forEachVisItem(this._firstVis.vindex,this._lastVis.vindex,e))}getSummary(t){let e=this._summary[t];return e||(this._summary[t]=e=this.model().data().getGroupSummary(t,this._startRow,this._endRow)),e}getParamValue(t){switch(t){case"group_field":return this.field();case"group_value":case"group_sum":return this.value();case"group_level":return this.level();case"row_count":return this.rowCount()}}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}$_clearSummary(){this._summary={}}}let is=class t extends ss{constructor(t){super(null,null,null,0,0,0),this._model=t}level(){return-1}model(){return this._model}headerInfo(){return t.INFO}footerInfo(){return t.INFO}isLeaf(){return!1}expanded(){return!0}visible(){return!0}firstVis(){return this._model.firstVisItem()}lastVis(){return this._model.lastVisItem()}};is.INFO={visible:!1,collapsedVisible:!1};class rs extends Je{constructor(){super(),this._leafs={},this._levels=0,this._descendants=0,this._items=[],this._vitems=[],this._root=new is(this)}_doDestory(){}inflateParam(t,e,s){s.name}inflateStock(t,e,s){const i=t,r=s.name;let n;return n=i.getParamValue(r),n}onDataReset(t){this.$_refresh(!0)}onDataValueUpdated(t,e,s,i,r){this.$_refresh(!0)}onDataRowUpdated(t,e,s){this.$_refresh(!0)}onDataRowsUpdated(t,e){this.$_refresh(!0)}onDataRangeUpdated(t,e,s){this.$_refresh(!0)}onDataRowAdded(t,e){this.$_refresh(!0)}onDataRowsAdded(t,e,s){this.$_refresh(!0)}onDataCleared(t,e){this.clear()}onDataRowDeleted(t,e){this.$_refresh(!0)}onDataRowsDeleted(t,e){this.$_refresh(!0)}onDataRangeDeleted(t,e,s){this.$_refresh(!0)}onDataViewFilterChanged(t){this.$_refresh(!0)}onDataViewSortChanged(t){this.$_refresh(!0)}data(){return this._data}root(){return this._root}header(){return this._options.header()}footer(){return this._options.footer()}levels(){return this._levels}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(let t of this._vitems)if(t instanceof Qe)return t}lastVisRow(){for(let t=this._vitems.length-1;t>=0;t--)if(this._vitems[t]instanceof Qe)return this._vitems[t]}getGroup(t){return this._root.get(t)}getLevelGroupCount(t){let e=0;return 0===t?e=this._root.count():t>0&&t<this._levels&&this._root.visit((s=>(s.level()===t&&e++,!1)),!0),e}getLevelGroups(t){if(0===t)return this._root.children();if(t>0&&t<this._levels){const e=[];return this._root.visit((s=>(s.level()===t&&e.push(s),!1)),!0),e}return[]}getLevelGroup(t,e){let s;return 0===t?this._root.get(e):(t>=0&&t<this._levels&&e>=0&&this._root.visit((i=>{if(i.level()===t){if(0===e)return s=i,!0;e--}}),!0),s)}getGroupRows(t){return c.getIntArray(t.endRow()-t.startRow()+1,t.startRow())}indexOfRow(t){const e=this.itemOfRow(t,!1);return e?e.index:-1}visIndexOfRow(t){const e=this.itemOfRow(t,!0);return e?e.vindex:-1}nextRow(t){const e=this._vitems;for(let s=t,i=e.length;s<i;s++)if(e[s]instanceof Qe)return s;return-1}itemOfRow(t,e){if(t>=0&&t<this._data.rowCount()){const s=e?this._vitems:this._items,i=s.length;let r=t;for(;r<i;){const e=s[r++];if(e instanceof Qe&&e.row()===t)return e}}}groupOfRow(t){const e=this.itemOfRow(t,!1);return e&&e.group}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}getItems(t,e){return this._items.slice(t,e)}getVisItems(t,e){return this._vitems.slice(t,e)}getItemsOf(t){const e=[],s=t?t.header().index:0,i=t?t.footer().index:this._items.length-1;for(let r=s;r<=i;r++){const s=this._items[r];s.group===t&&e.push(s)}return e}getVisItemsOf(t){const e=[],s=t?t._firstVis.vindex:0,i=t?t._lastVis.vindex:this._vitems.length-1;for(let r=s;r<=i;r++){const s=this._vitems[r];s.group===t&&e.push(s)}return e}forEachItem(t,e,s){if(s&&e>t){const i=this._items;for(let r=t;r<e&&!1!==s(i[r]);r++);}}forEachVisItem(t,e,s){if(s&&e>t){const i=this._vitems;for(let r=t;r<e&&!1!==s(i[r]);r++);}}clear(){this._root.clear(),this._items=[],this._vitems=[],this._leafs={},this._descendants=0,this._lastRow=void 0}build(t,e,s){return s.length<1&&z(v.requireGroupingInfos),this._infos=s.map((t=>{return{field:(e=t).field,ranges:e.ranges&&e.ranges.length>0?e.ranges.slice(0):null,comparer:e.comparer,header:Object.assign({},e.header),footer:Object.assign({},e.footer)};var e})),this._data=t,this._options=e,this.$_refresh(!1),this}refresh(t){this._data=t,this.$_refresh(!1)}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;t>=0;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return this._infos[t.group.level()].header.template||this.header().template||rs.HEADER_TEMPLATE}getFooterTemplate(t){return this._infos[t.group.level()].footer.template||this.footer().template||rs.FOOTER_TEMPLATE}isLastDataRow(t){return t===this._lastRow}revealRow(t){const e=this.itemOfRow(t,!1);if(e&&e.vindex<0){let t=e.group;for(;t&&!t.expanded();)this.expand(t,!1),t=t.parent()}}$_save(t){const e=this._root,s=this._leafs;for(const i in s){const r=s[i],n=[r.expanded()];let o=r.parent();for(;o!==e;)n.unshift(o.expanded()),o=o.parent();t[i]=n}}$_restore(t,e){const s=this._root;for(const i in e){const r=e[i];if(r){let n=t[i];if(n)for(;n!==s;)n.$_setExpanded(r[n.level()]),n=n.parent();delete e[i]}}}$_refresh(t){const e=this._data,s=t&&{};if(s&&this._data&&this.$_save(s),this.clear(),this._data){const t=e.rowCount();if(t>0){const s=this._infos;s&&(this._descendants=this.$_buildGroups(this._root,s,e,0,t-1),this._levels=s.length+1,this.$_buildItems(this._root,this._items=[]),this.$_resetIndices())}this._root._endRow=t-1,s&&this.$_restore(this._leafs,s)}else this._root._endRow=-1;this.$_resetVisibles()}$_buildGroups(t,e,s,i,r){function n(i,r,n,h,a){const l=new ss(t,r,a,n,o.getRowId(n),h);t.$_add(l),e.length>l.level()+1&&(d+=i.$_buildGroups(l,e,s,l._startRow,l._endRow)),d++}const o=this._data,h=e[t.level()+1],a=h.field,l=h.ranges;let d=0;if(l){const t=l.length>1&&l[0]>l[1];let e=i,o=s.getValue(e,a,!0),d=o,_=0,c=l[_++],u=!1;for(;e<=r;)if(u&&(o=s.getValue(e,a,!0),u=!1),t&&o<c||!t&&o>=c){if(e>i){if(n(this,h,i,e-1,d),i=e,_===l.length)break}else e++,u=!0;d=c,c=l[_++]}else e++,u=!0;i<=r&&n(this,h,i,r,c)}else{const t=h.comparer,e=s.rowCount();let o=s.getValue(i,a,!0);for(let l=i+1;l<=r;l++){const r=s.getValue(l,a,!0);(t?t(r,o,l,e):r===o)||(n(this,h,i,l-1,o),o=r,i=l)}n(this,h,i,r,o)}return d}getHeaderVisible(t,e){var s,i;return e?c.pick(null===(s=t.headerInfo())||void 0===s?void 0:s.visible,this.header().visible,!0):c.pick(null===(i=t.headerInfo())||void 0===i?void 0:i.collapsedVisible,this.header().collapsedVisible,!0)}getFooterVisible(t,e){var s,i;return e?c.pick(null===(s=t.footerInfo())||void 0===s?void 0:s.visible,this.footer().visible,!0):c.pick(null===(i=t.footerInfo())||void 0===i?void 0:i.collapsedVisible,this.footer().collapsedVisible,!1)}$_buildItems(t,e){const s=t.count();if(s>0)for(let i=0;i<s;i++){const s=t.get(i);e.push(s._header=new Xe(s)),this.$_buildItems(s,e),e.push(s._footer=new Ke(s))}else{this._leafs[t._startId]=t;for(let s=t.startRow();s<=t.endRow();s++)e.push(new Qe(t,s))}}$_collectVisibles(t,e){const s=t===this._root,i=this._items,r=t.expanded(),n=this.getHeaderVisible(t,r),o=this.getFooterVisible(t,r);let h=e.length;const a=t.count();if(!s){const s=t.header();n||!o?(e.push(s),t._firstVis=s):t._firstVis=null}if(r){if(a>0)for(let s=0;s<a;s++){const i=t.get(s);this.$_collectVisibles(i,e)}else if(i.length>0){let s=0;for(let r=t.header().index+1;r<t.footer().index;r++)i[r].no=s++,e.push(i[r])}t._firstVis||(t._firstVis=e[h])}const l=t.footer();o&&e.push(l),t._lastVis=e[e.length-1],s||t._firstVis||(t._firstVis=t._lastVis)}$_expand(t,e,s){let i=!1;if(e&&t.visit((t=>(t.$_setExpanded(!0)&&(i=!0),!1)),!0),s||i||!t.expanded()){const e=this._vitems,s=t===this._root,r=s?0:t._firstVis.vindex,n=s?e.length-1:t._lastVis.vindex,o=[],h=t.visible();h&&(!s&&(n<0||r<0)&&x.debugging(),s?e.length=0:e.splice(r,n-r+1)),i=t.$_setExpanded(!0)||i,this.$_collectVisibles(t,o),h&&c.splice(e,r,0,o)}return i}$_collapse(t,e){const s=t===this._root,i=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||s)&&t.visit((t=>(t.$_setExpanded(!1)&&(n=!0),!1)),e),n||t.expanded()){const e=this._vitems;let o=s?0:t._firstVis.vindex;const h=s?e.length-1:t._lastVis.vindex,a=[],l=t.visible();l&&!s&&h<0&&x.debugging(),n=t.$_setExpanded(!1)||n,l&&e.splice(o,h-o+1),this.$_collectVisibles(t,a),!s&&l&&(t.lastVis().vindex<0||t.firstVis().vindex<0)&&x.debugging(),l&&c.splice(e,o,0,a),e.length>r&&(R.log(i),x.debugging()),!s&&l&&(t.lastVis().vindex<0||t.firstVis().vindex<0)&&x.debugging()}return n}$_resetVisibles(){const t=this._vitems=[],e=this._root;if(this._lastRow=null,e.count()>0){this.$_collectVisibles(e,t),this.$_resetVisIndices();for(let e=t.length-1;e>=0;e--)if(t[e]instanceof Qe){this._lastRow=t[e];break}}}$_resetIndices(){const t=this._items;for(let e=0,s=t.length;e<s;e++)t[e].index=e}$_resetVisIndices(){let t=this._items;for(let e=t.length-1;e>=0;e--)t[e].vindex=-1;t=this._vitems;for(let e=0,s=t.length;e<s;e++)t[e].vindex=e}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}$_checkedChanged(t){this._fireEvent("onGroupChecked",t,t.checked())}}rs.HEADER_TEMPLATE="@it_group_header",rs.FOOTER_TEMPLATE="@it_group_footer";class ns{constructor(t){if(t){const e=this._vars={};for(let s in t)e["--"+s]=t[s]}}out(t){return t in this._vars?this._vars[t]:t}assign(t){const e=this._vars,s={};for(let i in t){const r=t[i];s[i]=r in e?e[r]:r}return s}}let os=1;class hs{constructor(t,e,s){this.tid=os++,this._parent=t,e&&(this.tag=null!=e.tag?String(e.tag):void 0,this._doLoad(e,s||us.Vars))}updateProp(t,e,s){return!1}_loadProps(t,e){return zt.load(e.assign(t))}_loadStyle(t,e){return c.isObject(t)?zt.load(e.assign(t)):"string"==typeof t?zt.parse(e.out(t)):void 0}_loadRenderer(t,e,s){if(c.isObject(t)){const i=zt.load(s.assign(t));for(let t in i){const r=i[t];t.endsWith("Style")&&(e[t]=i[t]=this._loadStyle(r,s))}return t.style&&(e.style=this._loadStyle(t.style,s)),i.type=s.out(t.type)||(this._parent?this._parent.getDefaultRenderer():void 0),i}if("string"==typeof t)return s.out(t)}}class as extends hs{_doLoad(t,e){if("string"==typeof t)this.field=zt.parse(e.out(t));else{const s=Object.assign({},t);this.id=s.id,delete s.id,Array.isArray(s.fields)&&(this.fields=zt.parse(e.out(s.fields)),delete s.fields),s.field&&(this.field=zt.parse(e.out(s.field)),delete s.field),s.value&&(this.value=zt.parse(e.out(s.value)),delete s.value),this.editor=this._loadRenderer(s.editor,this.rendererStyles={},e),delete s.editor,this.editor||(this.renderer=this._loadRenderer(s.renderer,this.rendererStyles={},e)),delete s.renderer,this.class=s.class,delete s.class,s.style&&(this.style=this._loadStyle(s.style,e),delete s.style),s.classCallback&&(this.classCallback=zt.parse(e.out(s.callback)),delete s.classCallback),s.styleCallback&&(this.styleCallback=zt.parse(e.out(s.styleCallback)),delete s.styleCallback),this.props=this._loadProps(s,e)}}$_updateProp(t,e,s,i){if(void 0===s)delete t[e];else switch(e){case"style":t.style=this._loadStyle(s,i);break;case"renderer":case"editor":t.renderer=this._loadRenderer(s,this.rendererStyles={},i);break;default:t[e]=zt.parse(i.out(s))}}updateProp(t,e,s){if(!super.updateProp(t,e,s)){if(Array.isArray(t)){const i=t.length;if(i>1){let r=this;for(let e=0;e<i-1;e++){const s=t[e];r[s]||(r[s]={}),r=r[s]}this.$_updateProp(r,t[i-1],e,s)}else 1===i&&this.$_updateProp(this,t[0],e,s);return!0}return this.$_updateProp(this,t,e,s),!0}return!1}}class ls extends hs{count(){return this.children.length}getDefaultRenderer(){return this.defaultRenderer||(this._parent?this._parent.getDefaultRenderer():void 0)}get(t){return this.children[t]}tagBy(t){return this.children.find((e=>e.tag===t))}fieldBy(t){return this.children.find((e=>e.tag===t&&e instanceof as))}_doLoad(t,e){const s=Object.assign({},t);this.defaultRenderer=s.defaultRenderer,this.layout=s.layout,delete s.layout,this.id=s.id,delete s.id,this.class=s.class,delete s.class,s.style&&(this.style=this._loadStyle(s.style,e),delete s.style);const i=this.children=[];if(this.map={},Array.isArray(t.children)){for(let s of t.children){let t;null!=s&&(t="layout"===s.type||s.layout?new ls(this,s,e):void 0!==s.space?"*"===s.space?new as(this,Object.assign({width:0,height:0,grow:Number.MAX_SAFE_INTEGER,renderer:{type:"spacer"}},s),e):new as(this,Object.assign({renderer:{type:"spacer",space:s.space}},s),e):new as(this,s,e)),t&&(t.tag=s.tag,i.push(t),t.id&&(this.map[t.id]=t))}delete s.children}this.props=this._loadProps(s,e)}updateProp(t,e,s){}find(t){let e=this.map[t];if(e)return e;for(const s of this.children)if(s instanceof ls&&(e=s.find(t),e))return e}_getFields(t){this.children.forEach((e=>{e instanceof ls?e._getFields(t):"string"==typeof e.field&&t.push(e.field)}))}}class ds extends hs{constructor(t,e){super(null,null,null),this.tokens=[],this.$_parseParams(this.dom=t,[])}_doLoad(t,e){}find(t){}$_parseParams(t,e){let s;const i=t.getAttributeNames();i&&i.forEach((i=>{s=zt.parse(t.getAttribute(i)),s instanceof zt&&this.tokens.push({node:e,attr:i,param:s})}));const r=t.childNodes;for(let t=0;t<r.length;t++){const i=r[t],n=e.concat(t);if(i.nodeType===Node.TEXT_NODE){const t=i.nodeValue;s=zt.parse(t),s instanceof zt&&this.tokens.push({node:n,param:s})}i instanceof HTMLElement&&this.$_parseParams(i,n)}}}let _s=1e6;const cs={height:NaN,minHeight:NaN,maxHeight:NaN,width:NaN,minWidth:NaN,maxWidth:NaN};class us extends p{static createLayout(t,e,s){if("html"===e.type||"string"==typeof e.html){let i;return"string"==typeof e.html?(i=t.doc().createElement("div"),i.innerHTML=e.html,i=i.firstElementChild):e.domid&&(i=t.getTemplateHtml(e.domid)),i||(i=t.doc().createElement("div")),new ds(i,s)}return new ls(null,e,s)}constructor(t,e,s){if(super(),this.id=_s++,this.detailId=_s++,this.collapsedId=_s++,e)if(e.template){let i=e.vars;c.isObject(s)&&(i=Object.assign(c.isObject(i)?i:{},s));const r=this._vars=c.isValidObject(i)?new ns(i):us.Vars;this.description=e.description,this.rowProps=Object.assign(cs,e.rowProps),this.rowStyle=ge(e.rowStyle),this.layout=us.createLayout(t,e.template,r),this.detailed=e.detailed&&us.createLayout(t,e.detailed,r),this.extra=e.extra&&us.createLayout(t,e.extra,r),this.collapsed=e.collapsed&&us.createLayout(t,e.collapsed,r),this.brief=e.brief&&us.createLayout(t,e.brief,r),this.params=c.copyObject(e.params)}else e.layout&&(this.rowProps=Object.assign(cs,void 0),this.layout=us.createLayout(t,e,null))}_doDestory(){}getFields(){const t=[];return this.layout._getFields(t),t}find(t){return this.layout.find(t)}updateProp(t,e,s){if(t&&e){const i=this.layout.find(t);if(i instanceof hs){const t=e.indexOf(".")>=0?e.split("."):e;return i.updateProp(t,s,this._vars)}}return!1}updateProps(t,e){if(t&&c.isObject(e)){const s=this.layout.find(t);let i=!1;if(s instanceof hs)for(const t in e)if(t){const r=t.indexOf(".")>=0?t.split("."):t;i=i||s.updateProp(r,e[t],this._vars)}return i}return!1}}us.Vars=new class extends ns{constructor(){super(null)}out(t){return t}assign(t){return t}};const gs=new us(null,{template:{layout:"frame",children:[{value:"[ Dummy Template ]",style:{color:"#aaa",fontWeight:"bold"}}]}},void 0),ps=new ls(null,{layout:"frame",children:[{width:"35%",height:25,left:0},{width:"10%",height:18,right:"50%"},{width:"15%",height:18,right:"30%"},{width:"25%",height:21,right:"0"}]},us.Vars);class fs extends as{_doLoad(t,e){super._doLoad(t,e),t.cellStyle&&(this.cellStyle=this._loadStyle(t.cellStyle,e))}}class ws extends fs{}class ms extends fs{_doLoad(t,e){let s;"string"==typeof t.header?s={field:t.field,renderer:{label:t.header}}:c.isObject(t.header)?(s=t.header,s.field=s.field||t.field):s="string"==typeof t?{field:t}:{field:t.field},s.align=s.align||"center",super._doLoad(s,e)}}class ys extends fs{_doLoad(t,e){let s;"string"==typeof t?s={field:t}:c.isObject(t.footer)?(s=t.footer,s.field=s.field||t.field):(s={field:t.field},"string"!=typeof t.footer&&"function"!=typeof t.footer||(s.value=t.footer)),super._doLoad(s,e)}}class bs extends p{constructor(t,e,s){if(super(),this.embed=s,this.id=_s++,this.detailId=_s++,e&&(this.tag=null!=e.tag?String(e.tag):void 0,this.rowProps=Object.assign(cs,e.rowProps),this.rowStyle=ge(e.rowStyle),e.template&&Array.isArray(e.template.cells))){const s=c.isValidObject(e.vars)?new ns(e.vars):us.Vars;this.cells=this.$_loadCells(e.template.cells,s),this.detailed=e.detailed&&us.createLayout(t,e.detailed,s),this.extra=e.extra&&us.createLayout(t,e.extra,s)}}find(t){}$_loadCells(t,e){const s=[];return t.forEach((t=>{if(null!=t){const i=this._createCell(t,e);i.col=+t.col,i.row=+t.row,i.colspan=oe(t.colspan,1),i.rowspan=oe(t.rowspan,1),s.push(i)}})),s}}class vs extends bs{constructor(t,e){super(t,e,!1),this.headerTemplate=new Cs(t,e,!0),this.footerTemplate=new Ss(t,e,!0)}_createCell(t,e){return new fs(null,t,e)}}class Cs extends bs{constructor(t,e,s){super(t,e,s)}_createCell(t,e){return this.embed?new ms(null,t,e):new ws(null,t,e)}}class Ss extends bs{constructor(t,e,s){super(t,e,s)}_createCell(t,e){return this.embed?new ys(null,t,e):new ws(null,t,e)}}class Rs extends Qe{constructor(t,e){super(t,e)}dataLevel(){return this.group.dataLevel()}isLeaf(){return this.group instanceof Es}}class xs extends qe{constructor(t){super(),this.parent=t}count(){return this._children?this._children.length:0}level(){return this.parent.level()+1}model(){return this.parent.model()}visible(){return this.parent._expanded&&this.parent.visible()}isLeaf(){return!this._children}rowCount(){if(this._children){let t=0;return this._children.forEach((e=>t+=e.rowCount())),t}return 0}get(t){return this._children[t]}isLast(t){return t===this.endRow}contains(t){let e=t;for(;e;){if(e===this)return!0;e=e.parent}return!1}visit(t,e){if(t&&this._children)for(let s of this._children){if(!0===t(s))return!0;if(e){if(!0===s.visit(t,!0))return!0}}}clear(){this._children=[]}getParamValue(t){if("row_count"===t)return this.rowCount()}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}}class Vs extends xs{dataLevel(){return this.parent.dataLevel()}rowCount(){return this.isLeaf()?1:super.rowCount()}}class Es extends xs{dataLevel(){return this.parent.dataLevel()+1}rowCount(){return this.isLeaf()?this.rows.length:super.rowCount()}expanded(){return this.header?super.expanded():this.parent.expanded()}}class $s extends Es{constructor(t){super(null),this._model=t,this.startRow=0}level(){return-1}dataLevel(){return 0}model(){return this._model}expanded(){return!0}visible(){return!0}isLeaf(){return!1}}class As extends Je{constructor(){super(),this._leafs={},this._header={visible:!0,collapsedVisible:!0,template:As.HEADER_TEMPLATE,style:null},this._footer={visible:!0,collapsedVisible:!1,template:As.FOOTER_TEMPLATE,style:null},this._levels=0,this._rowLevels=0,this._descendants=0,this._items=[],this._vitems=[],this._leafCount=0,this._root=new $s(this)}_doDestory(){}inflateParam(t,e,s){s.name}inflateStock(t,e,s){const i=t,r=s.name;let n;return n=i.getParamValue(r),n}onDataReset(t){this.$_refresh(!0)}onDataValueUpdated(t,e,s,i,r){this.$_refresh(!0)}onDataRowUpdated(t,e,s){this.$_refresh(!0)}onDataRowsUpdated(t,e){this.$_refresh(!0)}onDataRangeUpdated(t,e,s){this.$_refresh(!0)}onDataRowAdded(t,e){this.$_refresh(!0)}onDataRowsAdded(t,e,s){this.$_refresh(!0)}onDataCleared(t,e){this.clear()}onDataRowDeleted(t,e){this.$_refresh(!0)}onDataRowsDeleted(t,e){this.$_refresh(!0)}onDataRangeDeleted(t,e,s){this.$_refresh(!0)}onDataViewFilterChanged(t){this.$_refresh(!0)}onDataViewSortChanged(t){this.$_refresh(!0)}data(){return this._data}header(){return this._header}footer(){return this._footer}root(){return this._root}levels(){return this._levels}rowLevels(){return this._data.levels()}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){return this._leafCount}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(let t of this._vitems)if(t instanceof Rs)return t}lastVisRow(){for(let t=this._vitems.length-1;t>=0;t--)if(this._vitems[t]instanceof Rs)return this._vitems[t]}clear(){this._root.clear(),this._items=[],this._vitems=[],this._leafs={},this._descendants=0,this._lastRow=void 0}build(t,e,s){function i(t){if(t){const e=Object.assign({},t);return e.header=Object.assign({},t.header),e.footer=Object.assign({},t.footer),e}}const r=this._infoMap={};for(const t in s)r[t]=i(s[t]);return this._options=e,this._data=t,this.$_refresh(!1),this}refresh(t){this._data=t,this.$_refresh(!1)}containsData(t){return t in this._infoMap}itemOfRow(t,e){const s=e?this._vitems:this._items;for(const e of s)if(e instanceof Rs&&e.row()===t)return e}indexOfRow(t){const e=this.itemOfRow(t,!1);return e?e.index:-1}visIndexOfRow(t){const e=this.itemOfRow(t,!0);return e?e.index:-1}nextRow(t){const e=this._vitems;for(let s=t,i=e.length;s<i;s++)if(e[s]instanceof Qe)return s;return-1}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(0),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;t>=0;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(0),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}isLastDataRow(t){return t===this._lastRow}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return As.HEADER_TEMPLATE}getFooterTemplate(t){return As.FOOTER_TEMPLATE}getLevelGroupCount(t){let e=0;return 0===t?e=this._root.count():t>0&&t<this._levels&&this._root.visit((s=>(s.level()===t&&e++,!1)),!0),e}getPageGroupCount(t){let e=0;return t>=0&&t<this._rowLevels-1&&this._root.visit((s=>(s instanceof Vs&&s.dataLevel()===t&&e++,!1)),!0),e}getPageGroup(t,e){let s,i=0;return this._root.visit((r=>{if(r instanceof Vs&&r.dataLevel()===t){if(i===e)return s=r,!0;i++}return!1}),!0),s}getPageRows(t){t.level();const e=this._items,s=e.length,i=[];let r=t.row.index;for(;r<s;){const s=e[r++];if(!(s instanceof Rs&&t.contains(s.group)))break;i.push(s)}return i}revealRow(t){const e=this.itemOfRow(t,!1);if(e&&e.vindex<0){let t=e.group;for(;t&&!t.expanded();)this.expand(t,!1),t=t.parent}}$_save(t){const e=this._root,s=this._leafs;for(const i in this._leafs){const r=s[i],n=[r.expanded()];let o=r.parent;for(;o!==e;)n.unshift(o.expanded()),o=o.parent;t[i]=n}}$_restore(t,e){const s=this._root;for(const i in e){const r=e[i];if(r){let n=t[i];if(n){for(;n!==s;)n.$_setExpanded(r[n.level()]),n=n.parent;delete e[i]}}}}$_refresh(t){const e=this._data,s=t&&{};s&&e&&this.$_save(s),this.clear();const i=e?e.rowCount():0;i>0?(this._root.startId=e.getRowId(0),this._levels=0,this._rowLevels=this._data.levels(),this._descendants=this.$_buildGroups(this._root,0,i),this._root.endRow=i-1,this.$_buildItems(this._root,this._items=[]),this.$_resetIndices(),s&&this.$_restore(this._leafs,s)):this._root.endRow=-1,this.$_resetVisibles()}$_buildGroups(t,e,s){function i(t,e,s){const i=new Vs(t);i.row=new Rs(i,e),i.startRow=e,i.endRow=s,i.startId=h.getRowId(e),t.$_add(i),d++,o._levels=Math.max(o._levels,i.level()+1),s>e&&function(t){let e=t.startRow+1,s=e,i=h.getSource(e),r=h.getLevel(e);for(;e<t.endRow;)h.getSource(e)!==i&&h.getLevel(e)===r&&(n(t,s,e-1),s=e),e++;n(t,s,e)}(i)}function r(t,e,s){const r=h.getSource(e);for(let n=e+1;n<=s;n++)h.getSource(n)===r&&(i(t,e,n-1),e=n);i(t,e,s)}function n(t,e,s){const i=new Es(t);if(i.startRow=e,i.endRow=s,i.startId=h.getRowId(e),t.$_add(i),d++,o._levels=Math.max(o._levels,i.level()+1),h.getLevel(i.startRow)<l-1)r(i,e,s);else{a[i.startId]=i,i.rows=[];for(let t=i.startRow;t<=i.endRow;t++)i.rows.push(new Rs(i,t))}}const o=this,h=this._data,a=this._leafs,l=h.levels();let d=0;return e<s&&r(t,e,s-1),d}$_buildItems(t,e){const s=this._options,i=t._children,r=i?i.length:0;if(t instanceof Vs){if(s.addMasterHeader()&&(r>0||s.addEmptyMasterHeader())&&e.push(t.header=new Xe(t)),e.push(t.row),r>0)for(let t=0;t<r;t++){const n=i[t];s.addDetailHeader()&&(r>1||s.addSingleDetailHeader()),n.rows?n.rows.forEach(((t,s)=>{t.no=s,e.push(t)})):this.$_buildItems(i[t],e),s.addDetailFooter()&&(r>1||s.addSingleDetailFooter())}s.addMasterFooter()&&(r>0||s.addEmptyMasterFooter())&&e.push(t.footer=new Ke(t))}else for(let t=0;t<r;t++)this.$_buildItems(i[t],e)}$_collectVisibles(t,e){const s=t===this._root,i=this._items,r=t.expanded();let n=e.length;const o=t.count();if(!s)if(t instanceof Es){const s=t.header;s&&(s.index>=0?(e.push(s),t._firstVis=s):t._firstVis=null)}else e.push(t.row);if(r){if(o>0)for(let s=0;s<o;s++){const i=t.get(s);this.$_collectVisibles(i,e)}else if(i.length>0)if(t instanceof Es){const s=t.rows;for(let t=s[0].index;t<=s[s.length-1].index;t++)e.push(i[t])}else t instanceof Vs||x.debugging();t._firstVis||(t._firstVis=e[n])}if(!s){const s=t.footer;s&&s.index>=0&&e.push(s),t._lastVis=e[e.length-1],t._firstVis||(t._firstVis=t._lastVis)}}$_resetVisibles(){const t=this._vitems=[],e=this._root;if(this._lastRow=null,e.count()>0){this.$_collectVisibles(e,t),this.$_resetVisIndices(0);for(let e=t.length-1;e>=0;e--)if(t[e]instanceof Rs){this._lastRow=t[e];break}}}$_resetIndices(){const t=this._items;for(let e=0,s=t.length;e<s;e++)t[e].index=e}$_resetVisIndices(t){let e=this._items;for(let t=0,s=e.length;t<s;t++)e[t].vindex=-1;e=this._vitems;for(let s=e.length-1;s>=t;s--)e[s].vindex=s}$_expand(t,e,s){let i=!1;if(e&&t.visit((t=>(t.$_setExpanded(!0)&&(i=!0),!1)),!0),s||i||!t.expanded()){const e=this._vitems,s=t===this._root,r=s?0:t._firstVis.vindex,n=s?e.length-1:t._lastVis.vindex,o=[],h=t.visible();h&&(!s&&(n<0||r<0)&&x.debugging(),s?e.length=0:e.splice(r,n-r+1)),i=t.$_setExpanded(!0)||i,this.$_collectVisibles(t,o),h&&c.splice(e,r,0,o)}return i}$_collapse(t,e){const s=t===this._root,i=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||s)&&t.visit((t=>(t.$_setExpanded(!1)&&(n=!0),!1)),e),n||t.expanded()){const e=this._vitems;let o=s?0:t._firstVis.vindex;const h=s?e.length-1:t._lastVis.vindex,a=[],l=t.visible();l&&!s&&h<0&&x.debugging(),n=t.$_setExpanded(!1)||n,l&&e.splice(o,h-o+1),this.$_collectVisibles(t,a),!s&&l&&(t._lastVis.vindex<0||t._firstVis.vindex<0)&&x.debugging(),l&&c.splice(e,o,0,a),e.length>r&&(R.log(i),x.debugging()),!s&&l&&(t._lastVis.vindex<0||t._firstVis.vindex<0)&&x.debugging()}return n}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}}As.HEADER_TEMPLATE="@it_datagroup_header",As.FOOTER_TEMPLATE="@it_datagroup_footer";class Ls extends m{constructor(t,e){let s;if(super(),this._page=0,this._level=void 0,this._size=1,this._headerLevel=0,this._footerLevel=0,t||z(v.requireDataOrGroup),t instanceof Je?(this._data=t.data(),s=this._group=t):this._data=t,e&&(this._size=oe(+e.size,this._size),this._level=oe(+e.level,this._level),this._headerLevel=oe(+e.headerLevel,this._headerLevel),this._footerLevel=oe(+e.footerLevel,this._footerLevel)),s instanceof rs){const t=s.levels()-2;this._groupLevel=Math.min(Math.max(0,oe(this._level,t)),t),this._getRows=this.$_getRowGroupPageRows.bind(this)}else if(s instanceof As){const t=s.rowLevels()-2;this._groupLevel=Math.min(Math.max(0,oe(this._level,t)),t),this._getRows=this.$_getDataGroupPageRows.bind(this)}else this._getRows=this.$_getPageRows.bind(this)}isGrouped(){return!!this._group}size(){return this._size}level(){return this._level}page(){return this._page}setPage(t){if((t=Math.floor(c.toNumber(t)))!==this._page){const e=this._page;this._page=t,this.$_reset(),this._fireEvent("onPageChanged",t,e)}}pageCount(){if(isNaN(this._pageCount)){let t=0;this._data&&(t=this._group instanceof rs||this._group instanceof As?this._group.getLevelGroupCount(this._groupLevel):(this._data.rowCount()+this._size-1)/this.size()>>>0),this._pageCount=t}return this._pageCount}rows(){return!this._rows&&this._data&&(this._rows=this._getRows(this._page)),this._rows=this._rows||[],this._rows}rowCount(){return this.rows().length}startIndex(){return this.isGrouped()?this.getGroupItems()[0].vindex:this.startRow()}startRow(){return this.rows()[0]}lastRow(){const t=this.rows();return t[t.length-1]}getRow(t){return this.rows()[t]}getPageRows(t){return this._getRows(t)}incPage(t){this.setPage(this._page+t)}getGroupItems(t){return void 0!==t&&this._data?this._group instanceof rs?this.$_getRowGroupItems(this._group,t):this.$_getDataGroupItems(this._group,t):(!this._items&&this._data&&(this._group instanceof rs?this._items=this.$_getRowGroupItems(this._group):this._items=this.$_getDataGroupItems(this._group)),this._items=this._items||[],this._items)}$_reset(){this._pageCount=NaN,this._page=Math.max(0,Math.min(this.pageCount()-1,this._page)),this._rows=this._items=null}$_getPageRows(t){const e=this._data.rowCount(),s=[];for(let i=this._size*t,r=0;i<e&&r<this._size;i++,r++)s.push(i);return s}$_getRowGroupPageRows(t){const e=this._group,s=e.getLevelGroup(this._groupLevel,t);return e.getGroupRows(s)}$_getDataGroupPageRows(t){const e=this._group,s=e.getPageGroup(this._groupLevel,t);return e.getPageRows(s).map((t=>t.row()))}$_getRowGroupItems(t,e){if(t){const s=t.getLevelGroup(this._groupLevel,void 0===e?this._page:e),i=s.level(),r=i+this._headerLevel,n=i+this._footerLevel,o=[];let h=s.header().index,a=s.footer().index;if(this._headerLevel<0){let e=-this._headerLevel,i=s.parent();for(;e>0&&i!==t.root();)o.push(i.header()),i=i.parent(),e--}else if(this._headerLevel>0){let e=0;for(;e<this._headerLevel&&t.getItem(h+1)instanceof Xe;)h++,e++}if(this._footerLevel>0){let e=0;for(;e<this._footerLevel&&t.getItem(a-1)instanceof Ke;)a--,e++}for(let e=h;e<=a;e++){let s=t.getItem(e);s.vindex>=0&&((s instanceof Xe&&s.group.level()<r||s instanceof Ke&&s.group.level()<n)&&(s=null),s&&o.push(s))}if(this._footerLevel<0){let e=-this._footerLevel,i=s.parent();for(;e>0&&i!==t.root();)o.push(i.footer()),i=i.parent(),e--}return o}return[]}$_getDataGroupItems(t,e){if(t){const s=t.getPageGroup(this._groupLevel,void 0!==e?e:this._page),i=s._children[0].rows,r=s.level(),n=r+this._headerLevel,o=r+this._footerLevel;let h=i[0].index,a=i[i.length-1].index,l=[];if(n<0);else if(n>0);else{l.push(s.row);let e=s.row.index+1;for(;e<h;){const s=t.getItem(e++);s.vindex>=0&&l.push(s)}}for(let e=h;e<=a;e++){const s=t.getItem(e);s.vindex>=0&&s&&l.push(s)}if(o>0);else if(o<0);else if(s.footer){const e=s.footer.index;let i=l[l.length-1].index+1;for(;i<=e;){const e=t.getItem(i++);e.vindex>=0&&l.push(e)}}return l}return[]}}let Ts=0;class ks extends p{constructor(){super(),this._id=this.type()+Ts++}get id(){return this._id}set id(t){this._id=t}get style(){return this._style}set style(t){this._style=t}get styleCallback(){return this._styleCallback}set styleCallback(t){this._styleCallback=t}getProxy(){return{type:this.type(),id:this._id}}}class Ds extends ks{constructor(){super(...arguments),this._clickable=!1}get hint(){return this._hint}set hint(t){this._hint=t}get clickable(){return this._clickable}set clickable(t){this._clickable=t}get onClick(){return this._onClick}set onClick(t){this._onClick=t}click(t,e,s,i){return this._doClick(t,e,s,i)}longPressed(t,e,s){return this._doLongPressed(t,e,s)}_doClick(t,e,s,i){let r=this._clickArgs;if(this.clickable&&this._onClick)return r||(r=this._clickArgs={control:t.wrapperOrThis(),renderer:this.getProxy(),element:e}),r.element=e,r.row=s,r.field=i,this._onClick(r)}_doLongPressed(t,e,s){return!1}}class Ns extends Ds{get value(){return this._value}set value(t){this._value=t}}class Ps extends Ns{constructor(){super(...arguments),this._fitWidth=1}get fitWidth(){return this._fitWidth}set fitWidth(t){this._fitWidth=t}get fitHeight(){return this._fitHeight}set fitHeight(t){this._fitHeight=t}getFitWidth(){return isNaN(this._fitWidth)?1:this._fitWidth}getFitHeight(){return this._fitHeight}}class Ms extends Ds{constructor(){super(),this._disabled=!1,this._borderless=!1,this._labelPosition=Ae.BOTTOM,this.clickable=!0}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get buttonWidth(){return this._buttonWidth}set buttonWidth(t){this._buttonWidth=+t}get buttonHeight(){return this._buttonHeight}set buttonHeight(t){this._buttonHeight=+t}get borderless(){return this._borderless}set borderless(t){this._borderless=!0}get label(){return this._label}set label(t){this._label=t}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=t}getShapeSize(){let t=Math.max(0,this._shapeHeight);const e=Math.max(0,this._shapeWidth)||t||Ms.SHAPE_SIZE;return t=t||e,{width:e,height:t}}type(){return Ms.TYPE}getProxy(){const t=super.getProxy();return t.label=this._label,t}}Ms.TYPE="button",Ms.SHAPE_SIZE=20;class Is extends Ns{get gaugeSize(){return this._gaugeSize}set gaugeSize(t){this._gaugeSize=+t}get gaugeWidth(){return this._gaugeWidth}set gaugeWidth(t){this._gaugeWidth=+t}get gaugeHeight(){return this._gaugeHeight}set gaugeHeight(t){this._gaugeHeight=+t}getGaugeWidth(){return he(this._gaugeWidth,this._gaugeSize,Is.SIZE)}getGaugeHeight(){return he(this._gaugeHeight,this._gaugeSize,Is.SIZE)}}Is.SIZE=200;class Os extends Is{constructor(){super(...arguments),this._startAngle=0,this._endAngle=360,this._clockwise=!0,this._minValue=0,this._maxValue=100}get centerX(){return this._centerX}set centerX(t){this._centerX=c.toNumber(t)}get centerY(){return this._centerY}set centerY(t){this._centerY=c.toNumber(t)}get radiusX(){return this._radiusX}set radiusX(t){this._radiusX=c.toNumber(t)}get radiusY(){return this._radiusY}set radiusY(t){this._radiusY=c.toNumber(t)}get startAngle(){return this._startAngle}set startAngle(t){this._startAngle=c.toNumber(t)}get endAngle(){return this._endAngle}set endAngle(t){this._endAngle=c.toNumber(t)}get clockwise(){return!1!==this._clockwise}set clockwise(t){this._clockwise=t}get minValue(){return this._minValue}set minValue(t){this._minValue=t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(t)}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getExtents(t,e){const s=oe(this._centerX,t/2),i=oe(this._centerY,e/2);return{cx:s,cy:i,rx:oe(this._radiusX,s),ry:oe(this._radiusY,i)}}getStyle(){return this._gaugeStyle||(this._gaugeStyle=Object.assign(Object.assign({},Os.STYLE),this.style),this._gaugeStyle.fill="none"),this._gaugeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},Os.VALUE_STYLE),this.valueStyle),this._activeStyle.fill="none"),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return Os.TYPE}}Os.TYPE="gauge",Os.STYLE={stroke:"#eee",strokeWidth:"10px"},Os.VALUE_STYLE={stroke:"#00c",strokeWidth:"10px"};class Bs extends Ds{get iconSet(){return this._iconSet}set iconSet(t){this._iconSet=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}type(){return Bs.TYPE}}Bs.TYPE="icon";class Fs extends Ns{constructor(){super(...arguments),this._decorative=!1,this._nullWidth=100}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get root(){return this._root}set root(t){this._root=t||""}get url(){return this._url}set url(t){this._url=t}get urlCallback(){return this._urlCallback}set urlCallback(t){this._urlCallback=t}get alt(){return this._alt}set alt(t){this._alt=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}get nullUrl(){return this._nullUrl}set nullUrl(t){this._nullUrl=t}get nullWidth(){return this._nullWidth}set nullWidth(t){this._nullWidth=t}get nullHeight(){return this._nullHeight}set nullHeight(t){this._nullHeight=t}getUrl(t){const e=this._root||"",s=this._urlCallback;let i,r=!1;if(s){const e=s({value:t});void 0!==e&&(i=e)}return i||(i=this._url||t),i||(i=this._nullUrl||"",r=!0),i&&(i=e+i),{url:i,isNull:r}}type(){return Fs.TYPE}$_inflateUrl(t){}}Fs.TYPE="image";class Hs extends Ns{constructor(){super(...arguments),this._hiddenChar="*"}get textFormatter(){return this._textFormatter}set textFormatter(t){this._textFormatter=t}get boolFormatter(){return this._boolFormatter}set boolFormatter(t){this._boolFormatter=t}get numberFormatter(){return this._numberFormatter}set numberFormatter(t){this._numberFormatter=t}get dateFormatter(){return this._dateFormatter}set dateFormatter(t){this._dateFormatter=t}get textFormat(){return this._textFormat}set textFormat(t){this._textFormat=t}get boolFormat(){return this._boolFormat}set boolFormat(t){this._boolFormat=t}get numberFormat(){return this._numberFormat}set numberFormat(t){this._numberFormat=t}get dateFormat(){return this._dateFormat}set dateFormat(t){this._dateFormat=t}get prefix(){return this._prefix}set prefix(t){this._prefix=t}get suffix(){return this._suffix}set suffix(t){this._suffix=t}get maxLength(){return this._maxLength}set maxLength(t){t=+t,this._maxLength=t}getText(t,e,s){const i=void 0!==this._text?this._text:e;if(null==i)return this._getAltText(t)||"";const r=typeof i;let n;if("string"===r){if(i){const e=this._textFormatter||be(this._textFormat)||t.textFormatter();e&&(n=e(i))}}else if("number"===r||"bigint"===r)if(Number.isNaN(i))"string"==typeof this._nanText&&(n=this._nanText);else{const e=this._numberFormatter||Ce(this._numberFormat)||t.numberFormatter();e&&(n=e(i))}else if(i instanceof Date){const e=this._dateFormatter||Se(this._dateFormat)||t.dateFormatter();n=e?e(i):i.toLocaleDateString()}else if("boolean"===r){const e=this._boolFormatter||ve(this._boolFormat)||t.boolFormatter();e&&(n=e(i))}if(void 0===n&&(n=String(i)||""),n){if(this._hiddenRange&&this._hiddenChar){const t=this._hiddenRange[0];if(t>=0){const e=n.length;let s=oe(this._hiddenRange[1],e);s<0&&(s=n.length+s),s>t&&(s=Math.min(s,e),n=n.substring(0,t)+this._hiddenChar.repeat(s-t)+n.substring(s))}}const t=this._sepReg||s;t&&(n=n.replace(t,"\n")),this._maxLength>=0&&(n=n.substring(0,this._maxLength))}return this._prefix&&(n=this._prefix+n),this._suffix&&(n+=this._suffix),n}_getAltText(t){return""}}class Ws extends Hs{constructor(){super(...arguments),this._wrap=!1,this._singleLine=!1}get wrap(){return this._wrap}set wrap(t){t=this.toBool(t),this._wrap=t}get lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}set lineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._sepReg=c.makeLineSeparator(this._lineSeparator))}get singleLine(){return this._singleLine}set singleLine(t){this._singleLine=t}get text(){return this._text}set text(t){this._text=t}get hiddenChar(){return this._hiddenChar}set hiddenChar(t){this._hiddenChar=t}get hiddenRange(){return this._hiddenRange?this._hiddenRange.slice(0):void 0}set hiddenRange(t){this._hiddenRange=t?t.slice(0):void 0}get nanText(){return this._nanText}set nanText(t){this._nanText=t}type(){return Ws.TYPE}}Ws.TYPE="text";class zs extends Ws{get root(){return this._root}set root(t){this._root=t||""}get linkField(){return this._linkField}set linkField(t){this._linkField=t}get link(){return this._link}set link(t){this._link=t}getLink(t){let e=this._link;return!e&&this._linkField&&(e=t.getValue(this._linkField)),this._root&&(e=this._root+e),e||""}type(){return zs.TYPE}_getAltText(t){return this.getLink(t)}}zs.TYPE="link";class Gs extends Ps{constructor(){super(...arguments),this._minValue=0,this._maxValue=100}get barWidth(){return this._barWidth}set barWidth(t){this._barWidth=this.toNum(t)}get barHeight(){return this._barHeight}set barHeight(t){this._barHeight=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}type(){return Gs.TYPE}}Gs.TYPE="progress";class Us extends Gs{get lowValue(){return this._lowValue}set lowValue(t){this._lowValue=+t}get highValue(){return this._highValue}set highValue(t){this._highValue=+t}get optimumValue(){return this._optimumValue}set optimumValue(t){this._optimumValue=+t}type(){return Us.TYPE}_checkMax(t){}}var js,qs;Us.TYPE="meter",function(t){t.CANVAS="canvas",t.SVG="svg"}(js||(js={})),function(t){t.L="L",t.M="M",t.Q="Q",t.H="H"}(qs||(qs={}));class Ys extends Ns{constructor(){super(...arguments),this._qrcodeSize=Ys.DEF_SIZE,this._correctionLevel=qs.Q}get output(){return this._output}set output(t){this._output=t}get qrcodeWidth(){return this._qrcodeWidth}set qrcodeWidth(t){this._qrcodeWidth=Math.max(+t,Ys.MIN_SIZE)}get qrcodeHeight(){return this._qrcodeHeight}set qrcodeHeight(t){this._qrcodeHeight=Math.max(+t,Ys.MIN_SIZE)}get qrcodeSize(){return this._qrcodeSize}set qrcodeSize(t){this._qrcodeSize=Math.max(+t,Ys.MIN_SIZE)}get correctionLevel(){return this._correctionLevel}set correctionLevel(t){this._correctionLevel=t}getQrcodeSize(){return{w:he(this._qrcodeWidth,this._qrcodeSize,Ys.DEF_SIZE),h:he(this._qrcodeHeight,this._qrcodeSize,Ys.DEF_SIZE)}}type(){return Ys.TYPE}}Ys.TYPE="qrcode",Ys.DEF_SIZE=100,Ys.MIN_SIZE=76;class Qs extends Ds{constructor(){super(...arguments),this._shape=Qs.DEF_SHAPE,this._shapeSize=Qs.DEF_SIZE,this._decorative=!1}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=+t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=+t}get shapeSize(){return this._shapeSize}set shapeSize(t){this._shapeSize=+t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getShapeName(){return this._shape||Qs.DEF_SHAPE}getShapeWidth(){return he(this._shapeWidth,this._shapeSize,this._shapeHeight)}getShapeHeight(){return he(this._shapeHeight,this._shapeSize,this._shapeWidth)}type(){return Qs.TYPE}}Qs.TYPE="shape",Qs.DEF_SHAPE="@star",Qs.DEF_SIZE=20;class Zs extends Qs{constructor(){super(...arguments),this._shapeCount=Zs.SHAPE_COUNT,this._minValue=0,this._maxValue=Zs.SHAPE_COUNT,this._integral=!0,this._editable=!1}get shapeCount(){return this._shapeCount}set shapeCount(t){this._shapeCount=Math.max(this.toNum(+t,0))}get minValue(){return this._minValue}set minValue(t){this._minValue=this.toNum(+t,0)}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(+t,0)}get integral(){return this._integral}set integral(t){this._integral=t}get editable(){return this._editable}set editable(t){this._editable=t}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getStyle(){return this._shapeStyle||(this._shapeStyle=Object.assign(Object.assign({},Zs.STYLE),this.style)),this._shapeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},Zs.VALUE_STYLE),this.valueStyle)),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return Zs.TYPE}}Zs.TYPE="rating",Zs.SHAPE_COUNT=3,Zs.STYLE={stroke:"#0088ff",strokeWidth:"2px"},Zs.VALUE_STYLE={fill:"#0088ff",strokeWidth:"0px"};class Xs extends Ds{constructor(){super(...arguments),this._space=Xs.SPACE}get space(){return this._space}set space(t){this._space=+t||0}type(){return Xs.TYPE}}Xs.TYPE="spacer",Xs.SPACE=10;class Ks extends Ns{constructor(){super(...arguments),this._pointWidth=10,this._minPadding=.1}get chartWidth(){return this._chartWidth}set chartWidth(t){this._chartWidth=t}get chartHeight(){return this._chartHeight}set chartHeight(t){this._chartHeight=t}get pointWidth(){return this._pointWidth}set pointWidth(t){this._pointWidth=Math.max(1,+t,0)}get baseValue(){return this._baseValue}set baseValue(t){this._baseValue=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}get minPadding(){return this._minPadding}set minPadding(t){this._minPadding=this.toNum(t)}get firstStyle(){return this._firstStyle}set firstStyle(t){this._firstStyle=t}get lastStyle(){return this._lastStyle}set lastStyle(t){this._lastStyle=t}get minStyle(){return this._minStyle}set minStyle(t){this._minStyle=t}get maxStyle(){return this._maxStyle}set maxStyle(t){this._maxStyle=t}get pointStyle(){return this._pointStyle}set pointStyle(t){this._pointStyle=t}}class Js extends Ks{type(){return Js.TYPE}}Js.TYPE="sparkline";class ti extends Ks{constructor(){super(...arguments),this._pointSize=.7,this._belowSize=.4}get pointSize(){return this._pointSize}set pointSize(t){this._pointSize=+t||.1}get belowSize(){return this._belowSize}set belowSize(t){this._belowSize=this.toNum(t)}get belowStyle(){return this._belowStyle}set belowStyle(t){this._belowStyle=t}type(){return ti.TYPE}}ti.TYPE="sparkbar";let ei=class t extends Ns{constructor(){super(...arguments),this._svgWidth=t.DEF_SIZE,this._svgHeight=t.DEF_SIZE,this._vboxWidth=NaN,this._vboxHeight=NaN,this._decorative=!1}get shapes(){return Array.isArray(this._shapes)?this._shapes.slice(0):this._shapes}set shapes(t){this._shapes=t}get svgWidth(){return this._svgWidth}set svgWidth(t){this._svgWidth=t}get svgHeight(){return this._svgHeight}set svgHeight(t){this._svgHeight=t}get vboxWidth(){return this._vboxWidth}set vboxWidth(t){this._vboxWidth=t}get vboxHeight(){return this._vboxHeight}set vboxHeight(t){this._vboxHeight=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getVboxWidth(){return oe(this._vboxWidth,this._vboxHeight)}getVboxHeight(){return oe(this._vboxHeight,this._vboxWidth)}getSvgWidth(){return oe(this._svgWidth,this._svgHeight)}getSvgHeight(){return oe(this._svgHeight,this._svgWidth)}type(){return t.TYPE}};ei.TYPE="svg",ei.DEF_SIZE=24;class si extends Ws{get target(){return this._target}set target(t){this._target=t}type(){return si.TYPE}}si.TYPE="label";class ii extends Ds{constructor(){super(...arguments),this._letter=ii.DEF_LETTER,this._offsetX=0,this._offsetY=.1,this._decorative=!1}get letter(){return this._letter}set letter(t){this._letter=t?t.charAt(0):""}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=this.toNum(t,0)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=this.toNum(t,0)}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getChar(){return this._letter||ii.DEF_LETTER}type(){return ii.TYPE}}ii.TYPE="letter",ii.DEF_LETTER="♥";class ri extends Ds{constructor(){super(...arguments),this._thickness=1}get dir(){return this._dir}set dir(t){this._dir=t}get thickness(){return this._thickness}set thickness(t){this._thickness=this.toNum(t,0)}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}get lineStyle(){return this._lineStyle}set lineStyle(t){this._lineStyle=t}type(){return ri.TYPE}}ri.TYPE="line";const ni="http://www.w3.org/2000/svg";class oi extends p{static create(t){return t.createElementNS(ni,"svg")}constructor(t,e){super(),t instanceof Document?this.svg=t.createElementNS(ni,"svg"):this.svg=t,e&&this.svg.classList.add(e)}_doDestory(){this.svg=null}attach(t){return t.appendChild(this.svg),this}detach(){this.svg.parentElement&&this.svg.remove()}setClass(t){this.svg.setAttribute("class",""),t&&this.svg.classList.add(t)}addClass(t){t&&this.svg.classList.add(t)}setStyle(t){t&&Object.assign(this.svg.style,t)}setViewSize(t,e){isNaN(t)||(e=e||t,Fe.resizeSVG(this.svg,t,e))}clearViewSize(){this.svg.removeAttribute("viewBox")}setSize(t,e){this.svg.style.width=isNaN(t)?"":t+"px",this.svg.style.height=isNaN(e)?"":e+"px"}fillSize(){this.svg.style.width="100%",this.svg.style.height="100%"}makeBackground(t,e){return this.svg.style.pointerEvents="none",this.svg.style.verticalAlign="middle",!isNaN(t)&&Fe.resize(this.svg,t,e||t),this}clear(){Fe.clearChildren(this.svg)}rect(t,e,s,i,r){const n=this.svg.ownerDocument.createElementNS(ni,"rect");return n.x.baseVal.value=t,n.y.baseVal.value=e,n.width.baseVal.value=s,n.height.baseVal.value=i,r&&Object.assign(n.style,r),this.svg.appendChild(n),n}circle(t,e,s,i){const r=this.svg,n=r.ownerDocument.createElementNS(ni,"circle");return n.cx.baseVal.value=t,n.cy.baseVal.value=e,n.r.baseVal.value=s,i&&Object.assign(n.style,i),r.appendChild(n),n}line(t,e,s,i,r){let n=`M ${t} ${e} L ${s} ${i}`;const o=this._createPath(n);return r&&Object.assign(o.style,r),o}polyline(t,e){let s=`M ${t[0]} ${t[1]} L`;for(let e=1,i=t.length/2>>0;e<i;e++)s+=` ${t[2*e]} ${t[2*e+1]}`;const i=this._createPath(s);return e&&Object.assign(i.style,e),i.style.fill="none",i}polylgon(t,e){let s=`M ${t[0]} ${t[1]} L`;for(let e=1,i=t.length/2>>0;e<i;e++)s+=` ${t[2*e]} ${t[2*e+1]}`;s+="z";const i=this._createPath(s);return e&&Object.assign(i.style,e),i}quadratic(t,e,s,i,r,n,o){const h=`M ${t} ${e} Q ${s} ${i} ${r} ${n} z`,a=this._createPath(h);return o&&Object.assign(a.style,o),a}arc(t,e,s,i,r,n,o,h){n=Math.min(359.99999,n);const a=o?r+n:r-n,l=this.$_angleToPos(t,e,s,i,r,o),d=this.$_angleToPos(t,e,s,i,a,o),_=o?a-r>=180?1:0:a-r<=180?1:0,c=o?1:0,u=`M${l.x},${l.y} A${s},${i},0,${_},${c},${d.x},${d.y}`,g=this._createPath(u);return h&&Object.assign(g.style,h),g}path(t){return this._createPath(t)}setShape(t,e=!1){return e&&this.clear(),this.setViewSize(t.width,t.height),this._createPath(t.path),this}_createPath(t){const e=this.svg.ownerDocument.createElementNS(ni,"path");return e.setAttribute("d",t),this.svg.appendChild(e),e}$_angleToPos(t,e,s,i,r,n){return r=r*Math.PI/180,{x:t+s*Math.cos(r),y:e+i*Math.sin(r)}}_animateRevert(t,e,s,i){const r=this.svg.ownerDocument.createElementNS(ni,"animate");r.setAttribute("attributeName","d"),r.setAttribute("dur",i+"ms"),r.setAttribute("values",e+";"+s+";"+e),t.appendChild(r)}}var hi;!function(t){t.DEFAULT="default",t.SPOKES="spokes"}(hi||(hi={}));class ai{static render(t,e,s){switch(s.type){case hi.SPOKES:ai.spoke(t,e,s);break;case hi.DEFAULT:default:ai.default(t,e,s)}}static default(t,e,s){const i=getComputedStyle(e),r=s.width/2,n=s.height/2,o=2*Math.min(r,n)/3,h=s.width<=30,a=h?2:5,l="#f0f0f0",d=[l,l,i.fill||"#404040",l,l].join(";"),_=oe(s.itemCount,12),c=oe(s.duration,1e3)+"ms";for(let s=0;s<_;s++){const i=t.createElementNS(ni,"circle"),l=s/_*Math.PI*2;i.cx.baseVal.value=r+o*Math.cos(l),i.cy.baseVal.value=n+o*Math.sin(l),i.r.baseVal.value=a;let u=t.createElementNS(ni,"animate");Fe.setAttrs(u,Object.assign({},h?this.DEFAULT_SMALL:this.DEFAULT_ANI,{dur:c,begin:-(_-1-s)/_+"s"})),i.appendChild(u),u=t.createElementNS(ni,"animate"),Fe.setAttrs(u,Object.assign({},this.DEFAULT_FILL,{values:d,dur:c,begin:-(_-1-s)/_+"s"})),i.appendChild(u),e.appendChild(i)}}static spoke(t,e,s){const i=getComputedStyle(e),r=s.width/2,n=s.height/2,o=2*Math.min(r,n)/5,h=2*Math.min(r,n)/3,a="#f0f0f0",l=[a,a,i.stroke||"#404040",a,a].join(";"),d=oe(s.itemCount,10),_=oe(s.duration,1e3)+"ms";for(let s=0;s<d;s++){const i=s/d*Math.PI*2,n=r+o*Math.cos(i),c=r+o*Math.sin(i),u=r+h*Math.cos(i),g=r+h*Math.sin(i),p=t.createElementNS(ni,"path"),f=t.createElementNS(ni,"animate");p.setAttribute("d",`M ${n} ${c} L ${u} ${g}`),p.style.stroke=a,Fe.setAttrs(f,Object.assign({},this.SPOKE_ANI,{values:l,begin:-(d-1-s)/d+"s",dur:_})),p.appendChild(f),e.appendChild(p)}}static arc(t,e,s){}}ai.DEFAULT_ANI={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"2;3;5;3;2"},ai.DEFAULT_SMALL={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"0.5;1;2;1;0.5"},ai.DEFAULT_FILL={attributeName:"fill",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"},ai.SPOKE_ANI={attributeName:"stroke",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"};class li extends Ds{constructor(){super(...arguments),this._spinnerType=hi.DEFAULT,this._spinnerSize=li.SPINNER_SIZE,this._duration=1e3}get spinnerType(){return this._spinnerType}set spinnerType(t){this._spinnerType=t}get spinnerWidth(){return this._spinnerWidth}set spinnerWidth(t){this._spinnerWidth=+t}get spinnerHeight(){return this._spinnerHeight}set spinnerHeight(t){this._spinnerHeight=+t}get spinnerSize(){return this._spinnerSize}set spinnerSize(t){this._spinnerSize=+t}get itemCount(){return this._wheelCount}set itemCount(t){this._wheelCount=t}get duration(){return this._duration}set duration(t){this._duration=t}getSpinnerWidth(){return oe(this._spinnerWidth,this._spinnerSize)}getSpinnerHeight(){return oe(this._spinnerHeight,this._spinnerSize)}type(){return li.TYPE}}li.TYPE="spinner",li.SPINNER_SIZE=120;class di extends Ns{get field(){return this._field}set field(t){this._field=t}get label(){return this._label}set label(t){this._label=t}get markVisible(){return this._arrowVisible}set markVisible(t){this._arrowVisible=t}get orderVisible(){return this._orderVisible}set orderVisible(t){this._orderVisible=t}type(){return di.TYPE}}di.TYPE="field";class _i extends Ds{get placeholders(){return this._placeholders&&this._placeholders.slice(0)}set placeholders(t){this._placeholders=t&&t.slice(0)}type(){return _i.TYPE}}_i.TYPE="dummy";class ci extends Hs{constructor(){super(...arguments),this._useInner=!1}get domid(){return this._domid}set domid(t){this._domid=t}get useInner(){return this._useInner}set useInner(t){this._useInner=t}get html(){return this._html}set html(t){this._html=t}type(){return ci.TYPE}}ci.TYPE="html";class ui extends Ns{get chartSize(){return this._chartSize}set chartSize(t){this._chartSize=+t}get chartWidth(){return this._chartWidth}set chartWidth(t){this._chartWidth=+t}get chartHeight(){return this._chartHeight}set chartHeight(t){this._chartHeight=+t}get chartConfig(){return this._chartConfig}set chartConfig(t){this._chartConfig=t}getChartWidth(){return he(this._chartWidth,this._chartSize,ui.SIZE)}getChartHeight(){return he(this._chartHeight,this._chartSize,ui.SIZE)}}ui.SIZE=200;const gi={button:Ms,dummy:_i,field:di,ftext:Ws,gauge:Os,html:ci,icon:Bs,image:Fs,label:si,letter:ii,line:ri,link:zs,meter:Us,progress:Gs,qrcode:Ys,rating:Zs,shape:Qs,spacer:Xs,sparkbar:ti,sparkline:Js,spinner:li,svg:ei,text:Ws,hichart:ui};class pi{static getRenderer(t,e){if(c.isObject(t)){const s=t.type||("string"==typeof t.html?"html":e),i=gi[s];return i?(new i).assignProps(t):void 0}if("string"==typeof t){const e=gi[t.toLowerCase()];return e?new e:void 0}{const t=gi[e];return t?new t:void 0}}static createRenderer(t){return new(gi[t]||gi.text)}}class fi{constructor(t){c.isObject(t)&&Object.assign(this,t)}}class wi extends p{constructor(t,e){super(),this._visible=!0,this._id=t,this._childProps=e||{}}loadProps(t){return c.isObject(t)&&this._doLoadProps(t),this}id(){return this._id}getChildProp(t){return this._childProps[t]}get visible(){return this._visible}set visible(t){this._visible=this.toBool(t)}get width(){return this._width}set width(t){"string"==typeof t&&t.endsWith("*")?(this.width=NaN,this._childProps[Ot]=oe(t,1)):t!=this._width&&(this._width=t,this._widthDim=k(t,!0))}get height(){return this._height}set height(t){"string"==typeof t&&t.endsWith("*")?(this.height=NaN,this._childProps[Bt]=oe(t,1)):t!=this._height&&(this._height=t,this._heightDim=k(t,!0))}get minWidth(){return this._minWidth}set minWidth(t){this._minWidth=t}get minHeight(){return this._minHeight}set minHeight(t){this._minHeight=t}getLeftIn(t){return D(this._leftDim,t)}getRightIn(t){return D(this._rightDim,t)}getTopIn(t){return D(this._topDim,t)}getBottomIn(t){return D(this._bottomDim,t)}_doLoadProps(t){this.assignProps(t);const e=this._childProps;for(let s in this._childProps)t.hasOwnProperty(s)&&void 0!==t[s]&&(e[s]=t[s]);this._leftDim=k(e.left,!0),this._rightDim=k(e.right,!0),this._topDim=k(e.top,!0),this._bottomDim=k(e.bottom,!0)}_internalChildProps(){return this._childProps}}class mi extends wi{constructor(t,e,s,i,r){super(t,r),this._valign=Zt.MIDDLE,this._style=s,this.renderer=i,t&&i&&(i.id=t),this.value=e}get align(){return this._align}set align(t){t===Yt.RIGHT||Yt.CENTER?this._align=t:t=Yt.LEFT}get valign(){return this._valign}set valign(t){t===Zt.TOP||t===Zt.BOTTOM?this._valign=t:this._valign=Zt.MIDDLE}get class(){return this._class}set class(t){this._class=t}get style(){return this._style}setRow(t,e,s){this.dv=t,this.row=e,this.gindex=s}getField(){}getValue(){return this.value}}class yi extends mi{constructor(t,e,s,i,r,n,o){if(super(t,i,r,n,o),Array.isArray(s))this.fields=s,this.field=s[0];else if(e){const t=c.getFieldProp(e);t?(this.field=t.field,this.fprop=t.props):this.field=e}}getField(){return this.field}getValue(){if(void 0===this.value&&this.row>=0){if(this.fields){const t=this.dv,e=this.row,s=[];return this.fprop?this.fields.forEach((i=>{s.push(t.getProp(e,i,this.fprop,!0))})):this.fields.forEach((i=>{s.push(t.getValue(e,i,!0))})),s}return this.fprop?this.dv.getProp(this.row,this.field,this.fprop,!0):this.dv.getValue(this.row,this.field,!0)}return this.value}}class bi extends mi{constructor(t,e,s,i,r){super(t,e,s,i,r)}}var vi,Ci,Si;!function(t){t.SHRINK="shrink",t.WRAP="wrap",t.OVERFLOW="overflow"}(vi||(vi={}));class Ri extends wi{constructor(t,e,s,i){super(t,i),this._style=s,this._children=e,e&&e.length>0&&(e.forEach((t=>t._parent=this)),this._doInitChildren(e))}_doInitChildren(t){}get style(){return this._style}childCount(){return this._children?this._children.length:0}children(){return this._children?this._children.slice(0):[]}scrollable(){return!1}getChild(t){return this._children[t]}tagBy(t){return function e(s){for(const i of s._children){if(i.tag===t)return i;if(i instanceof Ri){const t=e(i);if(t)return t}}}(this)}literalBy(t){const e=this.tagBy(t);return e instanceof bi&&e}fieldBy(t){return function e(s){for(const i of s._children){if(i instanceof yi&&i.field===t)return i;if(i instanceof Ri){const t=e(i);if(t)return t}}}(this)}canContainHspace(){return!1}canContainVspace(){return!1}setRow(t,e,s){this.row=e,this._children.forEach((i=>i.setRow(t,e,s)))}getOrderedChildren(){return this._children}getSimples(){let t=[];return this.getOrderedChildren().forEach((e=>{e instanceof mi?t.push(e):e instanceof Ri&&(t=t.concat(e.getSimples()))})),t}}Ri.CHILD_PROPS=fi;class xi extends p{constructor(t){super(),this._dom=t.dom,this._tokens=t.tokens,this.tid=t.tid}clone(){return this._dom.cloneNode(!0)}setRow(t,e,s){}inflate(t){this._tokens.forEach((e=>{e.value=e.param.inflate(null,null,null,t)}))}apply(t){this._tokens.forEach((e=>{const s=Fe.childByPath(t,e.node);e.attr?s.setAttribute(e.attr,e.value):s.nodeValue=e.value}))}}class Vi extends p{constructor(t){super(),this.layout=t,t.inCell=!0}}class Ei extends Vi{constructor(t){super(t)}}class $i extends Ei{}class Ai extends Ei{}class Li extends p{setTable(t){this.table=t;const e=t.colCount||1;let s=-1,i=0;this.cells.forEach((r=>{if(isNaN(r.row)||(s=-1),isNaN(r.col)){s+1>=e?(r.col=0,isNaN(r.row)&&(r.row=++i)):(r.col=s+1,isNaN(r.row)&&(r.row=i)),i=r.row}isNaN(r.row)&&(r.row=i),r.column=t._internalColumn(r.col),s=r.col}))}}class Ti extends Li{constructor(t,e){super(),this.tid=t.id,this.cells=e}setRow(t,e,s){this.row=e,this.cells.forEach((i=>i.layout.setRow(t,e,s)))}}class ki extends Li{constructor(t,e){super(),this.tid=t.id,this.cells=e}setRow(t,e,s){}}class Di extends fi{constructor(){super(...arguments),this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0}}class Ni extends Ri{}Ni.CHILD_PROPS=Di;class Pi extends Ni{get type(){return Pi.TYPE}}Pi.TYPE="frame",Pi.CHILD_PROPS=class extends Di{};class Mi extends Ni{get activeChild(){return this._activeChild}set activeChild(t){this._activeChild=t}get activeField(){return this._activeField}set activeField(t){this._activeField=t}get activeCallback(){return this._activeCallback}set activeCallback(t){this._activeCallback=t}getActiveChild(t,e){return re(this._activeCallback&&this._activeCallback({ctx:t,row:e}),this._activeChild,this._idValue)}get type(){return Mi.TYPE}setRow(t,e,s){super.setRow(t,e,s),this._activeField&&(this._idValue=t.getValue(e,this._activeField,!0))}}Mi.TYPE="stack",Mi.CHILD_PROPS=class extends Di{},function(t){t.NONE="none",t.HEAD="head",t.LEFT="left",t.TOP="top"}(Ci||(Ci={}));class Ii extends Ri{constructor(){super(...arguments),this._labelPosition=Ci.LEFT,this._labelGap=10,this._itemGap=12}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t}get labelWidth(){return this._labelWidth}set labelWidth(t){t!==this._labelWidth&&(this._labelWidth=t,this._labelWidthDim=k(t,!0))}get minLabelWidth(){return this._minLabelWidth}set minLabelWidth(t){t!==this._minLabelWidth&&(this._minLabelWidth=t,this._minLabelWidthDim=k(t,!0))}get maxLabelWidth(){return this._maxLabelWidth}set maxLabelWidth(t){t!==this._maxLabelWidth&&(this._maxLabelWidth=t,this._maxLabelWidthDim=k(t,!0))}get labelGap(){return this._labelGap}set labelGap(t){this._labelGap=oe(t,0)}get labelStyle(){return this._labelStyle}set labelStyle(t){this._labelStyle=t}get itemGap(){return this._itemGap}set itemGap(t){this._itemGap=oe(t,0)}getLabelWidths(){return{width:T(this._labelWidthDim),min:T(this._minLabelWidthDim),max:T(this._maxLabelWidthDim)}}get type(){return Ii.TYPE}canContainVspace(){return!0}}Ii.TYPE="form",Ii.CHILD_PROPS=class extends fi{constructor(){super(...arguments),this.label=void 0,this.labelWidth=void 0,this.imageUrl=void 0,this.imageWidth=void 0,this.imageHeight=void 0}};class Oi extends fi{constructor(){super(...arguments),this.shrink=void 0,this.grow=void 0,this.gap=void 0}}class Bi extends Ri{constructor(){super(...arguments),this._itemsArrange=Jt.START,this._itemGap=Bi.DEF_ITEM_GAP,this._reversed=!1,this._wrap=!1}get itemsArrange(){return this._itemsArrange}set itemsArrange(t){this._itemsArrange=t}get itemGap(){return this._itemGap}set itemGap(t){isNaN(t)||(this._itemGap=t)}get reversed(){return this._reversed}set reversed(t){this._reversed=t}get wrap(){return this._wrap}set wrap(t){this._wrap=t}_doInitChildren(t){}}Bi.DEF_ITEM_GAP=4;class Fi extends Bi{constructor(){super(...arguments),this._itemsAlign=Yt.LEFT}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){this._itemsAlign=t}get type(){return Fi.TYPE}canContainVspace(){return!0}}Fi.TYPE="vlinear",Fi.CHILD_PROPS=class extends Oi{constructor(){super(...arguments),this.left=void 0,this.right=void 0}};class Hi extends Bi{constructor(){super(...arguments),this._itemsAlign=Zt.MIDDLE}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){this._itemsAlign=t}get type(){return Hi.TYPE}canContainHspace(){return!0}}Hi.TYPE="hlinear",Hi.CHILD_PROPS=class extends Oi{constructor(){super(...arguments),this.top=void 0,this.bottom=void 0}};class Wi extends ks{constructor(){super(...arguments),this._clickable=!1}get hint(){return this._hint}set hint(t){this._hint=t}get clickable(){return this._clickable}set clickable(t){this._clickable=t}get onClick(){return this._onClick}set onClick(t){this._onClick=t}get value(){return this._value}set value(t){this._value=t}click(t,e,s,i){return this._doClick(t,e,s,i)}longPressed(t,e,s){return this._doLongPressed(t,e,s)}_doClick(t,e,s,i){let r=this._clickArgs;if(this.clickable&&this._onClick)return r||(r=this._clickArgs={control:t.wrapperOrThis(),editor:this.getProxy(),element:e}),r.element=e,r.row=s,r.field=i,this._onClick(r)}_doLongPressed(t,e,s){return!1}}class zi extends Wi{constructor(){super(...arguments),this._fitWidth=1}get fitWidth(){return this._fitWidth}set fitWidth(t){this._fitWidth=t}get fitHeight(){return this._fitHeight}set fitHeight(t){this._fitHeight=t}getFitWidth(){return isNaN(this._fitWidth)?1:this._fitWidth}getFitHeight(){return this._fitHeight}}class Gi extends Wi{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get trueValues(){return this._trueValues&&this._trueValues.slice(0)}set trueValues(t){this._trueValues=t&&t.slice(0)}get trueValue(){return this._trueValue}set trueValue(t){this._trueValue=t}get falseValue(){return this._falseValue}set falseValue(t){this._falseValue=t}isTrue(t){return!0===t||!!this._trueValues&&this._trueValues.indexOf(t)>=0}getValueOf(t){return t?ie(this._trueValue,!(this._trueValues&&this._trueValues.length>0)||this._trueValues[0]):ie(this._falseValue,!1)}}class Ui extends Gi{constructor(){super(...arguments),this._labelWrap=!0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get label(){return this._label}set label(t){this._label=t}get checkedLabel(){return this._checkedLabel}set checkedLabel(t){this._checkedLabel=t}get uncheckedLabel(){return this._uncheckedLabel}set uncheckedLabel(t){this._uncheckedLabel=t}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}get checkedStyle(){return this._checkedStyle}set checkedStyle(t){this._checkedStyle=t}get uncheckedStyle(){return this._uncheckedStyle}set uncheckedStyle(t){this._uncheckedStyle=t}getBoxWidth(){return oe(this._boxWidth,this._boxSize)}getBoxHeight(){return oe(this._boxHeight,this._boxSize)}getLabel(t){return t?this._checkedLabel||this._label:this._uncheckedLabel||this._label}type(){return Ui.TYPE}_doClick(t,e,s,i){if(super._doClick(t,e,s,i)||!i)return!0;{const e=t.data();if(!e.readOnly()){let t=e.getValue(s,i,!0);return t=this.isTrue(t)?this.getValueOf(!1):this.getValueOf(!0),e.updateValue(s,i,t),!0}}}}Ui.TYPE="check";class ji extends zi{constructor(){super(...arguments),this._autoHide=!1}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t}}class qi extends ji{get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t}type(){return qi.TYPE}}qi.TYPE="text";class Yi extends ji{type(){return Yi.TYPE}}Yi.TYPE="number";class Qi extends ji{type(){return Qi.TYPE}}Qi.TYPE="date";class Zi extends ji{type(){return Zi.TYPE}}Zi.TYPE="time";class Xi extends ji{type(){return Xi.TYPE}}Xi.TYPE="datetime";class Ki extends Ui{get group(){return this._group}set group(t){this._group=t}type(){return Ki.TYPE}}Ki.TYPE="radio";class Ji extends Wi{constructor(){super(...arguments),this._boxGap=5,this._itemGap=8,this._labelWrap=!0}get labels(){return this._labels&&this._labels.slice(0)}set labels(t){c.equalArrays(t,this._labels)||(this._labels=t&&t.slice(0))}get values(){return this._values&&this._values.slice(0)}set values(t){c.equalArrays(t,this._values)||(this._values=t&&t.slice(0))}get valueCount(){return this._values?this._values.length:0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get boxGap(){return this._boxGap}set boxGap(t){this._boxGap=this.toNum(t,0)}get itemGap(){return this._itemGap}set itemGap(t){this._itemGap=this.toNum(t,0)}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}type(){return Ji.TYPE}}Ji.TYPE="radiogroup",function(t){t.NONE="none",t.GROUP="group",t.LABEL="label",t.ALL="all"}(Si||(Si={}));class tr extends zi{constructor(){super(...arguments),this._sortMode=Si.NONE,this._sortDirection=te.ASCENDING,this._itemsChanged=!0}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get labels(){return this._labels?this._labels.slice(0):null}set labels(t){c.equalArrays(t,this._labels)||(this._labels=t?t.slice(0):null,this._itemsChanged=!0)}get values(){return this._values?this._values.slice(0):null}set values(t){c.equalArrays(t,this._values)||(this._values=t?t.slice(0):null,this._itemsChanged=!0)}get groups(){return this._groups?this._groups.slice(0):null}set groups(t){if(!c.equalArrays(t,this._groups)){if(this._groups=t?t.slice(0):null,this._groupValues=[],this._groupLabels=[],t)for(let e of t){const t=e.values,s=e.labels;if(t)for(let e=0;e<t.length;e++)this._groupValues.push(t[e]),this._groupLabels.push(s[e])}this._itemsChanged=!0}}get isGrouped(){return this._groups&&this._groups.length>0}get itemsChanged(){return this._itemsChanged}get sortMode(){return this._sortMode}set sortMode(t){this._sortMode=t}get sortDirection(){return this._sortDirection}set sortDirection(t){t!==this._sortDirection&&(this._sortDirection=t,this._itemsChanged=!0)}type(){return tr.TYPE}}tr.TYPE="select";class er extends Gi{get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}type(){return er.TYPE}}er.TYPE="switch";const sr={check:Ui,date:Qi,datetime:Xi,number:Yi,radio:Ki,radiogroup:Ji,select:tr,switch:er,text:qi,time:Zi};class ir{static getEditor(t){if(c.isObject(t)){const e=t.type||"text",s=sr[e];return s?(new s).assignProps(t):void 0}if("string"==typeof t){const e=sr[t.toLowerCase()];return e?new e:void 0}{const t=sr.text;return t?new t:void 0}}static createEditor(t){return new(sr[t]||ir.text)}}const rr={vlinear:Fi,hlinear:Hi,vflex:Fi,hflex:Hi,frame:Pi,stack:Mi,form:Ii},nr={defRender:"dummy"};class or{constructor(){}layoutFromTemplate(t,e,s,i,r,n){this._target=e,this._inflater=n,this._inflater.templateParams=r.params,r.target=e;try{let n,o;if(t===nr)n=this.$_loadLayout(r.id,t,r.skeleton||ps,null,nr.defRender);else if(r instanceof bs){const s=e.defRenderer||"text",h=r.detailed,a=r.extra;if(o=r.id,r instanceof Cs)n=this.$_loadTableHeader(r.id,t,r,null,s);else if(r instanceof Ss)n=this.$_loadTableFooter(r.id,t,r,null,s);else if(i&&h)n=this.$_loadLayout(r.detailId,t,h,null,s);else if(n=this.$_loadTable(r.id,t,r,null,s),i){const e=!h&&a&&this.$_loadLayout(a.id,t,a,null,s);e&&(n._extra=e)}}else{const h=e.defRenderer||"text",a=s&&r.collapsed,l=r.detailed,d=r.extra,_=a||i&&l||r.layout;if(o=a?r.collapsedId:i&&l?r.detailId:r.id,n=this.$_loadLayout(o,t,_,null,h),i){const e=!l&&d&&this.$_loadLayout(d.id,t,d,null,h);e&&(n._extra=e)}}return n||x.debugging(),n.tid=o,n}finally{this._inflater=void 0,this._target=void 0}}$_inflate(t,e,s){return s instanceof zt?s.inflate(t,this._target,e,this._inflater):s}$_loadField(t,e,s,i){const r=e.props,n=e.fields&&c.checkArray(this.$_inflate(t,null,e.fields)),o=e.field?this.$_inflate(t,null,e.field):null,h=this.$_loadParams(t,o,e.style),a=e.editor?ir.getEditor(this.$_loadParams(t,o,e.editor)):ir.createEditor("text")||e.renderer?pi.getRenderer(this.$_loadParams(t,o,e.renderer),i):pi.createRenderer(i);let l;if(a){for(const s in e.rendererStyles)a[s]=this.$_loadParams(t,o,e.rendererStyles[s]);a.tid=e.tid}const d=this.$_inflate(t,o,e.value);return l=o||n?new yi(e.id,o,n,d,h,a,s):new bi(e.id,d,h,a,s),l&&(l.scope=t,l.classCallback=e.classCallback&&this.$_loadParam(t,o,e.classCallback),l.styleCallback=e.styleCallback&&this.$_loadParam(t,o,e.styleCallback),r&&l.loadProps(this.$_loadParams(t,o,r))),l}$_loadLayout(t,e,s,i,r){if(s instanceof ls){const n=rr[s.layout]||Fi,o=this.$_loadParams(e,null,s.style);let h;if(n||G(v.unknownLayoutType,s.layout),s.children){h=[];for(let t of s.children){const s=new n.CHILD_PROPS;let i;if(t instanceof as)i=this.$_loadField(e,t,s,r);else if(t instanceof ls){const n=t.props;i=this.$_loadLayout(t.id,e,t,s,r).loadProps(n)}i&&(i.tid=t.tid,i.tag=t.tag,h.push(i))}}const a=this.$_loadParams(e,null,s.props);return new n(t,h,o,i).loadProps(a)}if(s instanceof ds){const t=new xi(s);return t.inflate(this._inflater),t}}$_loadCell(t,e,s){e.col=s.col,e.row=s.row,e.cspan=oe(s.colspan,1),e.rspan=oe(s.rowspan,1),e.style=this.$_loadParams(t,null,s.cellStyle)}$_loadTable(t,e,s,i,r){const n=s.cells&&s.cells.map((t=>{const s=new Vi(this.$_loadField(e,t,void 0,r));return this.$_loadCell(e,s,t),s}));return new Ti(s,n)}$_loadTableHeader(t,e,s,i,r){const n=s.cells&&s.cells.map((t=>{const s=new $i(this.$_loadField(e,t,void 0,r));return this.$_loadCell(e,s,t),s}));return new ki(s,n)}$_loadTableFooter(t,e,s,i,r){const n=s.cells&&s.cells.map((t=>{const s=new Ai(this.$_loadField(e,t,void 0,r));return this.$_loadCell(e,s,t),s}));return new ki(s,n)}$_loadParam(t,e,s){return s instanceof zt?s.inflate(t,this._target,e,this._inflater):s}$_loadParams(t,e,s){if(s instanceof zt)return s.inflate(t,this._target,e,this._inflater);if(c.isObject(s)){const i={};for(let r in s)i[r]=this.$_inflate(t,e,s[r]);return i}return s}}or.Instance=new or;let hr=31247;const ar=new H,lr=new H,dr=function(t,e,s,i,r){if(s=s||i.name){if(i){let n;if(i instanceof us||i instanceof bs)n=i;else if(c.isObject(i.template))if(Array.isArray(i.template.cells))switch(i.template.type){case"header":n=new Cs(t,i,!1);break;case"footer":n=new Ss(t,i,!1);break;default:n=new vs(t,i)}else n=new us(t,i,r);if(!n)throw console.error("Invalid template structure: ",i),new Error("잘못된 template 구성입니다");return e.add(s,n),n}e.remove(s)}},_r=function(){return"_rt_template_"+hr++};[{name:"@it_list_header",description:"List header template",props:{},template:{layout:"hflex",style:"${@style}",children:[{value:"${@caption;Header}",tag:"caption",width:"*",align:"${@caption-align}",style:{fontWeight:"bold",color:"${@caption-color;#333}"}}]}},{name:"@it_list_footer",description:"List footer template",props:{},template:{layout:"hflex",children:[{value:"Σ",style:{fontSize:"19px"},tag:"sigma"},{width:"*",renderer:"spacer",tag:"spacer"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_name_value",description:"왼쪽 끝에 이름, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},rowStyle:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",left:0,width:"${name_width}",height:"${name_height}",style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",right:0,width:"${value_width}",height:"${value_height}",style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_detail_value",description:"왼쪽 끝에 이름과 그 아래 설명, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",width:"${name_width}",height:"${name_height}",left:0,style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",width:"${value_width}",height:"${value_height}",right:0,style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_group_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]},collapsed:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"},{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_group_footer",description:"Group footer template",props:{},template:{layout:"hlinear",children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_datagroup_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]}},{name:"@it_datagroup_footer",description:"Group footer template",props:{},template:{layout:"hlinear",style:{fontSize:"14px "},children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:"${rows_suffix;rows.}",tag:"rows"}]}},{name:"@it_loading_page",description:"Loading page template",template:{layout:"vlinear",itemsAlign:"center",itemsArrange:"center",children:[{value:"${message;Data Loading...}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#777"}},{space:"30"},{renderer:{type:"spinner"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}},{name:"@it_empty_page",description:"Empty page template",template:{layout:"vlinear",itemsAlign:"center",itemsArrange:"center",itemGap:20,children:[{visible:"${@message_visible;true}",value:"${@message;표시할 데이터가 없습니다.}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#555"}},{visible:"${@load_visible;true}",renderer:{type:"button",label:"${@load_label;Load Data}",onClick:"${@load_callback}"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}}].forEach((t=>ar.add(t.name,new us(null,t,void 0))));class cr extends Ue{constructor(t,e){super(t),this._defs=e||void 0,!e&&this._doInitDefaults()}_doInitDefaults(){this._visible=!0}initLandscape(){}rowCellObjectChanged(t){this._changed()}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed("visible"))}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed("style"))}prepareRender(){this._doPrepareRender()}unprepareRender(){this._doUnprepareRender()}_doUnprepareRender(){}}var ur,gr,pr;!function(t){t.DEFAULT="default",t.NEAR="near",t.FAR="far",t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(ur||(ur={}));class fr extends cr{_doInitDefaults(){super._doInitDefaults(),this._position=ur.NEAR}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}getPosition(t){const e=this.position();if(e===ur.TOP||e===ur.BOTTOM||e===ur.LEFT||e===ur.RIGHT)return e;switch(e){case ur.NEAR:return t?ur.LEFT:ur.TOP;case ur.FAR:default:return t?ur.RIGHT:ur.BOTTOM}}}!function(t){t.NEAR="near",t.FAR="far"}(gr||(gr={})),function(t){t.BAR="bar",t.BAR_PUSH="barPush",t.ROW="row",t.ROW_PUSH="rowPush"}(pr||(pr={}));class wr extends cr{_doInitDefaults(){super._doInitDefaults(),this._mode=wr.MODE,this._position=gr.NEAR,this._gapLeft=4,this._gapRight=4,this._gapTop=0,this._gapBottom=8}_doDestory(){this._rowInfos=null}mode(){return ie(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}gapLeft(){return ie(this._gapLeft,this._defs&&this._defs._gapLeft)}setGapLeft(t){(t=ne(t))!==this._gapLeft&&(this._gapLeft=t,this._changed())}size(){return ie(this._size,this._defs&&this._defs._size)}setSize(t){(t=ne(t))!==this._size&&(this._size=t,this._changed())}gapRight(){return ie(this._gapRight,this._defs&&this._defs._gapRight)}setGapRight(t){(t=ne(t))!==this._gapRight&&(this._gapRight=t,this._changed())}gapTop(){return ie(this._gapTop,this._defs&&this._defs._gapTop)}setGapTop(t){(t=ne(t))!==this._gapTop&&(this._gapTop=t,this._changed())}gapBottom(){return ie(this._gapBottom,this._defs&&this._defs._gapBottom)}setGapBottom(t){(t=ne(t))!==this._gapBottom&&(this._gapBottom=t,this._changed())}prepareGaps(t){if(this._table=t)this._runGaps={left:0,right:0,top:0,bottom:0,horz:0,vert:0};else{const t=this.gapLeft(),e=this.gapRight(),s=this.gapTop(),i=this.gapBottom();this._runGaps={left:t,right:e,top:s,bottom:i,horz:t+e,vert:s+i}}}_doPrepareRender(){const t=this.gapLeft(),e=this.gapRight(),s=this.gapTop(),i=this.gapBottom();this._runGaps={left:t,right:e,top:s,bottom:i,horz:t+e,vert:s+i}}_doUnprepareRender(){}}wr.MODE=pr.BAR;const mr={margin:0,whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle"};class yr extends p{static clone(t,e){return new e(t)}constructor(t,e,s){if(super(),t instanceof Document){const i=this._svg=new oi(t,e);i.setStyle(s),this._doInit(i)}else t instanceof yr?(this._svg=new oi(t._svg.svg.cloneNode(!0),e),this._doClone(t)):this._svg=new oi(t,e);Fe.setAttr(this._svg.svg,"role","image")}_doDestory(){Fe.remove(this._svg.svg),this._svg=null}name(){return this.constructor.NAME}dom(){return this._svg.svg}attached(){return!!this._svg.svg.parentElement}isDom(t){return this._svg.svg===t}containsDom(t){return this._svg.svg.contains(t)}setVisible(t){Fe.setVisible(this._svg.svg,t)}styleTarget(){return this._svg.svg.style}resize(t,e=NaN){if(t=t||e,e=e||t,t!==this._width||e!==this._height)return this._width=t,this._height=e,this._svg.setSize(t,e),!0}setClass(t){this._svg.setClass(t)}setStyle(t){this._svg.setStyle(t)}appendTo(t){t instanceof We&&(t=t.dom),t.appendChild(this._svg.svg)}remove(){Fe.remove(this._svg.svg)}makeBackground(t,e){return this._svg.makeBackground(t,e),this}_doClone(t){this._width=t._width,this._height=t._height}_doInit(t){}}class br extends H{createShape(t,e){return this.createStock(t,e)||this.createCustom(e,void 0,void 0)}}class vr extends yr{constructor(t,e,s){super(t,e,s)}setShape(t){return t&&(this._svg.setViewSize(t.w,t.h),this._path?this._path.setAttribute("d",t.d):this._path=this._svg._createPath(t.d),this._path.style.cssText=""),this}_doClone(t){super._doClone(t),t._path&&(this._path=this._svg.svg.firstElementChild)}}vr.NAME="@custom";class Cr extends yr{constructor(t,e,s){super(t,e,s)}_doInit(t){t.setViewSize(Cr.SIZE),t.polyline([5.9,12.5,9.7,16.3,18.5,7.5])}}Cr.NAME="@checkmark",Cr.SIZE=24;class Sr extends yr{constructor(t,e,s){super(t,e,s)}_doInit(t){t.setViewSize(Sr.SIZE)}}Sr.NAME="@delete",Sr.SIZE=26;class Rr extends yr{_doInit(t){t.setViewSize(Rr.SIZE);const e=Rr.SIZE/2,s=Rr.SIZE/2,i=Math.min(e,s);this._svg.circle(e,s,i,null)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);const t=this._svg.svg.firstElementChild,e=this._width/2,s=this._height/2,i=Math.min(e,s),r=getComputedStyle(this._svg.svg);let n=(parseFloat(r.strokeWidth)||0)/2;return t.setAttribute("cx",e),t.setAttribute("cy",s),t.setAttribute("r",i-n),!0}}}Rr.NAME="@circle",Rr.SIZE=20;class xr extends yr{_doInit(t){const e=this._svg._createPath("M 0 0");e.style.pointerEvents="none",this._svg.svg.appendChild(e)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);const t=this.$_getPath(this._width,this._height);return this._svg.svg.firstElementChild.setAttribute("d",t),!0}}$_getPath(t,e){const s=this._getPoints();for(let i=0,r=s.length/2>>0;i<r;i++)s[2*i]*=t,s[2*i+1]*=e;let i=`M ${s[0]} ${s[1]} L`;return i+=s.slice(2).join(" ")+" z",i}}xr.SIZE=1;class Vr extends xr{_getPoints(){return[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]}}Vr.NAME="@star";class Er extends yr{constructor(t,e,s,i,r){super(t,r),this._svg.setViewSize(e,s),!this._svg.svg.firstElementChild&&this._svg.path(i)}}class $r extends We{clickable(){return!1}click(t,e,s){}measure(t,e,s,i){const r=this.dom.style;this.mw=this.mh=NaN,this._doPrepareRender(t,e),this._doApplyStyles(r),this._doApplyImportantStyles(r);const n=this._doMeasure(t,e,s,i);return this.mw=n.width,this.mh=n.height,n}render(t){const{width:e,height:s}=this._getRenderSize();this._doRender(t,e,s),this._doAfterRender()}resizeByMeasure(){return this.resize(this.mw,this.mh),this}applyMeasuredBounds(){return this.move(this.mx,this.my),this.resize(this.mw,this.mh),this}_doPrepareRender(t,e){}_doApplyStyles(t){}_doApplyImportantStyles(t){}_doAfterRender(){}_getRenderSize(){return{width:oe(this.width,this.dom.offsetWidth),height:oe(this.height,this.dom.offsetHeight)}}}$r.PANEL_ORDER="100";class Ar extends $r{constructor(t,e,s,i){super(t,s,i,"div"),this._model=e}model(){return this._model}setModel(t){this._model=t}listOwner(){return this.control}}class Lr extends Ar{setPosition(t){const e=this._model.getPosition(this.landscape=t);this.position=e||ur.BOTTOM,this.vertical=this.position===ur.LEFT||this.position===ur.RIGHT}}const Tr="4px",kr={display:"inline-block",pointerEvents:"none",verticalAlign:"middle",overflow:"hidden"},Dr={display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",pointerEvents:"none"};class Nr extends We{constructor(t,e){super(t,!1,e,"button")}enabled(){return!this.dom.disabled}setEnabled(t){Fe.setDisabled(this.dom,!t)}_doInitStyle(t){Object.assign(t,mr)}_doInitDom(t,e){if(i){const s=t.createElement("div");Object.assign(s.style,Dr),e.appendChild(s)}We.BOUNDING&&(e.style.border=We.BOUNDING_BORDER)}_setModel(t,e){const s=t.doc(),r=this.dom,n=i?r.firstElementChild:r,o=e.className,h=e.style;if(Fe.setData(r,"image",1),o!==this._prevClass&&(this._prevClass&&r.classList.remove(this._prevClass),this._prevClass=o,o&&r.classList.add(o)),h!=this._prevStyles){const t=r.style;if(this._prevStyles)for(let e in this._prevStyles)t[e]="";h&&Object.assign(t,h),this._prevStyles=h}let a;if(this.resize(NaN,NaN),e.imageUrl?(this._shape&&(this._shape=this._shape.destroy()),a=this.$_setImage(t,n,e)):e.shape&&(this._img=Fe.remove(this._img),a=this.$_setShape(t,n,e)),a)i?this.$_arrangeSafari(s,n,a,e):this.$_arrange(s,n,a,e);else{this._shape&&(this._shape=this._shape.destroy()),this._img=Fe.remove(this._img),this._br=Fe.remove(this._br);let t=this._span;t||(t=this._span=this.$_createSpan(s),n.appendChild(t)),this._span.textContent=e.label||e.name,Fe.setData(n,"image",void 0)}this.setEnabled(!e.disabled)}$_createSpan(t){const e=t.createElement("span");return e.className=Nr.LABEL_CLASS,Object.assign(e.style,kr),e}$_arrangeSafari(t,e,s,i){const r=i.label;let n=this._span;if(r&&i.labelPosition!==Ae.NONE)switch(n||(n=this._span=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case Ae.LEFT:e.style.flexDirection="row",s.style.paddingLeft=Tr,e.insertBefore(n,s);break;case Ae.RIGHT:e.style.flexDirection="row",s.style.paddingRight=Tr,e.appendChild(n);break;case Ae.TOP:e.style.flexDirection="column",e.insertBefore(n,s),s.style.paddingTop=Tr;break;default:e.style.flexDirection="column",s.style.paddingBottom=Tr,e.appendChild(n)}else this._span=Fe.remove(n)}$_arrange(t,e,s,i){const r=i.label;let n=this._span;if(r&&i.labelPosition!==Ae.NONE)switch(n||(n=this._span=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case Ae.LEFT:this._br=Fe.remove(this._br),s.style.paddingLeft=Tr,e.insertBefore(n,s);break;case Ae.RIGHT:this._br=Fe.remove(this._br),s.style.paddingRight=Tr,e.appendChild(n);break;case Ae.TOP:this._br=this._br||Fe.createBR(t,Nr.BR_CLASS),e.insertBefore(n,s),e.insertBefore(this._br,s),s.style.paddingTop=Tr;break;default:this._br=this._br||Fe.createBR(t,Nr.BR_CLASS),s.style.paddingBottom=Tr,e.appendChild(n),e.insertBefore(this._br,n)}else n||(n=this._span=this.$_createSpan(t)),e.insertBefore(n,s),n.textContent=""}$_setImage(t,e,s){const r=t.doc(),n=s.imageUrl;let o=this._img,h=s.imageWidth,a=s.imageHeight;if(s.style&&Object.assign(e.style,s.style),e.style.overflow="",e.textContent="",e.dataset.type="image",o?o.parentElement||e.appendChild(o):(o=this._img=r.createElement("img"),o.className=Nr.IMAGE_CLASS,o.style.pointerEvents="none",o.style.verticalAlign="middle",Fe.setAttr(o,"aria-hidden",!0),e.appendChild(o)),o.src=n,!o.complete&&t.useImage(n),isNaN(h)&&isNaN(a)){const e=i&&t.getImageSize(n);e?(h=e.width,a=e.height):(h=o.naturalWidth,a=o.naturalHeight)}return isNaN(h)||(o.width=h,isNaN(a)&&(o.height=h)),isNaN(a)||(o.height=a,isNaN(h)&&(o.width=a)),o}$_setShape(t,e,s){const i=s.shape;let r=this._shape,n=Math.max(0,s.shapeHeight);const o=Math.max(0,s.shapeWidth)||n||Nr.SHAPE_SIZE;return n=n||o,r&&i===r[St]?(r instanceof vr&&r.setShape(this.control.shapes().getCustom(i)),r.attached()||r.appendTo(e)):(r=this._shape=this.control.shapes().createStock(e.ownerDocument,i)||this.control.shapes().createCustom(i,null,null),r.setClass(Nr.SHAPE_CLASS),r.dom().style.pointerEvents="none",r.dom().style.verticalAlign="middle",r.appendTo(e)),r.resize(o,n),r[St]=i,r._svg.svg}}Nr.LABEL_CLASS="rtc-button-label",Nr.BR_CLASS="rtc-button-br",Nr.IMAGE_CLASS="rtc-button-image",Nr.SHAPE_CLASS="rtc-button-shape",Nr.SHAPE_SIZE=20;class Pr extends We{static createButton(t,e,s,i){const r=t.createElement("button");i&&(r.className=i);const n=new oi(t).setShape(e).makeBackground(s);return r.appendChild(n.svg),r}constructor(t,e){super(t,!1,Pr.BUTTON_CLASS,"button"),this.dom.classList.add(e)}size(){return this._size}enabled(){return!this.dom.disabled}setSize(t){t!==this._size&&(this._size=t,this.resize(t,t))}setDisabled(t){Fe.setDisabled(this.dom,t)}measure(){if(isNaN(this._size)){const t=Fe.getPadding(this.dom);this.mw=Pr.DEF_SVG_SIZE+t.left+t.right,this.mh=Pr.DEF_SVG_SIZE+t.top+t.bottom}else this.mw=this._size,this.mh=this._size;return{width:this.mw,height:this.mh}}click(){this._doClick()}isDom(t){return super.isDom(t)||t===this._svg.svg}_doInitStyle(t){Object.assign(t,{position:"absolute",border:"none"})}_doInitDom(t,e){const s=this._svg=new oi(t);this._svg.svg.style.pointerEvents="none",this._svg.fillSize(),this._doInitSvg(s),e.appendChild(s.svg)}}Pr.BUTTON_CLASS="rtc-svg-button",Pr.DEF_SVG_SIZE=16;class Mr extends We{}const Ir={[Pe.TOP_LEFT]:{left:"$0",top:"0",borderLeft:"$1",borderBottom:"$2"},[Pe.TOP_RIGHT]:{right:"$0",top:"0",borderRight:"$1",borderBottom:"$2"},[Pe.BOTTOM_LEFT]:{left:"$0",bottom:"0",borderLeft:"$1",borderTop:"$2"},[Pe.BOTTOM_RIGHT]:{right:"$0",bottom:"0",borderRight:"$1",borderTop:"$2"}};class Or extends We{constructor(t){super(t,!1,Or.CLASS_NAME,At),this._color="green",this._size=10,this._offset=0}setBadge(t,e,s,i){t===this._position&&e===this._offset&&s!==this._size&&i===this._color||(this._position=t,this._offset=e,this._size=s,this._color=i,this.dom.style.cssText="",this.$_getBorders(this.dom.style))}_getDisplayStyle(){return"inline-block"}_doInitStyle(t){this.$_getBorders(t)}$_getBorders(t){const e=Ir[this._position||Pe.TOP_LEFT];for(const t in e)switch(e[t]){case"$0":e[t]=`${this._offset}px`;break;case"$1":e[t]=`${this._size}px solid ${this._color}`;break;case"$2":e[t]=`${this._size}px solid transparent`}return Object.assign(t,e),t}}var Br;Or.CLASS_NAME="rtc-badge",function(t){t.TEXT="text",t.NUMBER="number",t.BOOL="bool",t.DATE="date",t.BIGINT="bigint",t.ANY="any"}(Br||(Br={}));const Fr={text:t=>null==t?t:String(t),number:t=>Number(t),bool:t=>null==t?t:Boolean(t),date:t=>t instanceof Date?t:new Date(t),bigint:t=>BigInt(t),any:t=>t},Hr=(t,e)=>isNaN(t)?isNaN(e)?0:-1:isNaN(e)||t>e?1:t<e?-1:0;class Wr{static create(t,e=Br.TEXT){if("string"==typeof t)return new Wr(t,e);if(c.isObject(t)&&t.name){const e=new Wr(t.name,t.type);return e.label=t.label,e.default=t.default,e.sortable=!!t.sortable,e.required=!!t.required,e.minimum=t.minimum,e.maximum=t.maximum,e.domain=Array.isArray(t.domain)?t.domain.slice(0):void 0,e}}static createFields(t){return t.map((t=>this.create(t)))}constructor(t,e=Br.TEXT){t||qr.throw(null,"Data field name must be exist."),this._name=t,this._type=e||Br.TEXT,this.readValue=Fr[e]||Fr.any,this.comparer=Wr.comparers[e]}get name(){return this._name}get type(){return this._type}get label(){return this._label}set label(t){t!==this._label&&(this._label=t,this._changed())}displayText(){return this._label||this._name}proxy(){return{name:this._name,label:this._label,type:this._type,default:this.default,sortable:this.sortable}}_changed(){var t;null===(t=this._owner)||void 0===t||t.$_fieldChanged(this)}}Wr.comparers={text:(t,e)=>null==t?null==e?0:-1:null==e||t>e?1:t<e?-1:0,number:Hr,bool:(t,e)=>(t=t?1:0)-(e=e?1:0),date:(t,e)=>t-e,bigint:Hr};class zr extends Wr{static createDerived(t,e,s=Br.TEXT){return new zr(t,e,s)}constructor(t,e,s=Br.TEXT){if(super(t,s),"function"!=typeof e)throw new qr(null,"Derive field's value extracter must be exists.");this._extracter=e}extract(t){return this._extracter(t)}}var Gr;!function(t){t.UPDATED="u",t.DELETED="d"}(Gr||(Gr={}));let Ur=0;class jr{constructor(){this.id=Ur++,this.row=-1,this.values={}}static createRow(t,e,s,i){const r=new jr;if(c.isObject(s)){const n=r.values;for(const e in t)n[e]=t[e].default;for(const e in s){const r=t[e];r&&(n[r.name]=r.readValue(i?i(e,s[e]):s[e]))}for(const t in e)n[t]=e[t].extract(n)}return r}static createRow2(t,e,s){const i=new jr;if(c.isObject(s)){const r=i.values;for(const e in t)r[e]=t[e].default;for(let e in s){const i=t[e];i&&(r[i.name]=i.readValue(s[e]))}for(const t in e)r[t]=e[t].extract(r)}return i}static findRow(t,e,s,i){if(c.isObject(e)){i<0&&(i=t.length);for(let r=s,n=Math.min(i,t.length);r<n;r++)if(t[r].match(e))return r}return-1}static findRows(t,e,s,i){const r=[];if(c.isObject(e)){i<0&&(i=t.length);for(let n=s,o=Math.min(i,t.length);n<o;n++)t[n].match(e)&&r.push(t[n].row)}return r}static findDistinctRows(t,e,s,i){function r(t,s){for(let i of e)if(t[i]!==s[i])return!1;return!0}function n(t,e){for(let s of e)if(r(s,t))return!0;return!1}const o=[];if(Array.isArray(e)&&e.length>0){const r=[];i<0&&(i=t.length);for(let h=s,a=Math.min(i,t.length);h<a;h++){const s=t[h].getValues(e);n(s,r)||(o.push(t[h].row),r.push(s))}}return o}getValues(t){const e=this.values,s={};return t.forEach((t=>{t in e&&(s[t]=e[t])})),s}match(t){const e=this.values;for(const s in t){const i=t[s];if(!(s in e))return!1;if(i instanceof RegExp){if(!i.test(e[s]))return!1}else if(i!==e[s])return!1}return!0}getProp(t,e){let s=this.values[t],i=0;for(;null!=s&&i<e.length;)s=s[e[i++]];return s}}class qr extends Error{static throw(t,e){throw new qr(t,e)}static throwFormat(t,e,s){throw new qr(t,S(e,s))}static throwFormat2(t,e,s,i){throw new qr(t,((t,e,s)=>t.replace("%1",e).replace("%2",s))(e,s,i))}constructor(t,e){super(e),this.data=t}}class Yr extends qr{constructor(t,e,s){super(t,s),this.field=e}}class Qr extends qr{constructor(t,e){super(t,e.message||e),this.error=e}}const Zr=15,Xr=16;class Kr extends p{static isCheckedFlag(t){return 1===t}static isCheckableFlag(t){return 2===t}static isDetailedFlag(t){return 8===t}static isUserFlag(t){return t>>Xr}constructor(t){if(super(),this._checkedCount=0,this._data=t){const e=t.rowCount(),s=this._rows=new Array(e);for(let t=0;t<e;t++)s[t]=0}else this._rows=[]}_doDestory(){this._data=null}get count(){return this._rows.length}checkedCount(){return this._checkedCount}isChecked(t){return 0!=(1&this._rows[t])}setChecked(t,e){return this.$_changeFlag(t,1,e)}checkRows(t,e){return this.$_changeRows(t,1,e)}checkRange(t,e,s){return this.$_changeRange(t,e,1,s)}checkAll(t){return this.$_changeAll(1,t)}getCheckedRows(t){return this.$_getFlagged(1,t,void 0)}isCheckable(t){return 0==(2&this._rows[t])}setCheckable(t,e){return this.$_changeFlag(t,2,!e)}setCheckables(t,e){return this.$_changeRows(t,2,!e)}setCheckableRange(t,e,s){return this.$_changeRange(t,e,2,!s)}setCheckableAll(t){return this.$_changeAll(2,!t)}getCheckableRows(t,e){return this.$_getFlagged(2,!t,e)}getSearchedRows(){return this.$_getFlagged(4,!0,void 0)}isSearched(t){return 0!=(4&this._rows[t])}setSearched(t,e){return this.$_changeFlag(t,4,e)}clearSearched(){return this.$_changeAll(4,!1)}isDetailed(t){return 0!=(8&this._rows[t])}setDetailed(t,e,s){return s&&this.detailAll(!1),this.$_changeFlag(t,8,e)}detailRows(t,e){return this.$_changeRows(t,8,e)}detailRange(t,e,s){return this.$_changeRange(t,e,8,s)}detailAll(t){return this.$_changeAll(8,t)}getDetailedRows(t){return this.$_getFlagged(8,t,void 0)}hasUserFlag(t,e){return e=1<<Xr+e,0!=(this._rows[t]&e)}getUserFlaggedRows(t,e){return this.$_getFlagged(1<<Xr+t,e,void 0)}setUserFlag(t,e,s){return s!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<Xr+e,s),!0)}setUserFlags(t,e,s){return this.$_changeRows(t,1<<Xr+e,s)}setUserFlagRange(t,e,s,i){return this.$_changeRange(t,e,1<<Xr+s,i)}setUserFlagAll(t,e){return this.$_changeAll(1<<Xr+t,e)}hasUiFlag(t,e){return e=1<<Zr+e,0!=(this._rows[t]&e)}getUiFlaggedRows(t,e){return this.$_getFlagged(1<<Zr+t,e,void 0)}setUiFlag(t,e,s){return s!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<Zr+e,s),!0)}setUiFlags(t,e,s){return this.$_changeRows(t,1<<Zr+e,s)}setUiFlagRange(t,e,s,i){return this.$_changeRange(t,e,1<<Zr+s,i)}setUiFlagAll(t,e){return this.$_changeAll(1<<Zr+t,e)}$_setFlag(t,e,s){s?this._rows[t]|=e:this._rows[t]&=~e}$_changeFlag(t,e,s){if(t>=0&&t<this._rows.length){if(0!=(this._rows[t]&e)!==s)return this.$_setFlag(t,e,s),1===e&&(this._checkedCount+=s?1:-1),this._data&&this._data._fireEvent("onDataFlagChanged",this,t,e),!0}return!1}$_changeRows(t,e,s){const i=[];if(Array.isArray(t)&&t.length>0){const r=this._rows;t.forEach((t=>{const n=0!=(r[t]&e);s!==n&&(this.$_setFlag(t,e,s),i.push(t))}))}return this._data&&i.length>0&&(1===e&&(this._checkedCount+=s?i.length:-i.length),this._data._fireEvent("onDataFlagsChanged",this,i,e)),i}$_changeRange(t,e,s,i){const r=this._rows,n=[];if(e>0&&t>=0&&t<r.length)for(let o=t,h=Math.min(r.length,t+e);o<h;o++){i!==(0!=(r[o]&s))&&(this.$_setFlag(o,s,i),n.push(o))}return this._data&&n.length>0&&(1===s&&(this._checkedCount+=i?n.length:-n.length),this._data._fireEvent("onDataFlagsChanged",this,n,s)),n}$_changeAll(t,e){const s=this._rows;let i=!1;for(let r=s.length-1;r>=0;r--){e!==(0!=(s[r]&t))&&(this.$_setFlag(r,t,e),i=!0)}return this._data&&i&&(1===t&&(this._checkedCount=e?s.length:0),this._data._fireEvent("onDataFlagAllChanged",this,t)),i}$_getFlagged(t,e,s){const i=[];for(let r=0,n=(s=s||this._rows).length;r<n;r++){e===(0!=(s[r]&t))&&i.push(r)}return i}}Kr.MAX_UI_FLAG=Zr,Kr.MAX_USER_FLAG=Xr;class Jr extends Kr{checkedCount(){return 0}isChecked(t){return!1}setChecked(t,e){return!1}checkRows(t,e){return[]}checkRange(t,e,s){return[]}checkAll(t){return!1}getCheckedRows(t){return[]}isCheckable(t){return!1}setCheckable(t,e){return!1}setCheckables(t,e){return[]}setCheckableRange(t,e,s){return[]}setCheckableAll(t){return!1}getCheckableRows(t){return[]}getSearchedRows(){return[]}isSearched(t){return!1}setSearched(t,e){return!1}clearSearched(){return!1}isDetailed(t){return!1}setDetailed(t,e,s){return!1}detailRows(t,e){return[]}detailRange(t,e,s){return[]}detailAll(t){return!1}getDetailedRows(t){return[]}hasUserFlag(t,e){return!1}getUserFlaggedRows(t,e){return[]}setUserFlag(t,e,s){return!1}setUserFlags(t,e,s){return[]}setUserFlagRange(t,e,s,i){return[]}setUserFlagAll(t,e){return!1}hasUiFlag(t,e){return!1}getUiFlaggedRows(t,e){return[]}setUiFlag(t,e,s){return!1}setUiFlags(t,e,s){return[]}setUiFlagRange(t,e,s,i){return[]}setUiFlagAll(t,e){return!1}}Jr.Instance=new Jr(null);class tn extends p{constructor(t){super(),this._flags={},this._data=t}_doDestory(){for(let t in this._flags)this._flags[t].destroy();this._data=null}isEmpty(){let t=!0;for(const e in this._flags){t=!1;break}return t}_rowAdded(t){const e=this._flags;for(let s in e)e[s]._rows.splice(t,0,0)}_rowsAdded(t){const e=this._flags;for(let s in e){const i=e[s]._rows;t.forEach((t=>{i.splice(t,0,0)}))}}_rowRangeAdded(t,e){const s=this._flags;for(let i in s){const r=s[i]._rows;for(let s=0;s<e;s++)r.splice(t+s,0,0)}}_cleared(t){const e=this._flags;for(let t in e){const s=e[t];s._rows.length=0,s._checkedCount=0}}_rowDeleted(t){const e=this._flags;for(let s in e){const i=e[s],r=i._rows;0!=(1&r[t])&&i._checkedCount--,r.splice(t,1)}}_rowsDeleted(t){const e=this._flags;for(let s in e){const i=e[s],r=i._rows;for(let e=t.length-1;e>=0;e--)0!=(1&r[t[e]])&&i._checkedCount--,r.splice(t[e],1)}}_rangeDeleted(t,e){const s=this._flags;for(let i in s){const r=s[i],n=r._rows;for(let s=0;s<e;s++)0!=(1&n[t+s])&&r._checkedCount--;n.splice(t,e)}}_rowMoved(t,e){const s=this._flags;for(let i in s){const r=s[i]._rows,n=r.splice(t,1)[0];r.splice(e,0,n)}}_rowsMoved(t,e,s){const i=this._flags;for(let r in i){const n=i[r]._rows,o=n.splice(t,e)[0];n.splice.apply(n,[s,0].concat(o))}}_reset(t){const e=this._flags;for(let s in e){const i=e[s],r=i._rows,n=new Array(t.length);t.forEach(((t,e)=>n[e]=r[t.tidx])),i._rows=n}}get(t){return this._flags[t.hash]}add(t){const e=t.hash;let s=this._flags[e];return s||(s=this._flags[e]=new Kr(this._data)),s}remove(t){this._flags[t.hash].destroy(),delete this._flags[t.hash]}}let en=1e7*Math.random()>>0;class sn extends m{static checkRow(t,e){(e<0||e>=t.rowCount())&&qr.throwFormat(t.wrapperOrThis(),v.invalidRowIndex,e)}static checkRows(t,e){const s=t.rowCount();e.forEach((e=>{(e<0||e>=s)&&qr.throwFormat(t.wrapperOrThis(),v.invalidRowIndex,e)}))}constructor(t){super(),this._name=t||"@_rt_data_"+en++,this._flags=new tn(this)}name(){return this._name}addFlags(t){return this._flags.add(t)}removeFlags(t){this._flags.remove(t)}getFlags(t){return this._flags.get(t)}flagChanged(t,e,s){this._fireEvent("onDataFlagChanged",t,e,s)}flagsChanged(t,e,s){this._fireEvent("onDataFlagsChanged",t,e,s)}flagAllChanged(t,e){this._fireEvent("onDataFlagAllChanged",t,e)}}const rn=Object.freeze({count:0,sum:0,min:NaN,max:NaN,avg:NaN,std:NaN,stdp:NaN,var:NaN,varp:NaN,ncount:0,nmin:NaN,nmax:NaN,navg:NaN,nstd:NaN,nstdp:NaN,nvar:NaN,nvarp:NaN});function nn(t,e,s,i){const r=Object.assign({},rn);s=Math.max(0,s),i=i<0?e.length:Math.min(e.length,i)+1;const n=r.count=i-s;if(r.count<1)return r;const o=t.name;let h=0,a=0,l=NaN,d=NaN,_=s;for(;_<i;){const t=e[_++].values[o];if(!isNaN(t)){h++,a=l=d=t;break}}for(;_<i;){const t=e[_++].values[o];isNaN(t)||(h++,a+=t,t<l&&(l=t),t>d&&(d=t))}if(h>0){r.sum=a,r.min=l,r.max=d,r.avg=a/n,r.ncount=h,r.navg=a/h;const t=r.avg,_=r.navg;let c=0,u=0,g=s;for(;g<i;){const s=e[g++].values[o];isNaN(s)||(c+=Math.pow(s-t,2),u+=Math.pow(s-_,2))}r.varp=c/n,r.var=c/(n-1),r.stdp=Math.sqrt(r.varp),r.std=Math.sqrt(r.var),r.nvarp=u/h,r.nvar=u/(h-1),r.nstdp=Math.sqrt(r.nvarp),r.nstd=Math.sqrt(r.nvar)}return r}class on extends f{constructor(t,e){super(),this._styleArgs={context:void 0,row:-1},this._owner=t,this._defs=e,!e&&this._doInitDefaults()}_doInitDefaults(){}hint(){return ie(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}cellStyle(){return ie(this._cellStyle,this._defs&&this._defs._cellStyle)}setCellStyle(t){t!==this._cellStyle&&(this._cellStyle=t,this._cellStyleChanged=!0,this._changed())}cellStyleCallback(){return ie(this._cellStyleCallback,this._defs&&this._defs._cellStyleCallback)}setCellStyleCallback(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._styleChanged=!0,this._changed())}styleCallback(){return ie(this._styleCallback,this._defs&&this._defs._styleCallback)}setStyleCallback(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}runCellStyle(t){return(t||this._cellStyleChanged)&&this._runCellStyle}runStyle(t){return(t||this._styleChanged)&&this._runStyle}getCellStyle(t){const e=this._runCellStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runCellStyle):this._runCellStyle}getStyle(t){const e=this._runStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runStyle):this._runStyle}prepareRender(){this._cellStyleChanged=this._cellStyleChanged||this._defs&&this._defs._cellStyleChanged,this._runCellStyle=this.cellStyle(),this._runCellStyleCallback=this.cellStyleCallback(),this._styleChanged=this._styleChanged||this._defs&&this._defs._styleChanged,this._runStyle=this.style(),this._runStyleCallback=this.styleCallback(),this._styleArgs.context=this.wrapperOrThis(),this._doPrepareRender()}unprepareRender(){this._styleChanged=!1,this._cellStyleChanged=!1,this._doUnprepareRender()}_changed(){this._owner&&this._owner.rowCellObjectChanged(this)}_doPrepareRender(){}_doUnprepareRender(){}}class hn extends on{_doInitDefaults(){super._doInitDefaults(),this._size=hn.SIZE}size(){return ie(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}}var an,ln,dn,_n,cn;hn.SIZE=24,function(t){t.ROW="row",t.LEVEL_ROW="levelRow"}(an||(an={}));class un extends on{_doInitDefaults(){super._doInitDefaults(),this._display=an.ROW,this._fitWidth=!0,this._rowOffset=1}display(){return ie(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}fitWidth(){return ie(this._fitWidth,this._defs&&this._defs._fitWidth)}setFitWidth(t){t!==this._fitWidth&&(this._fitWidth=t,this._changed())}rowOffset(){return ie(this._rowOffset,this._defs&&this._defs._rowOffset)}setRowOffset(t){(t=oe(t,0))!==this._rowOffset&&(this._rowOffset=t,this._changed())}prefix(){return ie(this._prefix,this._defs&&this._defs._prefix)}setPrefix(t){t!==this._prefix&&(this._prefix=t,this._changed())}suffix(){return ie(this._suffix,this._defs&&this._defs._suffix)}setSuffix(t){t!==this._suffix&&(this._suffix=t,this._changed())}getMeasureText(t){return this.runPrefix+(t+this.runOffset)+this.runSuffix}getText(t,e){return this.runDisplay===an.LEVEL_ROW&&(e=t.levelRowOfRow(e)),this.runPrefix+(e+this.runOffset)+this.runSuffix}_doPrepareRender(){this.runDisplay=this.display(),this.runOffset=this.rowOffset(),this.runPrefix=this.prefix()||"",this.runSuffix=this.suffix()||""}}!function(t){t.NONE="none",t.TOGGLE="toggle",t.CHECK="check",t.UNCHECK="uncheck"}(ln||(ln={}));class gn extends on{_doInitDefaults(){super._doInitDefaults(),this._size=gn.SIZE,this._masterVisible=!1,this._dragMode=ln.CHECK}size(){return ie(this._size,this._defs&&this._defs._size)}setSize(t){t!=this._size&&(this._size=t,this._changed())}masterVisible(){return ie(this._masterVisible,this._defs&&this._defs._masterVisible)}setMasterVisible(t){t!==this._masterVisible&&(this._masterVisible=t,this._changed())}dragMode(){return ie(this._dragMode,this._defs&&this._defs._dragMode)}setDragMode(t){this._dragMode=t}canDrag(){const t=this.dragMode();return t&&t!==ln.NONE}}gn.SIZE=22;class pn extends on{constructor(t,e,s){super(t,s),s||(this._label=this._label||e,this._doInitButton(t))}label(){return ie(this._label,this._defs&&this._defs._label)}setLabel(t){t!==this._label&&(this._label=t,this._changed())}imageUrl(){return ie(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return ie(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return ie(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._heightD=k(t,!1),this._changed())}isRelativeHeight(){return void 0!==this._height?this._heightD&&!this._heightD.fixed:this._defs?this._defs.isRelativeHeight():void 0}className(){return ie(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}letter(){return ie(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=c.copyObject(t),this._changed())}onClick(){return ie(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}click(t,e){const s=this.onClick();s&&s(this._getArgs(e))||this._doClick(t,e)}_doInitButton(t){}_getArgs(t){return{button:this.wrapperOrThis(),row:t}}_doClick(t,e){return!1}}class fn extends on{_doInitDefaults(){super._doInitDefaults(),this._width=fn.DEF_SIZE,this._height=fn.DEF_SIZE,this._clickable=!1}imageUrl(){return ie(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return ie(this._width,this._defs&&this._defs._width)}setWidth(t){(t=oe(t,0))!==this._width&&(this._width=t,this._changed())}height(){return ie(this._height,this._defs&&this._defs._height)}setHeight(t){(t=oe(t,0))!==this._height&&(this._height=t,this._changed())}clickable(){return ie(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}urlCallback(){return ie(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}onClick(){return ie(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getImageUrl(t){const e=this.urlCallback();return ie(e&&e({model:this.wrapperOrThis(),row:t}),this.imageUrl())}click(t,e){if(this._clickable){const s=this.onClick();s&&s({model:this.wrapperOrThis(),row:t,imageUrl:e})}}}fn.DEF_SIZE=24;class wn extends on{constructor(){super(...arguments),this._shapeArgs={model:void 0,row:-1},this._clickArgs={model:void 0,row:-1,shape:void 0}}_doInitDefaults(){super._doInitDefaults(),this._size=wn.SIZE,this._shape=wn.SHAPE,this._clickable=!1}size(){return ie(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}shape(){return ie(this._shape,this._defs&&this._defs._shape)}setShape(t){t!==this._shape&&(this._shape=t,this._changed())}clickable(){return ie(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}shapeCallback(){return ie(this._shapeCallback,this._defs&&this._defs._shapeCallback)}setShapeCallback(t){this._shapeCallback=t}onClick(){return ie(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getShape(t){const e=this.shapeCallback();if(e){const s=this._shapeArgs;s.model=this.wrapperOrThis(),s.row=t;const i=e(s);return void 0!==i?i:this.shape()}return this.shape()}click(t,e){const s=this.clickable()&&this.onClick();if(s){const i=this._clickArgs;i.model=this.wrapperOrThis(),i.row=t,i.shape=e,s(i)}}}wn.SIZE=20,wn.SHAPE="@star";class mn extends on{_doInitDefaults(){super._doInitDefaults(),this._letter="Σ"}letter(){return ie(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=t,this._changed())}}!function(t){t.NONE="none",t.HEAD="head",t.FOOT="foot"}(dn||(dn={}));class yn extends pn{constructor(t,e){super(t,">",e)}_doInitDefaults(){this._position=dn.FOOT}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}}!function(t){t.NONE="none",t.MOVE="move",t.INFO="info",t.DELETE="delete",t.ADD="add",t.EDIT="edit",t.LINK="link",t.CUSTOM="custom"}(_n||(_n={}));class bn extends pn{confirmMessage(){return ie(this._confirmMessage,this._defs&&this._defs._confirmMessage)}setConfirmMessage(t){this._confirmMessage=t}_doClick(t,e){const s=this.confirmMessage();return s&&!confirm(s)||t.owner().data().deleteRow(e,!1),!0}}class vn extends pn{editHeader(){return ie(this._editHeader,this._defs&&this._defs._editHeader)}setEditHeader(t){t!==this._editHeader&&(this._editHeader=t,this._changed())}editTemplate(){return ie(this._editTemplate,this._defs&&this._defs._editTemplate)}setEditTemplate(t){t!==this._editTemplate&&(this._editTemplate=t,this._changed())}_doClick(t,e){const s={header:this.editHeader(),template:this.editTemplate()};return t.control().showEditPage(e,s,!0),!0}}class Cn extends vn{_doInitButton(t){this.appending=!1,this.setLetter({letter:"+",size:25})}_doClick(t,e){return super._doClick(t,-1)}}class Sn extends pn{infoHeader(){return ie(this._infoHeader,this._defs&&this._defs._infoHeader)}setInfoHeader(t){t!==this._infoHeader&&(this._infoHeader=t,this._changed())}infoTemplate(){return ie(this._infoTemplate,this._defs&&this._defs._infoTemplate)}setInfoTemplate(t){t!==this._infoTemplate&&(this._infoTemplate=t,this._changed())}_doInitButton(t){this.setLetter({letter:"ⓘ",transparent:!0}),this.setStyle({fontSize:"28px"})}_doClick(t,e){const s={header:this.infoHeader(),template:this.infoTemplate()};return t.control().showInfoPage(e,s,!0),!0}}class Rn extends pn{_doInitDefaults(){this._target="_self",this.setLetter({letter:"→",transparent:!0})}target(){return ie(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}url(){return ie(this._url,this._defs&&this._defs._url)}setUrl(t){this._url=t}urlCallback(){return ie(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}getUrl(t){const e=this.urlCallback();return ie(e&&e(this._getArgs(t)),this.url())}_doClick(t,e){const s=this.getUrl(e);return s&&window.open(s,this._target),!0}}class xn extends wr{constructor(t,e,s){super(t,s),this._buttons={},this._handles={},this._owner=e,this._delete=new bn(this,xn.DELETE_LABEL,s&&s._delete),this._add=new Cn(this,xn.ADD_LABEL,s&&s._add),this._edit=new vn(this,xn.EDIT_LABEL,s&&s._edit),this._info=new Sn(this,xn.INFO_LABEL,s&&s._info),this._link=new Rn(this,xn.LINK_LABEL,s&&s._link),this._custom=new pn(this,xn.CUSTOM_LABEL,s&&s._custom),this._move=new hn(this,s&&s._move),this._buttons[_n.DELETE]=this._delete,this._buttons[_n.ADD]=this._add,this._buttons[_n.EDIT]=this._edit,this._buttons[_n.INFO]=this._info,this._buttons[_n.LINK]=this._link,this._buttons[_n.CUSTOM]=this._custom,this._handles[_n.MOVE]=this._move}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setPosition(gr.FAR),this._action=_n.CUSTOM}owner(){return this._owner}action(){return ie(this._action,this._defs&&this._defs._action)}setAction(t){t!==this._action&&(this._action=t,this._changed())}delete(){return this._delete}add(){return this._add}edit(){return this._edit}info(){return this._info}link(){return this._link}custom(){return this._custom}move(){return this._move}getAction(t){return this._runAction}getButton(t){return this._buttons[t]}getHandle(t){return this._handles[t]}_doPrepareRender(){switch(super._doPrepareRender(),this._runAction=this.action()){case _n.INFO:this._info.prepareRender();break;case _n.DELETE:this._delete.prepareRender();break;case _n.ADD:this._add.prepareRender();break;case _n.EDIT:this._edit.prepareRender();break;case _n.LINK:this._link.prepareRender();break;case _n.CUSTOM:this._custom.prepareRender();break;case _n.MOVE:this._move.prepareRender()}}}xn.DELETE_LABEL="Delete",xn.DETAIL_LABEL="More",xn.LINK_LABEL=">",xn.ADD_LABEL="Add",xn.EDIT_LABEL="Edit",xn.INFO_LABEL="Info",xn.CUSTOM_LABEL="?",function(t){t.NONE="none",t.ORDER="order",t.CHECK="check",t.SHAPE="shape",t.LETTER="letter",t.IMAGE="image",t.BUTTON="button",t.MOVE="move"}(cn||(cn={}));class Vn extends pn{_doInitDefaults(){this.setLabel("...")}}class En extends wr{constructor(t,e,s){super(t,s),this.needOrderWidth=!1,this.orderWidth=NaN,this._owner=e,this._order=new un(this,s&&s._order),this._check=new gn(this,s&&s._check),this._shape=new wn(this,s&&s._shape),this._letter=new mn(this,s&&s._letter),this._image=new fn(this,s&&s._image),this._button=new Vn(this,void 0,s&&s._button),this._move=new hn(this,s&&s._move)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._display=En.DISPLAY}owner(){return this._owner}display(){return ie(this._display,this._defs&&this._defs._display)}setDisplay(t){t!==this._display&&(this._display=t,this._displayChanged=!0,this.needOrderWidth=!0,this._changed())}order(){return this._order}check(){return this._check}shape(){return this._shape}letter(){return this._letter}image(){return this._image}button(){return this._button}move(){return this._move}getDisplay(t){return this.disp}isMaster(t){return this._owner.isMaster(t)}_doPrepareRender(){switch(super._doPrepareRender(),this.disp=this.display()){case cn.ORDER:this.needOrderWidth=this._order.fitWidth(),this.orderWidth=NaN,this._order.prepareRender();break;case cn.CHECK:this._check.prepareRender();break;case cn.SHAPE:this._shape.prepareRender();break;case cn.LETTER:this._letter.prepareRender();break;case cn.IMAGE:this._image.prepareRender();break;case cn.BUTTON:this._button.prepareRender();break;case cn.MOVE:this._move.prepareRender()}this._displayChanged=this._displayChanged||this._defs&&this._defs._displayChanged}_doUnprepareRender(){switch(super._doUnprepareRender(),this.disp=this.display()){case cn.ORDER:this._order.unprepareRender();break;case cn.CHECK:this._check.unprepareRender();break;case cn.SHAPE:this._shape.unprepareRender();break;case cn.LETTER:this._letter.unprepareRender();break;case cn.IMAGE:this._image.unprepareRender();break;case cn.BUTTON:this._button.unprepareRender();break;case cn.MOVE:this._move.unprepareRender()}this._displayChanged=!1,this._defs&&this._defs.unprepareRender()}}En.DISPLAY=cn.ORDER,En.TAG="rowBar";var $n=4,An=.001,Ln=1e-7,Tn=10,kn=11,Dn=1/(kn-1),Nn="function"==typeof Float32Array;function Pn(t,e){return 1-3*e+3*t}function Mn(t,e){return 3*e-6*t}function In(t){return 3*t}function On(t,e,s){return((Pn(e,s)*t+Mn(e,s))*t+In(e))*t}function Bn(t,e,s){return 3*Pn(e,s)*t*t+2*Mn(e,s)*t+In(e)}function Fn(t){return t}const Hn=Math.pow,Wn=Math.sqrt,zn=Math.sin,Gn=Math.cos,Un=Math.PI,jn=1.70158,qn=1.525*jn,Yn=jn+1,Qn=2*Un/3,Zn=2*Un/4.5,Xn=function(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375},Kn=function(t,e,s,i){if(!(0<=t&&t<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&s===i)return Fn;for(var r=Nn?new Float32Array(kn):new Array(kn),n=0;n<kn;++n)r[n]=On(n*Dn,t,s);function o(e){for(var i=0,n=1,o=kn-1;n!==o&&r[n]<=e;++n)i+=Dn;--n;var h=i+(e-r[n])/(r[n+1]-r[n])*Dn,a=Bn(h,t,s);return a>=An?function(t,e,s,i){for(var r=0;r<$n;++r){var n=Bn(e,s,i);if(0===n)return e;e-=(On(e,s,i)-t)/n}return e}(e,h,t,s):0===a?h:function(t,e,s,i,r){var n,o,h=0;do{(n=On(o=e+(s-e)/2,i,r)-t)>0?s=o:e=o}while(Math.abs(n)>Ln&&++h<Tn);return o}(e,i,i+Dn,t,s)}return function(t){return 0===t?0:1===t?1:On(o(t),e,i)}}(.01,.99,.01,.99),Jn={linear:t=>t,inQuad:t=>t*t,outQuad:t=>1-(1-t)*(1-t),inOutQuad:t=>t<.5?2*t*t:1-Hn(-2*t+2,2)/2,inCubic:t=>t*t*t,outCubic:t=>1-Hn(1-t,3),outCubic2:t=>1-Hn(1-t,4),inOutCubic:t=>t<.5?4*t*t*t:1-Hn(-2*t+2,3)/2,inQuart:t=>t*t*t*t,outQuart:t=>1-Hn(1-t,4),inOutQuart:t=>t<.5?8*t*t*t*t:1-Hn(-2*t+2,4)/2,inQuint:t=>t*t*t*t*t,outQuint:t=>1-Hn(1-t,5),inOutQuint:t=>t<.5?16*t*t*t*t*t:1-Hn(-2*t+2,5)/2,inSine:t=>1-Gn(t*Un/2),outSine:t=>zn(t*Un/2),inOutSine:t=>-(Gn(Un*t)-1)/2,inExpo:t=>0===t?0:Hn(2,10*t-10),outExpo:t=>1===t?1:1-Hn(2,-10*t),outExpo2:t=>1===t?1:1-Hn(2,-12*t),inOutExpo:t=>0===t?0:1===t?1:t<.5?Hn(2,20*t-10)/2:(2-Hn(2,-20*t+10))/2,inCirc:t=>1-Wn(1-Hn(t,2)),outCirc:t=>Wn(1-Hn(t-1,2)),inOutCirc:t=>t<.5?(1-Wn(1-Hn(2*t,2)))/2:(Wn(1-Hn(-2*t+2,2))+1)/2,inBack:t=>Yn*t*t*t-jn*t*t,outBack:t=>1+Yn*Hn(t-1,3)+jn*Hn(t-1,2),inOutBack:t=>t<.5?Hn(2*t,2)*(7.189819*t-qn)/2:(Hn(2*t-2,2)*((qn+1)*(2*t-2)+qn)+2)/2,inElastic:t=>0===t?0:1===t?1:-Hn(2,10*t-10)*zn((10*t-10.75)*Qn),outElastic:t=>0===t?0:1===t?1:Hn(2,-10*t)*zn((10*t-.75)*Qn)+1,inOutElastic:t=>0===t?0:1===t?1:t<.5?-Hn(2,20*t-10)*zn((20*t-11.125)*Zn)/2:Hn(2,-20*t+10)*zn((20*t-11.125)*Zn)/2+1,inBounce:t=>1-Xn(1-t),outBounce:Xn,inOutBounce:t=>t<.5?(1-Xn(1-2*t))/2:(1+Xn(2*t-1))/2,cubicBezier:t=>function(t,e,s,i,r){const n=3*(s-e),o=3*(i-s)-n;return(r-e-n-o)*Math.pow(t,3)+o*Math.pow(t,2)+n*t+e}(t,.01,.99,.01,.99),cubicBezier2:t=>Kn(t),scroll:t=>.5*(1-Gn(Un*t))};class to extends p{static create(t,e,s=1e3,i="linear"){return new eo(t,e,s,i).start()}constructor(t,e){super(),this._duration=t,this._easing=e&&Jn[e]||Jn.linear}_doDestory(){this.stop()}isFinished(){return!this._timer}start(){return this.stop(),this._started=+new Date,this._timer=c.setInterval((()=>{const t=this.$_getStep();if(t>=1)this._doStep(1),this.$_stop(t);else try{this._doStep(t)}catch(e){throw this.$_stop(t),e}}),20),this._doStep(0),this._timer.runner&&this._timer.runner(),this}stop(){this._timer&&this.$_stop(this.$_getStep())}$_getStep(){const t=isNaN(this._timer.step)?(+new Date-this._started)/this._duration:this._timer.step;return this._easing(t)}$_stop(t){c.clearInterval(this._timer),this._timer=void 0,this._doStop(t,t<1)}}class eo extends to{constructor(t,e,s,i){super(s,i),this.onstep=t,this.onfinish=e}_doStep(t){this.onstep(t)}_doStop(t,e){var s;null===(s=this.onfinish)||void 0===s||s.call(this,t,e)}}class so{constructor(t){this._touches=[],this._tapped=0,this._firstTime=0,this._secondTime=0,this._control=t}get control(){return this._control}get dragTracker(){return this._dragTracker}setDragTracker(t){t!=this._dragTracker&&(this._dragTracker&&this._dragTracker.cancel(),this._dragTracker=t)}get dragging(){return this._dragTracker&&this._dragTracker.dragging}touchX(){return this._touchX}touchY(){return this._touchY}pointerDown(t){if(!t.isPrimary)return;clearTimeout(this._longTimer),this._primaryId=t.pointerId;const e=this._touchElement=c.cast(t.target,Element);if(!e)return;let s;return this._draggable=!0,s=this.$_pointerToPoint(t),this._dragTracker&&this.$_stopDragTracker(e,s.x,s.y),this._prevX=s.x,this._prevY=s.y,0===this._tapped?(this._firstTime=t.timeStamp,this._touchX=s.x,this._touchY=s.y):this._secondTime=t.timeStamp,this._touches=[{x:s.x,y:s.y,t:t.timeStamp}],this._longTimer=setTimeout((()=>{this._tapped=0,this._doLongPressed(e,this._touchX,this._touchY)}),this._control.longPressDelay),this._doPointerDown(e)}_stopEvent(t){t.cancelable&&t.preventDefault(),t.stopImmediatePropagation()}$_doDrag(t,e,s,i){if(!this.$_drag(e,this._prevX,this._prevY,s,i))return this.$_stopDragTracker(e,s,i,!0),this._stopEvent(t),!0}$_startMove(t,e,s,i){clearTimeout(this._longTimer),this._tapped=0,this.$_startDrag(e,this._prevX,this._prevY,s,i)&&(this._clearTouchEffects(),s!==this._prevX||i!==this._prevY?this.$_doDrag(t,e,s,i):this._stopEvent(t))}pointerMove(t){if(t.buttons>=1||0===t.buttons&&0===t.button&&t.pointerId===this._primaryId){const{x:e,y:s}=this.$_pointerToPoint(t),i=this.dragging,r=t.target;e<0||e>=this._control.dom().offsetWidth||s<0||s>=this._control.dom().offsetHeight?i&&this.$_stopDragTracker(r,e,s,!0):i?this.$_doDrag(t,r,e,s):(!this._dragTracker&&Math.abs(this._prevX-e)>3||Math.abs(this._prevY-s)>3||this._dragTracker&&!i)&&this.$_startMove(t,r,e,s),this._prevX=e,this._prevY=s,this._touches.push({x:e,y:s,t:t.timeStamp}),this._doPointerMove(r)}this.dragging&&this._stopEvent(t)}pointerUp(t){const e=c.cast(t.target,Element);if(clearTimeout(this._longTimer),this._clearTouchEffects(),t.isPrimary||this._primaryId===t.pointerId)if((!this._dragTracker||this._dragTracker.canSwipe())&&this._draggable&&this.$_checkSwipe(e,t))this._tapped=0;else{const{x:s,y:i}=this.$_pointerToPoint(t);let r=t.target;e&&e.contains(r)&&(r=e),this.dragging?(this._tapped=0,this.$_stopDragTracker(r,s,i)):0===this._tapped?this._tapped=1:1===this._tapped&&(t.timeStamp-this._firstTime<300?this._tapped=0:(this._firstTime=this._secondTime,this._touchX=this._prevX,this._touchY=this._prevY))}else this.dragging&&this.$_stopDragTracker(e,this._prevX,this._prevY);this._dragTracker=null}pointerCancel(t){clearTimeout(this._longTimer),this._clearTouchEffects(),this._doPointerCancel(t)}pointerLeave(t){clearTimeout(this._longTimer),this._clearTouchEffects(),this._doPointerLeave(t)}touchMove(t){return this._doTouchMove(t,c.cast(t.target,Element))}click(t){const e=c.cast(t.target,Element);e&&this._doClick(t,e)}dblClick(t){const e=c.cast(t.target,Element);e&&this._doDblClick(e)}keyPress(t){this._doKeyPress(t)}wheel(t){this._doWheel(t)&&this._stopEvent(t)}requestDrag(t){const e=this.getTrackerFromRequest(t);e&&this.setDragTracker(e)}getTrackerFromRequest(t){}_setDraggable(t){this._draggable=t}_doClick(t,e){}_doDblClick(t){}_doPointerDown(t){return!0}_doPointerMove(t){}_doPointerUp(t){return!0}_doPointerCancel(t){}_doPointerLeave(t){}_doTouchMove(t,e){return!0}_doLongPressed(t,e,s){}_doKeyPress(t){}_doWheel(t){return!0}_doSwipe(t,e,s,i,r){return!1}_getDragTracker(t,e,s){return null}$_startDrag(t,e,s,i,r){return!this._dragTracker&&this._draggable&&this.setDragTracker(this._getDragTracker(t,i-e,r-s)),!!this._dragTracker&&this._dragTracker.start(t,e,s,i,r)}$_drag(t,e,s,i,r){return this._dragTracker.drag(t,e,s,i,r)}$_stopDragTracker(t,e,s,i=!1){this.dragging&&(i?this._dragTracker.cancel():this._dragTracker.drop(null,e,s),this._dragTracker=null)}$_pointerToPoint(t){const e=this._control.dom().getBoundingClientRect();return{x:t.pageX-e.left,y:t.pageY-e.top}}$_checkSwipe(t,e){const s=this._touches,i=s.length;if(i<2)return;const r=s[i-1];let n=s[i-2];if(r.t-n.t<=100)for(let t=i-3;t>=0&&(n=s[t],!(r.t-n.t>100));t--);const o=n.x,h=n.y,a=r.x,l=r.y,d=Math.sqrt(Math.pow(o-a,2)+Math.pow(h-l,2))/Math.max(16,r.t-n.t),_=.998;if(d>.1){const e=this._dragTracker,s=Math.log(.1/d)/Math.log(_),i=d*(1-Math.pow(_,s+1))/(1-_);let r,n=Math.round(180*Math.atan2(l-h,a-o)/Math.PI);if(n<0&&(n=360+n),r=n>45&&n<=135?W.DOWN:n>135&&n<=225?W.LEFT:n>225&&n<=315?W.UP:W.RIGHT,this.dragging){if(e.swipe(r,1.6*s,1.3*i))return!0;this.$_stopDragTracker(t,this._prevX,this._prevY)}return this._doSwipe(t,e,r,1.6*s,1.3*i)}return!1}_clearTouchEffects(){}}class io extends p{}class ro extends p{constructor(t){super(),this._dragging=!1,this._control=t}get control(){return this._control}get dragging(){return this._dragging}get startWhenCreated(){return!1}get cursor(){}canSwipe(){return!1}start(t,e,s,i,r){return this.cancel(),!!this._doStart(t,e,s,i,r)&&(this._dragging=!0,this._showFeedback(i,r),!0)}drag(t,e,s,i,r){return!(!this._dragging||!this._doDrag(t,e,s,i,r))&&(this._moveFeedback(i,r),!0)}cancel(){if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this.end()}}drop(t,e,s){if(this._dragging)try{this._dragging=!1,this._canAccept(t,e,s)?this._doCompleted(t,e,s):this._doCanceled()}finally{this.end(e,s)}}swipe(t,e,s){if(this._doSwipe(t,e,s))return this.end(),!0}end(t=-1,e=-1){try{this._dragging=!1,this._hideFeedback()}finally{this._doEnded(t,e)}}_doSwipe(t,e,s){return!1}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,s,i,r){return!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(t=-1,e=-1){}}class no extends p{constructor(t,e,s,i,r,n){super(),this.distance=t,this.duration=e,this.threshold=s,this.handler=i,this.endHandler=r,this.startHandler=n,this._easing=Jn.outQuint,this._stopped=!1}_doDestory(){this.stop()}$_handler(){try{const t=+new Date-this._started;if(t>this.duration)this.stop();else if(t>0){const e=this._easing(t/this.duration),s=this.distance*(e-this._prev);s<this.threshold||!0===this.handler(s,t/this.duration)?this.stop():this._prev=e}this._stopped||requestAnimationFrame(this.$_handler.bind(this))}catch(t){throw this.stop(),t}}run(){var t;return this.stop(),this._started=+new Date,this._stopped=!1,this._prev=0,requestAnimationFrame(this.$_handler.bind(this)),null===(t=this.startHandler)||void 0===t||t.call(this),this}stop(){var t;this._stopped||(this._stopped=!0,null===(t=this.endHandler)||void 0===t||t.call(this))}}const oo=function(t,e,s){const i=t.style;let r=t[Et];if(t instanceof HTMLElement?t.className=e:Fe.resetClassList(t,e),r)for(const t in r)i[t]="";r={},"string"==typeof s?t.classList.add(s):s&&(Object.assign(r,s),Object.assign(i,s)),t[Et]=r};class ho extends We{constructor(){super(...arguments),this._prevStyle={}}static measureButton(t,e,s){const i=t.dom,r=e.letter();let n=+e.width(),o=+e.height();return r?(n=r.size||n,o=r.size||o,s.dataset.type=r.transparent?"letter-transparent":"letter",s.textContent=r.letter):(delete s.dataset.type,s.textContent=e.label()),Fe.setAttr(s,"aria-label",e.hint()),isNaN(n)?s.style.width="":s.style.width=n+"px",(t.hRelative=e.isRelativeHeight())?(s.style.height="100%",i.style.height=String(o)):(s.style.height=isNaN(o)?"":o+"px",i.style.height=""),{width:i.offsetWidth+1,height:i.offsetHeight}}getDragRequest(t,e){if(this._move&&this._move.dom().contains(t))return new lo(this.row)}setTable(t){this.setData("table",t?"1":void 0)}_getDisplayStyle(){return"flex"}_getOverflow(){return"hidden"}_doInitDom(t,e){We.BOUNDING&&(e.style.border=We.BOUNDING_BORDER),Object.assign(e.style,{alignItems:"center",justifyContent:"center"})}isDom(t){return this._move&&this._move.dom().contains(t)}$_prepareMove(t,e,s,i){const r=this.dom;let n=this._move;return n?n.attached()||n.appendTo(r):(n&&n.destroy(),n=this._move=this.control.shapes().createStock(r.ownerDocument,"@drag"),n.appendTo(r)),n.resize(t.size()),oo(r,co.CLASS_NAME,s),oo(n.dom(),co.MOVE_CLASS,i),n.dom()}}ho.MOVE_CLASS="rtc-rowbar-move";const ao={display:"block",position:"relative",boxSizing:"border-box"};class lo extends io{constructor(t){super(),this.row=t}}class _o extends io{constructor(t){super(),this.row=t}}class co extends ho{static none_measure(t,e,s,i,r){return t.$_prepareNone(),{width:0,height:0}}static order_measure(t,e,s,i,r){const n=s.order(),o=t.$_prepareOrder(n.getCellStyle(r),n.getStyle(r)),h=n.getText(i,r);let a;if(s.needOrderWidth){if(isNaN(s.orderWidth)){const t=Math.ceil(Math.log10(i.rowCount()+n.rowOffset()));o.textContent=n.getMeasureText(+"8".repeat(t)),s.orderWidth=e.offsetWidth}return a=s.orderWidth,o.textContent=h,{width:a,height:NaN}}return o.textContent=h,void(a=e.offsetWidth)}static check_measure(t,e,s,i,r){const n=s.check();if(!s.isMaster(r)||n.masterVisible()){const e=n.size();t.$_prepareCheck(e,n.getCellStyle(r),n.getStyle(r),!0)}else t.$_prepareCheck(0,n.runStyle(s._displayChanged),n.getStyle(r),!1)}static letter_measure(t,e,s,i,r){const n=s.letter();t.$_prepareLetter(n.getCellStyle(r),n.getStyle(r)).textContent=s.letter().letter()}static shape_measure(t,e,s,i,r){const n=s.shape(),o=n.size();return t.$_prepareShape(n,r,n.getCellStyle(r),n.getStyle(r)),{width:o,height:o}}static image_measure(t,e,s,i,r){const n=s.image(),o=n.width(),h=n.height();return t.$_prepareImage(n,r,n.getCellStyle(r),n.getStyle(r),o,h),{width:o,height:h}}static button_measure(t,e,s,i,r){const n=s.button();return ho.measureButton(t,n,t.$_prepareButton(n.getCellStyle(r),n.getStyle(r)))}static move_measure(t,e,s,i,r){const n=s.move(),o=n.size();return t.$_prepareMove(n,r,n.getCellStyle(r),n.getStyle(r)),{width:o,height:o}}static none_render(t,e,s){}static order_render(t,e,s){}static check_render(t,e,s){if(t.visible){const e=t.dom.firstElementChild;e.lastElementChild.checked=t.checked,Fe.setAttr(e.lastElementChild,"aria-checked",t.checked),Fe.setData(e,"check",t.checkable?t.checked?"c":"":t.checked?"1":"-1")}}static letter_render(t,e,s){}static shape_render(t,e,s){}static image_render(t,e,s){}static button_render(t,e,s){}static move_render(t,e,s){}constructor(t){super(t,null,co.CLASS_NAME,Oe)}measure(t,e,s,i,r){const n=co.Measurers[this._display=t.getDisplay(s)],o=this.dom;this.dv=e,this.row=s,o.dataset.row=String(s),this.checked=t.owner().isRowChecked(s),this.checkable=t.owner().isRowCheckable(s),this.hRelative=!1,this.internalClearSize();const h=n?n(this,o,t,e,s):{width:0,height:0};if(h){const t=Fe.getPadding(o);this.wMeasure=isNaN(h.width)?o.offsetWidth:h.width+t.left+t.right,this.hMeasure=isNaN(h.height)?o.offsetHeight:h.height+t.top+t.bottom}else this.wMeasure=o.offsetWidth,this.hMeasure=o.offsetHeight;return{width:this.wMeasure,height:this.hMeasure}}render(t,e,s){this.internalResize(e,s);const i=co.Renderrs[this._display];i&&i(this,this.wMeasure,this.hMeasure)}click(t,e){const s=this.row;this._check&&this._check.contains(e)?t.owner().toggleChecked(s,!1):e===this._button?t.button().click(this,s):this._shape&&this._shape.containsDom(e)?t.shape().click(s,this._shape[St]):e===this._image&&t.image().click(s,this._image[St])}getCheck(){return this._check.lastElementChild}displayOfDom(t){if(this._check&&this._check.contains(t))return cn.CHECK}isDom(t){return super.isDom(t)||this._check&&this._check.contains(t)||this._shape&&this._shape.dom().contains(t)||t===this._image||t===this._button||super.isDom(t)}getDragRequest(t,e){return this._check&&this._check.contains(t)&&e._rowBar.check().canDrag()?new _o(this.row):super.getDragRequest(t,e)}$_prepareNone(){Fe.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._shape,this._button,this._move])}$_prepareOrder(t,e){const s=this.dom;let i=this._order;return Fe.removeChildren(s,[this._check,this._image,this._letter,this._shape,this._button,this._move]),i?i.parentElement||s.appendChild(i):(i=this._order=s.ownerDocument.createElement("span"),i.style.whiteSpace="pre",s.appendChild(i)),oo(s,co.CLASS_NAME,t),oo(i,co.ORDER_CLASS,e),this._order}$_prepareCheck(t,e,s,i){if(this.visible=i){const i=this.dom,r=i.ownerDocument;let n,o,h=this._check;return Fe.removeChildren(i,[this._order,this._image,this._letter,this._shape,this._button,this._move]),h?h.parentElement||i.appendChild(h):(h=this._check=r.createElement("div"),i.appendChild(h),o=this.control.shapes().create(Cr,null),o.setStyle(ao),o.resize(t),o.appendTo(h),n=r.createElement("input"),n.type="checkbox",Object.assign(n.style,{position:"absolute",left:"0",top:"0",opacity:"0",clipPath:"circle(0)",appearance:"none"}),h.appendChild(n)),oo(i,co.CLASS_NAME,e),oo(h,co.CHECK_CLASS,s),h}}$_prepareImage(t,e,s,i,r,n){const o=this.dom;let h=this._image;return Fe.removeChildren(o,[this._order,this._check,this._letter,this._shape,this._button,this._move]),h?h.parentElement||o.appendChild(h):(h=this._image=o.ownerDocument.createElement("img"),o.appendChild(h)),oo(o,co.CLASS_NAME,s),oo(h,co.IMAGE_CLASS,i),h.width=r,h.height=n,h[St]=h.src=t.getImageUrl(e),h}$_prepareLetter(t,e){const s=this.dom;let i=this._letter;return Fe.removeChildren(s,[this._order,this._check,this._image,this._shape,this._button,this._move]),i?i.parentElement||s.appendChild(i):(i=this._letter=s.ownerDocument.createElement("span"),i.style.whiteSpace="pre",s.appendChild(i)),oo(s,co.CLASS_NAME,t),oo(i,co.LETTER_CLASS,e),i}$_prepareShape(t,e,s,i){const r=this.dom,n=t.getShape(e);let o=this._shape;return Fe.removeChildren(r,[this._order,this._check,this._image,this._letter,this._button,this._move]),o&&n===o[St]?(o instanceof vr&&o.setShape(this.control.shapes().getCustom(n)),o.attached()||o.appendTo(r)):(o&&o.destroy(),o=this._shape=this.control.shapes().createStock(r.ownerDocument,n)||this.control.shapes().createCustom(n,null,null),o.appendTo(r)),o.resize(t.size()),o[St]=n,oo(r,co.CLASS_NAME,s),oo(o.dom(),co.SHAPE_CLASS,i),o.dom()}$_prepareButton(t,e){const s=this.dom;let i=this._button;return Fe.removeChildren(s,[this._order,this._image,this._letter,this._check,this._shape,this._move]),i?i.parentElement||s.appendChild(i):(i=this._button=s.ownerDocument.createElement("button"),Object.assign(i.style,co.BUTTON_STYLE),s.appendChild(i)),oo(s,co.CLASS_NAME,t),oo(i,co.BUTTON_CLASS,e),i}$_prepareMove(t,e,s,i){return Fe.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._button,this._shape]),super.$_prepareMove(t,e,s,i)}}co.CLASS_NAME="rtc-rowbar-cell",co.ORDER_CLASS="rtc-rowbar-order",co.IMAGE_CLASS="rtc-rowbar-image",co.CHECK_CLASS="rtc-rowbar-check",co.SHAPE_CLASS="rtc-rowbar-shape",co.LETTER_CLASS="rtc-rowbar-letter",co.BUTTON_CLASS="rtc-row-button",co.BUTTON_STYLE={margin:0,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},co.Measurers={none:co.none_measure,order:co.order_measure,check:co.check_measure,letter:co.letter_measure,shape:co.shape_measure,image:co.image_measure,button:co.button_measure,move:co.move_measure},co.Renderrs={none:co.none_render,order:co.order_render,check:co.check_render,letter:co.letter_render,shape:co.shape_render,image:co.image_render,button:co.button_render,move:co.move_render};class uo extends ho{static none_measure(t,e,s,i){return t.$_prepareNone(),{width:0,height:0}}static button_measure(t,e,s,i){return ho.measureButton(t,e,t.$_prepareButton(e.getCellStyle(i),e.getStyle(i)))}static move_measure(t,e,s,i){const r=e.size();return t.$_prepareMove(e,i,e.getCellStyle(i),e.getStyle(i)),{width:r,height:r}}static handle_measure(t,e,s,i){return{width:0,height:0}}static button_render(t,e,s){}static move_render(t,e,s){}static handle_render(t,e,s){}constructor(t){super(t,null,uo.CLASS_NAME,Oe)}_doDestory(){this._handle=this._handle.destroy()}measure(t,e,s,i,r){const n=this.dom,o=this._action=t.getAction(s),h=t.getButton(o);let a;if(this.dv=e,this.row=s,this.hRelative=!1,this.internalClearSize(),n.dataset.row=String(s),h)a=uo.ButtonMeasurers[o](this,h,e,s);else if(o===_n.MOVE)a=uo.move_measure(this,t.move(),e,s);else{const i=t.getHandle(o);a=i?uo.HandleMeasurers[o](this,i,e,s):uo.none_measure(this,h,e,s)}if(a){const t=Fe.getPadding(n);this.wMeasure=isNaN(a.width)?n.offsetWidth:a.width+t.left+t.right,this.hMeasure=isNaN(a.height)?n.offsetHeight:a.height+t.top+t.bottom}else this.wMeasure=n.offsetWidth,this.hMeasure=n.offsetHeight;return{width:this.wMeasure,height:this.hMeasure}}render(t,e,s){this.internalResize(e,s);const i=this._action,r=t.getButton(i);if(r)uo.ButtonRenderers[i](r,this.wMeasure,this.hMeasure);else if(i===_n.MOVE)uo.move_render(t.move(),this.wMeasure,this.hMeasure);else{const e=t.getHandle(i);e&&uo.HandleRenderers[i](e,this.wMeasure,this.hMeasure)}}click(t,e){if(e===this._button){const e=this.row,s=t.getButton(t.getAction(e));s&&s.click(t,e)}}isDom(t){return t===this._button||super.isDom(t)}$_prepareNone(){this._button&&this._button.remove()}$_prepareButton(t,e){const s=this.dom;let i=this._button;return Fe.removeChildren(s,[this._move]),i?i.parentElement||s.appendChild(i):(i=this._button=s.ownerDocument.createElement("button"),Object.assign(i.style,co.BUTTON_STYLE),s.appendChild(i)),oo(s,uo.CLASS_NAME,t),oo(i,co.BUTTON_CLASS,e),this._button}$_prepareMove(t,e,s,i){return Fe.removeChildren(this.dom,[this._button]),super.$_prepareMove(t,e,s,i)}}uo.CLASS_NAME="rtc-editbar-cell",uo.ButtonMeasurers={delete:uo.button_measure,add:uo.button_measure,edit:uo.button_measure,info:uo.button_measure,detail:uo.button_measure,link:uo.button_measure,custom:uo.button_measure},uo.HandleMeasurers={move:uo.handle_measure},uo.ButtonRenderers={delete:uo.button_render,add:uo.button_render,edit:uo.button_render,info:uo.button_render,detail:uo.button_render,link:uo.button_render,custom:uo.button_render},uo.HandleRenderers={move:uo.handle_render};class go extends p{static getDomId(t,e,s){return isNaN(e)?`-rtc-${t}-${s}`:`-rtc-g-${e}-${s}`}constructor(t){super(),this._styleArgs={row:-1,value:void 0},this._model=t}_doDestory(){}model(){return this._model}setModel(t){t!==this._model&&(this._model=t)}prepare(t,e){this.$_checkModel(e),this._value=this._getValue(t),this._doPrepare(t,e)}_setClass(t,e){const s=this._model._classCallback;let i;if(s){this._styleArgs.row=e,this._styleArgs.value=this._value;const t=s(this._styleArgs);t&&(i=t)}i=i||this._model._class,i?t.classList.add(i):t.classList.remove(i)}getStyle(t){let e=this._model._style;const s=this._model._styleCallback;if(s){this._styleArgs.row=t,this._styleArgs.value=this._value;const i=s(this._styleArgs);if(i){if(!e)return i;Object.assign(e,i)}}return e}applyStyle(t,e){const s=this.getStyle(e),i=this._getStyleTarget(t);if(i){if(this._prevStyle)for(let t in this._prevStyle)i[t]="";s?(Object.assign(i,s),this._prevStyle=Object.assign({},s)):this._prevStyle=void 0}}measureLayout(t,e,s,i){return this._doMeasure(t,e,s,i)}renderLayout(t,e,s,i){this._doRender(t,e,s,i)}unprepare(t,e){this._doUnprepare(t,e)}_setContext(t,e,s){e.id=po.getDomId(t.row,t.gindex,s.id),t.layout instanceof yi&&t.layout.field&&(e[bt]=t.layout.field),e[vt]=t.row}_getValue(t){}_getValues(t,e){const s=this._getValue(t);let i;if(Array.isArray(s)&&(i=s.length)){const t=new Array(i);let r=s[0],n=s[0],o=!1,h=0;for(;isNaN(r)&&h<i;)r=n=+s[++h];for(;h<i;h++){const i=+s[h];t[h]=i,isNaN(i)||(i<r&&(r=i),i>n&&(n=i),i<e&&(o=!0))}return{min:r,max:n,values:t,hasBelow:o}}return{values:[]}}_doDisposeContent(t){}$_checkModel(t){t[yt]!==this._model.type&&(t[yt]&&(this._doDisposeContent(t),Fe.clearChildren(t)),t[yt]=this._model.type)}}class po extends go{_setFitWidth(t,e,s){if(isNaN(s)){const s=e.getFitWidth();isNaN(s)?t.style.width="":t.style.width=de(100*s)}else Fe.setWidth(t,s)}_setFitHeight(t,e,s){if(isNaN(s)){const s=e.getFitHeight();isNaN(s)?t.style.height="":t.style.height=de(100*s)}else Fe.setHeight(t,s)}}class fo extends po{_getValue(t){const e=this._model._value;return void 0!==e?e:t.value()}}class wo extends fo{}class mo extends fo{_getStyleTarget(t){return this._svg.svg.style}_doPrepare(t,e){e[Mt]=(this._svg=this.$_getSvg(t,e)).svg}_doUnprepare(t,e){this._svg=this._svg&&this._svg.destroy(),e[Mt]=null}$_getSvg(t,e){const s=this._getSvgClass();let i=e.getElementsByClassName(s)[0];return i?new oi(i,null):(i=oi.create(t.doc),e.appendChild(i),new oi(i,s))}}class yo extends po{_doPrepare(t,e){e[At]=this.$_getSpan(t,e)}_getStyleTarget(t){return t[At].style}_doMeasure(t,e,s,i){const r=e[At],n=t.layout._parent,o=this._horz=n.canContainHspace();let h=oe(t._explicitWidth,this._model.space);isNaN(h)?r.style[o?"width":"height"]=de(100):r.style[o?"width":"height"]=ae(h)}_doRender(t,e,s,i){}_doUnprepare(t,e){e[At]=null}setValue(t,e){}$_getSpan(t,e){let s=e.firstElementChild;return s||(s=t.createElement("span"),s.style.display="inline-block",e.appendChild(s)),s}}yo.SPAN_CLASS="rtc-spacer-span";class bo extends go{_getValue(t){const e=this._model._value;return void 0!==e?e:t.value()}_setFitWidth(t,e,s){if(isNaN(s)){const s=e.getFitWidth();isNaN(s)?t.style.width="":t.style.width=de(100*s)}else Fe.setWidth(t,s)}_setFitHeight(t,e,s){if(isNaN(s)){const s=e.getFitHeight();isNaN(s)?t.style.height="":t.style.height=de(100*s)}else Fe.setHeight(t,s)}}class vo extends $r{constructor(t,e,s,i){super(t,s,i,Oe),this._model=e,this._relWidth=P(e._widthDim),this._relHeight=P(e._heightDim)}model(){return this._model}manager(){return this._manager}isSpacer(){return!1}prepareLayout(t,e){const s=this.dom.style;if(this._doPrepareRender(t,e),this._doApplyStyles(s),this._doApplyImportantStyles(s),this.mw=this.mh=NaN,this.parent instanceof Co&&this.parent.needMeasuredSize()){const t=this._padding=Fe.getPaddingBorder(this.dom);t.horz=t.left+t.right+t.borderLeft+t.borderRight,t.vert=t.top+t.bottom+t.borderTop+t.borderBottom}else this._padding=F,this.dom.style.position="relative"}measureLayout(t,e,s,i){const r=this._model,n=this.dom.style,o=this._padding;s-=o.horz,i-=o.vert,isNaN(this._explicitWidth)||(this._explicitWidth-=o.horz),isNaN(this._explicitHeight)||(this._explicitHeight-=o.vert),this.clearSize();let h=this._explicitWidth,a=this._explicitHeight;isNaN(this._relWidth)?isNaN(h)||this.setWidth(h):n.width=de(this._relWidth),isNaN(this._relHeight)||(n.height=de(this._relHeight)),isNaN(a)||this.setHeight(a);let l=r._minWidth;isNaN(+l)?n.minWidth=l||"":n.minWidth=ae(+l),l=r._minHeight,isNaN(+l)?n.minHeight=l||"":n.minHeight=ae(+l);const d=this._doMeasureLayout(t,e,s,i);return d&&(!isNaN(d.width)&&(this.mw=d.width+=o.horz),!isNaN(d.height)&&(this.mh=d.height+=o.vert)),d}_doMeasure(t,e,s,i){throw new Error("Not used override.")}_doApplyImportantStyles(t){this.parent instanceof Co&&this.parent.needMeasuredSize()&&this.setImportantStyle(t,"position","absolute")}}class Co extends vo{static isView(t){return t.classList.contains(this.CLASS_NAME)}constructor(t,e){super(t,e,!1,Co.CLASS_NAME),e||z(v.layoutMustSet),this._model=e}tag(){return this._model.tag}scrollable(){return!1}build(t,e){for(const s of this._model.children())if(this._canContain(s))if(s instanceof yi)this.addChild(new xo(t,s));else if(s instanceof bi)this.addChild(new Vo(t,s));else if(s instanceof Ri){const i=e.createLayoutView(t,s);i.build(t,e),this.addChild(i)}}refreshModels(t){this._model=t;for(let e=0,s=this.childCount;e<s;e++){const s=this.getChild(e),i=t.getChild(e);s instanceof So?s._model=i:s instanceof Co&&s.refreshModels(i)}}saveEditValues(t){for(let e=0,s=this.childCount;e<s;e++){const s=this.getChild(e);s instanceof So?s.saveEditValue(t):s instanceof Co&&s.saveEditValues(t)}}fieldBy(t,e){return e?this.findDescendant((e=>e instanceof xo&&e.model().field===t)):this.findChild((e=>e instanceof xo&&e.model().field===t))}childByTag(t,e=!1){return e&&this.findDescendant((e=>e.tag()===t)),this.findChild((e=>e.tag()===t))}simpleById(t,e){return e?this.findDescendant((e=>e instanceof So&&e.model().id()===t)):this.findChild((e=>e instanceof So&&e.model().id()===t))}simpleByModel(t,e){return e?this.findDescendant((e=>e instanceof So&&e.model().tid===t.tid)):this.findChild((e=>e instanceof So&&e.model().id===t.id()))}simpleByDom(t,e){return e?this.findDescendant((e=>e instanceof So&&e.containsDom(t))):this.findChild((e=>e instanceof So&&e.containsDom(t)))}getRenderer(t){const e=this.simpleByDom(t,!0);return e&&e.renderer()}simpleBy(t,e){return e&&this.findDescendant((e=>e instanceof So&&e.layout.tag===t)),this.findChild((e=>e instanceof So&&e.tag()===t))}literalBy(t,e){return e?this.findDescendant((e=>e instanceof Vo&&e.tag()===t)):this.findChild((e=>e instanceof Vo&&e.tag()===t))}simplesByRenderer(t){const e=[];return this.findDescendants((e=>e instanceof So&&e.renderer().type()===t),e),e}getValues(t){const e={};return this._getValues(t,e),e}_getValues(t,e){this._visibles.forEach((s=>{if(s instanceof So){const i=s.getEditValue(t);i&&(e[i.field]=i.value)}else s instanceof Co&&s._getValues(t,e)}))}needMeasuredSize(){return!0}_doInitContent(t,e){We.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=We.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e,this._visibles=[],this.forEach((t=>{t._internalVisible(t.model().visible)&&(this._visibles.push(t),t._explicitWidth=t._explicitHeight=t.mw=t.mh=NaN)}))}_doApplyStyles(t){const e=this.model().style;e&&Object.assign(t,e)}_doApplyImportantStyles(t){}prepareLayout(t,e){super.prepareLayout(t,e),this._visibles.forEach((s=>s.prepareLayout(t,e)))}_doRender(t,e,s){const i=this._visibles,r=this._padding;r||x.debugging(),e-=r.horz,s-=r.vert,this._doLayoutContent(t,e,s),i.forEach((e=>{e.render(t)}));for(let t=i.length-1;t>=0;t--)i[t]instanceof So&&i[t].freeRenderer()}_doAfterRender(){super._doAfterRender(),this._manager=null}_canContain(t){return!0}_getChildMaxWidth(t,e){return t._leftDim&&(e-=D(t._leftDim,e)),t._rightDim&&(e-=D(t._rightDim,e)),e}_getChildMaxHeight(t,e){return t._topDim&&(e-=D(t._leftDim,e)),t._bottomDim&&(e-=D(t._rightDim,e)),e}_defaultExplicitWidth(t){return NaN}_defaultExplicitHeight(t){return NaN}_measureChildren(t,e,s,i,r,n){for(const o of t){const t=o.model();let h=i,a=r;if(isNaN(o._relWidth)){const e=t._widthDim;e&&e.fixed?o._explicitWidth=h=e.size:o._explicitWidth=this._defaultExplicitWidth(i)}if(isNaN(o._relHeight)){const e=t._heightDim;e&&e.fixed?o._explicitHeight=a=e.size:o._explicitHeight=this._defaultExplicitHeight(r)}o.measureLayout(e,s,h,a),isNaN(o._explicitWidth)||(o.mw=o._explicitWidth),isNaN(o._explicitHeight)||(o.mh=o._explicitHeight),n&&n(o)}}}Co.CLASS_NAME="-rtc-layout-";class So extends vo{constructor(t,e){super(t,e,!1,So.CLASS_NAME),this._selected=!1,this._focused=!1,this._ctx={row:-1,value:void 0}}get layout(){return this._model}needMeasureRenderer(){return this.parent instanceof Co&&this.parent.needMeasuredSize()}model(){return this._model}value(){return this._value}renderer(){return this._model.renderer}rendererImpl(){return this._renderer}tag(){return this._model.tag}get selected(){return this._selected}get focused(){return this._focused}get row(){return this._model.row}get gindex(){return this._model.gindex}field(){return this._model.getField()}align(){return this._model.align}getValue(t){return this.layout.dv.getValue(this.layout.row,t,!0)}useImage(t){this._manager.useImage(t)}getImageSize(t){return this._manager.getImageSize(t)}getIcon(t,e){return this._manager.getIcon(t,e)}inflate(t){return this._manager.owner().inflateField(t,this.field())}textFormatter(){return this._manager.textFormatter}boolFormatter(){return this._manager.boolFormatter}numberFormatter(){return this._manager.numberFormatter}dateFormatter(){return this._manager.dateFormatter}getEditValue(t){const e=this.field();if(e){const s=t.borrowRenderer(this._model.renderer);try{if(s instanceof bo){return{field:e,value:s.getValue(this.dom)}}}finally{s&&t.freeRenderer(s)}}}setEditValue(t,e){if(this.field()){const s=t.borrowRenderer(this._model.renderer);try{s instanceof wo&&s.setValue(this.dom,e)}finally{s&&t.freeRenderer(s)}}}saveEditValue(t){const e=this.getEditValue(t);this._editValue=e&&e.value}needRendererWidth(t){return isNaN(this._explicitWidth)}needRendererHeght(t){return isNaN(this._explicitHeight)}_getDisplayStyle(){return"flex"}isSpacer(){return this._spacer}_doInitDom(t,e){We.BOUNDING&&(e.style.border=We.BOUNDING_BORDER),e.style.overflow="hidden"}isDom(t){return super.isDom(t)||this.containsDom(t)}prepareView(t){this._renderer=t.borrowRenderer(this._model.renderer),this._spacer=this._renderer instanceof yo}_setValue(t,e){void 0!==this._editValue?this._value=this._editValue:(this._value=e.getValue(),"function"==typeof this._value&&(Ro.control=t,Ro.row=this.row,Ro.field=this.field(),this._value=this._value(Ro)))}_doPrepareRender(t,e){const s=this.dom,i=this._model;this._manager=e,this._setValue(e.owner().control(),i),this._renderer.prepare(this,s);const r=this._prevClass,n=i.classCallback;let o;o=n?n(this):i.class,o?o!==r&&(r&&s.classList.remove(r),s.classList.add(this._prevClass=o)):r&&(s.classList.remove(r),this._prevClass=void 0)}_doApplyStyles(t){const e=this._model;t.justifyContent=Qt[e.align]||"",t.alignItems=Xt[e.valign]||"";const s=e.styleCallback;for(let e in this._prevStyles)t[e]="";const i=this._prevStyles={};let r=e.style;if(r&&Object.assign(i,r),s){this._ctx.row=e.row,this._ctx.value=this._value;let t=s(this._ctx);t&&Object.assign(i,t)}Object.assign(t,i),this._renderer.applyStyle(this.dom,e.row)}_doMeasureLayout(t,e,s,i){const r=this.dom;let n=this._explicitWidth,o=this._explicitHeight;const h=this._renderer.measureLayout(this,r,s,i);return this.parent instanceof Co&&this.parent.needMeasuredSize()&&(isNaN(n)?n=h?h.width:r.offsetWidth:n-=this._padding.horz,isNaN(o)?o=h?h.height:r.offsetHeight:o-=this._padding.vert),{width:n,height:o}}_doRender(t,e,s){const i=this._padding,r=this.dom;e-=i.horz,s-=i.vert,this._renderer.renderLayout(this,r,e,s)}freeRenderer(){this._renderer.unprepare(this,this.dom),this._manager.freeRenderer(this._renderer),this._manager=null,this._testing()||(this._renderer=null)}_getRenderSize(){return this._model.inCell?this.getSize():super._getRenderSize()}}So.CLASS_NAME="-rtc-field-";const Ro={control:void 0,row:-1,field:void 0};class xo extends So{field(){return this.layout.field}}class Vo extends So{}class Eo extends Co{_doMeasureLayout(t,e,s,i){const r=this._visibles;let n=this._explicitWidth,o=this._explicitHeight;if(isNaN(n)||(s=n),isNaN(o)||(i=o),this._measureChildren(this._visibles,t,e,s,i,null),isNaN(n)){let t=0;r.forEach((e=>{let s=e.mw,i=e.model()._leftDim||e.model()._rightDim;i&&(i.fixed?s+=i.size:s/=(100-i.size)/100),t=Math.max(t,s)})),n=isNaN(this.mw)?t:Math.max(this.mw,t)}if(isNaN(o)){let t=0;r.forEach((e=>{let s=e.mh,i=e.model()._topDim||e.model()._bottomDim;i&&(i.fixed?s+=i.size:s/=(100-i.size)/100),t=Math.max(s,t)})),o=isNaN(this.mh)?t:Math.max(this.mh,t)}return this.resize(n,o),{width:n,height:o}}_doLayoutContent(t,e,s){for(let t of this._visibles){const i=t.model(),r=t.dom.style;r.left=r.right=r.top=r.bottom="",i._leftDim?r.left=L(i._leftDim):i._rightDim?r.right=L(i._rightDim):r.left=ae((e-t.mw)/2),i._topDim?r.top=L(i._topDim):i._bottomDim?r.bottom=L(i._bottomDim):r.top=ae((s-t.mh)/2)}}}var $o,Ao;!function(t){t.DEFAULT="default",t.REPEAT="repeat",t.LOOP="loop",t.RANDOM="random"}($o||($o={}));class Lo extends Me{_doInitDefaults(){this._enabled=!1,this._mode=$o.DEFAULT,this._backward=!1,this._duration=Lo.DURATION,this._changeDuration=Lo.CHANGE_DURATION}enabled(){return ie(this._enabled,this._defs&&this._defs._enabled)}setEnabled(t){t!==this._enabled&&(this._enabled=t,this.owner().autoScrollChanged(this))}mode(){return ie(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}backward(){return ie(this._backward,this._defs&&this._defs._backward)}setBackward(t){this._backward=t}duration(){return he(this._duration,this._defs&&this._defs._duration,Lo.DURATION)}setDuration(t){this._duration=t}changeDuration(){return he(this._changeDuration,this._defs&&this._defs._changeDuration,Lo.CHANGE_DURATION)}setChangeDuration(t){this._changeDuration=t}}Lo.DURATION=5e3,Lo.CHANGE_DURATION=300;class To extends Me{_doInitDefaults(){this._target="_blank"}rootUrl(){return ie(this._rootUrl,this._defs&&this._defs._rootUrl)}setRootUrl(t){this._rootUrl=t}linkField(){return ie(this._linkField,this._defs&&this._defs._linkField)}setLinkField(t){this._linkField=t}linkCallback(){return ie(this._linkCallback,this._defs&&this._defs._linkCallback)}setLinkCallback(t){this._linkCallback=t}target(){return ie(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}getLink(t,e,s){const i=this.linkCallback();let r;return i&&(r=i({control:t,row:s})),void 0!==r&&this.linkField&&(r=e.getValue(s,this.linkField(),!0)),(this.rootUrl()||"")+(r||"")}}!function(t){t.NONE="none",t.PADDING="padding",t.BAR="bar"}(Ao||(Ao={}));class ko extends Me{_doInitDefaults(){this._visible=!0,this._nearIndent=Ao.BAR,this._farIndent=Ao.NONE,this._skipLast=!1,this._skipGroupLast=!1,this._leafOnly=!1}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}masterStyle(){return ie(this._masterStyle,this._defs&&this._defs._masterStyle)}setMasterStyle(t){t!==this._masterStyle&&(this._masterStyle=t,this._changed())}nearIndent(){return ie(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return ie(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}skipLast(){return ie(this._skipLast,this._defs&&this._defs._skipLast)}setSkipLast(t){t!==this._skipLast&&(this._skipLast=t,this._changed())}skipGroupLast(){return ie(this._skipGroupLast,this._defs&&this._defs._skipGroupLast)}setSkipGroupLast(t){t!==this._skipGroupLast&&(this._skipGroupLast=t,this._changed())}leafOnly(){return ie(this._leafOnly,this._defs&&this._defs._leafOnly)}setLeafOnly(t){t!==this._leafOnly&&(this._leafOnly=t,this._changed())}}class Do extends Me{_doInitDefaults(){this._visible=!0,this._nearIndent=Ao.NONE,this._farIndent=Ao.NONE}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}nearIndent(){return ie(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return ie(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}}class No extends Lo{_doInitDefaults(){super._doInitDefaults(),this._rowsPerScroll=1}rowsPerScroll(){return oe(this._rowsPerScroll,this._defs&&this._defs._rowsPerScroll)}setRowsPerScroll(t){this._rowsPerScroll=t}}class Po extends Me{constructor(t,e){super(t,e),this._link=new To(t,e&&e._link),this._focusMask=new Do(t,e&&e._focusMask),this._autoScroll=new No(t,e&&e._autoScroll),this._borderLine=new ko(t,e&&e._borderLine)}_doInitDefaults(){this._tempalte="row",this._clickAction=Re.NONE,this._masterClickAction=Re.EXPAND,this._longPressAction=Re.NONE,this._swipeAction=Ve.COMMAND,this._focusable=!1,this._touchEffect=!0,this._deleteAnimation=!0}link(){return this._link}focusMask(){return this._focusMask}autoScroll(){return this._autoScroll}template(){return ie(this._tempalte,this._defs&&this._defs._tempalte)}setTemplate(t){t!==this._tempalte&&(this._tempalte=t,this._changed())}largeTemplate(){return ie(this._largeTemplate,this._defs&&this._defs._largeTemplate)}setLargeTemplate(t){t!==this._largeTemplate&&(this._largeTemplate=t,this._changed())}templateCallback(){return ie(this._templateCallback,this._defs&&this._defs._templateCallback)}setTemplateCallback(t){t!==this._templateCallback&&(this._templateCallback=t,this._changed())}templateParams(){return Object.assign({},this.$_internalParams())}setTemplateParams(t){let e=!1;t?c.equalObjects(t,this._templateParams)||(this._templateParams=Object.assign({},t),e=!0):this._templateParams&&(this._templateParams=void 0,e=!0),e&&this._changed()}$_internalParams(){return ie(this._templateParams,this._defs&&this._defs._templateParams)}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){const e=c.copyObject(t);e!==this._style&&(this._style=e,this._changed())}styleCallback(){return ie(this._styleCallback,this._defs&&this._defs._styleCallback)}setStyleCallback(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}clickAction(){return ie(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}masterClickAction(){return ie(this._masterClickAction,this._defs&&this._defs._masterClickAction)}setMasterClickAction(t){t!==this._masterClickAction&&(this._masterClickAction=t,this._changed())}longPressAction(){return ie(this._longPressAction,this._defs&&this._defs._longPressAction)}setLongPressAction(t){t!==this._longPressAction&&(this._longPressAction=t,this._changed())}masterPressAction(){return ie(this._masterPressAction,this._defs&&this._defs._masterPressAction)}setMasterPressAction(t){t!==this._masterPressAction&&(this._masterPressAction=t,this._changed())}swipeAction(){return ie(this._swipeAction,this._defs&&this._defs._swipeAction)}setSwipeAction(t){return this._swipeAction=t}commands(){const t=ie(this._commands,this._defs&&this._defs._commands);return t?t.slice(0):void 0}setCommands(t){c.equalArrays(t,this._commands)||(this._commands=t?t.slice(0):void 0,this._changed())}focusable(){return ie(this._focusable,this._defs&&this._defs._focusable)}setFocusable(t){return this._focusable=t}touchEffect(){return ie(this._touchEffect,this._defs&&this._defs._touchEffect)}setTouchEffect(t){this._touchEffect=t}deleteAnimation(){return ie(this._deleteAnimation,this._defs&&this._defs._deleteAnimation)}setDeleteAnimation(t){this._deleteAnimation=t}borderLine(){return this._borderLine}updateTemplate(t,e,s,i){const r=this.$_getTemplate(t);r instanceof us&&r.updateProp(e,s,i)&&this.owner().optionItemChanged("template")}updateTemplateProps(t,e,s){if(c.isObject(s)){const i=this.$_getTemplate(t);i instanceof us&&i.updateProps(e,s)&&this.owner().optionItemChanged("template")}}$_getTemplate(t){return this.owner().getTemplate(t||this.template())}}class Mo extends Me{inflateParam(t,e,s){const i=this.templateParams2();if(i){const t=s.name,e=i[t];if("function"==typeof e)return e({context:this,control:this.owner().wrapperOrThis(),param:t});if(void 0!==e)return e}}template(){return ie(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}templateParams2(){return ie(this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}}class Io extends Mo{fullModeHeight(){return ie(this._fullModeHeight,this._defs&&this._defs._fullModeHeight)}setFullModeHeight(t){this._fullModeHeight=t}fullModeWidth(){return ie(this._fullModeWidth,this._defs&&this._defs._fullModeWidth)}setFullModeWidth(t){this._fullModeWidth=t}}class Oo extends Io{_doInitDefaults(){}inflateParam(t,e,s){}inflateStock(t,e,s){switch(s.name){case"message_visible":return this.messageVisible();case"message":return this.message();case"load_visible":return this.loadVisible();case"load_label":return this.loadLabel();case"load_callback":return t=>{var e;return null===(e=this.onLoadClick())||void 0===e?void 0:e(t)}}}messageVisible(){return ie(this._messageVisible,this._defs&&this._defs._messageVisible)}setMessageVisible(t){this._messageVisible=t}message(){return ie(this._message,this._defs&&this._defs._message)}setMessage(t){t!==this._message&&(this._message=t,this._changed())}loadVisible(){return ie(this._loadVisible,this._defs&&this._defs._loadVisible)}setLoadVisible(t){this._loadVisible=t}loadLabel(){return ie(this._loadLabel,this._defs&&this._defs._loadLabel)}setLoadLabel(t){t!==this._loadLabel&&(this._loadLabel=t,this._changed())}onLoadClick(){return ie(this._onLoadClick,this._defs&&this._defs._onLoadClick)}setOnLoadClick(t){this._onLoadClick=t}}class Bo extends Io{_doInitDefaults(){}inflateStock(t,e,s){}}class Fo extends Pr{constructor(t){super(t,Fo.CLASS_NAME),this._expanded=!0}reset(t,e){this.setSize(t),e!==this._expanded&&(this._expanded=e,this._svg.clear(),this._svg.path(e?Fo.EXPANDED_PATH:Fo.COLLAPSED_PATH))}_doInitStyle(t){super._doInitStyle(t),t.minHeight="100%"}_doInitSvg(t){t.setViewSize(512),t.path(Fo.EXPANDED_PATH),t.setStyle({fill:"none",strokeWidth:48,strokeLinecap:"round",strokeLinejoin:"round"}),this.reset(18,!0)}_doClick(){}}Fo.CLASS_NAME="rtc-item-expander",Fo.EXPANDED_PATH="M 184 112 l 144 144 -144 144",Fo.COLLAPSED_PATH="M 112 184 l 144 144 144 -144";class Ho extends $r{constructor(t){super(t,!0,"rtc-item-view",Oe),this._prevStyles={},this._layoutChanged=!1,this.indent=0,this.bodyIndent=0,this.bodyMargin=0,this.detailed=!1,this.alternate=!1,this.checked=!1,this.selected=!1,this.searched=!1}layout(){return this._layout}layoutView(){return this._layoutView}setLayout(t,e){const s=t.layout,i=s._extra;this._layoutChanged=!this._layout||s.tid!==this._layout.tid||this._extra!=i||i&&i.tid!==this._extra.tid||this._isLayoutChanged(e),this._layout=s,this._extra=i,this._rowStyle=t.rowStyle,this._rowProps=t.rowProps}_isLayoutChanged(t){return!1}simpleViewByModel(t,e){return this._layoutView instanceof Co&&this._layoutView.simpleByModel(t,e)||this._extraView instanceof Co&&this._extraView.simpleByModel(t,e)}simpleViewByDom(t,e){return this._layoutView instanceof Co&&this._layoutView.simpleByDom(t,e)||this._extraView instanceof Co&&this._extraView.simpleByDom(t,e)}simpleViewByTag(t,e){return this._layoutView instanceof Co&&this._layoutView.simpleBy(t,e)||this._extraView instanceof Co&&this._extraView.simpleBy(t,e)}fieldViewByField(t,e){return this._layoutView instanceof Co&&this._layoutView.fieldBy(t,e)||this._extraView instanceof Co&&this._extraView.fieldBy(t,e)}valueViewByTag(t,e){const s=this._layoutView instanceof Co&&this._layoutView.simpleBy(t,e)||this._extraView instanceof Co&&this._extraView.simpleBy(t,e);return s instanceof Vo?s:void 0}setTheme(t){Fe.setData(this.dom,"theme",t)}setItemData(t,e){Fe.setData(this.dom,t,e)}setLayoutPos(t,e){}_getOverflow(){return"hidden"}_getContentPosition(){return"relative"}_doInitContent(t,e){e.style.height="100%"}_doPrepareExpander(t){const e=this._getExpander();e?(this._expanderPos=e.pos,this._expanderSize=e.size,this._expander?this._expander.setVisible(!0):(this._expander=new Fo(t),this.addChild(this._expander))):this._expander&&this._expander.setVisible(!1)}_doPrepareRender(t,e){const s=this._layout;this._owner=e,this._vertical=e.isVertical(),this._fullMode=e.owner().fullMode(),this.dom.dataset.dir=this._vertical?"v":"h",s.setRow(this.dv(),this.row(),this.gvindex()),this._extra&&this._extra.setRow(this.dv(),this.row(),this.gvindex()),this._doPrepareExpander(t),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null,this._extraView&&(this.removeChild(this._extraView),this._extraView=null)),this._layoutView?(this._layoutView.refreshModels(s),this._extraView&&this._extraView.refreshModels(this._extra)):(this.addChild(this._layoutView=e.createLayoutView(t,s)),this._layoutView.root=!0,this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,e),this._extra&&(this.addChild(this._extraView=e.createLayoutView(t,this._extra)),this._extraView.root=!0,this._extraView.dom.style.overflow="hidden",this._extraView.build(t,e))),this._layoutView.prepareLayout(t,this._owner),this._extraView&&this._extraView.prepareLayout(t,this._owner)}_doApplyStyles(t){function e(t){"string"==typeof t?s.classList.add(t):Object.assign(i,t)}const s=this.dom;t=s.style;for(let e in this._prevStyles)t[e]="";s.className=this.getItemClass();const i=this._prevStyles={},r=this.getItemStyle(this._owner);r.itemDef&&e(r.itemDef),r.levelDef&&e(r.levelDef);const n=this._rowStyle;n&&function(t){Object.assign(i,t.default);let s=!1;this.alternate&&t.alternate&&e(t.alternate),this.rowState===Gr.UPDATED?t.updated&&e(t.updated):this.rowState===Gr.DELETED&&(t.deleted&&e(t.deleted),s=!0),this.checked&&t.checked&&e(t.checked),this.selected&&t.selected&&e(t.selected),this.searched&&t.searched&&e(t.searched),this.setData("deleted",s?"1":null)}.call(this,n),r.dynamic&&e(r.dynamic),n&&n.callback&&e(n.callback(this._owner.owner().getRowStyleArgs(this.row())));for(let e in i)Ho.MANDATORY_STYLES.hasOwnProperty(e)||(t[e]=i[e])}setExplicit(t,e){return this._expWidth=t,this._expHeight=e,this}_doMeasure(t,e,s,i){const r=this._rowProps,n=this._vertical;e.setExplicits(this),this.clearSize(),n?isNaN(r.height)||(this._expHeight=r.height):isNaN(r.width)||(this._expWidth=r.width);const o=!isNaN(this._expWidth),h=!isNaN(this._expHeight);o&&(s=this._expWidth),h&&(i=this._expHeight);const a=s,l=i,d=this._padding=this._getPadding(),_=d.left+d.right,c=d.top+d.bottom,u=this._layoutView;s-=_,i-=c,this._szNear=this._doMeasureSide(gr.NEAR,n,s,i),this._szFar=this._doMeasureSide(gr.FAR,n,s,i),n?s-=this.indent+this._szNear.width+this._szFar.width+this._owner.rightMargin:i-=this._szNear.height+this._szFar.height,u._explicitWidth=o?s:NaN,u._explicitHeight=h?i:NaN;const g=u.measureLayout(t,this._owner,s,i);if(n?g.height=Math.max(g.height,this._szNear.height,this._szFar.height):g.width=Math.max(g.width,this._szNear.width,this._szFar.width),this._extraView){this._extraView._explicitWidth=u._explicitWidth,this._extraView._explicitHeight=u._explicitHeight;const e=this._extraView.measureLayout(t,this._owner,s,i);g.width=Math.max(g.width,e.width),g.height+=e.height}return n?(o&&(g.width=a),h?g.height=l:g.height+=c,r.minHeight>g.height?g.height=r.minHeight:r.maxHeight<g.height&&(g.height=r.maxHeight)):(h&&(g.height=l),o?g.width=a:g.width+=_,r.minWidth>g.width?g.width=r.minWidth:r.maxWidth<g.width&&(g.width=r.maxWidth)),g}_doRender(t,e,s){const i=this._layoutView,r=this._extraView,n=this._padding;let o=this.indent,h=0;e-=this._owner.rightMargin+n.left+n.right,s-=n.top+n.bottom,this._expander&&this._expander.visible&&(this._expanderPos===gr.NEAR?this._expander.move(this.indent,0):this._expander.move(e-this._expander.size()-2,0)),this._vertical?(this._szNear.width>0&&this._doRenderNear(!0,o,h,this._szNear.width,s),this._szFar.width>0&&this._doRenderFar(!0,e-this._szFar.width,h,this._szFar.width,s),o+=this._szNear.width,e-=this._szNear.width+this._szFar.width):(this._szNear.height>0&&this._doRenderNear(!1,o,h,e,this._szNear.height),this._szFar.height>0&&this._doRenderFar(!1,o,s-this._szFar.height,e,this._szFar.height),h+=this._szNear.height,s-=this._szNear.height+this._szFar.height);let a=s;r&&(a-=r.mh),i.move(o,h),i.render(t),r&&(this._isRelativeLayout()?r.move(o,0):r.move(o,h+i.mh),r.render(t))}_isRelativeLayout(){return!0}setFillHeight(t){t?(this.dom.style.minHeight="100%",this._layoutView.dom.style.minHeight=ae(this.dom.offsetHeight-this._padding.top-this._padding.bottom)):this.dom.style.minHeight=""}_doAfterRender(){this._layoutChanged=!1,this._owner=null}_getPadding(){return Fe.getPadding(this.dom)}_getExpander(){}_isExpanded(){return!1}_doMeasureSide(t,e,s,i){return this._expander&&this._expander.visible&&t===this._expanderPos?(this._expander.reset(this._expanderSize,this._isExpanded()),{width:this._expander.size()+2,height:this._expander.size()+2}):{width:0,height:0}}_doRenderNear(t,e,s,i,r){}_doRenderFar(t,e,s,i,r){}_borrowed(){if(!this._fullMode)for(let t=0;t<20;t++){const t=this.dom.getElementsByTagName("img");for(let e=0;e<t.length;e++)t[e].src=""}}_returned(){}}Ho.MANDATORY_STYLES={display:"block",position:"absolute",boxSizing:"content-box"};class Wo extends Ho{static isRowView(t){return t.classList.contains(zo.ROW_CLASS)}get rowCell(){return this._rowCell}get editCell(){return this._editCell}dv(){return this._dv}row(){return this._row}model(){return this._model}group(){return this._model.group}index(){return this._gindex>=0?this._gindex:this._row}gvindex(){return this._gvindex}vindex(){return this._gvindex>=0?this._gvindex:this._row}setTable(t){}isRow(t){return t===this._row}setRow(t,e,s,i){return this._dv=t,this.dom[vt]=this._row=e,this._rowid=s,this._last=t.isLast(e),i?(this._model=i,this._groupLast=i.group.isLast(e),this._master=!i.isLeaf()):(this._model=void 0,this._groupLast=this._master=!1),this}setTouched(t){Fe.setData(this.dom,"touched",t?"1":void 0)}getNearIndent(t){return 0}getFarIndent(t){return 0}getItemStyle(t){return t.owner().getRowStyle(this._row)}getItemClass(){return Wo.CLASS_NAME}_isExpanded(){return this._model instanceof Rs&&this._model.group.expanded()}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=e.rowBar,i=e.editBar;let r=this._rowCell,n=this._editCell;s?(r||(r=this._rowCell=new co(t)),!r.parent&&this.addChild(r)):r&&r.parent&&this.removeChild(r),i?(n||(n=this._editCell=new uo(t)),!n.parent&&this.addChild(n)):n&&n.parent&&this.removeChild(n)}_doMeasureSide(t,e,s,i){const r=this._owner.rowBar,n=this._owner.editBar;let{width:o,height:h}=super._doMeasureSide(t,e,s,i);if(e){if(r&&r.position()===t){const t=this._rowCell,e=t.measure(r,this._dv,this._row,s,i);let n=oe(r.size(),e.width);t.wCell=n,t.wMeasure=Math.min(e.width,n),o=n+r._runGaps.horz,h=e.height}if(n&&n.position()===t){const t=this._editCell,e=t.measure(n,this._dv,this._row,s,i);let r=oe(n.size(),e.width);t.wCell=r,t.wMeasure=Math.min(e.width,r),o+=r+n._runGaps.horz,h=Math.max(h,e.height)}}else{if(r&&r.position()===t){const t=this._rowCell,e=t.measure(r,this._dv,this._row,s,i),n=oe(r.size(),e.height);t.hCell=n,t.hMeasure=Math.min(e.height,n),h+=n+r._runGaps.vert,o=e.width}if(n&&n.position()===t){const t=this._editCell,e=t.measure(n,this._dv,this._row,s,i),r=oe(n.size(),e.height);t.wCell=r,t.wMeasure=Math.min(e.height,r),h+=r+n._runGaps.vert,o=Math.max(o,e.width)}}return{width:o,height:h}}_doRenderNear(t,e,s,i,r){const n=this._owner,o=n.rowBar,h=n.editBar;if(t){if(o&&o.position()===gr.NEAR){const t=this._rowCell;t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(o,t.width,t.height),e+=t.wCell+o._runGaps.right}if(h&&h.position()===gr.NEAR){const t=this._editCell;t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(h,t.width,t.height)}}else{if(o&&o.position()===gr.NEAR){const t=this._rowCell;t.resize(i,t.wCell),t.move(0,s),t.render(o,t.width,t.height),s+=t.hCell+o._runGaps.bottom}if(h&&h.position()===gr.NEAR){const t=this._editCell;t.resize(i,t.wCell),t.move(0,s),t.render(h,t.width,t.height)}}}_doRenderFar(t,e,s,i,r){const n=this._owner,o=n.rowBar,h=n.editBar;if(t){if(h&&h.position()===gr.FAR){const t=this._editCell;e+=h._runGaps.right,t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(h,t.width,t.height),e+=t.wCell+h._runGaps.right}if(o&&o.position()===gr.FAR){const t=this._rowCell;e+=o._runGaps.right,t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(o,t.width,t.height)}}else{if(h&&h.position()===gr.FAR){const t=this._editCell;s+=h._runGaps.bottom,t.resize(i,t.wCell),t.move(0,s),t.render(h,t.width,t.height),s+=t.hCell+h._runGaps.top}if(o&&o.position()===gr.FAR){const t=this._rowCell;s+=o._runGaps.bottom,t.resize(i,t.wCell),t.move(0,s),t.render(o,t.width,t.height)}}}}Wo.ROW_CLASS="rtc-row",Wo.CLASS_NAME="rtc-item "+Wo.ROW_CLASS;class zo extends Wo{_getExpander(){if(this._model instanceof Rs&&!this._model.isLeaf()){this.row();const t=this._owner.getExpander(this.row());if(t){const e=t.position(),s=e===dn.HEAD?gr.NEAR:e===dn.FOOT?gr.FAR:void 0;if(e)return{pos:s,size:18}}}}_prepareRowBorder(t,e){const s=e.owner().rowBorder;let i=this._line;if(s&&e.rowBorderVisible(this)){i||(i=this._line=t.createElement("span"),i.className="rtc-row-border",Object.assign(i.style,zo.LINE_STYLES));const e=this._master?s.masterStyle:s.style;Object.assign(i.style,{width:"",height:"",borderBottom:this._vertical?e:"",borderRight:this._vertical?"":e}),!i.parentElement&&this.dom.appendChild(i)}else i&&i.parentNode&&i.remove()}_doPrepareRender(t,e){let s;super._doPrepareRender(t,e),this.searched&&(s=e.isVertical()?"vs":"hs"),s&&Fe.setData(this.dom,"state",s),this._prepareRowBorder(t,e)}_doMeasure(t,e,s,i){const r=super._doMeasure(t,e,s,i);return this._line&&this._line.parentNode?this._vertical?r.height+=this._szLine=this._line.offsetHeight:r.width+=this._szLine=this._line.offsetWidth:this._szLine=0,r}getNearIndent(t){switch(t){case Ao.BAR:return(this._szNear.width>0?this._padding.left:0)+this._szNear.width;case Ao.PADDING:return this._padding.left}return 0}getFarIndent(t){switch(t){case Ao.BAR:return(this._szFar.width>0?this._padding.right:0)+this._szFar.width;case Ao.PADDING:return this._padding.right}return 0}_doRender(t,e,s){if(super._doRender(t,e,s),this._line&&this._line.parentNode){const t=this._szLine;if(this._vertical){const i=this.getNearIndent(this._owner.borderLine.nearIndent());e-=i+this.getFarIndent(this._owner.borderLine.farIndent()),Fe.setBounds(this._line,i,s-t,e,t)}else Fe.setBounds(this._line,e-t,0,t,s)}}}var Go,Uo,jo,qo,Yo,Qo,Zo;zo.LINE_STYLES={position:"absolute",boxSizing:"border-box",margin:"0",padding:"0"},function(t){t.SUBMIT="submit",t.CANCEL="cancel",t.CLOSE="close"}(Go||(Go={}));class Xo extends p{constructor(t){super(),this.visible=!0,this._setDefaults(),"string"==typeof t?this.name=t:t&&Object.assign(this,t)}get style(){return this._style&&Object.assign({},this._style)}set style(t){this._style=t&&Object.assign({},t)}isEnabled(t){return"function"==typeof this.enabled?this.enabled({control:t,button:this.getProxy()}):this.enabled}getStyle(){return this._style}update(t){t&&Object.assign(this,t)}click(t){if(this.onClick)return this.onClick({control:t.wrapperOrThis(),button:this.getProxy()})}getProxy(){return{name:this.name,label:this.label,state:this.state}}_setDefaults(){this.enabled=!0}}!function(t){t.AUTO="auto",t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(Uo||(Uo={})),function(t){t.POPUP="popup",t.PUSH="push"}(jo||(jo={}));class Ko extends Ue{constructor(t,e){super(t),(this._defs=e)||this._doInitDefaults()}_doInitDefaults(){this._position=Uo.AUTO,this._showMode=jo.POPUP}owner(){return this.control()}isFullWidth(){const t=this.getPosition();return t===Uo.TOP||t===Uo.BOTTOM}isFullHeight(){const t=this.getPosition();return t===Uo.LEFT||t===Uo.RIGHT}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}showMode(){return ie(this._showMode,this._defs&&this._defs._showMode)}setShowMode(t){this._showMode=t}size(){return ie(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._szSize=k(t,!1))}minSize(){return ie(this._minSize,this._defs&&this._defs._minSize)}setMinSize(t){t!==this._minSize&&(this._minSize=t,this._szMin=k(t,!1))}maxSize(){return ie(this._maxSize,this._defs&&this._defs._maxSize)}setMaxSize(t){t!==this._maxSize&&(this._maxSize=t,this._szMax=k(t,!1))}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}getPosition(){let t=this.position();return t&&t!==Uo.AUTO||(t=this._getAutoPosition()),t}getSize(t,e){const s=this._szSize||this._defs&&this._defs._szSize,i=this._szMin||this._defs&&this._defs._szMin,r=this._szMax||this._defs&&this._defs._szMax;let n=D(s,t);const o=D(i,t),h=D(r,t);return isNaN(n)?isNaN(e)?o:c.clamp(e,o,h):c.clamp(n,o,h)}_getAutoPosition(){return Uo.TOP}}class Jo extends Ko{constructor(){super(...arguments),this._buttonGap=16}buttonGap(){return ie(this._buttonGap,this._defs&&this._defs._buttonGap)}setButtonGap(t){(t=c.toNumber(t,0))!==this._buttonGap&&(this._buttonGap=t,this._changed())}getButtons(){return void 0!==this._buttonImpls?this._buttonImpls:this._defs&&this._defs._buttonImpls}getButton(t){return this.getButtons().find((e=>e.name===t))}}!function(t){t.OK_CANCEL="okCancel",t.CLOSE="close"}(qo||(qo={})),function(t){t.AUTO="auto",t.HIDDEN="hidden",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(Yo||(Yo={}));class th extends Jo{constructor(){super(...arguments),this.buttonSet=qo.OK_CANCEL}_doInitDefaults(){super._doInitDefaults(),this._buttonPosition=Yo.AUTO,this._cancelLabel="Cancel",this._okLabel="OK",this._closeLabel="Close"}buttonPosition(){return ie(this._buttonPosition,this._defs&&this._defs._buttonPosition)}setButtonPosition(t){this._buttonPosition=t}cancelLabel(){return ie(this._cancelLabel,this._defs&&this._defs._cancelLabel)}setCancelLabel(t){this._cancelLabel=t}okLabel(){return ie(this._okLabel,this._defs&&this._defs._okLabel)}setOkLabel(t){this._okLabel=t}closeLabel(){return ie(this._closeLabel,this._defs&&this._defs._closeLabel)}setCloseLabel(t){this._closeLabel=t}getButtons(){let t;return this.buttonSet===qo.CLOSE?(t=this._closeButton,t?t[0].label=this.closeLabel():t=this._closeButton=[new Xo({name:th.CLOSE,type:Go.CLOSE,label:this.closeLabel()})]):(t=this._defButtons,t?(t[0].label=this.okLabel(),t[1].label=this.cancelLabel()):t=this._defButtons=[{name:th.OK,type:Go.SUBMIT,label:this.okLabel()},{name:th.CANCEL,type:Go.CANCEL,label:this.cancelLabel()}].map((t=>new Xo(t)))),t}okButton(){return this.getButton(th.OK)}cancelButton(){return this.getButton(th.CANCEL)}closeButton(){return this.getButton(th.CLOSE)}}th.OK="ok",th.CANCEL="cancel",th.CLOSE="close",function(t){t.AUTO="auto",t.DEFAULT="default",t.VERTICAL="vertical"}(Qo||(Qo={}));class eh extends Jo{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this._arrange=Qo.AUTO,this.setMinSize(eh.MIN_SIZE)}buttons(){return ie(this._buttons,this._defs&&this._defs._buttons)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._buttonImpls=[],t&&t.forEach((t=>this._buttonImpls.push(new Xo(t)))),this._changed())}arrange(){return ie(this._arrange,this._defs&&this._defs._arrange)}setArrange(t){this._arrange=t}align(){return ie(this._align,this._defs&&this._defs._align)}setAlign(t){this._align=t}getDisplay(t){const e=this.arrange()||Qo.AUTO,s=this.getPosition();return e===Qo.AUTO?t?Qo.DEFAULT:s===Uo.LEFT||s===Uo.RIGHT?Qo.VERTICAL:Qo.DEFAULT:e}}eh.TYPE="button",eh.MIN_SIZE=30;class sh extends th{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this.setMinSize(sh.MIN_SIZE)}inflateParam(t,e,s){}inflateStock(t,e,s){}template(){return ie(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}getTemplate(){return this.owner().getTemplate(this._actionTemplate||this.template())}getLayout(){const t=this.getTemplate();return this._actionTemplate=null,or.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this)}_doPrepareRender(){}_setActionTemplate(t){this._actionTemplate=t}}sh.TYPE="form",sh.MIN_SIZE=20,function(t){t.AUTO="auto",t.DEFAULT="default",t.LONG="long",t.VERTICAL="vertical"}(Zo||(Zo={}));class ih extends th{_doInitDefaults(){super._doInitDefaults(),this._display=Zo.AUTO,this._matchCaseLabel="대소문자 구분",this._wholeWordLabel="전체 단어 일치",this._regExpLabel="정규식 사용",this._searchNextLabel="다음 찾기",this._searchAllLabel="모두 찾기",this._lineGap=12,this.setOkLabel("검 색"),this.setCancelLabel("취 소")}display(){return ie(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}matchCaseLabel(){return ie(this._matchCaseLabel,this._defs&&this._defs._matchCaseLabel)}setMatchCaseLabel(t){this._matchCaseLabel=t}wholeWordLabel(){return ie(this._wholeWordLabel,this._defs&&this._defs._wholeWordLabel)}setWholeWordLabel(t){this._wholeWordLabel=t}regExpLabel(){return ie(this._regExpLabel,this._defs&&this._defs._regExpLabel)}setRegExpLabel(t){this._regExpLabel=t}searchNextLabel(){return ie(this._searchNextLabel,this._defs&&this._defs._searchNextLabel)}setSearchNextLabel(t){this._searchNextLabel=t}searchAllLabel(){return ie(this._searchAllLabel,this._defs&&this._defs._searchAllLabel)}setSearchAllLabel(t){this._searchAllLabel=t}lineGap(){return ie(this._lineGap,this._defs&&this._defs._lineGap)}setLineGap(t){this._lineGap=ne(t,void 0)}alwaysResult(){return ie(this._alwaysResult,this._defs&&this._defs._alwaysResult)}setAlwaysResult(t){this._alwaysResult=t}getDisplay(t){const e=this.display()||Zo.AUTO,s=this.getPosition();return e===Zo.AUTO?t?Zo.LONG:s===Uo.LEFT||s===Uo.RIGHT?Zo.VERTICAL:Zo.DEFAULT:e}search(t,e){this.owner().search(e,t)}}ih.TYPE="search";const rh={string:Br.TEXT,number:Br.NUMBER,boolean:Br.BOOL,bigint:Br.BIGINT};function nh(t,e){const s=[];for(let i of e){const e=t.fieldByName(i);e||qr.throwFormat(t.wrapperOrThis(),v.notExistsDataField,i),s.push(e)}return s}var oh;!function(t){t.JSON="json",t.FIELD="field",t.CSV="csv",t.TSV="tsv"}(oh||(oh={}));const hh="sv:lines";class ah extends sn{constructor(t,e,s,i){super(t),this._readOnly=!1,this._softDeleting=!1,this._restorable=!1,this._summaries={},this._evLock=!1,this._wrapper=i,Object.freeze(this._args={data:this}),e="string"==typeof e?{name:e}:e||{},this._title=e.title,this._readOnly=!!e.readOnly,this._restorable=!!e.restorable,this._softDeleting=!!e.softDeleting,this._validator=c.asFunction(e.validator),this._fields=this.$_buildFields(e,s),Array.isArray(this._fields)&&0!==this._fields.length||qr.throw(this.wrapperOrThis(),v.notSpecifiedDataField),this._derivedFields=this.$_buildDerivedFields(e.derivedFields),this._fieldNames=this._fields.map((t=>t.name)).concat(this._derivedFields.map((t=>t.name))),this._fieldMap={};for(let t of this._fields)this._fieldMap[t.name]=t;this._derivedMap={};for(let t of this._derivedFields)this._fieldMap[t.name]=t,this._derivedMap[t.name]=t}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}title(){return this._title}readOnly(){return this._readOnly}softDeleting(){return this._softDeleting}restorable(){return this._restorable}validator(){return this._validator}fieldCount(){return this._fields.length}rowCount(){return this._rows.length}setRowCount(t){let e;if(!isNaN(t)&&t!==(e=this._rows.length)){!function(t,e,s){if(t.length=e,e>s)for(let i=s;i<e;i++)t[i]=void 0}(this._rows,t,e);const s=this.wrapperOrThis();this._evLock||this.onRowCountChange&&this.onRowCountChange({data:s,newCount:t,oldCount:e}),this._dataChanged(s)}}visRowCount(){return this._rows.length}fields(){return this._fields.slice(0)}derivedFields(){return this._derivedFields.slice(0)}source(){return this}canSort(){return!1}canMove(){return!1}rowById(t){const e=this._rows.find((e=>e.id===t));return e?e.row:-1}internalRowId(t){return this._rows[t].id}getRowId(t){const e=this._rows[t];return e?e.id:void 0}levelRowOfRow(t){return t}getDataRow(t){return this._rows[t]}rowOfDataRow(t){return this._rows.indexOf(t)}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}containsField(t){return t in this._fieldMap}getField(t){return(t<0||t>=this._fields.length)&&qr.throwFormat(this.wrapperOrThis(),v.invalidFieldIndex,t),this._fields[t]}fieldByName(t){return this._fieldMap[t]}getFieldNames(){return this._fieldNames.slice(0)}isSortable(t){const e=this._fieldMap[t];return e&&e.sortable}setSortable(t,e){if(Array.isArray(t))for(const s of t){const t=this._fieldMap[s];t&&(t.sortable=e)}else{const s=this._fieldMap[t];s&&(s.sortable=e)}}isEmpty(t){return!this._rows[t]}getRowValues(t){return sn.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}internalRowsValues(t){return t.map((t=>Object.assign({},this._rows[t].values)))}getValue(t,e,s){sn.checkRow(this,t),s&&this.checkField(e);const i=this._rows[t];return i?i.values[e]:void 0}getProp(t,e,s,i){return sn.checkRow(this,t),i&&this.checkField(e),this._rows[t].getProp(e,s)}getValueAt(t,e){sn.checkRow(this,t),(e<0||e>=this._fields.length)&&qr.throwFormat(this.wrapperOrThis(),v.invalidFieldIndex,e);const s=this._rows[t];return s?s.values[this._fields[e].name]:void 0}getValues(t,e,s){if(Array.isArray(e)){sn.checkRow(this,t);const i={},r=this._rows[t];if(r){const t=r.values;e.forEach((e=>{s&&this.checkField(e),i[e]=t[e]}))}return i}return this.getRowValues(t)}getAllValues(t,e,s){if(null==t&&(t=c.makeIntArray(0,this._rows.length)),Array.isArray(t)){if(sn.checkRows(this,t),Array.isArray(e)){const i=this._rows;return s&&e.forEach((t=>s&&this.checkField(t))),t.map((t=>{const s={},r=i[t];if(r){const t=r.values;e.forEach((e=>s[e]=t[e]))}return s}))}return this.internalRowsValues(t)}}getFieldValues(t,e,s){this.checkField(t);const i=this._rows;isNaN(e)?e=0:this.$_checkRow(e,!1),isNaN(s)||s<0?s=i.length:this.$_checkRow(s,!0);const r=[];for(;e<s;){const s=i[e++];s&&r.push(s.values[t])}return r}beginUpdate(){this._evLock||(this._prevCount=this._rows.length,this._evLock=!0)}endUpdate(){if(this._evLock){const t=this.wrapperOrThis(),e=this._rows.length;this._fireEvent("onDataEndUpdated",e,this._prevCount),this._fireEvent("onDataChanged"),this.onEndUpdate&&this.onEndUpdate({data:t,newCount:e,oldCount:this._prevCount}),this._dataChanged(t)}}updateValue(t,e,s){this.$_checkReadOnly(),this.$_checkRow(t,!1),this.checkField(e);const i=this._fieldMap;let r=this._rows[t];r||(r=this._rows[t]=jr.createRow2(this._fieldMap,this._derivedMap,void 0));const n=r.values,o=n[e];if(s!==o){this.$_validate(i[e],s),n[e]=s,this.$_clearDerived(n),r.state=Gr.UPDATED;const h=this.wrapperOrThis();return this._evLock||(this._fireEvent("onDataValueUpdated",t,e,s,o),this._fireEvent("onDataChanged"),this.onValueUpdate&&this.onValueUpdate({data:h,row:t,field:e,value:s,oldValue:o})),this._dataChanged(h),!0}return!1}$_updateRow(t,e,s,i,r,n){const o=this._fieldMap,h=t.values;let a=h?Object.assign({},h):void 0,l=!1;if(c.isObject(e))if(a)for(let t of this._fieldNames)!s&&!(t in e)||a[t]===e[t]&&!i||(this.$_validate(o[t],e[t]),a[t]=e[t],l=!0);else a=Object.assign({},e),l=!0;else a&&s&&(a={},l=!0);return l&&(this.$_validateRow(t.row,a),t.values=a,this.$_clearDerived(h),t.state!==Gr.UPDATED&&(this._restorable&&(t.save=h),t.state=Gr.UPDATED,!r&&!this._evLock&&this._fireEvent("onDataStateChanged",t.row)),r&&(r.push(t.row),n.push(h))),l}updateRow(t,e,s,i){this.$_checkReadOnly(),this.$_checkRow(t,!1),this._rows[t]||(this._rows[t]=jr.createRow2(this._fieldMap,this._derivedMap,void 0));const r=this.$_checkUpdate(this._rows[t]),n=r.values,o=this.$_updateRow(r,e,s,i,null,null),h=this.wrapperOrThis();return o&&!this._evLock&&(this._fireEvent("onDataRowUpdated",t,n),this._fireEvent("onDataChanged"),this.onRowsUpdate&&this.onRowsUpdate({data:h,rows:[t],oldValues:[n]})),this._dataChanged(h),o}updateRows(t,e,s,i){if(Array.isArray(t)&&t.length>0){this.$_checkReadOnly(),this.$_checkRows(t,!1);const r=Math.min(t.length,e.length),n=[],o=[];for(let h=0;h<r;h++){const r=t[h];this._rows[r]||(this._rows[r]=jr.createRow2(this._fieldMap,this._derivedMap,void 0));const a=this.$_checkUpdate(this._rows[r]);this.$_updateRow(a,e[h],s,i,n,o)}if(n.length>0){const t=this.wrapperOrThis();return this._evLock||(this._fireEvent("onDataRowsUpdated",n),this._fireEvent("onDataChanged"),this.onRowsUpdate&&this.onRowsUpdate({data:t,rows:n,oldValues:o})),this._dataChanged(t),n}}return[]}updateRange(t,e,s,i,r){if(e<1||!Array.isArray(s)||s.length<1)return[];this.$_checkReadOnly(),this.$_checkRow(t,!1);const n=this._rows,o=[],h=[];e=Math.min(e,s.length);for(let a=0;a<e;a++){const e=t+a;n[e]||(n[e]=jr.createRow2(this._fieldMap,this._derivedMap,void 0));const l=this.$_checkUpdate(n[e]);this.$_updateRow(l,s[a],i,r,o,h)}if(o.length>0){const t=this.wrapperOrThis();return this._evLock||(this._fireEvent("onDataRowsUpdated",o),this._fireEvent("onDataChanged"),this.onRowsUpdate&&this.onRowsUpdate({data:t,rows:o,oldValues:h})),this._dataChanged(t),o}return[]}_clearRows(t){const e=this._rows.length;if(e>0){this.$_checkReadOnly();const s=this.wrapperOrThis();if(this._softDeleting&&!t){const t=[],i=this._rows;for(let s=0;s<e;s++)i[s].state!==Gr.DELETED&&(i[s].state=Gr.DELETED,t.push(s));t.length>0&&(this._fireEvent("onDataStatesChanged",t),this.onRowStatesChange&&this.onRowStatesChange({data:s,rows:t}))}else this._rows=[],this._flags._cleared(e),this._evLock||(this._fireEvent("onDataCleared",e),this._fireEvent("onDataCountChanged",0,e),this._fireEvent("onDataChanged"),this.onRowsClear&&this.onRowsClear({data:s,oldCount:e}),this.onRowCountChange&&this.onRowCountChange({data:s,newCount:0,oldCount:e}));return!0}return!1}deleteAll(t){return!!this._clearRows(t)&&(this._dataChanged(this.wrapperOrThis()),!0)}deleteRow(t,e){this.$_checkReadOnly(),this.$_checkRow(t,!1);const s=this.wrapperOrThis(),i=this._rows,r=i[t],n=r.id;if(this._softDeleting&&!e)r.state!==Gr.DELETED&&(r.state=Gr.DELETED,this._evLock||(this._fireEvent("onDataStateChanged",t),this.onRowStateChange&&this.onRowStateChange({data:s,row:t})));else if(i.splice(t,1),this._resetIndices(t),this._flags._rowDeleted(t),!this._evLock){this._fireEvent("onDataRowDeleted",t,n),this._fireEvent("onDataCountChanged",i.length,i.length+1),this._fireEvent("onDataChanged");const e=i.length;this.onRowsDelete&&this.onRowsDelete({data:s,rows:[t],oldValues:[r.values]}),this.onRowCountChange&&this.onRowCountChange({data:s,newCount:e,oldCount:e+1})}this._dataChanged(s)}deleteRows(t,e){if(Array.isArray(t)&&t.length>0){this.$_checkReadOnly(),this.$_checkRows(t,!1);const s=this._rows,i=s.length;if((t=c.dedupe(t.filter((t=>t>=0&&t<i)))).length>1){const r=this.wrapperOrThis(),n=[];let o;if(t=t.sort(((t,e)=>t-e)),this._softDeleting&&!e){o=[];for(let e=0,i=t.length;e<i;e++){const i=s[t[e]];i.state!==Gr.DELETED&&(i.state=Gr.DELETED,o.push(t[e]))}o.length>0&&!this._evLock&&this._fireEvent("onDataStatesChanged",o)}else{const e=[];for(let i=t.length-1;i>=0;i--){const r=t[i];n.push(s[r].id),e.push(s[r].values),s.splice(r,1)}if(this._resetIndices(0),this._flags._rowsDeleted(t),!this._evLock){this._fireEvent("onDataRowsDeleted",t,n),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged");const s=t.length;this.onRowsDelete&&this.onRowsDelete({data:r,rows:t,oldValues:e}),this.onRowCountChange&&this.onRowCountChange({data:r,newCount:i-s,oldCount:i})}o=t}return this._dataChanged(r),o}return this.deleteRow(t[0],e),[t[0]]}return[]}deleteRange(t,e,s){if(this.$_checkReadOnly(),this.$_checkRow(t,!1),isNaN(e)||e<=0)return 0;const i=this._rows,r=i.length;if((e=Math.min(r-t,e))>0){const n=this.wrapperOrThis();if(this._softDeleting&&!s){const s=[];for(let r=t,n=t+e;r<n;r++){const t=i[r];t.state!==Gr.DELETED&&(t.state=Gr.DELETED,s.push(r))}s.length>0&&!this._evLock&&this._fireEvent("onDataStatesChanged",s)}else{const s=[],o=[];for(let r=0;r<e;r++){const e=t+r;s.push(e),o.push(i[e].values)}i.splice(t,e),this._resetIndices(t),this._flags._rangeDeleted(t,e),this._evLock||(this._fireEvent("onDataRangeDeleted",t,e),this._fireEvent("onDataCountChanged",this._rows.length,r),this._fireEvent("onDataChanged"),this.onRowsDelete&&this.onRowsDelete({data:n,rows:s,oldValues:o}),this.onRowCountChange&&this.onRowCountChange({data:n,newCount:r-e,oldCount:r}))}this._dataChanged(n)}return e}$_checkInsert(t,e){const s=this._fieldMap,i={};for(let t in this._fieldMap)t in e?void 0===e[t]?void 0!==s[t].default&&(i[t]=s[t].default):i[t]=e[t]:void 0!==s[t].default&&(i[t]=s[t].default),this.$_validate(s[t],i[t]);return this.$_validateRow(t,i),i}insertRow(t,e){if(this.$_checkReadOnly(),this.$_checkRow(t,!0),c.isObject(e)){const s=this.wrapperOrThis(),i=this._rows,r=i.length,n=jr.createRow2(this._fieldMap,this._derivedMap,e=this.$_checkInsert(-1,e));return i.splice(t,0,n),this._resetIndices(t),this._flags._rowAdded(t),this._evLock||(this._fireEvent("onDataRowAdded",t),this._fireEvent("onDataCountChanged",r,r-1),this._fireEvent("onDataChanged"),this.onRowsAdd&&this.onRowsAdd({data:s,row:t,count:1}),this.onRowCountChange&&this.onRowCountChange({data:s,newCount:r-1,oldCount:r})),this._dataChanged(s),!0}return!1}appendRow(t){return this.insertRow(this._rows.length,t)}insertRows(t,e){let s;if(this.$_checkReadOnly(),this.$_checkRow(t,!0),c.isObject(e))s=this._buildRows(e);else if(Array.isArray(e)&&e.length>0){const t=this._fieldMap,i=this._derivedMap;s=[];for(let r=0;r<e.length;r++){let n=e[r];c.isObject(n)&&s.push(jr.createRow2(t,i,n=this.$_checkInsert(-1,n)))}}const i=this._rows,r=s?s.length:0;if(r>0){const e=this.wrapperOrThis(),n=i.length;if(t>=i.length)for(let t=0;t<r;t++)i.push(s[t]);else for(let e=0;e<r;e++)i.splice(t+e,0,s[e]);this._resetIndices(t),this._flags._rowRangeAdded(t,r),this._evLock||(this._fireEvent("onDataRowsAdded",t,r),this._fireEvent("onDataCountChanged",n+r,n),this._fireEvent("onDataChanged"),this.onRowsAdd&&this.onRowsAdd({data:e,row:t,count:r}),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:n+r,oldCount:n})),this._dataChanged(e)}return i.length}appendRows(t){return this.insertRows(this._rows.length,t)}findRow(t,e=0,s=-1){return jr.findRow(this._rows,t,e,s)}findRows(t,e=0,s=-1){return jr.findRows(this._rows,t,e,s)}findDistinctRows(t,e=0,s=-1){return jr.findDistinctRows(this._rows,t,e,s)}getSummary(t){const e=this.fieldByName(t);if(e){let s=this._summaries[t];return s||(this._summaries[t]=s=nn(e,this._rows,0,-1)),s}}getGroupSummary(t,e,s){const i=this.fieldByName(t);return i&&nn(i,this._rows,e,s)}getRowState(t){return this.$_checkRow(t,!1),this._rows[t].state}internalRowState(t){return this._rows[t].state}$_restore(t){return t.state===Gr.UPDATED&&this._restorable?(t.values=t.save,delete t.save,delete t.state,!0):t.state===Gr.DELETED&&(delete t.state,!0)}restoreRow(t){if(this.$_checkReadOnly(),this.$_checkRow(t,!1),this.$_restore(this._rows[t])){this._fireEvent("onDataStateChanged",t),this._fireEvent("onDataChanged");const e=this.wrapperOrThis();return this.onRowStateChange&&this.onRowStateChange({data:e,row:t}),this._dataChanged(e),!0}return!1}restoreRows(t){if(!Array.isArray(t))return[];this.$_checkReadOnly(),this.$_checkRows(t,!1);const e=this._rows,s=[];return t.forEach((t=>{this.$_restore(e[t])&&s.push(t)})),s.length,s}restoreAllRows(){let t=0;return this._rows.forEach((e=>{this.$_restore(e)&&t++})),t}restoreUpdatedRows(){let t=0;return this._rows.forEach((e=>{e.state===Gr.UPDATED&&this.$_restore(e)&&t++})),t}restoreDeletedRows(){let t=0;return this._rows.forEach((e=>{e.state===Gr.DELETED&&this.$_restore(e)&&t++})),t}moveRow(t,e){if(this.$_checkRow(t,!1),this.$_checkRow(e,!1),t!==e){const s=this.wrapperOrThis(),i=this._rows,r=i.splice(t,1)[0];return i.splice(e,0,r),this._resetIndices(Math.min(t,e)),this._flags._rowMoved(t,e),this._evLock||(this._fireEvent("onDataRowMoved",t,e),this._fireEvent("onDataChanged"),this.onRowMove&&this.onRowMove({data:s,from:t,to:e})),this._dataChanged(s),!0}return!1}moveRows(t,e,s){const i=this._rows;if(e=Math.min(e,i.length-t),s>i.length-e&&qr.throwFormat(this.wrapperOrThis(),v.invalidToIndex,s),1===e){if(this.moveRow(t,s))return 1}else if(t!==s&&e>1){this.$_checkRow(t,!1),this.$_checkRow(s,!0);const r=this.wrapperOrThis(),n=i.splice(t,e);return i.splice.apply(i,[s,0].concat(n)),this._resetIndices(Math.min(t,s)),this._flags._rowsMoved(t,e,s),this._evLock||(this._fireEvent("onDataRowsMoved",t,e,s),this._fireEvent("onDataChanged"),this.onRowsMove&&this.onRowsMove({data:r,from:t,count:e,to:s})),this._dataChanged(r),e}return 0}_dataChanged(t){this._summaries={},this.onDataChange&&!this._evLock&&(this._args.data=t,this.onDataChange(this._args))}$_checkReadOnly(){this._readOnly&&qr.throw(this.wrapperOrThis(),v.canNotModifyData)}$_checkRow(t,e){(t<0||t>=this._rows.length+(e?1:0))&&qr.throwFormat(this.wrapperOrThis(),v.invalidRowIndex,t)}$_checkRows(t,e){const s=this._rows.length+(e?1:0);t.forEach((t=>{(t<0||t>=s)&&qr.throwFormat(this.wrapperOrThis(),v.invalidRowIndex,t)}))}$_checkUpdate(t){return t.state===Gr.DELETED&&qr.throwFormat(this.wrapperOrThis(),v.canNotModifyDeleted,t.row),t}checkField(t){t in this._fieldMap||t in this._derivedMap||qr.throwFormat(this.wrapperOrThis(),v.invalidFieldName,t)}$_validate(t,e){const s=this.wrapperOrThis();if((null==e||""===e)&&t.required)throw new Yr(s,t,S(v.requiredField,t.displayText()));if(t.domain&&t.domain.indexOf(e)<0)throw new Yr(s,t,S(v.invalidValueInDomain,t.displayText()));if(void 0!==t.minimum&&e<t.minimum||void 0!==t.maximum&&e>t.maximum)throw new Yr(s,t,S(v.invalidValueInRange,t.displayText()))}$_validateRow(t,e){if(this._validator){const s=this._validator(this.wrapperOrThis(),t,e);if(s)throw new Qr(this.wrapperOrThis(),s)}}$_buildFields(t,e){return Array.isArray(t.fields)?t.fields.map((t=>{let e;return e="string"==typeof t?Wr.create(t,Br.TEXT):Wr.create(t),e&&(e._owner=this),e})).filter((t=>null!=t)):e?this.$_extractFields(e):void 0}$_buildDerivedFields(t,e){const s=[];if(Array.isArray(t)){for(let e of t)if(c.isObject(e)&&e.name&&e.extractor){const t=zr.createDerived(e.name,e.extractor,e.type||Br.TEXT);t._owner=this,s.push(t)}return s}return s}_resetIndices(t){const e=this._rows;if(e)for(let s=t,i=e.length;s<i;s++)e[s].row=s}$_extractFields(t){const e=[];if(Array.isArray(t)){const s=t[0];for(let t in s){const i=s[t],r=i instanceof Date?Br.DATE:rh[typeof i]||Br.ANY,n=Wr.create(t,r);e.push(n)}}else if(c.isObject(t)&&t.values){const s=t.values;let i,a=!1;switch(t.type){case oh.FIELD:if(c.isObject(s)){i={};for(const t in s)i[t]=s[t][0]}break;case oh.CSV:a=!0;case oh.TSV:if("string"==typeof s&&s.length>0){const e=t[hh]=s.split(r),l=t.fieldHeader;if(l>=0&&e.length>l){const s=t.startRow||0;t.reader;const r=t.quoted;if(e.length>s&&s>l){let d,_;if(a){const t=r?n:",";if(d=e[l].split(t),r)for(let t=d.length-1;t>=0;t--)d[t]=c.stripQuotes(d[t]);if(_=e[s].split(t),r)for(let t=_.length-1;t>=0;t--)_[t]=c.stripQuotes(_[t])}else d=e[l].split(t.multiTabs?h:o),_=e[s].split(t.multiTabs?h:o);const u=Math.min(d.length,oe(t.fieldCount,d.length));i={};for(let t=0;t<u;t++)i[d[t]]=_[t]}}}break;default:Array.isArray(s)&&s.length>0&&(i=s[0])}i&&function(t,s,i){for(let r in t){const n=s?s(r,t[r]):t[r],o=n instanceof Date?Br.DATE:rh[typeof n]||Br.ANY,h=i&&i[r]||r,a=Wr.create(h,o);a.sourceProp=r,e.push(a)}}(i,t.reader,t.fieldMap)}return e}_buildRows(t){const e=this._fieldMap,s=this._derivedMap;if(Array.isArray(t)){const i=new Array;return t.forEach(((t,r)=>i.push(jr.createRow2(e,s,t)))),i}if(c.isObject(t)&&t.values){const s=t.values,i=t.reader;let r=e;if(c.isObject(t.fieldMap)){const t={};for(let e in r){const s=r[e];s.sourceProp?t[s.sourceProp]=s:t[e]=s}r=t}let n=+t.rowCount;switch(n=isNaN(n)||n<0?Number.MAX_SAFE_INTEGER:n>>0,t.type){case oh.FIELD:return this.$_loadFieldArray(s,t,r,i,n);case oh.CSV:return this.$_loadCsv(s,t,r,i,n);case oh.TSV:return this.$_loadTsv(s,t,r,i,n);default:return this.$_loadJson(s,t,r,i,n)}}else if(c.isObject(t))return[jr.createRow2(e,s,t)]}$_loadJson(t,e,s,i,r){const n=this._derivedMap;if(Array.isArray(t)){const e=[];for(let o=0,h=Math.min(r,t.length);o<h;o++)e.push(jr.createRow(s,n,t[o],i));return e}if(c.isObject(t))return[jr.createRow(s,n,t,i)]}$_loadFieldArray(t,e,s,i,r){const n=this._derivedMap,o=[],h={};for(const e in t)h[e]=Array.isArray(t[e])?t[e].length:0;let a=e.lengthField&&h[e.lengthField];if(isNaN(a)||a<1){a=0;for(const t in h)a=Math.max(h[t],a)}a=Math.min(r,a);for(let e=0;e<a;e++){const r={};for(const s in h)h[s]>e&&(r[s]=t[s][e]);o.push(jr.createRow(s,n,r,i))}return o}$_trimLines(t,e){if(t.skipBlank)for(let t=e.length-1;t>=0;t--)e[t].trim()||e.splice(t,1);else if(!1!==t.trimLast)for(;e.length>0&&""===e[e.length-1].trim();)e.pop();return e}$_loadCsv(t,e,s,i,o){if("string"==typeof t&&t.length>0){const h=this._derivedMap,a=this.$_trimLines(e,e[hh]||t.split(r)),l=a.length,d=e.fieldHeader,_=this._fieldNames.slice(0),u=[],g=_.length,p=e.startRow||0,f=e.quoted,w=f?n:",";if(d>=0&&l>d){const t=a[d].split(w);for(let e=0,s=Math.min(g,t.length);e<s;e++)_[e]=t[e]||_[e]}for(let t=p,e=Math.min(o+p,l);t<e;t++){const e=a[t].split(w),r={};if(f)for(let t=0;t<g;t++)r[_[t]]=c.stripQuotes(e[t]);else for(let t=0;t<g;t++)r[_[t]]=e[t];u.push(jr.createRow(s,h,r,i))}return delete e[hh],u}}$_loadTsv(t,e,s,i,n){if("string"==typeof t&&t.length>0){const a=this._derivedMap,l=this.$_trimLines(e,e[hh]||t.split(r)),d=l.length,_=e.fieldHeader,c=this._fieldNames.slice(0),u=[],g=c.length,p=e.startRow||0,f=e.multiTabs?h:o;if(_>=0&&d>_){const t=l[_].split(f);for(let e=0,s=Math.min(g,t.length);e<s;e++)c[e]=t[e]||c[e]}for(let t=p,e=Math.min(n+p,d);t<e;t++){const e=l[t].split(f),r={};for(let t=0;t<g;t++)r[c[t]]=e[t];u.push(jr.createRow(s,a,r,i))}return delete e[hh],u}}$_clearDerived(t){for(let e of this._derivedFields)delete t[e.name]}getRows(){return this._rows.slice(0)}internalValue(t,e){return this._rows[t]&&this._rows[t].values[e]}_checkLoaded(t){const e=this.wrapperOrThis(),s=this._rows.length;this._fireEvent("onDataLoaded",t),s!==t?(this._fireEvent("onDataCountChanged",s,t),this._fireEvent("onDataChanged"),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:s,oldCount:t}),this._dataChanged(e)):s>0&&(this._fireEvent("onDataChanged"),this._dataChanged(e))}}class lh extends ah{constructor(t,e,s,i){super(t,e,s,i),this.$_loadRows(s)}loadData(t){const e=this._rows.length;return this._clearRows(!1),this.$_loadRows(t),this._checkLoaded(e),this}$_loadRows(t){t?(this._rows=this._buildRows(t),this._resetIndices(0)):this._rows=[]}}var dh,_h,ch,uh;!function(t){t.OR="or",t.AND="and"}(dh||(dh={}));class gh{static saveOrders(t){t.forEach(((t,e)=>t.tidx=e))}static restoreOrders(t){return t.sort(((t,e)=>t.tidx-e.tidx))}constructor(t,e){this.name=t,this.label=e,this.enabled=!0}}class ph extends gh{constructor(t,e,s,i,r){super(t,e),this._filterMap={},s=Array.isArray(s)?s.slice(0):[],this.op=i||dh.OR;const n=[];for(const t of s){let e;t.filters?e=new ph(t.name,t.label,t.op,t.filters,r):t.filter&&(e=this.$_createFilter(t.name,t.label,t.filter,r)),e&&(e.parent=this,e.enabled=ie(t.enabled,!0),this._filterMap[t.name]=e,n.push(e))}this.children=n}isNotEmpty(){return this.children.length>0}add(t,e,s,i,r){if(e instanceof gh&&this.children.indexOf(e)>=0)return e;const n=e instanceof gh?e:this.$_createFilter(t,s,e,r);return n&&(n.enabled=i,n.parent=this,this.children.push(n),this._filterMap[t]=n),n}addSet(t,e,s,i,r,n){const o=new ph(t,i,e,s,n);return o&&this.add(t,o,i,r,n),o}remove(t){if(t instanceof gh){const e=this.children.indexOf(t);if(e>=0)return this.children.splice(e,1),delete this._filterMap[t.name],!0}else{const e=this.getFilter(t);if(e&&e.parent)return e.parent.remove(e)}}getFilter(t){let e=this._filterMap[t];if(!e)for(let s of this.children)if(s instanceof ph&&(e=s.getFilter(t),e))break;return e}getAll(){const t=[];return function(e){for(let s of e.children)t.push(s)}(this),t}clear(){if(this.children.length>0)return this.children=[],this._filterMap={},!0}enabledAll(t){let e=!1;return this.enabled!=t&&(this.enabled=t,e=!0),this.children.forEach((s=>{s instanceof ph?e=e||s.enabledAll(t):s.enabled!=t&&(s.enabled=t,e=!0)})),e}select(t){if(t.length>0){let e=this.children.filter((t=>t.enabled));const s=e.length;if(s>0){let i;if(this.op===dh.AND){i=e[0].select(t);for(let t=1;t<s;t++)i=e[t].select(i)}else{gh.saveOrders(t),i=[];for(let r=0;r<s;r++)i=i.concat(e[r].select(t));i=c.dedupe(i,((t,e)=>t.row-e.row)),i=gh.restoreOrders(i)}return i}return t}return[]}$_createFilter(t,e,s,i){if(t||qr.throw(null,v.requireFilterName),t){let r;return c.isNumberArray(s)?r=new mh(t,void 0,s):"number"==typeof s?isNaN(s)||(r=new mh(t,void 0,[0,s])):c.isStringArray(s)?r=new wh(t,void 0,s,i):"function"==typeof s&&(r=new fh(t,void 0,s)),r.label=e,r}}}class fh extends gh{constructor(t,e,s){super(t,e),this.selector=s}selectRow(t,e){return this.selector(t,e)}select(t){const e=this.selector;return t.filter(((t,s)=>e(s,t.values)))}}class wh extends gh{constructor(t,e,s,i){super(t,e),this.keyFields=[],this.comparers=[];for(let t of s){const e=i.fieldByName(t);e&&(this.keyFields.push(t),this.comparers.push(e.comparer))}this.keyFields=s.slice(0)}select(t){function e(t,e){for(let n=0;n<i;n++){const i=s[n],o=t[i],h=e[i],a=r[n](o,h);if(a)return a}return 0}const s=this.keyFields,i=s.length,r=this.comparers;gh.saveOrders(t);let n=(t=t.sort(((t,s)=>e(t.values,s.values))))[0],o=[n],h=1;for(;h<t.length;){const s=t[h++];0!==e(n.values,s.values)&&o.push(n=s)}return o=gh.restoreOrders(o),o}}class mh extends gh{constructor(t,e,s){super(t,e),this._ranges=this.$_buildRanges(s)}select(t){if(this._ranges){let e=[];for(let s of this._ranges)e=e.concat(t.slice(s.from,s.to));return e}return t}$_buildRanges(t){const e=t.length,s=[];if(1===e&&t[0]>=0)s.push({from:0,to:t[0]});else if(e>1){let i=-1;for(let r=0,n=Math.floor(e/2);r<n;r++){const e=t[2*r],n=t[2*r+1];e>i&&n>=e&&(s.push({from:e,to:n}),i=n)}}return s.length>0?s:null}}class yh extends sn{constructor(t,e,s,i){super(t),this._dirty=!1,this._sortDirty=!1,this._defaultFilterOp=dh.AND,this._filtered=!1,this._nextSorter=1,this._sortMap={},this._sorted=!1,this._summaries={},this._autoArrange=!0,this._hideDeleted=!1,this._wrapper=i,e instanceof ah||qr.throw(null,v.requireSourceData),this._data=e,e.addListener(this),this._fields=e.fields(),this.$_buildOptions(s),this._rows=this.$_buildRows(!0)}_doDestory(){this._data&&(this._data.removeListener(this),this._data=this._fields=this._rows=null),this._wrapper=null}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._data.readOnly()}fields(){return this._fields.slice(0)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}canSort(){return!0}canMove(){return!1}containsField(t){return this._data.containsField(t)}checkField(t){this._data.checkField(t)}fieldByName(t){return this._data.fieldByName(t)}filter(){return this._filter}postFilter(){return this._postFilter}hasFilter(){return this._filter.isNotEmpty()||this._postFilter.isNotEmpty()}filtered(){return this._filtered}sorted(){return this._sorted}getDataRow(t){return this._rows[t]}rowOfDataRow(t){const e=this._rows;for(let s=e.length-1;s>=0;s--)if(e[s]===t)return s;return-1}rowById(t){const e=this._rows.find((e=>e.id===t));return e?e.row:-1}internalRowId(t){return this._rows[t].id}getRowId(t){const e=this._rows[t];return e?e.id:void 0}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}levelRowOfRow(t){return t}getRowValues(t){return sn.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}internalRowsValues(t){const e=this._rows;return t.map((t=>Object.assign({},e[t].values)))}getValues(t,e,s){if(sn.checkRow(this,t),Array.isArray(e)){const i=this._data,r={};return e.forEach((e=>{s&&i.checkField(e),r[e]=this.internalValue(t,e)})),r}return this.internalRowValues(t)}getAllValues(t,e,s){if(null==t&&(t=c.makeIntArray(0,this._rows.length)),Array.isArray(t)){if(sn.checkRows(this,t),Array.isArray(e)){const i=this._rows;return s&&e.forEach((t=>s&&this.checkField(t))),t.map((t=>{const s={};return i[t]&&e.forEach((e=>s[e]=this.internalValue(t,e))),s}))}return this.internalRowsValues(t)}}getValue(t,e,s){return sn.checkRow(this,t),s&&this._data.checkField(e),this._rows[t].values[e]}internalValue(t,e){return this._rows[t].values[e]}getProp(t,e,s,i){return sn.checkRow(this,t),i&&this._data.checkField(e),this._rows[t].getProp(e,s)}getSummary(t){const e=this.fieldByName(t);if(e){let s=this._summaries[t];return s||(this._summaries[t]=s=nn(e,this._rows,0,-1)),s}}getGroupSummary(t,e,s){const i=this.fieldByName(t);return i&&nn(i,this._rows,e,s)}updateValue(t,e,s){return this._data.updateValue(this._rows[t].row,e,s)}findRow(t,e=0,s=-1){return jr.findRow(this._rows,t,e,s)}findRows(t,e=0,s=-1){return jr.findRows(this._rows,t,e,s)}findDistinctRows(t,e,s){return jr.findDistinctRows(this._rows,t,e,s)}deleteRow(t,e){ah.checkRow(this,t),this._data.deleteRow(this._rows[t].row,e)}deleteRows(t,e){Array.isArray(t)&&t.length>0&&(t.forEach((t=>sn.checkRow(this,t))),t=t.map((t=>this._rows[t].row)),this._data.deleteRows(t,e))}updateRow(t,e,s,i){return ah.checkRow(this,t),this._data.updateRow(this._rows[t].row,e,s,i)}appendRow(t){return this._data.appendRow(t)}getRowState(t){return ah.checkRow(this,t),this._data.internalRowState(this._rows[t].row)}internalRowState(t){return this._data.internalRowState(this._rows[t].row)}$_getRowsOfSourceIds(t){const e=[];return t.forEach((t=>{const s=this.rowOfSourceId(t);s>=0&&e.push(s)})),e}$_getRowsOfData(t){const e=[];return t.forEach((t=>{const s=this.rowOfSourceRow(t);s>=0&&e.push(s)})),e}$_getRowsOfDataRange(t,e){const s=[];for(let i=0;i<e;i++){const e=this.rowOfSourceRow(t+i);e>=0&&s.push(e)}return s}$_needArrange(){return(this._sorted||this.hasFilter())&&this._autoArrange}onDataValueUpdated(t,e,s,i,r){const n=this._rows.length,o=this.rowOfSourceRow(e);this.$_needArrange()?(this.$_reset(!1),this._rows.length!==n&&this._fireEvent("onDataCountChanged",this._rows.length,n),this._fireEvent("onDataChanged")):o>=0&&(this._fireEvent("onDataValueUpdated",o,s,i,r),this._fireEvent("onDataChanged"))}onDataRowUpdated(t,e,s){const i=this._rows.length,r=this.rowOfSourceRow(e);this.$_needArrange()?(this.$_reset(!1),this._rows.length!==i&&this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")):r>=0&&(this._fireEvent("onDataRowUpdated",r,s),this._fireEvent("onDataChanged"))}onDataRowsUpdated(t,e){if(0===(e=this.$_getRowsOfData(e)).length)return;const s=this._rows.length;this.$_reset(!1),this._rows.length!==s&&this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged")}onDataRangeUpdated(t,e,s){if(0===this.$_getRowsOfDataRange(e,s).length)return;const i=this._rows.length;this.$_reset(!1),this._rows.length!==i&&this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}onDataRowAdded(t,e){const s=this._rows.length;if(this.$_reset(!1),this._rows.length!==s){const t=this.rowOfSourceRow(e);this._flags._rowAdded(t),this._fireEvent("onDataCountChanged",this._rows.length,s)}this._fireEvent("onDataChanged")}onDataRowsAdded(t,e,s){const i=this._rows.length;if(this.$_reset(!1),this._rows.length!==i){const t=[];for(let i=0;i<s;i++){const s=this.rowOfSourceRow(e+i);s>=0&&t.push(s)}t.length>0&&this._flags._rowsAdded(c.sortNum(t)),this._fireEvent("onDataCountChanged",this._rows.length,i)}this._fireEvent("onDataChanged")}onDataLoaded(t,e){this.$_reset(!0),this._rows.length!==e&&this._fireEvent("onDataCountChanged",this._rows.length,e),this._fireEvent("onDataChanged")}onDataCleared(t,e){const s=this._rows.length;s>0&&(this._rows=[],this._flags._cleared(s),this._fireEvent("onDataCleared"),this._fireEvent("onDataCountChanged",0,s),this._fireEvent("onDataChanged"))}onDataRowDeleted(t,e,s){const i=this.rowOfSourceId(s);if(i<0)return;const r=this._rows.length;this._rows.splice(i,1),this._fireEvent("onDataRowDeleted",i,s),this._flags._rowDeleted(i),this._fireEvent("onDataCountChanged",this._rows.length,r),this._fireEvent("onDataChanged")}onDataRowsDeleted(t,e,s){if(0===(e=this.$_getRowsOfSourceIds(s)).length)return;const i=this._rows.length;for(let t=(e=c.sortNum(e)).length-1;t>=0;t--)this._rows.splice(e[t],1);this._fireEvent("onDataRowsDeleted",e,s),this._flags._rowsDeleted(e),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}onDataRangeDeleted(t,e,s){let i=this.$_getRowsOfDataRange(e,s);if(0===i.length)return;const r=this._rows.length;this.$_reset(!0),this._rows.length!==r&&(this._flags._rowsDeleted(c.sortNum(i)),this._fireEvent("onDataCountChanged",this._rows.length,r)),this._fireEvent("onDataChanged")}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}onDataStateChanged(t,e){if(this._hideDeleted&&this.source().getRowState(e)===Gr.DELETED){const t=this.rowOfSourceId(e);if(t<0)return;this._rows.splice(t,1),this._fireEvent("onDataRowDeleted",t,e),this._flags._rowDeleted(t),this._fireEvent("onDataChanged")}}onDataStatesChanged(t,e){if(this._hideDeleted){let t=(e=e.filter((t=>this.source().getRowState(t)===Gr.DELETED))).map((t=>this.rowOfSourceId(t)));if(t.length>0){t=c.sortNum(t);for(let e=t.length-1;e>=0;e--)this._rows.splice(t[e],1);this._fireEvent("onDataRowsDeleted",t,e),this._flags._rowsDeleted(t),this._fireEvent("onDataChanged")}}}source(){return this._data}autoArrange(){return this._autoArrange}setAutoArrange(t){this._autoArrange=t}hideDeleted(){return this._hideDeleted}setHideDeleted(t){this._hideDeleted=t}snapshot(t,e){const s={};let i;t&&(s.name=t.name,i=s.fields=Array.isArray(t.fields)?this._fields.filter((e=>t.fields.indexOf(e.name)>=0)).map((t=>t.proxy())):null),s.fields||(s.fields=this._fields.map((t=>t.proxy())));const r=this._rows,n=r.length,o=Math.max(0,oe(t&&t.start,0)),h=Math.max(0,oe(t&&t.count,n)),a=Math.min(n,o+h),l=!t||!t.skipEmpty;!t||t.skipBlank;const d=[];if(i)for(let t=o;t<a;t++){const e=r[t];if(e){const t=e.values,s={};for(const e in i)s[e]=t[e];d.push(s)}else l&&d.push(void 0)}else for(let t=o;t<a;t++){const e=r[t];e?d.push(Object.assign({},e.values)):l&&d.push(void 0)}return new lh(t?t.name:void 0,s,d,e)}build(t){if(t||this._dirty){const t=this._rows.length;this._sortDirty=!0,this.$_reset(!0),this._dirty=!1,this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}return this}isSorted(t){const e=this._sortMap[t.name];return e?{dir:e.dir,order:this._sorts.indexOf(e)}:null}getFilter(t,e){return(e?this._postFilter:this._filter).getFilter(t)}getFilters(){return this._filter.getAll().concat(this._postFilter.getAll())}addFilter(t,e,s){const i=ie(t.enabled,!0),r=(e?this._postFilter:this._filter).add(t.name,t.filter,t.label,i,this);return r&&this.$_filterChanged(s),r}addFilterSet(t,e,s){const i=ie(t.enabled,!0),r=(e?this._postFilter:this._filter).addSet(t.name,t.filters,t.op,t.label,i,this);return r&&this.$_filterChanged(s),r}removeFilter(t,e){(this._filter.remove(t)||this._postFilter.remove(t))&&this.$_filterChanged(e)}removeFilters(t,e){let s=!1;if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)s||(s=this._filter.remove(t[e])||this._postFilter.remove(t[e]));s&&this.$_filterChanged(e)}}clearFilters(t){(this._filter.clear()||this._postFilter.clear())&&this.$_filterChanged(t)}enableFilter(t,e,s){const i=t instanceof gh?t:this.$_getFilter(t);i&&i.enabled!=e&&(i.enabled=e,this.$_filterChanged(s))}toggleFilter(t,e){const s=t instanceof gh?t:this.$_getFilter(t);s&&(s.enabled=!s.enabled,this.$_filterChanged(!0))}enableFilters(t,e,s){let i=!1;Array.isArray(t)&&(t.forEach((t=>{const s=t instanceof gh?t:this.$_getFilter(t);s&&s.enabled!=e&&(s.enabled=e,i=!0)})),i&&this.$_filterChanged(s))}toggleFilters(t,e){let s=!1;Array.isArray(t)&&(t.forEach((t=>{const e=t instanceof gh?t:this.$_getFilter(t);e&&(e.enabled=!e.enabled,s=!0)})),s&&this.$_filterChanged(e))}enableAllFilters(t,e){(this._filter.enabledAll(t)||this._postFilter.enabledAll(t))&&this.$_filterChanged(e)}sort(t,e){let s;if("function"==typeof t)s=[{field:"_dl_sorter_"+this._nextSorter++,comparer:t}];else if(t){const e=Array.isArray(t)?t:[t];s=[];for(let t=0;t<e.length;t++){const i=e[t];"string"==typeof i?i&&s.push({field:i}):i.field&&s.push(i)}0===s.length&&(s=null)}const i=this._sortMap={};if(s==this._sorts)return;const r=s?s.length:0,n=this._sorts?this._sorts.length:0;if(r>0&&r===n){let t=!1;for(let e=0;e<s.length;e++)if(s[e].field!=this._sorts[e].field||s[e].dir!=this._sorts[e].dir||s[e].comparer!=this._sorts[e].comparer){t=!0;break}if(!t)return}return s&&s.forEach((t=>i[t.field]=t)),this._sorts=s,this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged(),this}addSort(t,e,s,i){if(this._sortMap[t])return this;if(t){this._fields.find((e=>e.name===t))||qr.throwFormat(this,v.invalidFieldName,t);const r=this._sorts=this._sorts||[],n={field:t,dir:e};if(s&&r.length>0){const t=this.$_indexOfSort(s);t>=0?r.splice(t,0,n):r.push(n)}else r.push(n);this._sortMap[t]=n,this._dirty=this._sortDirty=!0,i&&this.build(!1),this.$_fireSortChanged()}return this}appendSort(t,e,s){return this.addSort(t,e,null,s)}addSorter(t,e,s,i){return this}appendSorter(t,e,s,i){return this.addSorter(t,e,null,i)}removeSort(t,e){let s=!1;if(Array.isArray(t))for(let e of t)e&&this.$_removeSort(e)&&(s=!0);else t&&this.$_removeSort(t)&&(s=!0);return s&&(this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged()),this}toggleSort(t,e){if("string"==typeof t&&(t=this.fieldByName(t)),t instanceof Wr){const s=this.isSorted(t);s?(this.removeSort(t.name,!1),s.dir===te.ASCENDING&&this.appendSort(t.name,te.DESCENDING,!1)):this.appendSort(t.name,te.ASCENDING,!1),e&&this.build(!1)}}clearSort(t){this.sort(null,t)}getSourceRow(t){return this._rows[t].row}rowOfSourceId(t){const e=this._rows;for(let s=0,i=e.length;s<i;s++)if(e[s].id===t)return s;return-1}rowOfSourceRow(t){const e=this._rows;for(let s=0,i=e.length;s<i;s++)if(e[s].row===t)return s;return-1}getSortOption(t){if(Array.isArray(this._sorts)){const e=this._sorts.find((e=>e.field==t));return e&&Object.assign({},e)}}setDataTags(t,e){for(const t of this._rows)t.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getRows(){return this._rows.slice(0)}getFieldValues(t,e,s){}$_buildOptions(t){if(t){t.filterOp&&(this._defaultFilterOp=t.filterOp);let e=t.filter;c.isObject(e)&&(this._filter=new ph(e.name||"main_filter",e.label,Array.isArray(e.filters)?e.filters:[e],e.op||this._defaultFilterOp,this)),e=t.postFilter,c.isObject(e)&&(this._postFilter=new ph(e.name||"main_post_filter",e.label,Array.isArray(e.filters)?e.filters:[e],e.op||this._defaultFilterOp,this))}this._filter||(this._filter=new ph("main_filter",null,null,this._defaultFilterOp,this)),this._postFilter||(this._postFilter=new ph("main_post_filter",null,null,this._defaultFilterOp,this)),t&&t.sort&&this.sort(t.sort,!1),this._hideDeleted=!!(null==t?void 0:t.hideDeleted)}$_sort(t,e){let s=this._sorts;if(this._sorted=Array.isArray(s))if(s=s.filter((e=>e.comparer||(e._f_=t.find((t=>t.name===e.field))))),1===s.length&&s[0].comparer){const t=s[0].comparer;e=e.sort(((e,s)=>{let i=t(e.row,e.values,s.row,s.values);return i||(i=e.row-s.row),i}))}else s.length>0&&(e=e.sort(((t,e)=>{let i=0;for(let r of s){if(r.comparer)i=r.comparer(t.row,t.values,e.row,e.values);else{const s=t.values[r.field],n=e.values[r.field];i=r._f_.comparer(s,n),i&&r.dir===te.DESCENDING&&(i*=-1)}if(i)break}return i||(i=t.row-e.row),i})),s.forEach((t=>delete t._f_)));return e}$_buildRows(t){const e=this._fields,s=this._rows;let i=this._rows=this._data.getRows();const r=i.length,n=this._autoArrange||t;if(n&&this._filter.isNotEmpty()&&(i=this._filter.select(i)),n&&(i=this.$_sort(e,i),this._sortDirty=!1),n&&this._postFilter.isNotEmpty()&&(i=this._postFilter.select(i)),this._filtered=i.length<r,this.source().softDeleting()&&this._hideDeleted&&(i=i.filter((t=>t.state!==Gr.DELETED))),!this._flags.isEmpty()){for(let t=s.length-1;t>=0;t--)s[t].tidx=t;this._flags._reset(i)}return i}$_indexOfSort(t){const e=this._sorts;if(e)for(let s=0;s<e.length;s++)if(e[s].field===t)return s;return-1}$_removeSort(t){const e=this.$_indexOfSort(t);if(e>=0)return this._sorts.splice(e,1),delete this._sortMap[t],!0}$_reset(t){this._rows=this.$_buildRows(t),this._fireEvent("onDataReset")}$_getFilter(t){return this._filter.getFilter(t)||this._postFilter.getFilter(t)}$_filterChanged(t){this._dirty=!0,ie(t,!0)&&this.build(!1),this.$_fireFilterChanged()}$_fireFilterChanged(){this._fireEvent("onDataViewFilterChanged"),this.onFilterChange&&this.onFilterChange({dv:this.wrapperOrThis()})}$_fireSortChanged(){this._fireEvent("onDataViewSortChanged"),this.onSortChange&&this.onSortChange({dv:this.wrapperOrThis()})}}class bh extends th{_doInitDefaults(){super._doInitDefaults(),this._autoApply=!1,this._autoClose=!1,this.setOkLabel("Apply")}autoApply(){return ie(this._autoApply,this._defs&&this._defs._autoApply)}setAutoApply(t){this._autoApply=t}autoClose(){return ie(this._autoClose,this._defs&&this._defs._autoClose)}setAutoClose(t){this._autoClose=t}model(){return this._model}getItems(){return this._model&&this._model.filters||this.$_getFilters()}setModel(t){this._model=t}prepare(t){this._data=t,this.buttonSet=this.autoApply()?qo.CLOSE:qo.OK_CANCEL}unprepare(){this._data=null}getButtons(){return this.autoApply()&&this.autoClose()?[]:super.getButtons()}$_getFilters(){if(this._data instanceof yh){const t=this._data.filter().children,e=[];return t.forEach((t=>{e.push({filter:t,label:t.label||t.name})})),e}return[]}}bh.TYPE="filter";class vh{constructor(t){this._owner=t}inflateStock(t){const e=t.name,s=this._owner,i=s.data();switch(e){case"row_count":return i?i.rowCount():0;case"leaf_count":return s.leafRowCount();case"check_count":return s.checkedRowCount();case"no":return isNaN(this.topRow)?"":this.topRow+1;case"is_landscape":return s.isLandscape();case"is_portrait":return s.isPortrait();default:if(i&&rn.hasOwnProperty(e))return i.getSummary(t.field)[e]}}}class Ch extends f{constructor(t,e){super(),this._owner=t,this._defs=e,!e&&this._doInitDefaults()}_doInitDefaults(){this._visible=!0,this._sortMarkVisible=!0,this._sortOrderVisible=!0}owner(){return this._owner}data(){return this._owner.data()}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._layoutChanged())}sortMarkVisible(){return ie(this._sortMarkVisible,this._defs&&this._defs._sortMarkVisible)}setSortMarkVisible(t){t!==this._sortMarkVisible&&(this._sortMarkVisible=t,this._changed())}sortOrderVisible(){return ie(this._sortOrderVisible,this._defs&&this._defs._sortOrderVisible)}setSortOrderVisible(t){t!==this._sortOrderVisible&&(this._sortOrderVisible=t,this._changed())}_changed(){this._owner&&this._owner.sectionChanged(this)}_layoutChanged(){this._owner&&this._owner.sectionLayoutChanged(this)}}Ch.BUTTON_CLASS="rtc-section-button";class Sh extends Ch{constructor(t,e){super(t,e),this._inflater=new vh(t)}inflateParam(t,e,s){const i=s.name;let r;if(this.templateParams&&(r=this.templateParams[i]),void 0===r){const t=this.layoutParams();r=t&&t[i]}if("function"==typeof r){return r(this._getParamArgs())}return r}inflateStock(t,e,s){return this._inflater.inflateStock(s)}setTopRow(t){this._inflater.topRow=t}template(){return ie(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._layoutChanged())}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}layoutStyle(){return ie(this._layoutStyle,this._defs&&this._defs._layoutStyle)}setLayoutStyle(t){t!==this._layoutStyle&&(this._layoutStyle=t,this._changed())}layoutParams(){return ie(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?c.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){const t=this.getTemplate();return{layout:or.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:this.style()||t.rowStyle&&t.rowStyle.default}}getTemplate(){return this.owner().getTemplate(this.template())||ar.get(this.defTemplate())||gs}setLayoutItemProp(t,e,s){}setLayoutItemsProp(t,e,s){}click(){}sortField(t){if(t){const e=this.data();e instanceof yh&&e.toggleSort(t,!0)}}}!function(t){t.HEAD="head",t.FOOT="foot"}(_h||(_h={}));class Rh extends Xo{constructor(t){super(t)}getProxy(){const t=super.getProxy();return t.position=this.position,t.action=this.action,t}_setDefaults(){super._setDefaults(),this.position=_h.FOOT}click(t){if(!0!==super.click(t)){const e=this.action;if(e&&e!==ch.NONE)return xh.perform(t,e),!0}return!0}}!function(t){t.NONE="none",t.FORM="form",t.BUTTON="button",t.SEARCH="search",t.SORT="sort",t.FILTER="filter",t.FIELD="field",t.MENU="menu"}(ch||(ch={}));class xh extends Sh{constructor(){super(...arguments),this._listButtons=[]}static perform(t,e){switch(e){case ch.FORM:t.togglePanel(sh.TYPE,!0);break;case ch.BUTTON:t.togglePanel(eh.TYPE,!0);break;case ch.SEARCH:t.togglePanel(ih.TYPE,!0);break;case ch.FILTER:t.togglePanel(bh.TYPE,!0);break;case ch.FIELD:t.options().fieldBar().setVisible(!t.options().fieldBar().visible());break;case ch.MENU:t.showMenu(null,!0)}}_doInitDefaults(){super._doInitDefaults(),this._buttonGap=5,this._headButtons=[],this._footButtons=[]}buttons(){const t=ie(this._buttons,this._defs&&this._defs._buttons);return t&&t.slice(0)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._listButtons=[],t&&t.forEach((t=>this._listButtons.push(new Rh(t)))),this.$_resetButtons(),this._changed())}buttonGap(){return ie(this._buttonGap,this._defs._buttonGap)}setButtonGap(t){t!==this._buttonGap&&(this._buttonGap=t,this._changed())}clickAction(){return ie(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}getButtonAt(t,e){const s=void 0!==this._buttons?this:this._defs;if(s)return t===_h.HEAD?s._headButtons[e]:s._footButtons[e]}getButton(t){const e=void 0!==this._buttons?this:this._defs;if(e){const s=e.$_indexOfButton(t);return s>=0?e._listButtons[s]:null}}getButtons(t){const e=void 0!==this._buttons?this:this._defs;if(e)return t===_h.HEAD?e._headButtons:e._footButtons}setButton(t){if(t&&t.name){const e=this.$_indexOfButton(t.name);if(e>=0)this._listButtons[e].update(t);else{const e=new Rh(t);this._listButtons.push(e)}this.$_resetButtons()}}removeButton(t){const e=this.$_indexOfButton(t);e>=0&&(this._listButtons.splice(e,1),this.$_resetButtons())}setButtonVisible(t,e){const s=this.$_getButton(t);s&&s.visible!==e&&(s.visible=e,this.$_resetButtons())}setButtonEnabled(t,e){const s=this.$_getButton(t);s&&s.enabled!==e&&(s.enabled=e,this.$_resetButtons())}getButtonState(t){const e=void 0!==this._buttons?this:this._defs;if(e){const s=e.$_getButton(t);return s?s.state:void 0}}setButtonState(t,e){const s=this.$_getButton(t);s&&(s.state=e)}click(){xh.perform(this.owner(),this.clickAction())}$_indexOfButton(t){return this._listButtons?this._listButtons.findIndex((e=>e.name===t)):-1}$_getButton(t){return this._listButtons&&this._listButtons.find((e=>e.name===t))}$_resetButtons(){const t=this._listButtons;this._headButtons=[],this._footButtons=[],t&&(t.forEach((t=>{t.position===_h.HEAD?this._headButtons.push(t):this._footButtons.push(t)})),this._layoutChanged())}}class Vh extends xh{constructor(){super(...arguments),this._checked=!1,this._args={control:void 0,section:"header"}}_doInitDefaults(){super._doInitDefaults(),this._caption=Vh.CAPTION,this._showCheck=!1,this._autoCheck=!1,this.setVisible(!1)}caption(){return ie(this._caption,this._defs&&this._defs._caption)}setCaption(t){t!==this._caption&&(this._caption=t,this._changed())}captionAlign(){return ie(this._captionAlign,this._defs&&this._defs._captionAlign)}setCaptionAlign(t){t!==this._captionAlign&&(this._captionAlign=t,this._changed())}captionColor(){return ie(this._captionColor,this._defs&&this._defs._captionColor)}setCaptionColor(t){t!==this._captionColor&&(this._captionColor=t,this._changed())}showCheck(){return ie(this._showCheck,this._defs._showCheck)}setShowCheck(t){t!==this._showCheck&&(this._showCheck=t,this._changed())}autoCheck(){return ie(this._autoCheck,this._defs._autoCheck)}setAutoCheck(t){t!=this._autoCheck&&(this._autoCheck=t,this._changed())}isChecked(){return this._checked}setChecked(t=!0){t!==this._checked&&(this._checked=t,this._changed())}defTemplate(){return Vh.TEMPLATE}getStyle(){return this.style()}_getParamArgs(){return this._args.control=this._owner.control(),this._args}inflateStock(t,e,s){switch(s.name){case"caption":return this.caption();case"caption-align":return this.captionAlign();case"caption-color":return this.captionColor();case"style":return this.layoutStyle();default:return super.inflateStock(t,e,s)}}}Vh.CAPTION="Header",Vh.TEMPLATE="@it_list_header",Vh.ROW=-1;class Eh extends xh{constructor(){super(...arguments),this._args={control:void 0,section:"footer"}}_doInitDefaults(){super._doInitDefaults()}defTemplate(){return Eh.TEMPLATE}_getParamArgs(){return this._args.control=this._owner.control(),this._args}}Eh.TEMPLATE="@it_list_footer",Eh.ROW=-2;class $h extends $r{constructor(t,e){super(t,!0,e,Oe)}dv(){return null}row(){return-1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}getRenderer(t){return this._layoutView instanceof Co&&this._layoutView.getRenderer(t)}simpleViewByDom(t,e){return this._layoutView instanceof Co&&this._layoutView.simpleByDom(t,e)}_doPrepareRender(t,e){this._layout.setRow(this.dv(),this.row(),-1),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._owner=e}_doMeasure(t,e,s,i){this._layoutView._explicitWidth=s,this._layoutView.prepareLayout(t,this._owner);return this._layoutView.measureLayout(t,this._owner,s,i)}_doRender(t,e,s){this.resizeContent(e,s),this._layoutView.resize(e,s),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._owner=null}}class Ah extends $r{constructor(t,e,s){super(t,!0,s,Oe),this._model=e}model(){return this._model}setModel(t){this._model=t}_doMeasure(t,e,s,i){const r=this._padding=Fe.getPadding(this.dom);s-=r.left+r.right,i-=r.top+r.bottom;const n=this._doMeasureContent(t,s,i);return n.width+=r.left+r.right,n.height+=r.top+r.bottom,n}_doRender(t,e,s){const i=this._padding;e-=i.left+i.right,s-=i.top+i.bottom,this._doRenderContent(t,e,s)}}class Lh extends Ah{constructor(t,e,s){super(t,e,s),this._layoutChanged=!1}layoutView(){return this._layoutView}setLayout(t){this._layoutChanged=!this._layout||t.layout.tid!==this._layout.tid,this._layout=t.layout,this._rowStyle=t.rowStyle}click(t,e,s){const i=this._layoutView instanceof Co&&this._layoutView.simpleByDom(t,!0),r=i&&i.model().renderer;r instanceof di?this.model().sortField(r.field||i.model().getField()):this.model().click()}clickable(){return!0}_doInitContent(t,e){Object.assign(e.style,{overflow:"hidden"}),super._doInitContent(t,e)}_doPrepareRender(t,e){e.layoutContainer=this._model,this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._layoutManager=e}_doApplyStyles(t){"string"==typeof this._rowStyle||this._rowStyle&&Object.assign(t,this._rowStyle)}_doMeasureContent(t,e,s){const i=this._getRenderWidth(e);return this._layoutView._explicitWidth=i,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,i,s)}_doRenderContent(t,e,s){this.resizeContent(e,s),this._layoutView.resize(e,s),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._layoutManager=null}_getRenderWidth(t){return t}}class Th extends Nr{constructor(t){super(t,Ch.BUTTON_CLASS)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}click(t){this.model.click(t)}}class kh extends Lh{constructor(){super(...arguments),this._headButtons=[],this._footButtons=[],this._visHeadButtons=[],this._visTailButtons=[],this._gap=0}_doInitContent(t,e){this.addChild(this._headView=new We(t,!1,kh.HEAD_CLASS,Oe)),this.addChild(this._tailView=new We(t,!1,kh.TAIL_CLASS,Oe))}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this.model();this.$_prepareActions(t,s),this._gap=s.buttonGap()||0}_doMeasureContent(t,e,s){const i=this._doMeasureHead(t,e),r=this._doMeasureTail(t,e);e-=this._wHead=i.width,e-=this._wTail=r.width,this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,e,s);const n=this._layoutView.measureLayout(t,this._layoutManager,e,s);return n.width+=this._wHead+this._wTail,n.height=Math.max(n.height,this._hHead=i.height,this._hTail=r.height),n}_doMeasureHead(t,e){return this.$_measureButtons(this._headActions,this._headButtons,this._visHeadButtons=[])}_doMeasureTail(t,e){return this.$_measureButtons(this._tailActions,this._footButtons,this._visTailButtons=[])}_doRenderContent(t,e,s){let i=e,r=0;this.resizeContent(e,s),this._wHead>0&&(this._headView.move(r,(s-this._hHead)/2),this._doRenderHead(this._headView,this._wHead,this._hHead),i-=this._wHead,r+=this._wHead),this._wTail>0&&(this._tailView.move(e-this._wTail,(s-this._hTail)/2),this._doRenderTail(this._tailView,this._wTail,this._hTail),i-=this._wTail),this._layoutView.move(r,0),this._layoutView.resize(i,s),this._layoutView.render(t)}_doRenderHead(t,e,s){let i=0;this._visHeadButtons.forEach((t=>{t.move(i,0),i+=t.width+this._gap}))}_doRenderTail(t,e,s){let i=this._gap;this._visTailButtons.forEach((t=>{t.move(i,0),i+=t.width+this._gap}))}_doAfterRender(){super._doAfterRender(),this._headActions=this._tailActions=null}$_prepareActions(t,e){let s=this._headActions=e.getButtons(_h.HEAD),i=this._headButtons;for(;i.length<s.length;){const e=new Th(t);this._headView.addChild(e),i.push(e)}for(;i.length>s.length;)this._headView.removeChild(i.pop());for(s=this._tailActions=e.getButtons(_h.FOOT),i=this._footButtons;i.length<s.length;){const e=new Th(t);this._tailView.addChild(e),i.push(e)}for(;i.length>s.length;)this._tailView.removeChild(i.pop())}$_measureButtons(t,e,s){const i=this.control;let r=0,n=0;return e.forEach(((e,o)=>{const h=t[o];h.visible?(e.visible=!0,e.setEnabled(h.isEnabled(i.wrapperOrThis())),s.push(e),e.setModel(i,h).syncSize(),r+=e.width+this._gap,n=Math.max(n,e.height)):e.visible=!1})),{width:r,height:n}}}kh.HEAD_CLASS="rtc-section-head",kh.TAIL_CLASS="rtc-section-foot";class Dh extends kh{constructor(t,e){super(t,e,Dh.CLASS_NAME)}}Dh.CLASS_NAME="rtc-footer";class Nh extends kh{constructor(t,e){super(t,e,Nh.CLASS_NAME)}}Nh.CLASS_NAME="rtc-header";!function(t){t.AUTO="auto",t.ROW="row",t.PAGE="page"}(uh||(uh={}));class Ph extends fr{_doInitDefaults(){super._doInitDefaults(),this._mode=uh.AUTO,this._barWidth=Ph.DEF_BAR_WIDTH,this._showSelection=!0,this._tooltipVisible=!1,this._tooltipValue="top"}mode(){return ie(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}barWidth(){return ie(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){(t=ne(t))!==this._barWidth&&(this._barWidth=t,this._changed())}showSelection(){return ie(this._showSelection,this._defs&&this._defs._showSelection)}setShowSelection(t){t!==this._showSelection&&(this._showSelection=t,this._changed())}clickable(){return ie(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}tooltipVisible(){return ie(this._tooltipVisible,this._defs&&this._defs._tooltipVisible)}setTooltipVisible(t){this._tooltipVisible=t}tooltipValue(){return ie(this._tooltipValue,this._defs&&this._defs._tooltipValue)}setTooltipValue(t){return this._tooltipValue=t}firstTooltip(){return ie(this._firstTooltip,this._defs&&this._defs._firstTooltip)}setFirstTooltip(t){this._firstTooltip=t}lastTooltip(){return ie(this._lastTooltip,this._defs&&this._defs._lastTooltip)}setLastTooltip(t){this._lastTooltip=t}tooltipStyle(){return ie(this._tooltipStyle,this._defs&&this._defs._tooltipStyle)}setTooltipStyle(t){t!==this._tooltipStyle&&(this._tooltipStyle=t,this._changed("style"))}_doPrepareRender(){}}Ph.DEF_BAR_WIDTH=4;class Mh extends Mr{constructor(t){super(t,!1,"rtc-scroll-indicator-tooltip",Oe)}setText(t){this.dom.textContent=t}_getDisplayStyle(){return"inline-block"}}class Ih extends Lr{constructor(t,e){super(t,e,!1,Ih.CLASS_NAME),this._rate=0,this._tipHandler=()=>{if(+new Date-this._tipped>=Ih.TIP_DELAY)if(this.$_clearTipTimers(),this.canAnimate()){this._tip.dom.animate([{opacity:1},{opacity:0}],{duration:700,fill:"none"}).addEventListener("finish",(()=>{this.listOwner().removeTooltipView(this._tip)}))}else this.listOwner().removeTooltipView(this._tip)}}rate(){return this._rate}setRate(t,e){t!==this._rate&&(this._rate=t,e&&this.$_render())}updateRate(t,e,s,i,r){if(this.visible){const n=t.data();let o=this._tip;if(n){let h;if(t.isPaging()&&this._model.mode()!==uh.ROW)h=(t.page()+1)/t.pageCount();else{h=(e+1-(1-i/s))/(t.isGrouped()?t.groupModel().visItemCount():n.rowCount())}if(this.setRate(h,r),this._model.tooltipVisible()){if(o)if(o.dom.getAnimations){const t=o.dom.getAnimations();t&&t.forEach((t=>t.finish()))}else t.removeTooltipView(o);else o=this._tip=new Mh(t.doc());if(o.parent||isNaN(this._tipped)||t.addTooltipView(o),o.parent){const e=this._model,s=t.scrollIndex();let i="";i=0===s&&e.firstTooltip()?e.firstTooltip():h>=1&&e.lastTooltip()?e.lastTooltip():`${s+1} / ${n.rowCount()}`,o.setText(i);const r=o.getOffsetSize().width,a=this.width*h-r/2;o.moveX(Math.max(0,Math.min(a,this.width-r))),o.moveY(this.height+2),this._tipTimer||(this._tipTimer=setInterval(this._tipHandler,100))}this._tipped=+new Date}else o&&(t.removeTooltipView(o),this.$_clearTipTimers())}else this.setRate(0,r),o&&t.removeTooltipView(o),this.$_clearTipTimers()}else this.$_clearTipTimers()}$_clearTipTimers(){this._tipTimer&&(clearInterval(this._tipTimer),this._tipTimer=void 0),this._tipped=NaN}_doInitDom(t,e){this._bar=this.appendSpan(t,Ih.BAR_CLASS),Object.assign(this._bar.style,{position:"absolute",height:"100%"})}_doMeasure(t,e,s,i){return this.vertical?{width:this._model.barWidth(),height:i}:{width:s,height:this._model.barWidth()}}_doRender(t,e,s){this.$_render()}clickable(){return this._model.clickable()}click(t,e,s){alert(e+", "+s)}$_render(){const t=100*(this._rate||0)+"%";this.vertical?(this._bar.style.width="100%",this._bar.style.height=t):(this._bar.style.width=t,this._bar.style.height="100%")}}Ih.CLASS_NAME="rtc-scroll-indicator",Ih.BAR_CLASS="rtc-scroll-indicator-bar",Ih.SELECTION_CLASS="rtc-scroll-indicator-selection",Ih.TIP_DELAY=2e3;const Oh={"@help":{width:48,path:"M24.2 35.65q.8 0 1.35-.55t.55-1.35q0-.8-.55-1.35t-1.35-.55q-.8 0-1.35.55t-.55 1.35q0 .8.55 1.35t1.35.55Zm-1.75-7.3h2.95q0-1.3.325-2.375T27.75 23.5q1.55-1.3 2.2-2.55.65-1.25.65-2.75 0-2.65-1.725-4.25t-4.575-1.6q-2.45 0-4.325 1.225T17.25 16.95l2.65 1q.55-1.4 1.65-2.175 1.1-.775 2.6-.775 1.7 0 2.75.925t1.05 2.375q0 1.1-.65 2.075-.65.975-1.9 2.025-1.5 1.3-2.225 2.575-.725 1.275-.725 3.375ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z"},"@info":{width:48,path:"M22.65 34h3V22h-3ZM24 18.3q.7 0 1.175-.45.475-.45.475-1.15t-.475-1.2Q24.7 15 24 15q-.7 0-1.175.5-.475.5-.475 1.2t.475 1.15q.475.45 1.175.45ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 23.95q0-4.1 1.575-7.75 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24.05 4q4.1 0 7.75 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm.05-3q7.05 0 12-4.975T41 23.95q0-7.05-4.95-12T24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24.05 41ZM24 24Z"},"@search":{width:48,path:"M39.8 41.95 26.65 28.8Q25.15 30.1 23.15 30.825Q21.15 31.55 18.9 31.55Q13.5 31.55 9.75 27.8Q6 24.05 6 18.75Q6 13.45 9.75 9.7Q13.5 5.95 18.85 5.95Q24.15 5.95 27.875 9.7Q31.6 13.45 31.6 18.75Q31.6 20.9 30.9 22.9Q30.2 24.9 28.8 26.65L42 39.75ZM18.85 28.55Q22.9 28.55 25.75 25.675Q28.6 22.8 28.6 18.75Q28.6 14.7 25.75 11.825Q22.9 8.95 18.85 8.95Q14.75 8.95 11.875 11.825Q9 14.7 9 18.75Q9 22.8 11.875 25.675Q14.75 28.55 18.85 28.55Z"},"@home":{width:48,path:"M8 42V18L24.1 6 40 18v24H28.3V27.75h-8.65V42Zm3-3h5.65V24.75H31.3V39H37V19.5L24.1 9.75 11 19.5Zm13-14.65Z"},"@menu":{width:48,path:"M6 36V33H42V36ZM6 25.5V22.5H42V25.5ZM6 15V12H42V15Z"},"@settings":{width:48,path:"M19.4 44 18.4 37.7Q17.45 37.35 16.4 36.75Q15.35 36.15 14.55 35.5L8.65 38.2L4 30L9.4 26.05Q9.3 25.6 9.275 25.025Q9.25 24.45 9.25 24Q9.25 23.55 9.275 22.975Q9.3 22.4 9.4 21.95L4 18L8.65 9.8L14.55 12.5Q15.35 11.85 16.4 11.25Q17.45 10.65 18.4 10.35L19.4 4H28.6L29.6 10.3Q30.55 10.65 31.625 11.225Q32.7 11.8 33.45 12.5L39.35 9.8L44 18L38.6 21.85Q38.7 22.35 38.725 22.925Q38.75 23.5 38.75 24Q38.75 24.5 38.725 25.05Q38.7 25.6 38.6 26.1L44 30L39.35 38.2L33.45 35.5Q32.65 36.15 31.625 36.775Q30.6 37.4 29.6 37.7L28.6 44ZM24 30.5Q26.7 30.5 28.6 28.6Q30.5 26.7 30.5 24Q30.5 21.3 28.6 19.4Q26.7 17.5 24 17.5Q21.3 17.5 19.4 19.4Q17.5 21.3 17.5 24Q17.5 26.7 19.4 28.6Q21.3 30.5 24 30.5ZM24 27.5Q22.55 27.5 21.525 26.475Q20.5 25.45 20.5 24Q20.5 22.55 21.525 21.525Q22.55 20.5 24 20.5Q25.45 20.5 26.475 21.525Q27.5 22.55 27.5 24Q27.5 25.45 26.475 26.475Q25.45 27.5 24 27.5ZM24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24ZM21.8 41H26.2L26.9 35.4Q28.55 35 30.025 34.15Q31.5 33.3 32.7 32.1L38 34.4L40 30.8L35.3 27.35Q35.5 26.5 35.625 25.675Q35.75 24.85 35.75 24Q35.75 23.15 35.65 22.325Q35.55 21.5 35.3 20.65L40 17.2L38 13.6L32.7 15.9Q31.55 14.6 30.1 13.725Q28.65 12.85 26.9 12.6L26.2 7H21.8L21.1 12.6Q19.4 12.95 17.925 13.8Q16.45 14.65 15.3 15.9L10 13.6L8 17.2L12.7 20.65Q12.5 21.5 12.375 22.325Q12.25 23.15 12.25 24Q12.25 24.85 12.375 25.675Q12.5 26.5 12.7 27.35L8 30.8L10 34.4L15.3 32.1Q16.5 33.3 17.975 34.15Q19.45 35 21.1 35.4Z"},"@close":{width:48,path:"M12.45 37.65 10.35 35.55 21.9 24 10.35 12.45 12.45 10.35 24 21.9 35.55 10.35 37.65 12.45 26.1 24 37.65 35.55 35.55 37.65 24 26.1Z"},"@edit":{width:48,path:"M9 39h2.2l22.15-22.15-2.2-2.2L9 36.8Zm30.7-24.3-6.4-6.4 2.1-2.1q.85-.85 2.1-.85t2.1.85l2.2 2.2q.85.85.85 2.1t-.85 2.1Zm-2.1 2.1L12.4 42H6v-6.4l25.2-25.2Zm-5.35-1.05-1.1-1.1 2.2 2.2Z"},"@delete":{width:48,path:"M13.05 42q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2.05V39q0 1.2-.9 2.1-.9.9-2.1.9Zm21.9-31.5h-21.9V39h21.9Zm-16.6 24.2h3V14.75h-3Zm8.3 0h3V14.75h-3Zm-13.6-24.2V39Z"},"@check":{width:48,path:"M18.9 35.7 7.7 24.5l2.15-2.15 9.05 9.05 19.2-19.2 2.15 2.15Z"},"@refresh":{width:48,path:"M24 40q-6.65 0-11.325-4.675Q8 30.65 8 24q0-6.65 4.675-11.325Q17.35 8 24 8q4.25 0 7.45 1.725T37 14.45V8h3v12.7H27.3v-3h8.4q-1.9-3-4.85-4.85Q27.9 11 24 11q-5.45 0-9.225 3.775Q11 18.55 11 24q0 5.45 3.775 9.225Q18.55 37 24 37q4.15 0 7.6-2.375 3.45-2.375 4.8-6.275h3.1q-1.45 5.25-5.75 8.45Q29.45 40 24 40Z"},"@back":{width:48,path:"M24 40 8 24 24 8l2.1 2.1-12.4 12.4H40v3H13.7l12.4 12.4Z"},"@forward":{width:48,path:"m24 40-2.1-2.15L34.25 25.5H8v-3h26.25L21.9 10.15 24 8l16 16Z"},"@first":{width:48,path:"M0 4 0 44 5 44 5 4Z M32 44 12 24 32 4 34.8 6.85 17.65 24 36.8 41.15Z"},"@prev":{width:48,path:"M20 44 0 24 20 4 22.8 6.85 5.65 24 22.8 41.15Z"},"@last":{width:48,path:"M33 3.9 33 45 38 45 38 3.9Z M5.2 43.9 2.4 41.05 19.55 23.9 2.4 6.75 5.2 3.9 25.2 23.9Z"},"@next":{width:48,path:"M15.2 43.9 12.4 41.05 29.55 23.9 12.4 6.75 15.2 3.9 35.2 23.9Z"},"@left":{width:48,path:"M8 24 40 40 40 8 Z"},"@right":{width:48,path:"M40 24 8 40 8 8 Z"},"@up":{width:48,path:"M24 8 8 40 40 40 Z"},"@down":{width:48,path:"M24 40 8 8 40 8 Z"},"@drag":{width:48,path:"M17.5 40q-1.45 0-2.475-1.025Q14 37.95 14 36.5q0-1.45 1.025-2.475Q16.05 33 17.5 33q1.45 0 2.475 1.025Q21 35.05 21 36.5q0 1.45-1.025 2.475Q18.95 40 17.5 40Zm13 0q-1.45 0-2.475-1.025Q27 37.95 27 36.5q0-1.45 1.025-2.475Q29.05 33 30.5 33q1.45 0 2.475 1.025Q34 35.05 34 36.5q0 1.45-1.025 2.475Q31.95 40 30.5 40Zm-13-12.5q-1.45 0-2.475-1.025Q14 25.45 14 24q0-1.45 1.025-2.475Q16.05 20.5 17.5 20.5q1.45 0 2.475 1.025Q21 22.55 21 24q0 1.45-1.025 2.475Q18.95 27.5 17.5 27.5Zm13 0q-1.45 0-2.475-1.025Q27 25.45 27 24q0-1.45 1.025-2.475Q29.05 20.5 30.5 20.5q1.45 0 2.475 1.025Q34 22.55 34 24q0 1.45-1.025 2.475Q31.95 27.5 30.5 27.5ZM17.5 15q-1.45 0-2.475-1.025Q14 12.95 14 11.5q0-1.45 1.025-2.475Q16.05 8 17.5 8q1.45 0 2.475 1.025Q21 10.05 21 11.5q0 1.45-1.025 2.475Q18.95 15 17.5 15Zm13 0q-1.45 0-2.475-1.025Q27 12.95 27 11.5q0-1.45 1.025-2.475Q29.05 8 30.5 8q1.45 0 2.475 1.025Q34 10.05 34 11.5q0 1.45-1.025 2.475Q31.95 15 30.5 15Z"}};class Bh extends br{constructor(t){super(),this._ctors={},this._customs={},this._owner=t,this.$_prepareStocks()}_doDestory(){super._doDestory(),this._owner=null}create(t,e){const s=t.NAME;let i=this.get(s);return!i&&this._ctors[s]&&this.add(s,i=this._ctors[s](e||this._owner.doc())),i&&yr.clone(i,t)}createStock(t,e,s,i){const r=this._ctors[e];let n=this.get(e);if(!n&&r&&this.add(e,n=new r(t,s)),n){if(t instanceof Document)return new r(n,s,i);if(t)return new r(t,s,i)}}createCustom(t,e,s){const i=this._customs[t],r=this.create(vr,e);return s&&r.setClass(s),r.setShape(i),r}registerCustom(t,e,s,i){if(t&&e)if(t.startsWith("@")){const r=Oh[t];r&&(r.path=e,s>0&&(r.width=s),i>0&&(r.height=i))}else this._customs[t]={w:s,h:i,d:e}}registerCustoms(t){for(let e in t){const s=t[e];if(s&&s.d)if(e.startsWith("@")){const t=Oh[e];t&&(t.path=s.d,s.width>0&&(t.width=s.width),s.height>0&&(t.height=s.height))}else this._customs[e]={w:s.width,h:s.height,d:s.d}}}getCustom(t){return this._customs[t]}$_prepareStocks(){const t=this._ctors;t[vr.NAME]=function(t,e){return new vr(t,e,{width:"100%",height:"100%"})},t[Cr.NAME]=function(t,e){return new Cr(t,e)},t[Sr.NAME]=function(t,e){return new Sr(t,e)},t[Rr.NAME]=function(t,e){return new Rr(t,e)},t[Vr.NAME]=function(t,e){return new Vr(t,e)};for(let e in Oh)t[e]=function(t,s){const i=Oh[e];return new Er(t,i.width,i.height,i.path,s)}}}class Fh extends Pr{constructor(t,e){super(t,Fh.CLASS_NAME),this.setModel(e)}setModel(t){if(t!==this.model){let e;switch(this.model=t,t.label()){case"<<":e=Oh["@first"];break;case"<":e=Oh["@prev"];break;case">>":e=Oh["@last"];break;case">":e=Oh["@next"]}this._svg.setShape(e,!0)}this.setSize(this.model.owner().buttonSize()),this.setDisabled(t.disabled())}setVertical(t){Fe.setData(this._svg.svg,"dir",t?"v":"")}_doInitSvg(t){}_doClick(){this.model.run()}}Fh.CLASS_NAME="rtc-page-navigator-item";class Hh extends Lr{constructor(t,e,s){super(t,s,!1,Hh.CLASS_NAME),this._itemGap=0,this._owner=e,this.addChild(this._container=new We(t,!1,void 0,Oe))}_doDestory(){super._doDestory(),this._spans=null}_doPrepareRender(t,e){if(!this._slash){const e=this._container,s=this._model,i=this._buttons=[this._first=new Fh(t,s.first()),this._prev=new Fh(t,s.prev()),this._next=new Fh(t,s.next()),this._last=new Fh(t,s.last())],r=this._spans=[this._page=e.appendSpan(t,Hh.INDEX_CLASS),this._total=e.appendSpan(t,Hh.INDEX_CLASS)];i.forEach((t=>{e.addChild(t)})),this._spans.push(this._slash=e.appendSpan(t,Hh.SLASH_CLASS)),r.forEach((t=>{t.style.position="absolute",t.style.whiteSpace="nowrap"}))}}$_getItemGap(){let t=this._model.itemGap();if(this.landscape&&this.vertical){let e=this._model.itemGap2();return isNaN(e)&&!isNaN(t)&&(e=.5*t),e}return t}_doMeasure(t,e,s,i){const r=this._owner,n=r.page(),o=this.vertical,h=this._itemGap=this.$_getItemGap();let a=0,l=0,d={width:this._model.buttonSize(),height:this._model.buttonSize()};return Fe.setData(this.dom,"position",this.position),this._buttons.forEach((t=>{t.setDisabled(t.model.disabled()),t.setVertical(o),d=t.measure(),o?(l+=d.height,a=Math.max(a,d.width)):(a+=d.width,l=Math.max(l,d.height)),t.resize(d.width,d.height)})),this._page.textContent=`${n+1}`,this._total.textContent=`${r.pageCount()}`,this._slash.textContent=o?"━":"/",o?this._spans.forEach((t=>{a=Math.max(a,t[Rt]=t.offsetWidth),l+=t[xt]=t.offsetHeight})):this._spans.forEach((t=>{a+=t[Rt]=t.offsetWidth,l=Math.max(l,t[xt]=t.offsetHeight)})),o?l+=4*h:a+=4*h,this._container.resize(a,l),o?{width:this._model.width()||this.dom.offsetWidth,height:i}:{width:s,height:this._model.height()||this.dom.offsetHeight}}_doRender(t,e,s){const i=this._container,r=this._itemGap;if(this.vertical){const t=i.width;let n=0;this._container.moveI((e-t)/2,(s-i.height)/2),this._first.moveI((t-this._first.mw)/2,n),n+=this._first.mh+r,this._prev.moveI((t-this._prev.mw)/2,n),n+=this._prev.mh+r,Fe.moveI(this._page,(t-this._page[Rt])/2,n),n+=this._page[xt],Fe.moveI(this._slash,(t-this._slash[Rt])/2,n),n+=this._slash[xt],Fe.moveI(this._total,(t-this._total[Rt])/2,n),n+=this._total[xt],n+=r,this._next.moveI((t-this._next.mw)/2,n),n+=this._next.mh+r,this._last.moveI((t-this._last.mw)/2,n),n+=this._last.mh}else{const t=this._itemGap,r=i.height;let n=0;this._container.moveI((e-i.width)/2,(s-r)/2),this._first.moveI(n,(r-this._first.mh)/2),n+=this._first.mw+t,this._prev.moveI(n,(r-this._prev.mh)/2),n+=this._prev.mw+t,Fe.moveI(this._page,n,(r-this._page[xt])/2),n+=this._page[Rt],Fe.moveI(this._slash,n,(r-this._slash[xt])/2),n+=this._slash[Rt],Fe.moveI(this._total,n,(r-this._total[xt])/2),n+=this._total[Rt],n+=t,this._next.moveI(n,(r-this._next.mh)/2),n+=this._next.mw+t,this._last.moveI(n,(r-this._last.mh)/2),n+=this._last.mw}}}Hh.CLASS_NAME="rtc-page-navigator",Hh.INDEX_CLASS="rtc-page-navigator-index",Hh.SLASH_CLASS="rtc-page-navigator-slash";const Wh="$_page";class zh extends Ar{static isPageIndex(t){return t.classList.contains(this.INDEX_CLASS)?t[Wh]:-1}constructor(t,e,s){super(t,s,!1,zh.CLASS_NAME),this._pagePool=[],this._pageViews=[],this._pageMap={},this._scrollPos=0,this._scrollOff=0,this._indexClicked=t=>{const e=t.target[Wh];this._owner.pageIndexClick(e)},this._owner=e}get scrollPos(){return this._scrollPos}get scrollOff(){return this._scrollOff}scrollBy(t){const e=this.doc,s=this._model.itemGap();let i=this._scrollPos,r=this._scrollOff;if(t>0)if(r>=t)r-=t;else if(0===i)r=0;else{let n;for(t-=r,r=0;i>0&&t>0;){n||(n=this.$_getIndexView(e),this._pageContainer.appendChild(n)),this.$_measureIndexView(n,--i);const o=n.offsetWidth+s;o>t?(r=o-t,t=0):t-=o}n&&(this._pagePool.push(n),this._pageContainer.removeChild(n))}else if(t<0){const e=r>0?this._pageViews[0].offsetWidth+s-r:0;if(e>=(t*=-1))r+=t;else{const s=this._pageViews.slice(0);for(e>0&&(t-=e,i++,r=0,s.shift());t>0&&s.length>0;){const e=s.shift().offsetHeight;t>e?(t-=e,i++):(r=-(t-e),t=0)}}}this.$_refreshView(e,i,r)}scrollTo(t){const e=Math.max(0,Math.min(t,this._owner.pageCount()));this.$_refreshView(this.doc,e,0)}makeVisible(t,e=!1){if(e){const e=this._owner.pageCount(),s=this._pageViews;e>=s.length&&this.scrollTo(t-Math.floor(s.length/2))}else{const e=this._pageViews,s=e[e.length-1];if(t===this._scrollPos)this._scrollOff>0&&this.$_refreshView(this.doc,this._scrollPos,0);else if(t<this._scrollPos)this.scrollTo(t);else if(t>s[Wh])this.scrollTo(t-Math.floor(e.length/2));else if(t<s[Wh])this._scrollOff=0;else if(t===s[Wh]){let e=this._scrollPos,i=this._scrollOff,r=s.offsetLeft+s.offsetWidth-this._pageContainer.offsetWidth;if(r<=i)i-=r;else{const s=this._pagePool,n=this._pageMap,o=this._pageViews;for(;r>0&&e<=t;){const t=this._pageViews[0].offsetHeight;if(r>=t){let i=o.shift();delete n[e],s.push(i),r-=t,e++}else i=r,r=0}}this._scrollPos=e,this._scrollOff=i}}}isDom(t){return super.isDom(t)}_doPrepareRender(t){const e=this.dom,s=e.ownerDocument;if(!this._first){const t=this._tag="button";e.appendChild(this._firstContainer=s.createElement("div")),this._firstContainer.appendChild(this._first=s.createElement(t)),this._first.classList.add(zh.INDEX_CLASS,zh.END_CLASS),e.appendChild(this._pageContainer=s.createElement("div")),e.appendChild(this._lastContainer=s.createElement("div")),this._lastContainer.appendChild(this._last=s.createElement(t)),this._last.classList.add(zh.INDEX_CLASS,zh.END_CLASS)}}_doMeasure(t,e,s,i){const r=this._model,n=this._owner,o=r.itemGap();let h=0;return Fe.setVisible(this._firstContainer,r.first().visible())&&(this._first[Wh]=0,this._first.textContent="≪",h+=this._first.offsetWidth+o),Fe.setVisible(this._lastContainer,r.last().visible())&&(this._first[Wh]=n.pageCount()-1,this._last.textContent="≫",h+=this._last.offsetWidth+o),this.$_preparePages(t,this._pageContainer,s-h,o),{width:s,height:this._model.width()}}_doRender(t,e,s){const i=this._model.itemGap();let r=0;if(Fe.isVisible(this._lastContainer)){const t=this._last.offsetWidth;Fe.setBounds(this._firstContainer,e-t,0,t,s),e-=t}if(Fe.isVisible(this._firstContainer)){const t=this._first.offsetWidth;Fe.setBounds(this._firstContainer,r,0,t,s),e-=t,r+=t}Fe.setBounds(this._pageContainer,r,0,e,s),r=-this._scrollOff;for(let t of this._pageViews)Fe.move(t,r,0),r+=t.offsetWidth+i}$_getIndexView(t){let e=this._pagePool.pop();return e||(e=t.createElement(this._tag),e.classList.add(zh.INDEX_CLASS),e.onclick=this._indexClicked),e}$_measureIndexView(t,e){t.classList.remove(zh.CURRENT_CLASS),e===this._owner.page()&&t.classList.add(zh.CURRENT_CLASS),t.textContent=e+1+""}$_preparePages(t,e,s,i){const r=this._owner.pageCount();let n=this._scrollPos,o=this._scrollOff;const h=this._pagePool,a=this._pageMap,l={},d=[];let _=s+o;for(;_>0&&n<r;){let e=a[n];e?delete a[n]:e=this.$_getIndexView(t),this.$_measureIndexView(e,n),_-=e.offsetWidth+i,d.push(e),l[n]=e,e[Wh]=n,n++}if(_>0){if(n=this._scrollOff,_<=o)o-=_;else for(_-=o;_>0&&n>0;){const e=this.$_getIndexView(t);this.$_measureIndexView(e,--n),d.unshift(e),l[n]=e,e[Wh]=n;const s=e.offsetWidth+i;_>s?_-=s:(o=s-_,_=0)}this._scrollPos=n,this._scrollOff=o}for(let t in a)h.push(a[t]);this._pageViews=d,this._pageMap=l}$_refreshView(t,e,s){this._scrollPos=e,this._scrollOff=s,this.$_preparePages(this.doc,this._pageContainer,this.width,this.height),this.render(t)}}zh.CLASS_NAME="rtc-page-scroller",zh.INDEX_CLASS="rtc-page-scroller-index",zh.END_CLASS="rtc-page-scroller-end",zh.CURRENT_CLASS="rtc-page-scroller-current";class Gh extends $r{constructor(t,e){super(t,!1,Gh.CLASS_NAME,Oe),this._vertical=!0,this._rowViews=[],this._model=e}get model(){return this._model}get rowCount(){return this._rowViews.length}getRowView(t){return this._rowViews[t]}_doInitDom(t,e){}_doMeasure(t,e,s,i){return this._vertical?this.$_measureVert(t,s,i):this.$_measureHorz(t,s,i)}_doRender(t,e,s){return this._vertical?this.$_renderVert(t,e,s):this.$_renderHorz(t,e,s)}$_measureVert(t,e,s){const i=this._model,r=this.parent.parent,n=r.owner(),o=n.data(),h=this._rowViews,a=i.rowCount();let l=0,d=0;for(;h.length>a;){const t=h.pop();this.removeChild(t),t.destroy()}for(;h.length<a;){const e=i.getRow(h.length),s=n.getRowLayout(e),r=new zo(t);r.setRow(o,e,o.getRowId(e),null),r.setLayout(s,n),this.addChild(r),h.push(r)}return h.forEach((i=>{const n=i.measure(t,r,e,s);l+=n.height,d=Math.max(d,n.width)})),{width:d,height:l}}$_measureHorz(t,e,s){}$_renderVert(t,e,s){let i=0;this._rowViews.forEach((s=>{const r=s.mh;s.move(0,i).resize(e,r),s.render(t),i+=r}))}$_renderHorz(t,e,s){}}Gh.CLASS_NAME="rtc-head-rows";const Uh={"가":"ㄱ","까":"ㄲ","나":"ㄴ","다":"ㄷ","따":"ㄸ","라":"ㄹ","마":"ㅁ","바":"ㅂ","빠":"ㅃ","사":"ㅅ","싸":"ㅆ","아":"ㅇ","자":"ㅈ","짜":"ㅉ","차":"ㅊ","카":"ㅋ","타":"ㅌ","파":"ㅍ","하":"ㅎ"};class jh extends Nr{constructor(t){super(t,jh.CLASS_NAME)}setLetter(t){t!==this.letter&&(this.letter=t,this.dom.textContent=Uh[t]||t)}isActive(){return"1"===Fe.getData(this.dom,"active")}setActive(t){Fe.setData(this.dom,"active",t?"1":void 0)}_getDisplayStyle(){return"inline-block"}click(){this.parent.clickLetter(this)}}jh.CLASS_NAME="rtc-index-bar-letter";class qh extends Ar{constructor(t,e){super(t,e,!0,qh.CLASS_NAME),this._letterViews=[]}letterCount(){return this._letterViews.length}getLetterView(t){return this._letterViews[t]}clickLetter(t){const e=t.letter;this._model.clickLetter(e)}_doMeasure(t,e,s,i){function r(e){const s=new jh(t);return e.addChild(s),o.push(s),s}const n=this._model,o=this._letterViews,h=this._hChar=Math.ceil((0===o.length?r(this):o[0]).dom.offsetHeight),a=n.getLength(i),l=a/h>>0,d=n.getLetters(l),_=d.length;for(;o.length>_;){const t=o.pop();this.removeChild(t)}for(;o.length<_;)r(this);for(let t=0;t<_;t++)o[t].setLetter(d[t]);return{width:this._model.minWidth(),height:a}}_doRender(t,e,s){const i=this._letterViews,r=i.length;if(r>0){let t=(s-r*this._hChar)/2>>0;i.forEach((s=>{s.move((e-s.dom.offsetWidth)/2>>0,t),t+=this._hChar}))}}}qh.CLASS_NAME="rtc-index-bar";class Yh extends Ar{constructor(t,e){super(t,e,!1,Yh.CLASS_NAME),this._len=0,this._page=0,this._pos=0,this._thumbSum=0,this._thumbed=0,this._vertical=!0}setVertical(t){this._vertical=t}setScroll(t,e,s,i){this._len=t,this._page=e,this._pos=s,Fe.setVisible(this._thumb,this._len>this._page),i&&this.$_setScrollBar(this.width,this.height)}calcPosition(t){let e=this.height;return e-=this.$_calcThumb(e),t=t*this._len/e>>0}reset(){this._thumbSum=this._thumbed=0}isView(t){return t===this._thumb}_doInitDom(t,e){this._thumb=this.appendSpan(t,Yh.THUMB_CLASS),this._thumb.style.position="absolute"}_doMeasure(t,e,s,i){return this._vertical?{width:this._model.barWidth(),height:i}:{width:s,height:this._model.barWidth()}}_doRender(t,e,s){this.$_setScrollBar(e,s)}$_calcThumb(t){let e=t*this._page/this._len;return this._thumbSum+=e,this._thumbed++,e=this._thumbSum/this._thumbed,Math.max(this._model.minThumbLength(),e)>>0}$_setScrollBar(t,e){if(Fe.isVisible(this._thumb)){const s=this._vertical?e:t,i=this.$_calcThumb(s),r=(s-i)*this._pos/(this._len-this._page)>>0,n=this._model.thumbWidth();if(this._vertical){const e=(t-n)/2>>0;Fe.setBounds(this._thumb,e,r,n,i)}else{const t=(e-n)/2>>0;Fe.setBounds(this._thumb,r,t,i,n)}}}}Yh.CLASS_NAME="rtc-scroll-bar",Yh.THUMB_CLASS="rtc-scroll-bar-thumb";class Qh extends We{constructor(t){super(t,!1,void 0,Oe),this.pos="tail",this.vertical=!0}isEnd(){return"tail"===this.pos}_getDisplayStyle(){return"inline-block"}_doInitStyle(t){t.padding=ae(Qh.PADDING)}_doInitDom(t,e){this._circle=t.createElement("div"),this._circle.className=Qh.CLASS_NAME,Object.assign(this._circle.style,{boxSizing:"border-box",width:"100%",height:"100%"}),e.appendChild(this._circle)}isDom(t){return this.containsDom(t)}}Qh.CLASS_NAME="rtc-selection-mask-handle",Qh.PADDING=10,Qh.SIZE=17;class Zh extends $r{constructor(t){super(t,!1,Zh.CLASS_NAME,Oe),this.vertical=!0}_doInitDom(t,e){const s=this._handles=[];for(let e=0;e<2;e++){const e=new Qh(t);this.addChild(e),this._handles.push(e)}s[0].pos="head",s[1].pos="tail"}_doMeasure(t,e,s,i){return this.dom.dataset.dir=this.vertical?"v":"h",{width:s,height:i}}_doRender(t,e,s){const i=this._handles;let r=2*Qh.PADDING+Qh.SIZE;i.forEach((t=>{t.vertical=this.vertical,t.resize(r,r)})),this.vertical?(i[0].move((e-r)/2,-r/2-1),i[1].move((e-r)/2,s-r/2-3)):(i[0].move(-r/2,(s-r)/2),i[1].move(e-r/2-3,(s-r)/2))}}Zh.CLASS_NAME="rtc-selection-mask";class Xh extends Nr{constructor(t){super(t,Xh.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){this._setModel(t,this.model=e)}click(t){this.parent.runCommand(t,this.model)}}Xh.CLASS_NAME="rtc-command-cell";class Kh extends $r{constructor(t,e){super(t,!1,Kh.CLASS_NAME,Oe),this._cellPool=[],this._cellViews=[],this._model=e}_doDestory(){this._data=null}setCommands(t,e,s){this._data=t,this._row=e,this._commands=s||[]}getCommand(t){for(let e of this._cellViews)if(e.isDom(t))return e.model}runCommand(t,e){e.run(t,this._data,this._row)}_doPrepareRender(t,e){const s=this._cellPool,i=this._cellViews,r=this._commands;for(;i.length<r.length;){let e=s.pop();e||(e=new Xh(t),this.addChild(e),i.push(e))}for(;i.length>r.length;){const t=i.pop();this.removeChild(t),s.push(t)}}_doMeasure(t,e,s,i){const r=this.control,n=r.isVertical(),o=this._model,h=this._cellViews,a=this._commands,l=n?oe(o.minCellWidth(),0):0,d=n?0:oe(o.minCellHeight(),0);let _=0,c=0;const u=this._sizes=[];return h.forEach(((t,e)=>{t.resize(NaN,NaN),t.setModel(r,a[e]);const s=t.getOffsetSize();n?(u.push(s.width=Math.max(l,Math.ceil(s.width))),_+=s.width,c=Math.max(c,Math.max(d||0,s.height))):(u.push(s.height=Math.max(d,Math.ceil(s.height))),c+=s.height,_=Math.max(_,Math.max(l||0,s.width)))})),{width:_,height:c}}_doRender(t,e,s){const i=this.control.isVertical(),r=this._cellViews;let n=0,o=0;r.forEach(((t,r)=>{t.move(n,o),i?(t.resize(this._sizes[r],s),n+=t.width):(t.resize(e,this._sizes[r]),o+=t.height)}))}}var Jh,ta,ea,sa;Kh.CLASS_NAME="rtc-command-box",function(t){t.AUTO="auto",t.HORIZONTAL="horizontal",t.VERTICA="vertical"}(Jh||(Jh={})),function(t){t.SHIFT="shift",t.OVERLAP="overlap"}(ta||(ta={}));class ia extends cr{_doInitDefaults(){super._doInitDefaults(),this._minCellWidth=70,this._minCellHeight=24}orientation(){return ie(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){this._orientation=t}mode(){return ie(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}minCellWidth(){return ie(this._minCellWidth,this._defs&&this._defs._minCellWidth)}setMinCellWidth(t){this._minCellWidth=t}minCellHeight(){return ie(this._minCellHeight,this._defs&&this._defs._minCellHeight)}setMinCellHeight(t){this._minCellHeight=t}_doPrepareRender(){}}class ra extends Nr{constructor(t){super(t,ra.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}_getPositionStyle(){return""}click(t){this.model.click(t)}}ra.CLASS_NAME="rtc-row-button rtc-panel-button";class na extends $r{constructor(t,e,s){super(t,!0,s+" rtc-panel",Oe),this._model=e}model(){return this._model}refresh(t,e,s){const i=this.doc;e=oe(e,this.width),s=oe(s,this.height);const r=this.measure(i,t,e,s);this.resize(r.width,r.height),this.render(i),this.move(0,0),this._manager=null}click(t,e,s){return!1}clickButton(t,e){return t.enabled()&&t.click(e),!0}_doInitStyle(t){Object.assign(t,{pointerEvents:"auto",overflow:"hidden"})}_doPrepareRender(t,e){this._manager=e}measure(t,e,s,i){const r=this._model,n=r.getPosition();let o;switch(r.getPosition()){case Uo.CENTER:o="center";break;case Uo.BOTTOM:o="top";break;case Uo.LEFT:o="right";break;case Uo.RIGHT:o="left";break;case Uo.TOP:default:o="bottom"}this.dom.dataset.border=o,this.clearSize();const h=super.measure(t,e,s,i);return r.isFullWidth()&&(h.width=s),r.isFullHeight()&&(h.height=i),n===Uo.LEFT||n===Uo.RIGHT||n===Uo.CENTER?h.width=r.getSize(s,h.width):h.height=r.getSize(i,h.height),this.mw=h.width+=1,this.mh=h.height+=1,h}_doMeasure(t,e,s,i){const r=this._padding=Fe.getPadding(this.dom),n=s-r.left-r.right,o=i-r.top-r.bottom;let h=this._doMeasureContent(t,n,o);return h.width+=r.left+r.right,h.height+=r.top+r.bottom,h}_doAfterRender(){this._manager=null}_createButton(t,e){const s=new ra(t);return s.setModel(this.control,e),s}}na.DURATION=500;class oa extends na{constructor(t,e,s){super(t,e,s),this._buttonViews=[],this._hButton=0,this._wButton=0,this._hBody=0}getButton(t){return this._buttonViews.find((e=>e.model===t))}buttonOf(t){return this._buttonViews.find((e=>e.isDom(t)))}_getDefaultButtonPosition(){return Yo.BOTTOM}getButtonPosition(t){const e=t.buttonPosition();return e===Yo.LEFT||e===Yo.RIGHT||e===Yo.BOTTOM?e:this._getDefaultButtonPosition()}isDom(t){return this.dom.contains(t)&&!this.buttonOf(t)}_doInitStyle(t){super._doInitStyle(t),t.boxSizing=""}_doInitContent(t,e){e.style.display="flex",e.style.flexDirection="column",e.style.height="100%",this.addChild(this._bodyContainer=new We(t,!1,"rtc-dialog-panel-body",Oe)),this._bodyContainer.setStyles({position:"",flex:"1 1 auto",minHeight:"20px",overflow:"hidden scroll"}),this._initBody(t,this._bodyContainer),this.addChild(this._buttonContainer=new We(t,!1,"rtc-dialog-panel-buttons",Oe)),this._buttonContainer.setStyles({position:"",flex:"0 0 auto",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"})}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this.model();this._layoutManager=e,this._prepareBody(t,this._bodyContainer,e,s),this.$_initButtons(t,s,this._buttonViews),this._prepareButtons(this._buttonViews)}_doMeasureContent(t,e,s){const i=this.model(),r=i.getPosition(),n=this.getButtonPosition(i),o=n===Yo.LEFT||n===Yo.RIGHT;let h=r===Uo.LEFT||r===Uo.RIGHT?i.getSize(e,e):e;o?(this.content.style.flexDirection=n===Yo.LEFT?"row-reverse":"row",this._buttonContainer.dom.style.flexDirection="column"):(this.content.style.flexDirection="column",this._buttonContainer.dom.style.flexDirection="row"),this._buttonViews.length>0?(this._buttonContainer.dom.style.display="flex",this._buttonViews.forEach((t=>{t.setEnabled(t.model.isEnabled(this.control.wrapperOrThis()))})),this._buttonContainer.dom.style.gap=i.buttonGap()+"px",this._measureButtons(this._buttonViews),this._hButton=o?0:this._buttonContainer.dom.offsetHeight,this._wButton=o?this._buttonContainer.dom.offsetWidth:0):(this._buttonContainer.dom.style.display="none",this._hButton=this._wButton=0),h-=this._wButton;const a=this._bodyPad=Fe.getPaddingEx(this._bodyContainer.dom),l=this._measureBody(t,this._layoutManager,this._bodyContainer,i,h-a.horz,s-a.vert);l.width+=a.horz,l.height+=a.vert,this._hBody=l.height;const d=o?Math.max(this._hBody,this._hButton):this._hBody+this._hButton;return{width:this.content.offsetWidth,height:d}}_doRender(t,e,s){const i=e-this._wButton-this._bodyPad.horz,r=s-this._hButton-this._bodyPad.vert;this._renderBody(t,this._bodyContainer,i,r)}_doAfterRender(){this._layoutManager=null}clickButton(t,e){super.clickButton(t,e);const s=t.model.type;return s===Go.SUBMIT?this._submit():s===Go.CANCEL||(s===Go.CLOSE||void 0)}_initBody(t,e){}_prepareBody(t,e,s,i){}$_initButtons(t,e,s){const i=e.getButtons(),r=this._buttonContainer;for(;s.length<i.length;){const e=this._createButton(t,i[s.length]);r.addChild(e),s.push(e)}for(;s.length>i.length;)r.removeLast(),s.pop()}_prepareButtons(t){}_measureButtons(t){}_renderBody(t,e,s,i){}_submit(){return!0}}class ha extends oa{constructor(t,e){super(t,e,ha.CLASS_NAME),this._layoutChanged=!1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}_prepareBody(t,e,s,i){const r=i.getLayout();let n=this._layoutView;this.setLayout(r),this._layoutChanged&&n&&(e.removeChild(n),n=null),n?n.refreshModels(r):(e.addChild(n=this._layoutView=s.createLayoutView(t,r)),n.dom.style.position="relative",n.build(t,s)),n.prepareLayout(t,s)}_measureBody(t,e,s,i,r,n){return this._layoutView.measureLayout(t,e,r,Number.MIN_SAFE_INTEGER)}_renderBody(t,e,s,i){this._layoutView.move(0,0),this._layoutView.resize(s,i),this._layoutView.render(t)}}ha.CLASS_NAME="rtc-form-panel";class aa extends na{static createView(t,e,s){switch(s){case Qo.VERTICAL:return new la(t,e);case Qo.DEFAULT:default:return new aa(t,e)}}constructor(t,e){super(t,e,aa.CLASS_NAME),this._buttonViews=[]}display(){return Qo.DEFAULT}_doInitContent(t,e){this.addChild(this._buttonContainer=new We(t,!1,"rtc-button-panel-buttons",Oe).setStyles(this._containerStyle()))}_doPrepareRender(t,e){super._doPrepareRender(t,e),this.$_prepareButtons(t,this.model())}_doMeasureContent(t,e,s){if(this._buttonViews.length>0){const t=(this.model().buttonGap()||0)/2+"px";this._layoutButtons(this._buttonViews,t)}this.content.style.width="",this.content.style.height="",this._buttonContainer.clearSize();return{width:this._buttonContainer.dom.offsetWidth+this._buttonViews.length,height:this._buttonContainer.dom.offsetHeight}}_doRender(t,e,s){const i=this.model().position();this._buttonContainer.dom.style.justifyContent=this.model().align(),i===Uo.LEFT||i===Uo.RIGHT?(this.content.style.height="100%",this._buttonContainer.dom.style.height="100%"):i!==Uo.TOP&&i!==Uo.BOTTOM||(this.content.style.width="100%",this._buttonContainer.dom.style.width="100%")}$_prepareButtons(t,e){const s=e.getButtons()||[],i=this._buttonViews,r=this._buttonContainer;for(;i.length<s.length;){const e=this._createButton(t,s[i.length]);r.addChild(e),i.push(e)}for(;i.length>s.length;)r.removeLast(),i.pop()}_containerStyle(){return{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"}}_layoutButtons(t,e){for(let s=0,i=t.length;s<i;s++)t[s].dom.style.marginLeft=e,t[s].dom.style.marginRight=e}}aa.CLASS_NAME="rtc-button-panel";class la extends aa{display(){return Qo.VERTICAL}_containerStyle(){const t=super._containerStyle();return t.flexDirection="column",t}_layoutButtons(t,e){for(let s=0,i=t.length;s<i;s++)t[s].dom.style.marginTop=e,t[s].dom.style.marginBottom=e}}class da extends yr{constructor(t){super(t,da.CLASS_NAME),this.dir=W.DOWN,this._svg.setStyle({position:"absolute",width:"100%",height:"100%"})}_doDestory(){this._svg.detach(),super._doDestory()}active(){return this._svg.svg.firstElementChild&&Date.now()-this._started<=da.DURATION}draw(){const t=this._svg,e=this.bounds;let s,i,r,n,o;switch(this.dir){case"up":i=e.x,r=e.y+e.height,n=e.width,s=t.quadratic(i,r,i+n/2,r,i+n,r),t._animateRevert(s,`M ${i} ${r} Q ${i+n/2} ${r} ${i+n} ${r} z`,`M ${i} ${r} Q ${i+n/2} ${r-da.SIZE} ${i+n} ${r} z`,da.DURATION);break;case"down":i=e.x,r=e.y,n=e.width,s=t.quadratic(i,r,i+n/2,e.y,i+n,r),t._animateRevert(s,`M ${i} ${r} Q ${i+n/2} ${r} ${i+n} ${r} z`,`M ${i} ${r} Q ${i+n/2} ${r+da.SIZE} ${i+n} ${r} z`,da.DURATION);break;case"left":i=e.x,r=e.y,o=e.height,s=t.quadratic(i,r,i,r+o/2,i,r+o),t._animateRevert(s,`M ${i} ${r} Q ${i} ${r+o/2} ${i} ${r+o} z`,`M ${i} ${r} Q ${i+da.SIZE} ${r+o/2} ${i} ${r+o} z`,da.DURATION);break;case"right":i=e.x+e.width,r=e.y,o=e.height,s=t.quadratic(i,r,i,r+o/2,i,r+o),t._animateRevert(s,`M ${i} ${r} Q ${i} ${r+o/2} ${i} ${r+o} z`,`M ${i} ${r} Q ${i-da.SIZE} ${r+o/2} ${i} ${r+o} z`,da.DURATION)}this._started=Date.now()}}da.CLASS_NAME="rtc-end-balloon",da.SIZE=50,da.DURATION=300;class _a extends We{clearFeedbacks(){this._endBalloon&&!this._endBalloon.active()&&(this.removeEndBalloon(),this._clearTimer=clearTimeout(this._clearTimer))}removeEndBalloon(){this._endBalloon&&(this._endBalloon=this._endBalloon.destroy(),this.setAnimating(!1))}showEndBalloon(t,e){if(this._endBalloon){if(this._endBalloon.active())return;this.removeEndBalloon()}const s=this._endBalloon=new da(this.doc);s.bounds=Object.assign({},t),s.dir=e,s.draw(),s.appendTo(this),this.setAnimating(!0),this._clearTimer=setTimeout((()=>this.clearFeedbacks()),Math.max(1e3,da.DURATION+10))}_doInitStyle(t){t.pointerEvents="none"}}class ca extends Co{constructor(t,e){super(t,e),this._spans=[]}_getDisplayStyle(){return"grid"}needMeasuredSize(){return!1}_canContain(t){if(super._canContain(t)){const t=this.doc.createElement("label");return t.className=ca.SPAN_CLASS,t.style.overflow="hidden",t.style.whiteSpace="pre-wrap",t.style.textOverflow="ellipsis",t.style.alignSelf="center",We.BOUNDING&&(t.style.border=We.BOUNDING_BORDER),this.appendDom(t),this._spans.push(t),!0}}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.forEach(((t,s)=>{t.prepareView(e)}))}_doApplyStyles(t){const e=this._model.getLabelWidths();let s;s=e.min&&e.max?`minmax(${e.min}, ${e.max})`:e.min?e.width?`minmax(${e.min}, ${e.width})`:`minmax(${e.min}, auto)`:e.max?e.width?`minmax(${e.width}, ${e.max})`:`minmax(auto, ${e.max})`:e.width?`${e.width}`:"auto",t.gridTemplateColumns=s+" 1fr",t.gridTemplateColumns||(t.gridTemplateColumns="minmax(0, auto) 1fr")}_doMeasureLayout(t,e,s,i){const r=this._model,n=this._visibles;return this.dom.style.rowGap=ae(r.itemGap),this.dom.style.columnGap=ae(r.labelGap),this._measureChildren(n,t,e,s,i,null),this.$_measureContent(t,s,i)}_doLayoutContent(t,e,s){}$_measureContent(t,e,s){const i=this._model,r=this._visibles,n=this._spans,o=i.labelStyle;return r.length>0&&r.forEach(((t,e)=>{const s=n[e];o&&Object.assign(s.style,o),s.textContent=t.model().getChildProp("label")})),{width:e,height:this.dom.offsetHeight}}}ca.SPAN_CLASS="rtc-form-label";class ua extends oa{static createView(t,e,s){switch(s){case Zo.LONG:return new ga(t,e);case Zo.VERTICAL:return new pa(t,e);case Zo.DEFAULT:default:return new ua(t,e)}}constructor(t,e){super(t,e,ua.CLASS_NAME)}display(){return Zo.DEFAULT}search(){if(this._input.value)return this.model().search(this._input.value,this._options),!0}canShowResult(t){return this._chkAll.checked&&t&&(!t.isEmpty()||this.model().alwaysResult())}_initBody(t,e){this._createElements(t),this._initForm(t,e)}_prepareBody(t,e,s,i){const r=this._options=this._manager.owner().searchOptions();this._spanCase.textContent=i.matchCaseLabel(),this._chkCase.checked=r.matchCase,this._spanWhole.textContent=i.wholeWordLabel(),this._chkWhole.checked=r.matchWholeWord,this._spanExp.textContent=i.regExpLabel(),this._chkExp.checked=r.useRegExp,this._spanNext.textContent=i.searchNextLabel(),this._chkNext.checked=!r.searchAll,this._spanAll.textContent=i.searchAllLabel(),this._chkAll.checked=r.searchAll}_measureBody(t,e,s,i,r,n){let o=i.lineGap();return o!==this._lineGap&&(this._lineGap=o,o=(o||0)/2+"px",this._lines.forEach((t=>{t.style.marginTop=o,t.style.marginBottom=o}))),{width:s.dom.scrollWidth,height:s.dom.scrollHeight}}_measureButtons(t){this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());t&&t.setEnabled(this._input.value.length>0)}_createElements(t){this._input=t.createElement("input"),this._input.type="search",this._input.tabIndex=0,this._input.style.width="100%",this._input.oninput=()=>{this.$_checkOk()},this._chkCase=Fe.createCheckBox(t,null),this._chkCase.onchange=()=>{this._options.matchCase=this._chkCase.checked},this._spanCase=t.createElement("label"),this._chkWhole=Fe.createCheckBox(t,null),this._chkWhole.onchange=()=>{this._options.matchWholeWord=this._chkWhole.checked},this._spanWhole=t.createElement("label"),this._chkExp=Fe.createCheckBox(t,null),this._chkExp.onchange=()=>{this._options.useRegExp=this._chkExp.checked},this._spanExp=t.createElement("label"),this._chkNext=Fe.createRadio(t,null),this._chkNext.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._spanNext=t.createElement("label"),this._chkAll=Fe.createRadio(t,null),this._chkAll.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._chkAll.style.marginLeft="10px",this._spanAll=t.createElement("label"),this._chkAll.name=this._chkNext.name="dl-search"}_addLine(t,e,s,i){return i||(i=Fe.createElement(t,"div",{display:"flex"})),i.appendChild(e),e.style.marginRight="4px",s.htmlFor=e.id=Fe.getDomId(),s.style.whiteSpace="pre",i.appendChild(s),i}_initForm(t,e){const s=this._lines=[this._input];let i;s.push(this._addLine(t,this._chkCase,this._spanCase)),s.push(this._addLine(t,this._chkWhole,this._spanWhole)),s.push(this._addLine(t,this._chkExp,this._spanExp)),i=this._addLine(t,this._chkNext,this._spanNext),s.push(this._addLine(t,this._chkAll,this._spanAll,i)),s.forEach((t=>e.appendDom(t)))}_submit(){return this.search()}}ua.CLASS_NAME="rtc-search-panel";class ga extends ua{constructor(t,e){super(t,e)}display(){return Zo.LONG}_getDefaultButtonPosition(){return Yo.RIGHT}_measureBody(t,e,s,i,r,n){let o=i.lineGap();return this._input.style.marginBottom=o+"px",this._line.style.marginBottom=o+"px",s.getOffsetSize()}_initForm(t,e){e.appendDom(this._input);let s=this._line=this._addLine(t,this._chkCase,this._spanCase);this._spanCase.style.marginRight="10px",this._addLine(t,this._chkWhole,this._spanWhole,s),this._spanWhole.style.marginRight="10px",this._addLine(t,this._chkExp,this._spanExp,s),e.appendDom(s),s=this._addLine(t,this._chkNext,this._spanNext),this._addLine(t,this._chkAll,this._spanAll,s),e.appendDom(s)}}class pa extends ua{display(){return Zo.VERTICAL}_measureBody(t,e,s,i,r,n){const o=ae(i.lineGap()||0);return this._input.style.marginBottom=o,this._lines.forEach((t=>t.style.marginBottom=o)),s.getOffsetSize()}_initForm(t,e){const s=this._lines=[this._input];s.push(this._addLine(t,this._chkCase,this._spanCase)),s.push(this._addLine(t,this._chkWhole,this._spanWhole)),s.push(this._addLine(t,this._chkExp,this._spanExp)),s.push(this._addLine(t,this._chkNext,this._spanNext)),s.push(this._addLine(t,this._chkAll,this._spanAll)),s.forEach((t=>e.appendDom(t))),this._chkAll.style.marginLeft=""}}class fa extends Ah{constructor(t,e){super(t,e,fa.CLASS_NAME)}canEnter(){return!this._search.disabled}search(){this.canEnter()&&this._model.search(this._input.value)}setResult(t){this._result=t,this._reset.disabled=!t||t.isEmpty(),this._search.disabled=!t&&!this._input.value}isDom(t){return this.dom.contains(t)||super.isDom(t)}clickable(){return!0}click(t,e,s){t===this._search?this.search():t===this._reset?(this._result.clear(),this.control.invalidateLayout()):t===this._menu&&this._model.clickMenu()}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._input=t.createElement("input")),this._input.type="search",this._input.placeholder="검색어를 입력하세요.",this._input.style.flex="1 1 auto",this._input.oninput=()=>{this._search.disabled=!this._result&&this._input.value.length<1},e.appendChild(this._search=Pr.createButton(t,Oh["@search"],24,Ch.BUTTON_CLASS)),this._search.disabled=!0,this._search.style.flex="0 0 auto",e.appendChild(this._reset=Pr.createButton(t,Oh["@refresh"],24,Ch.BUTTON_CLASS)),this._reset.disabled=!0,this._reset.style.flex="0 0 auto",e.appendChild(this._menu=Pr.createButton(t,Oh["@menu"],24,Ch.BUTTON_CLASS)),this._menu.style.flex="0 0 auto"}_doPrepareRender(t,e){const s=this._model;this.$_prepareButtons(t,s)}_doMeasureContent(t,e,s){const i=this._model;return this._reset.style.display=i.resetVisible()?"":"none",this._menu.style.display=i.optionsVisible()?"":"none",{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this._model}$_prepareButtons(t,e){}}fa.CLASS_NAME="rtc-search-bar";class wa extends Ah{constructor(t,e){super(t,e,wa.CLASS_NAME),this._closed=!1}setResult(t){this._result=t,this._closed=!1,this.control.invalidateLayout(),this.refreshView()}refreshView(){const t=this._result;if(t){const e=this._buttons,s=t.isEmpty(),i=t.current();e[wa.PREV].disabled=e[wa.FIRST].disabled=s||0==i,e[wa.NEXT].disabled=e[wa.LAST].disabled=s||i===t.count()-1}}isDom(t){return this.dom.contains(t)||super.isDom(t)}setVisible(t){return super.setVisible(t&&!this._closed)}clickable(){return!0}click(t,e,s){if(t===this._close)this._model.clearWhenClose()&&this._result.clear(),this._closed=!0,this.control.invalidateLayout();else for(const e in this._buttons)if(t===this._buttons[e]){switch(this._buttons[e].value){case wa.FIRST:this._result.moveFirst();break;case wa.PREV:this._result.movePrev();break;case wa.NEXT:this._result.moveNext();break;case wa.LAST:this._result.moveLast()}this._result.showCurrent();break}}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._title=t.createElement("span")),Object.assign(this._title.style,{flex:"0 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}),this._title.textContent="검색 결과:",e.appendChild(this._counts=t.createElement("span")),Object.assign(this._counts.style,{flex:"0 0 auto",textAlign:"center",minWidth:"50px"}),this._counts.textContent="0 / 0",e.appendChild(this._container=t.createElement("div")),Object.assign(this._container.style,{display:"flex",justifyContent:"center",flex:"1 0 auto"}),this.$_prepareButtons(t,this._container,this._model),e.appendChild(this._close=Pr.createButton(t,Oh["@close"],24,Ch.BUTTON_CLASS)),this._close.style.flex="0 0 auto"}_doPrepareRender(t,e){}_doMeasureContent(t,e,s){this.model;const i=this._result;return i&&(this._counts.textContent=i.current()+1+" / "+i.count()),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this.model}$_prepareButton(t,e){const s=t.createElement("button"),i=Oh[e],r=new oi(t);return r.setViewSize(i.width),r.path(i.path),r.makeBackground().fillSize(),s.appendChild(r.svg),s.className=Ch.BUTTON_CLASS,s}$_prepareButtons(t,e,s){const i=this._buttons={};[wa.FIRST,wa.PREV,wa.NEXT,wa.LAST].forEach((s=>{const r=this.$_prepareButton(t,s);r.value=s,Fe.resize(r,24,24),e.appendChild(r),i[s]=r}))}}wa.CLASS_NAME="rtc-search-result",wa.FIRST="@first",wa.PREV="@prev",wa.NEXT="@next",wa.LAST="@last",function(t){t.NORMAL="norml",t.HEADER="header",t.SEPARATOR="separator",t.SUBMENU="submenu",t.CHECK="check",t.RADIO="radio"}(ea||(ea={}));class ma extends p{constructor(t,e){super(),this.type=ea.NORMAL,this._checked=!1,this._parent=t,Object.assign(this,this._source=e)}parent(){return this._parent}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}get checked(){return this._checked}set checked(t){t!==this._checked&&(this._checked=t,t&&this._parent&&ba.checkItem(this,this._parent.items))}checkable(){return this.type===ea.CHECK||this.type===ea.RADIO}click(t,e){switch(this.type){case ea.HEADER:case ea.SEPARATOR:break;case ea.CHECK:case ea.RADIO:default:return this.onClick&&!0===this.onClick(t,e,this._source)}}}class ya extends p{constructor(t,e){super(),this.expanded=!0,this._parent=t,Object.assign(this,e),Array.isArray(e.items)&&e.items.length>0?this.items=e.items.map((t=>new ma(this,t))):this.items=null}click(t){return this.expanded=!this.expanded,!1}}!function(t){t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.HEADER="header",t.FOOTER="footer",t.CENTER="center"}(sa||(sa={}));class ba extends Ue{static checkItem(t,e){if(t.type===ea.RADIO&&e){const s=t.group;for(const i of e)i===t||i.type!==ea.RADIO||i.group!==s&&(i.group||s)||(i.checked=!1)}}constructor(t,e){super(t),this._source=e,this._checkSize=20,this.separator=!0,this.autoCheck=!0,this.autoHide=!0,this.fillWidth=!1,this.fillHeight=!0,this.origin=sa.RIGHT;const s=e.items;delete e.items;try{const t=this._itemMap={};if(Object.assign(this,e),s){this._items=s.map((t=>Array.isArray(t.items)?new ya(this,t):new ma(this,t)));for(let e=this._items.length-1;e>=0;e--){const s=this._items[e];if(s instanceof ya);else if(s.id&&(t[s.id]=s),s.checked&&s.checkable()){this.checkItem(s);break}}}else this._items=[]}finally{s&&(e.items=s)}}get checkSize(){return this._checkSize}set checkSize(t){t!==this._checkSize&&(this._checkSize=t)}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}get visibleItems(){const t=[];return this._items.forEach((e=>{e instanceof ya?(t.push(e),e.expanded&&e.items&&e.items.forEach((e=>t.push(e)))):t.push(e)})),t}getItem(t){return this._itemMap[t]}show(t){this.onShow&&this.onShow(t,this),this._items.forEach((e=>{e instanceof ya||e.onShow&&e.onShow(t,this._source,e)}))}close(t){this.onClose&&this.onClose(t,this)}clickItem(t,e){if(e instanceof ya)return e.click(t);{const s=e.checkable();return this.autoCheck&&s&&("radio"===e.type?this._items.forEach((t=>{t instanceof ma&&"radio"===t.type&&(t._source.checked=t===e)})):e._source.checked=!e._source.checked),e.click(t,this)?this.alwaysHide||!s:(this.onClick&&this.onClick(t,this._source,e._source),this.alwaysHide||!s)}}checkItem(t){ba.checkItem(t,this._items)}}const va={position:"absolute",display:"flex",flexDirection:"column",backgroundColor:"#efefef"},Ca={position:"relative",display:"flex",alignItems:"center",pointerEvents:"auto"},Sa={flex:"0 0 24px"},Ra={display:"flex",alignItems:"center",flex:"1 1 auto",boxSizing:"content-box"},xa={flex:"1 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"};class Va extends We{constructor(t,e){super(t,!1,e,Oe)}model(){return this._model}setModel(t,e){this._model=t,this._spanLabel.textContent=t.label}refresh(){}touched(){this.dom.dataset.touched="1"}clearTouched(){delete this.dom.dataset.touched}isDom(t){return this.containsDom(t)}_doInitStyle(t){Object.assign(t,Ca)}_doInitDom(t,e){this._divImage=t.createElement("div"),Object.assign(this._divImage.style,Sa),e.appendChild(this._divImage),this._divMenu=t.createElement("div"),this._divMenu.className="rtc-menu-item-label",Object.assign(this._divMenu.style,Ra),this._spanLabel=t.createElement("span"),Object.assign(this._spanLabel.style,xa),this._divMenu.appendChild(this._spanLabel),e.appendChild(this._divMenu)}}class Ea extends Va{constructor(t){super(t,"rtc-menu-item")}setModel(t,e){super.setModel(t,e),this._divMenu.style.marginLeft=t.parent()instanceof ya?Ea.INDENT_SIZE:"",t.type===ea.CHECK||t.type===ea.RADIO?this._shape&&"check"===this._shape.name()||(this._shape&&this._shape.remove(),this._shape=this.control.shapes().createShape(this.doc,"@check"),this._shape.appendTo(this._divMenu),this._shape.resize(Ea.CHECK_SIZE),this.$_resetCheck(this._shape.dom(),t.checked)):this._shape&&this._shape.setVisible(!1)}refresh(){this._shape&&this.$_resetCheck(this._shape.dom(),this._model._source.checked)}$_resetCheck(t,e){t.style.stroke=e?"#333":"#ccc",t.style.fill=e?"#333":"#ccc"}}Ea.CHECK_SIZE=24,Ea.INDENT_SIZE="10px";class $a extends Va{constructor(t){super(t,"rtc-menu-item rtc-menu-group")}_doInitDom(t,e){super._doInitDom(t,e),this._expander=t.createElement("div"),this._expander.className="rtc-menu-group-expander",Object.assign(this._expander.style,{width:"16px",height:"16px"}),e.appendChild(this._expander)}setModel(t,e){super.setModel(t,e),this._expander.dataset.expand=t.expanded?"1":"0"}}class Aa extends $r{constructor(t){super(t,!0,"rtc-menu",Oe),this._itemPool=[],this._groupPool=[],this._itemViews=[],this._lineGap=8}get model(){return this._model}show(t,e,s,i){if(!this.visible){const r=this._itemContainer;if(this.setVisible(!0),t.origin===sa.CENTER)this.$_refresh(this.doc,t,e,s,!1),r.center(e,s),this.dom.style.backgroundColor="#00000040",r.dom.style.border="1px solid #777";else if(this.$_refresh(this.doc,t,e,s),r.dom.style.border="",i){const s=r.dom;let i;if(t.origin===sa.LEFT)i=[{left:-r.width+"px"},{left:"0px"}];else i=[{left:e+"px"},{left:e-r.width+"px"}];if(i){s.animate(i,{delay:100,duration:150,fill:"both"}).addEventListener("finish",(()=>{})),this.dom.animate([{backgroundColor:"#00000000"},{backgroundColor:"#00000040"}],{duration:500,fill:"both"})}}else if(t.origin===sa.LEFT)this.moveX(0);else this.moveX(e-this._itemContainer.width)}}hide(t){if(this.visible){if(t&&this._model.origin!==sa.CENTER){const t=this._itemContainer,e=t.dom;let s;if(this._model.origin===sa.LEFT)s=[{left:"0px"},{left:-t.width+"px"}];else{const i=e.offsetLeft;s=[{left:i+"px"},{left:i+t.width+"px"}]}e.animate(s,{duration:150,fill:"none"}).addEventListener("finish",(()=>{this.setVisible(!1);const t=this.control&&this.control.wrapperOrThis();this.remove(),this.model&&this._model.close(t),this._model=null})),this.dom.animate([{backgroundColor:"#00000040"},{backgroundColor:"#00000000"}],{duration:500,fill:"both"})}else this.setVisible(!1),this.remove(),this._model=null;return!0}}$_refresh(t,e,s,i,r=!0){const n=this.measure(t,this._model=e,s,i),o=.7*s>>0;this.resize(s,i),this._itemContainer.resize(o,r?i:n.height),this.render(t)}$_resetRadios(){this._itemViews.forEach((t=>{t instanceof Ea&&t.model().type===ea.RADIO&&t.refresh()}))}isMenuView(t){return this.containsDom(t)}setTouched(t){this._touched=t,t.touched()}clearTouched(){this._touched&&this._touched.clearTouched()}clickItem(t,e){const s=this._model;if(s.clickItem(t,e.model()))return!0;e.model().type===ea.RADIO?this.$_resetRadios():e.refresh(),e instanceof $a&&this.$_refresh(this.doc,s,this.width,this.height)}_doInitStyle(t){t.pointerEvents="all"}_doInitContent(t,e){this._itemContainer=new We(t,!1,void 0,Oe).setStyles(va),this.addChild(this._itemContainer)}_doPrepareRender(t,e){const s=e.visibleItems,i=this._itemPool,r=this._groupPool,n=this._itemViews=[],o=this._itemContainer;n.forEach((t=>{t instanceof $a?r.push(t):i.push(t)})),o.clear(),s.forEach((e=>{let s;s=e instanceof ya?r.pop()||new $a(t):i.pop()||new Ea(t),n.push(s),o.addChild(s)})),this._model=e}_doMeasure(t,e,s,i){const r=this._model,n=this._itemViews;r.visibleItems.forEach(((t,e,s)=>{n[e].setModel(t,r.separator&&e<s.length-1)}));return this._itemContainer.getOffsetSize()}_doRender(t,e,s){}}class La extends We{isDirty(){return this._item.filter.enabled!=this._check.checked}setItem(t,e,s){const i=La.CLASS_NAME+"-"+e;s&&x.debugging(),this._item=t,this._check.id=i,this._check.checked=t.filter.enabled,this._label.htmlFor=i,this._label.textContent=t.label}_doInitStyle(t){Object.assign(t,{position:"relative",display:"flex",flexDirection:"row",padding:"4px 4px"}),this.setClassName(La.CLASS_NAME)}_doInitDom(t,e){e.appendChild(this._check=Fe.createCheckBox(t,{marginRight:"8px",flex:"0 0 auto"})),e.appendChild(this._label=Fe.createElement(t,"label",{flex:"1 1 auto",whiteSpace:"pre"}))}}La.CLASS_NAME="rtc-filter-panel-item";class Ta extends oa{constructor(t,e){super(t,e,Ta.CLASS_NAME),this._itemViews=[]}_prepareBody(t,e,s,i){this._dv=s.data(),i.prepare(this._dv)}_prepareButtons(t){}_measureBody(t,e,s,i,r,n){return this.$_buildFilters(t,s,i),s.getOffsetSize()}_measureButtons(t){this.$_checkOk()}_doAfterRender(){this.model().unprepare(),super._doAfterRender()}click(t,e,s){for(let e of this._itemViews)if(e.isView(t)){if(this.model().autoApply())return this._dv.toggleFilter(e._item.filter,!0),this.model().autoClose();setTimeout((()=>{this.$_checkOk()}),0)}return!1}_submit(){const t=this._itemViews.filter((t=>t.isDirty())).map((t=>t._item.filter));return this._dv.toggleFilters(t,!0),!0}$_buildFilters(t,e,s){const i=s.getItems(),r=this._itemViews;for(;r.length<i.length;){const s=new La(t,!1,void 0,Oe);e.addChild(s),r.push(s)}for(;r.length>i.length;)r.pop().remove();r.forEach(((t,e)=>t.setItem(i[e],e,false))),this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());if(t){for(const e of this._itemViews)if(e.isDirty())return void t.setEnabled(!0);t.setEnabled(!1)}}}Ta.CLASS_NAME="rtc-filter-panel";class ka extends We{setField(t,e){this._field=t,this._span.textContent=t.displayText(),e&&e.dir?(this._mark.style.display="",this._mark.textContent=e.dir===te.ASCENDING?"↓":"↑"):this._mark.style.display="none",!e||isNaN(e.order)?this._order.style.display="none":(this._order.style.display="",this._order.textContent=String.fromCharCode(E+e.order))}_doInitStyle(t){t.display="inline-flex",t.alignItems="center",this.setClassName(ka.CLASS_NAME)}_doInitDom(t,e){e.appendChild(this._span=Fe.createSpan(t,{whiteSpace:"pre"})),e.appendChild(this._mark=Fe.createSpan(t,{fontFamily:"Helvetica",fontWeight:"bold",color:"#111",marginLeft:"2px"})),e.appendChild(this._order=Fe.createSpan(t,{color:"#111",fontWeight:"bold",marginLeft:"2px"}))}_getPositionStyle(){return""}}ka.CLASS_NAME="rtc-field-bar-item";class Da extends Ah{constructor(t,e){super(t,e,Da.CLASS_NAME),this._itemViews=[]}_doInitContent(t,e){Object.assign(e.style,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"})}_doMeasureContent(t,e,s){return this.content.style.width=e+"px",this.$_buildItems(t,this._model),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this.content.style.width="100%"}clickable(){return!0}isDom(t){for(let e of this._itemViews)if(e.isView(t))return!0}click(t,e,s){for(let e of this._itemViews)if(e.isView(t)){this._model.sortField(e._field);break}}$_buildItems(t,e){const s=e.sortMarkVisible(),i=e.sortOrderVisible(),r=e.getFields(),n=this._itemViews;for(;n.length<r.length;){const e=new ka(t,!1,void 0,Oe);this.addChild(e),n.push(e)}for(;n.length>r.length;)this.removeChild(n.pop());n.forEach(((t,n)=>{const o=e.getSort(r[n]);o&&(s||(o.dir=void 0),i||(o.order=NaN)),t.setField(r[n],o)}))}}var Na,Pa;Da.CLASS_NAME="rtc-field-bar",function(t){t.AUTO="auto",t.START="start",t.END="end",t.NONE="none"}(Na||(Na={}));class Ma extends Sh{_doInitDefaults(){super._doInitDefaults(),this._indent=Na.AUTO,this.setVisible(!1)}indent(){return ie(this._indent,this._defs&&this._defs._indent)}setIndent(t){t!==this._indent&&(this._indent=t,this._changed())}defTemplate(){}_getParamArgs(){return{}}}class Ia extends Lh{constructor(t,e){super(t,e,Ia.CLASS_NAME)}_getRenderWidth(t){switch(this._model.indent()){case Na.AUTO:t-=this._layoutManager.startIndent()-this._layoutManager.endIndent();break;case Na.START:t-=this._layoutManager.startIndent();break;case Na.END:t-=this._layoutManager.endIndent()}return t}_doMeasure(t,e,s,i){return super._doMeasure(t,e,s,i)}_doRenderContent(t,e,s){super._doRenderContent(t,e,s);let i=0;switch(this._model.indent()){case Na.AUTO:case Na.START:i+=this._layoutManager.startIndent()}this._layoutView.moveX(i)}}Ia.CLASS_NAME="rtc-subheader";class Oa extends $r{constructor(t,e){super(t,!1,void 0,Oe),e||z(v.layoutMustSet),this._model=e}build(t,e){const s=this._view=this._model.clone();this.appendDom(s)}refreshModels(t){}prepareLayout(t,e){const s=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(s),this._doApplyImportantStyles(s),this.mw=this.mh=NaN;const i=this._padding=Fe.getPaddingBorder(this.dom);i.horz=i.left+i.right+i.borderLeft+i.borderRight,i.vert=i.top+i.bottom+i.borderTop+i.borderBottom}measureLayout(t,e,s,i){const r=this._padding;s-=r.horz,i-=r.vert;const n=this._doMeasure(t,e,s,i);return this.mw=n.width+=r.horz,this.mh=n.height+=r.vert,n}_getPositionStyle(){return"relative"}_doInitContent(t,e){We.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=We.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e}_doApplyStyles(t){}_doApplyImportantStyles(t){}_doMeasure(t,e,s,i){const r=this._view;isNaN(this._explicitWidth)?s=NaN:(s=this._explicitWidth,this.setWidth(s)),isNaN(this._explicitHeight)?i=NaN:(i=this._explicitHeight,this.setHeight(i)),this._model.apply(r);return{width:oe(s,r.offsetWidth),height:oe(i,r.offsetHeight)}}_doRender(t,e,s){Fe.resize(this.dom,e,s)}_doAfterRender(){super._doAfterRender(),this._manager=null}_doMeasureContent(t,e,s){}_doLayoutContent(t,e,s){}}!function(t){t.TOP="top",t.BOTTOM="bottom",t.CENTER="center"}(Pa||(Pa={}));class Ba extends m{constructor(t){super(),this.duration=3e3,this.position=Pa.BOTTOM,this.margin=50,t&&(this.message=t.message,this.html=t.html,t.duration>0&&(this.duration=t.duration),t.position&&(this.position=t.position),isNaN(t.margin)||(this.margin=t.margin),this.style=t.style)}}class Fa extends We{constructor(t){super(t,!1,"rtc-toast",Oe)}show(t,e){const s=this.dom,i=t.width,r=t.height;this.$_hide(),"string"==typeof e.style?this.setClassName(e.style):e.style&&this.setStyles(e.style),t.addChild(this),this.setVisible(!0),e.html?s.innerHTML=e.html:s.textContent=e.message;const n=s.offsetHeight,o=e.margin;let h;switch(e.position){case Pa.TOP:h=o;break;case Pa.CENTER:h=(r-n)/2+o;break;default:h=r-n-o}h=Math.max(0,Math.min(r-n,h)),this.move((i-s.offsetWidth)/2,h),this.$_show(e)}$_hide(){this.setVisible(!1),this.remove()}$_show(t){this.dom.animate([{opacity:"0"},{opacity:"1"}],{duration:Fa.EFFECT_DURATION,fill:"forwards"});this.dom.animate([{opacity:"1"},{opacity:"0"}],{delay:t.duration,duration:2*Fa.EFFECT_DURATION,fill:"forwards"}).addEventListener("finish",(()=>{this.$_hide()}))}}Fa.EFFECT_DURATION=500;class Ha extends cr{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setLength(Ha.LENGTH),this._floating=!1,this._minWidth=Ha.MIN_WIDTH,this._spaceCharacter="•",this._caseSensitive=!1,this._autoScroll=!0,this._groups=this._defGroups=this.$_buildGroups("가-하,A-Z")}onLetterClick(){return ie(this._onLetterClick,this._defs&&this._defs._onLetterClick)}setOnLetterClick(t){this._onLetterClick=t}length(){return ie(this._length,this._defs&&this._defs._length)}setLength(t){var e;e=t,!isNaN(e)||"string"==typeof e&&e.trimEnd().endsWith("*")&&!isNaN(parseFloat(e))||(t=Ha.LENGTH),t!==this._length&&(this._length=t,this._changed())}floating(){return ie(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}width(){return ie(this._width,this._defs&&this._defs._width)}setWidth(t){(t=oe(t,NaN))!==this._width&&(this._width=t,this._changed())}minWidth(){return ie(this._minWidth,this._defs&&this._defs._minWidth)}setMinWidth(t){(t=oe(t,NaN))!==this._minWidth&&(this._minWidth=t,this._changed())}maxWidth(){return ie(this._maxWidth,this._defs&&this._defs._maxWidth)}setMaxWidth(t){(t=oe(t,NaN))!==this._maxWidth&&(this._maxWidth=t,this._changed())}spaceCharacter(){return ie(this._spaceCharacter,this._defs&&this._defs._spaceCharacter)}setSpaceCharacter(t){t!==this._spaceCharacter&&(this._spaceCharacter=t,this._changed())}caseSensitive(){return ie(this._caseSensitive,this._defs&&this._defs._caseSensitive)}setCaseSensitive(t){this._caseSensitive=t}letters(){return ie(this._letters,this._defs&&this._defs._letters)}setLetters(t){(t=t?t.trim():t)!==this._letters&&(this._letters=t,this._groups=this.$_buildGroups(t),this._changed())}indexField(){return ie(this._indexField,this._defs&&this._defs._indexField)}setIndexField(t){this._indexField=t}autoScroll(){return ie(this._autoScroll,this._defs&&this._defs._autoScroll)}setAutoScroll(t){this._autoScroll=t}getLength(t){return D(this._len,t)}getLetters(t){function e(t,e){if(1===e)i.push(t[0]);else{const s=t.length/e;let r=0,n=1;for(i.push(t[0]);n<t.length;)n-r>=s&&i.push(t[n>>0]),r=n,n+=s}}let s=this._groups;s||(s=this._defs?this._defs._groups||this._defs._defGroups:this._defGroups);let i=[];for(let e=0,r=Math.min(t,s.length);e<r;e++)i.push(s[e][0]);let r=t-i.length;if(r>0){const n=s.slice(0).sort(((t,e)=>e.length-t.length)),o=n.length,h=r,a=[];let l=0;i=[];for(let t of n)l+=t.length-1;if(l<=t)for(let t of n)for(let e of t)i.push(e);else{r=t;for(let t=0;t<o&&r>0;t++){const e=Math.floor(n[t].length*h/l);a.push(e),r-=e}if(r>0)for(let t=0;t<o&&r>0;t++){const e=n[t].length*h/l;Math.round(e)>e&&(a[t]++,r--)}if(r>0)for(let t=0;t<o&&r>0;t++)a[t]++,r--;for(let t=0;t<o;t++){const i=s[t];e(i,a[n.indexOf(i)])}}}return i}clickLetter(t){const e=this.onLetterClick();if(e)return e(t)}_doPrepareRender(){this._len=k(this.length(),!1)}$_extractChars(t){const e=t.trim().split(""),s=[];if(e.length>0){for(let t=0;t<e.length;t++){const s=e[t];for(let i=0;i<ce.length-1;i++)s>=ce[i]&&s<ce[i+1]&&(e[t]=ce[i])}if(e.length>2&&"-"===e[1]){let t=e[0];const i=e[2];do{s.push(t),t=t>=ce[0]&&t<=ce[ce.length-1]?ce[ce.indexOf(t)+1]:String.fromCharCode(t.charCodeAt(0)+1)}while(t<=i)}else for(let t=0;t<e.length;t++)s.push(e[t])}return s.length>0?s:null}$_buildGroups(t){const e=t.split(",").map((t=>this.$_extractChars(t))).filter((t=>!!t));return e.length>0?e:null}}var Wa,za;Ha.LENGTH="85%",Ha.MIN_WIDTH=20,Ha.LETTER_GAP=2,function(t){t.FIRST="first",t.PREV="prev",t.NEXT="next",t.LAST="last"}(Wa||(Wa={}));class Ga extends f{constructor(t,e,s,i){super(),this._disabled=!1,this._owner=t,this._action=e,this._label=s,this._defs=i}owner(){return this._owner}action(){return this._action}label(){return this._label}className(){return ie(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}disabledClass(){return ie(this._disabledClass,this._defs&&this._defs._disabledClass)}setDisabledClass(t){t!==this._disabledClass&&(this._disabledClass=t,this._changed())}hint(){return ie(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}disabled(){return this._disabled}$_setDisabled(t){t!==this._disabled&&(this._disabled=t,this._changed())}run(){const t=this._owner.owner().pageModel();switch(this._action){case Wa.FIRST:t.setPage(0);break;case Wa.PREV:t.incPage(-1);break;case Wa.NEXT:t.incPage(1);break;case Wa.LAST:t.setPage(t.pageCount()-1)}}_changed(){var t;null===(t=this._owner)||void 0===t||t._itemChanged(this)}}class Ua extends f{constructor(t,e){super(),this._owner=t,this._defs=e}className(){return ie(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}_changed(){var t;null===(t=this._owner)||void 0===t||t._itemChanged(this)}}class ja extends fr{constructor(t,e,s){super(t,s),this._owner=e,this._first=new Ga(this,Wa.FIRST,"<<",s&&s._first),this._prev=new Ga(this,Wa.PREV,"<",s&&s._prev),this._next=new Ga(this,Wa.NEXT,">",s&&s._next),this._last=new Ga(this,Wa.LAST,">>",s&&s._last),this._page=new Ua(this,s&&s._page),this._total=new Ua(this,s&&s._total)}_doInitDefaults(){super._doInitDefaults(),this._width=60,this._height=60,this._itemGap=10,this._buttonSize=36}owner(){return this._owner}first(){return this._first}prev(){return this._prev}next(){return this._next}last(){return this._last}width(){return ie(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return ie(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._changed())}itemGap(){return ie(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){t!==this._itemGap&&(this._itemGap=t,this._changed())}itemGap2(){return ie(this._itemGap2,this._defs&&this._defs._itemGap2)}setItemGap2(t){t!==this._itemGap2&&(this._itemGap2=t,this._changed())}buttonSize(){return ie(this._buttonSize,this._defs&&this._defs._buttonSize)}setButtonSize(t){(t=ne(t))!==this._buttonSize&&(this._buttonSize=t,this._changed())}_doPrepareRender(){const t=this._owner.pageModel(),e=t.page(),s=t.pageCount();this._first.$_setDisabled(0===e),this._prev.$_setDisabled(this._first.disabled()),this._last.$_setDisabled(e>=s-1),this._next.$_setDisabled(this._last.disabled())}_itemChanged(t){this._changed()}}class qa extends f{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,!e&&this._doInitDefaults()}_doInitDefaults(){}className(){return ie(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}hint(){return ie(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t)}_changed(){var t;null===(t=this._owner)||void 0===t||t._indexChanged(this)}}class Ya extends qa{_doInitDefaults(){super._doInitDefaults(),this._visible=!0}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}}!function(t){t.NEAR="near",t.FAR="far"}(za||(za={}));class Qa extends cr{constructor(t,e){super(t,e),this._first=new Ya(this,e&&e._first),this._last=new Ya(this,e&&e._last),this._index=new qa(this,e&&e._index),this._current=new qa(this,e&&e._current)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=za.FAR,this._itemGap=7,this._autoScroll=!0,this._width=50,this._height=50}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed("position"))}itemGap(){return ie(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){(t=c.toNumber(t,0))!==this._itemGap&&(this._itemGap=t,this._changed("itemGap"))}autoScroll(){return this._autoScroll}setAutoScroll(t){this._autoScroll=t}first(){return this._first}last(){return this._last}index(){return this._index}current(){return this._current}width(){return ie(this._width,this._defs&&this._defs._width)}setWidth(t){(t=ne(t))!==this._width&&(this._width=t,this._changed())}height(){return ie(this._height,this._defs&&this._defs._height)}setHeight(t){(t=ne(t))!==this._height&&(this._height=t,this._changed())}_doPrepareRender(){}_indexChanged(t){this._changed()}}class Za extends cr{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._floating=!0,this._barWidth=Za.BAR_WIDTH,this._thumbWidth=Za.THUMB_WIDTH,this._minThumbLength=Za.MIN_THUMB_LENGTH}floating(){return ie(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}barWidth(){return ie(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){t=oe(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._barWidth&&(this._barWidth=t,this._changed())}thumbWidth(){return ie(this._thumbWidth,this._defs&&this._defs._thumbWidth)}setThumbWidth(t){t=oe(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._thumbWidth&&(this._thumbWidth=t,this._changed())}minThumbLength(){return ie(this._minThumbLength,this._defs&&this._defs._minThumbLength)}setMinThumbLength(t){t=oe(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._minThumbLength&&(this._minThumbLength=t,this._changed())}_doPrepareRender(){}}Za.BAR_WIDTH=6,Za.THUMB_WIDTH=4,Za.PIXELS_PER_ROW=1,Za.MIN_THUMB_LENGTH=30;class Xa extends cr{_doInitDefaults(){super._doInitDefaults(),this._showHandle=!0}showHandle(){return ie(this._showHandle,this._defs&&this._defs._showHandle)}setShowHandle(t){t!==this._showHandle&&(this._showHandle=t,this._changed())}_doPrepareRender(){}}class Ka extends p{constructor(t,e,s){super(),this._group=t instanceof Je?t:null,this._data=t instanceof Je?t.data():t,this._start=Math.min(e,s),this._end=Math.max(e,s)}_doDestory(){this._group=null}get start(){return this._start}get end(){return this._end}resize(t,e){return t>=0&&(t=Math.min(t,this.$_getMax()))!==this._end?(this._end=t,!0):e>=0&&(e=Math.min(e,this.$_getMax()))!==this._start?(this._start=e,!0):(this._start=Math.min(this._start,this._end),this._end=Math.max(this._start,this._end),!1)}contains(t){return t>=this.start&&t<=this.end}isRowSelected(t){if(this._group){const e=this._group.itemOfRow(t,!1);return e&&this.contains(e.index)}return this.contains(t)}getSelectedRows(){if(this._group){const t=[];for(let e=this.start,s=this.end;e<=s;e++){const s=this._group.getItem(e);s instanceof Qe&&t.push(s.row())}return t}return c.makeIntArray(this.start,this.end+1)}getSelectedItems(){return c.makeIntArray(this.start,this.end+1)}reset(){if(this._start>=this._data.rowCount())return!1;this._end=Math.min(this._end,this._data.rowCount()-1)}$_getMax(){return this._group?this._group.itemCount()-1:this._data.rowCount()-1}}class Ja{constructor(){this.template=void 0,this.indent=void 0,this.rowBar=void 0,this.editBar=void 0,this.style=void 0}assign(t){return c.assignProps(this,t)}copy(){return Object.assign({},this)}}class tl extends f{constructor(t,e){super(),this._infos={},this._owner=t,this._defs=e||void 0}master(){const t=this._master||this._defs&&this._defs._master;return t&&t.copy()}setMaster(t){t!==this._master&&(t?(this._master||(this._master=new Ja),this._master.assign(t)):this._master=void 0,this._owner.invalidateLayout())}prepareRender(){this.dv=this._owner.data()}getInfo(t){const e=this._infos[t];return e&&e.copy()}setInfo(t,e,s){const i=this._infos[t]||new Ja,r=i.assign(e);return this._infos[t]=i,s&&r&&this._owner.invalidateLayout(),r}setInfos(t){let e=!1;for(const s in t)this.setInfo(s,t[s],!1)&&(e=!0);e&&this._owner.invalidateLayout()}getRowTemplate(t){const e=this._infos[t];return ie(e&&e.template,this._defs&&this._defs.getRowTemplate(t))}getIndent(t){const e=this._infos[t];return ie(e&&e.indent,this._defs&&this._defs.getIndent(t))}getRowBar(t){const e=this._infos[t];return ie(e&&e.rowBar,this._defs&&this._defs.getRowBar(t))}getEditBar(t){const e=this._infos[t];return ie(e&&e.editBar,this._defs&&this._defs.getEditBar(t))}getStyle(t){const e=this._infos[t];return ie(e&&e.style,this._defs&&this._defs.getStyle(t))}}class el extends Vh{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!0)}caption(){return ie(this._model&&this._model.caption,super.caption())}style(){return ie(this._model&&this._model.style,super.style())}showCheck(){return ie(this._model&&this._model.showCheck,super.showCheck())}autoCheck(){return ie(this._model&&this._model.autoCheck,super.autoCheck())}setModel(t){this._model=t||void 0}_getParamArgs(){return super._getParamArgs()}}const sl=function(t){const e={template:{layout:"vlinear",itemsAlign:"left",children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e},il=function(t){const e={template:{layout:"form",labelStyle:{fontWeight:"bold",textAlign:"right"},children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e};class rl extends Me{constructor(t,e){super(t,e),this._allFields=!0,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0,value:void 0},this._header=this._createHeader(t,e)}_doInitDefaults(){this._effectDuration=.2,this._showDirection=Te.UP,this._hideDirection=Te.DEFAULT}inflateParam(t,e,s){const i=this.templateParams2();if(i){const t=i[s.name];if("function"==typeof t){const s=this._args;return s.control=this.owner().wrapperOrThis(),s.row=this._row,s.field=e,s.values=this._rowValues,s.value=this._rowValues[e],t(s)}if(void 0!==t)return t}}inflateStock(t,e,s){}data(){return this._dv}row(){return this._row}header(){return this._header}fitSize(){return ie(this._fitSize,this._defs&&this._defs._fitSize)}setFitSize(t){this._fitSize=t}style(){return ie(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}effectDuration(){return ie(this._effectDuration,this._defs&&this._defs._effectDuration)}setEffectDuration(t){this._effectDuration=t}template(){return re(this._model&&this._model.template,this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}showDirection(){return ie(this._showDirection,this._defs&&this._defs._showDirection)}setShowDirection(t){this._showDirection=t}hideDirection(){return ie(this._hideDirection,this._defs&&this._defs._hideDirection)}setHideDirection(t){this._hideDirection=t}allFields(){return re(this._model&&this._model.allFields,this._allFields,this._defs&&this._defs._allFields)}setAllFields(t){this._allFields=t}fields(){return re(this._model&&this._model.fields,this._fields,this._defs&&this._defs._fields)}setFields(t){this._fields=Object.assign({},t)}templateVars(){return re(this._model&&this._model.templateVars,this._templateVars,this._defs&&this._defs._templateVars)}setTemplateVars(t){this._templateVars=t}templateParams2(){return re(this._model&&this._model.templateParams,this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}setModel(t,e,s){this._model=t||void 0,this._header.setModel(t&&t.header),this._dv=e,this._row=s}getLayout(){const t=this.owner().getTemplate(this.template())||this._getDefaultTemplate(this._dv,this.templateVars(),this._row);return this._rowInflater=this.owner().getRowInflater(this._row),this._rowValues=this._getRowValues(),{layout:or.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:t.rowStyle,rowProps:t.rowProps}}getShowDirection(){let t=this.showDirection();return t===Te.RANDOM&&(t=this.$_getRandomDir()),t}getHideDirection(t){let e=this.hideDirection();if(e===Te.RANDOM)e=this.$_getRandomDir();else if(e===Te.DEFAULT)switch(t){case Te.LEFT:e=Te.RIGHT;break;case Te.RIGHT:e=Te.LEFT;break;case Te.DOWN:e=Te.UP;break;default:e=Te.DOWN}return e}$_getRandomDir(){for(;;){const t=c.erandom(Te);if(t!==Te.RANDOM&&t!==Te.DOWN)return t}}_getLabelRenderer(t){return"text"}_getDefRenderer(t){return"text"}_prepareFields(t){const e={},s=this.fields()||{},i=[],r=this.allFields();return t.fields().forEach((t=>{const n=s[t.name]||e;(r||n!==e)&&i.push({field:t.name,label:ie(n.label,t.displayText()),unit:n.unit,default:n.default,required:n.required,renderer:ie(n.renderer,this._getDefRenderer(t)),style:n.style,labelRenderer:this._getLabelRenderer(t),validator:n.validator})})),i}_isImageRenderer(t){if(t){return"image"===("string"==typeof t?t:t.type)}}_extendStyle(t,e,s){const i=e.style;if("string"==typeof i&&s&&s[i.substring(2)]){const e=s[i.substring(2)];e&&Object.assign(t,e)}else c.isObject(i)&&Object.assign(t,i);return t}}class nl extends el{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",label:"〈",position:_h.HEAD,style:{fontSize:"20px",fontWeight:"bold"},onClick:t=>(t.control.closeEditPage(),!0)},{name:"cancel",label:"취소",onClick:t=>(t.control.closeEditPage(!1),!0)},{name:"commit",label:"완료",onClick:t=>(t.control.closeEditPage(!0),!0)}])}}var ol;!function(t){t.DEFAULT="default",t.FORM="form",t.A="A"}(ol||(ol={}));const hl={width:"100%",height:20,renderer:"line"},al=function(t){const e={layout:"hlinear",width:"100%",itemsArrange:"end",style:{paddingRight:"10px",paddingTop:"10px"},children:[{renderer:{type:"button",label:"취소",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!1)},style:{}}},{renderer:{type:"button",label:"완료",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!0)},style:{}}}]};return t&&t(e),e};class ll extends rl{_getDefEditor(t){switch(t.type){case Br.NUMBER:return"number";case Br.DATE:return"datetime";case Br.BOOL:return"switch";default:return"text"}}constructor(t,e){super(t,e),this._defaultTemplate=(t,e,s)=>{const i=sl(),r=i.template.children;return t.fields().forEach((t=>{const e=[{value:t.displayText()}];t.required&&e.push({value:"*",style:{color:"#a00",fontSize:"20px"}}),r.push({layout:"hlinear",children:e}),r.push({id:t.name,left:20,right:10,field:t.name,editor:this._getDefEditor(t)}),r.push({space:10})})),r.push(hl,al()),i.vars=e,new us(null,i,void 0)},this._formTemplate=(t,e,s)=>{const i=il(),r=i.template.children;return t.fields().forEach((t=>{r.push({id:t.name,label:t.displayText(),field:t.name,editor:this._getDefEditor(t)})})),r.push(hl,al((t=>t.style.paddingRight="0px"))),i.vars=e,new us(null,i,void 0)},this._ATemplate=(t,e,s)=>{},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate}}_doInitDefaults(){super._doInitDefaults(),this._viewType=ol.DEFAULT}viewType(){return ie(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}valueChanged(t,e,s,i){const r=this.owner().onEditFieldChange;r&&r({ctx:t,row:this._row,field:e,newValue:s,oldValue:i})}commit(t,e){const s=this.owner().onEditCommit;if(s){const i={ctx:t,row:this._row,values:e,cancel:!1,message:void 0};if(s(i),i.cancel){if(i.message)throw i.message;return!1}}return this._row>=0?this.data().updateRow(this._row,e,!1,!1):this.data().appendRow(e),!0}_getRowValues(){return{}}_createHeader(t,e){return new nl(t,e&&e.header())}_getDefaultTemplate(t,e,s){return(this._templates[this.viewType()]||this._defaultTemplate)(t,e,s)}}var dl,_l,cl;!function(t){t.SLIDE="slide",t.FLIP="flip"}(dl||(dl={}));class ul extends Lo{_doInitDefaults(){super._doInitDefaults(),this.setDuration(1e4),this.setChangeDuration(500),this._changeEffect=dl.SLIDE}changeEffect(){return ie(this._changeEffect,this._defs&&this._defs._changeEffect)}setChangeEffect(t){this._changeEffect=t}}class gl extends Me{constructor(t,e){super(t,e),this._autoScroll=new ul(t,e&&e._autoScroll)}_doInitDefaults(){this._visible=!1,this._maskEffect=!0,this._showPrev=!1,this._showNext=!1,this._rowChangeDir=Ee.DEFAULT,this._rowBorderVisible=!1}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}maskEffect(){return ie(this._maskEffect,this._defs&&this._defs._maskEffect)}setMaskEffect(t){this._maskEffect=t}showPrev(){return ie(this._showPrev,this._defs&&this._defs._showPrev)}setShowPrev(t){t!==this._showPrev&&(this._showPrev=t,this._changed())}showNext(){return ie(this._showNext,this._defs&&this._defs._showNext)}setShowNext(t){t!==this._showNext&&(this._showNext=t,this._changed())}rowChangeDir(){return ie(this._rowChangeDir,this._defs&&this._defs._rowChangeDir)}setRowChangeDir(t){(t=t||Ee.DEFAULT)!==this._rowChangeDir&&(this._rowChangeDir=t,this._changed())}rowNavigator(){return ie(this._rowNavigator,this._defs&&this._defs._rowNavigator)}setRowNavigator(t){t!==this._rowNavigator&&(this._rowNavigator=t,this._changed())}rowBorderVisible(){return ie(this._rowBorderVisible,this._defs&&this._defs._rowBorderVisible)}setRowBorderVisible(t){t!==this._rowBorderVisible&&(this._rowBorderVisible=t,this._changed())}fillHeight(){return ie(this._fillHeight,this._defs&&this._defs._fillHeight)}setFillHeight(t){t!==this._fillHeight&&(this._fillHeight=t,this._changed())}autoScroll(){return this._autoScroll}}class pl extends Ch{constructor(){super(...arguments),this._menu={items:[{id:"case",type:ea.CHECK,label:"대소문자 구분",onShow:(t,e,s)=>{s.checked=this._options.matchCase},onClick:(t,e,s)=>(this._options.matchCase=s.checked,!0)},{id:"whole",type:ea.CHECK,label:"전체 단어 일치",onShow:(t,e,s)=>{s.checked=this._options.matchWholeWord},onClick:(t,e,s)=>(this._options.matchWholeWord=s.checked,!0)},{id:"regExp",type:ea.CHECK,label:"정규식 사용",onShow:(t,e,s)=>{s.checked=this._options.useRegExp},onClick:(t,e,s)=>(this._options.useRegExp=s.checked,!0)}],onShow:(t,e)=>{}},this._options={matchCase:!1,matchWholeWord:!1,useRegExp:!1}}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=Le.AFTER,this._resetVisible=!0,this._optionsVisible=!0}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}resetVisible(){return ie(this._resetVisible,this._defs&&this._defs._resetVisible)}setResetVisible(t){this._resetVisible=t}optionsVisible(){return ie(this._optionsVisible,this._defs&&this._defs._optionsVisible)}setOptionsVisible(t){this._optionsVisible=t}alwaysResult(){return this._alwaysResult}setAlwaysResult(t){this._alwaysResult=t}search(t){this.owner().search(this._options,t)}clickMenu(){this.owner().toggleMenu(this._menu,!0)}canShowResult(t){return this.visible()&&t&&(!t.isEmpty()||this.alwaysResult())}_doPrepareRender(){}}pl.TYPE="search",function(t){t.BEFORE="before",t.AFTER="after",t.REPLACE="replace",t.TOP="top"}(_l||(_l={}));class fl extends Ch{_doInitDefaults(){super._doInitDefaults(),this._position=_l.BEFORE,this._clearWhenClose=!0}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}clearWhenClose(){return ie(this._clearWhenClose,this._defs&&this._defs._clearWhenClose)}setClearWhenClose(t){this._clearWhenClose=t}_doPrepareRender(){}}fl.TYPE="searchresult";class wl extends Ch{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1)}fields(){const t=ie(this._fields,this._defs&&this._defs._fields);return Array.isArray(t)?t.slice(0):t||null}setFields(t){t!==this._fields&&(this._fields=Array.isArray(t)?t.slice(0):t||null,this._changed())}getFields(){const t=this.data(),e=this.fields();if("template"===e){return(this._owner.getDefaultRowTemplate().getFields()||[]).map((e=>t.fieldByName(e))).filter((t=>!!t))}return"sortables"===e?t.fields().filter((t=>t.sortable)):Array.isArray(e)?e.map((e=>t.fieldByName(e))).filter((t=>!!t)):t.fields()}getSort(t){return this.data().isSorted(t)}sortField(t){const e=this.data();e instanceof yh&&e.toggleSort(t,!0)}}class ml extends Me{constructor(t,e){super(t,e),this._args={context:this.wrapperOrThis(),control:void 0},this._inflater=new vh(t)}_doInitDefaults(){this._visible=!1,this._endSpace=0,this._indicatorVisible=!0,this._indicatorType=hi.DEFAULT,this._indicatorSize=28,this._indicatorMargin=2}inflateParam(t,e,s){const i=s.name;if(this.templateParams){const t=this.templateParams[i];if(void 0!==t)return t}const r=this.layoutParams();if(r){const t=r[i];return"function"==typeof t?(this._args.control=this.owner().wrapperOrThis(),t(this._args)):t}}inflateStock(t,e,s){return this._inflater.inflateStock(s)}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}endSpace(){return he(this._endSpace,this._defs&&this._defs._endSpace,0)}setEndSpace(t){t!==this._endSpace&&(this._endSpace=t,this._changed())}rowTemplate(){return ie(this._rowTemplate,this._defs&&this._defs._rowTemplate)}setRowTemplate(t){t!==this._rowTemplate&&(this._rowTemplate=t,this._changed())}indicatorVisible(){return ie(this._indicatorVisible,this._defs&&this._defs._indicatorVisible)}setIndicatorVisible(t){t!==this._indicatorVisible&&(this._indicatorVisible=t,this._changed())}indicatorType(){return ie(this._indicatorType,this._defs&&this._defs._indicatorType)}setIndicatorType(t){t!==this._indicatorType&&(this._indicatorType=t,this._changed())}indicatorSize(){return he(this._indicatorSize,this._defs&&this._defs._indicatorSize,24)}setIndicatorSize(t){t!==this._indicatorSize&&(this._indicatorSize=t,this._changed())}indicatorMargin(){return he(this._indicatorMargin,this._defs&&this._defs._indicatorMargin,0)}setIndicatorMargin(t){t!==this._indicatorMargin&&(this._indicatorMargin=t,this._changed())}layoutParams(){return ie(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?c.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){const t=this.rowTemplate();if(t){const e=this.owner().getTemplate(t);return{layout:or.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,e,this),rowStyle:e.rowStyle}}}}class yl extends el{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",position:_h.HEAD,shape:"@prev",shapeWidth:16,style:{fill:"blue"},onClick:t=>(t.control.closeInfoPage(),!0)},{name:"close",label:"닫기",onClick:t=>(t.control.closeInfoPage(),!0)}])}}!function(t){t.DEFAULT="default",t.FORM="form"}(cl||(cl={}));const bl={height:10,width:"100%",renderer:"line"},vl={right:5,style:{paddingTop:"5px"},renderer:{type:"button",label:"닫기",buttonWidth:80,onClick:t=>{t.control.closeInfoPage()},style:{}}},Cl={right:5,renderer:{type:"button",label:"닫기",onClick:t=>{t.control.closeInfoPage()},style:{fontSize:"17px",border:"none",backgroundColor:"transparent",color:"#0088ff",padding:"7px 0px"}}};class Sl extends rl{constructor(){super(...arguments),this._defaultTemplate=(t,e,s)=>{const i=sl(),r=i.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach((t=>{r.push({value:t.label,renderer:t.labelRenderer,style:{fontSize:"0.8em",fontWeight:"bold"}}),r.push({field:t.field,left:20,right:5,renderer:t.renderer||n,style:{color:"#555"}}),r.push({space:10})})),r.push({space:20}),r.push(bl),r.push(Cl),i.vars=e,new us(null,i,void 0)},this._formTemplate=(t,e,s)=>{const i=il(),r=i.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach((t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})})),r.push(bl),r.push(Cl),i.vars=e,new us(null,i,void 0)},this._ATemplate=(t,e,s)=>{const i=sl((t=>{t.rowStyle.backgroundColor="#e8e8ea"})),r=i.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach((t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"0.8em"}}),r.push({field:t.field,left:10,right:5,renderer:t.renderer||n}),r.push({space:10})})),r.push(bl),r.push(vl),i.vars=e,new us(null,i,void 0)},this._BTemplate=(t,e,s)=>{const i=sl((t=>{t.rowStyle.backgroundColor="#e8e8ea"})),r=i.template.children,n={wrap:!0};return t.forEach((t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"16px"}}),r.push({field:t.field,left:10,right:this._isImageRenderer(t.renderer)?void 0:5,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"},renderer:t.renderer||n}),r.push({space:10})})),r.push(bl),r.push(vl),i.vars=e,new us(null,i,void 0)},this._CTemplate=(t,e,s)=>{},this._FTemplate=(t,e,s)=>{const i=il((t=>{t.rowStyle.backgroundColor="#e8e8ea"})),r=i.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach((t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})})),r.push(bl),r.push(vl),i.vars=e,new us(null,i,void 0)},this._GTemplate=(t,e,s)=>{const i=il((t=>{t.rowStyle.backgroundColor="#e8e8ea"})),r=i.template.children,n={wrap:!0};return t.forEach((t=>{const s=t.renderer||n,i=this._isImageRenderer(s)?{}:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"},o=[{grow:1,field:t.field,style:this._extendStyle(i,t,e),renderer:s}];t.unit&&o.push({bottom:1,value:t.unit}),r.push({layout:"hlinear",itemGap:6,label:t.label,children:o})})),r.push(bl),r.push(vl),i.vars=e,new us(null,i,void 0)},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate,B:this._BTemplate,C:this._CTemplate,F:this._FTemplate,G:this._GTemplate}}_getDefRenderer(t){}_doInitDefaults(){super._doInitDefaults(),this._viewType=cl.DEFAULT,this._rowChangeable=!1}viewType(){return ie(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}rowChangeable(){return ie(this._rowChangeable,this._defs&&this._defs._rowChangeable)}setRowChangeable(t){this._rowChangeable=t}_getRowValues(){return this.data().internalRowValues(this._row)}inflateParam(t,e,s){const i=super.inflateParam(t,e,s);return void 0!==i?i:(s.name,this._rowInflater.inflateParam(t,e,s))}inflateStock(t,e,s){const i=super.inflateStock(t,e,s);return void 0!==i?i:(s.name,this._rowInflater.inflateStock(t,e,s))}_createHeader(t,e){return new yl(t,e&&e.header())}_getDefaultTemplate(t,e,s){const i=this._prepareFields(t);return(this._templates[this.viewType()]||this._defaultTemplate)(i,e,s)}}class Rl extends p{static createTheme(t,e){return t===Vl.TYPE?new Vl(e):new xl(e)}constructor(t){super(),this._options=t}bodyIndented(){return this._bodyMode}getGroupIndent(t){if(this._bodyMode)return 0;switch(this._options.rowIndents()){case Ne.PARENT:return(t.levels()-2)*this._indent;case Ne.INNER:return(t.levels()-2)*this._indent+this._indent;default:return 0}}getBodyIndent(t){if(this._bodyMode)switch(this._options.rowIndents()){case Ne.PARENT:return(t.group.level()-1)*this._indent;case Ne.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}else if(t instanceof Rs)return 0}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(t instanceof Rs)switch(this._options.rowIndents()){case Ne.PARENT:return(t.group.level()-1)*this._indent;case Ne.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}}prepareRender(){return this._bodyMode=this.indentsMode()===De.BODY,this._indent=this._options.indent(),this._endMargin=this._options.endMargin(),this}}let xl=class t extends Rl{type(){return t.TYPE}indentsMode(){return De.ROW}};xl.TYPE="default";let Vl=class t extends Rl{type(){return t.TYPE}indentsMode(){return De.BODY}getBodyMargin(t){return t.isLeaf()?this._endMargin:0}};Vl.TYPE="classic";class El extends p{static createTheme(t,e){return t===Al.TYPE?new Al(e):new $l(e)}constructor(t){super(),this._options=t}bodyIndented(){return this._bodyMode}getGroupIndent(t){if(this._bodyMode)return 0;switch(this._options.rowIndents()){case Ne.PARENT:return(t.levels()-2)*this._indent;case Ne.INNER:return(t.levels()-2)*this._indent+this._indent;default:return 0}}getBodyIndent(t){if(!this._bodyMode)return 0;if(!(t instanceof Qe))return t.group.level()*this._gindent;switch(this._options.rowIndents()){case Ne.PARENT:return t.group.level()*this._gindent;case Ne.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(t instanceof Qe)switch(this._options.rowIndents()){case Ne.PARENT:return t.group.level()*this._gindent;case Ne.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}else if(t)return t.group.level()*this._gindent}prepareRender(){return this._bodyMode=this.indentsMode()===De.BODY,this._indent=this._options.indent(),this._gindent=this._options.groupIndent(),this._endMargin=this._options.endMargin(),this}}class $l extends El{type(){return $l.TYPE}indentsMode(){return De.ROW}}$l.TYPE="default";class Al extends El{type(){return Al.TYPE}indentsMode(){return De.BODY}getBodyIndent(t){return this._bodyMode&&t instanceof Ke?(t.group.level()+1)*this._gindent:super.getBodyIndent(t)}getBodyMargin(t){return this._endMargin}}Al.TYPE="classic";class Ll extends Me{_doInitDefaults(){this._rowIndents=Ne.INNER,this._indent=Ll.INDENT,this._endMargin=Tl.END_MARGIN}theme(){return ie(this._theme,this._defs&&this._defs._theme)}setTheme(t){this._theme=t}rowIndents(){return ie(this._rowIndents,this._defs&&this._defs._rowIndents)}setRowIndents(t){this._rowIndents=t}indent(){return ie(this._indent,this._defs&&this._defs._indent)}setIndent(t){this._indent=t}endMargin(){return ie(this._endMargin,this._defs&&this._defs._endMargin)}setEndMargin(t){this._endMargin=t}}Ll.INDENT=12;class Tl extends Ll{constructor(t,e,s){super(t,s),this._header=new ts(e,s&&s._header),this._footer=new es(e,s&&s._footer),this._expander=new yn(e,s&&s._expander)}_doInitDefaults(){super._doInitDefaults(),this._groupIndent=Tl.GROUP_INDENT}header(){return this._header}footer(){return this._footer}expander(){return this._expander}groupIndent(){return ie(this._groupIndent,this._defs&&this._defs._groupIndent)}setGroupIndent(t){this._groupIndent=t}getTheme(){const t=this.theme();return this._themeImpl?t!==this._themeImpl.type()&&(this._themeImpl=El.createTheme(t,this)):this._themeImpl=El.createTheme(t,this),this._themeImpl}}Tl.GROUP_INDENT=12,Tl.END_MARGIN=4;class kl extends Ll{constructor(t,e,s){super(t,s),this._expander=new yn(e,s&&s._expander)}_doInitDefaults(){super._doInitDefaults()}expander(){return this._expander}groupLevel(){return ie(this._groupLevel,this._defs&&this._defs._groupLevel)}setGroupLevel(t){this._groupLevel=t}addMasterHeader(){return this._addMasterHeader}addMasterFooter(){return this._addMasterFooter}addEmptyMasterHeader(){return this._addEmptyMasterHeader}addEmptyMasterFooter(){return this._addEmptyMasterFooter}addDetailHeader(){return this._addDetailHeader}addDetailFooter(){return this._addDetailFooter}addSingleDetailHeader(){return this._addSingleDetailHeader}addSingleDetailFooter(){return this._addSingleDetailFooter}getTheme(){const t=this.theme();return this._themeImpl?t!==this._themeImpl.type()&&(this._themeImpl=Rl.createTheme(t,this)):this._themeImpl=Rl.createTheme(t,this),this._themeImpl}}class Dl{constructor(t,e,s){this.master=t,this.dv=e,this.dataRow=s}id(){return this.dataRow.id}values(){return this.dataRow.values}level(){return this.master?this.master.level()+1:0}detailCount(){return this.details?this.details.length:0}getDescendants(){const t=[];return function e(s){const i=s.details;if(i)for(let s=0,r=i.length;s<r;s++)t.push(i[s]),e(i[s])}(this),t}}class Nl extends p{constructor(t,e,s){if(super(),!(t instanceof sn))throw new Error("데이터객체가 지정돼야 합니다.");if(t instanceof Il)throw new Error("데이터링크는 다른 데이터링크의 데이터로 지정될 수 없습니다.");if(s.indexOf(t)>=0)throw new qr(t,"A data is already linked: "+t.name());s.push(this.data=t)}_initDetails(t,e,s){if(t){const i=c.makeArray(t);i.length>0&&(this.details=i.map((t=>new Pl(this,t,e,s))))}}level(){return this.parent.level()+1}detailCount(){return this.details?this.details.length:0}}class Pl extends Nl{$_setParentLevel(t){this.parent instanceof Ml?this.parent._levels=Math.max(this.parent._levels,t):this.parent instanceof Pl&&this.parent.$_setParentLevel(t)}constructor(t,e,s,i){if(super(e.data,e.details,s),i[e.data.hash]=this,this.parent=t,this.$_setParentLevel(this.level()+1),this.keyFields=nh(e.data,e.keyFields),Array.isArray(e.masterFields)&&e.masterFields.length>0?this.masterFields=nh(t.data,e.masterFields):this.masterFields=nh(t.data,e.keyFields),this.keyFields.length!==this.masterFields.length)throw new Error("key fields와 master fields의 개수가 동일해야 합니다.");this._initDetails(e.details,s,i)}_doDestory(){this.data=null,this.details&&(this.details.forEach((t=>t.destroy())),this.details=null)}findData(t){if(this.data.name()===t)return this.data;if(this.details)for(let e of this.details){const s=e.findData(t);if(s)return s}}}class Ml extends Nl{constructor(t,e,s,i){super(t,e,s),this._levels=1,i[t.hash]=this,this._initDetails(e,s,i)}_doDestory(){this.data=null,this.details.forEach((t=>t.destroy())),this.details=null}findData(t){if(t===this.data.name())return this.data;if(this.details)for(let e of this.details){const s=e.findData(t);if(s)return s}}level(){return 0}}class Il extends sn{constructor(t,e,s,i){super(t),this._wrapper=i,this._info=new Ml(e,s,this._dvs=[],this._infoMap={}),this._dvMap={},this._dvs.forEach((t=>{this._dvMap[t.name()]=t,t.addListener(this)})),this._root=this._info.data,this._rows=this.$_buildRows()}_doDestory(){this._dvs.forEach((t=>t.removeListener(this))),this._dvs=this._root=this._info=null}source(){return this._root.source()}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._root.readOnly()}fields(){return this._root.fields()}fieldByName(t){return this._root.fieldByName(t)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}getSource(t){return this._rows[t].dv}getSourceRow(t){const e=this._rows[t].dv;return t=e.rowOfDataRow(this._rows[t].dataRow),{dv:e,row:t}}canSort(){return this._root.canSort()}canMove(){return!1}rowById(t){const e=this._rows;for(let s=e.length-1;s>=0;s--)if(e[s].id()===t)return s;return-1}internalRowId(t){return this._rows[t].id()}getRowId(t){const e=this._rows[t];return e?e.id():void 0}levelRowOfRow(t){return this._rows[t]||x.debugging(),this._rows[t].no}getRowValues(t){ah.checkRow(this,t);const e=this._rows[t];return e&&Object.assign({},e.dataRow.values)}getValues(t,e,s){if(Array.isArray(e)){sn.checkRow(this,t);const i={},r=this._rows[t];if(r){const t=r.values(),n=r.dv.source();e.forEach((e=>{s&&n.checkField(e),i[e]=t[e]}))}return i}return this.getRowValues(t)}getAllValues(t){if(Array.isArray(t)){sn.checkRows(this,t);const e=this._rows;return t.map((t=>{const s=e[t];if(s){const t=s.values();return Object.assign({},t)}return{}}))}if(null==t)return this._rows.map((t=>Object.assign({},t.values())))}internalRowValues(t){return Object.assign({},this._rows[t].dataRow.values)}internalRowsValues(t){const e=this._rows;return t.map((t=>Object.assign({},e[t].dataRow.values)))}getValue(t,e,s){sn.checkRow(this,t);const i=this._rows[t],r=i.dv;return s&&r.checkField(e),i.dataRow.values[e]}getProp(t,e,s,i){sn.checkRow(this,t);const r=this._rows[t],n=r.dv;return i&&n.checkField(e),r.dataRow.getProp(e,s)}getFieldValues(t,e,s){}getSummary(t){return this._root.getSummary(t)}getGroupSummary(t,e,s){return this._root.getGroupSummary(t,e,s)}updateValue(t,e,s){return this._rows[t].dv.updateValue(-1,e,s)}findRow(t,e=0,s=-1){return this._root.findRow(t,e,s)}findRows(t,e=0,s=-1){return this._root.findRows(t,e,s)}findDistinctRows(t,e,s){return this._root.findDistinctRows(t,e,s)}deleteRow(t,e){ah.checkRow(this,t);const s=this._rows[t],i=s.dv;i.deleteRow(i.rowOfDataRow(s.dataRow),e)}deleteRows(t,e){if(Array.isArray(t)&&t.length>0){t.forEach((t=>sn.checkRow(this,t)));const s=this.$_getRowsMap(t);for(const i in s){const r=this._dvMap[i];r&&(t=s[i].map((t=>r.rowOfDataRow(t))),r.deleteRows(t,e))}}}updateRow(t,e,s,i){ah.checkRow(this,t);const r=this._rows[t],n=r.dv,o=n.rowOfDataRow(r.dataRow);return n.updateRow(o,e,s,i)}appendRow(t){return this._root.appendRow(t)}getRowState(t){return ah.checkRow(this,t),this.internalRowState(t)}internalRowState(t){return this._rows[t].dataRow.state}$_getRowsMap(t){const e={};return t.forEach((t=>{const s=this._rows[t],i=s.dv.name();e[i]?e[i].push(s.dataRow):e[i]=[s.dataRow]})),e}$_handler(){const t=this._rows.length;this.$_reset(),this._fireEvent("onDataReset"),this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}onDataValueUpdated(t,e,s,i,r){this.$_handler()}onDataRowUpdated(t,e,s){this.$_handler()}onDataRowsUpdated(t,e){this.$_handler()}onDataRangeUpdated(t,e,s){this.$_handler()}onDataRowAdded(t,e){this.$_handler()}onDataRowsAdded(t,e,s){this.$_handler()}onDataCleared(t,e){this.$_handler()}onDataRowDeleted(t,e,s){const i=this.getRowOfId(s);if(i<0)return;const r=this._rows[i],n=this._rows.length;let o;r.details&&(o=r.getDescendants(),o.unshift(r)),this.$_reset(),this._fireEvent("onDataReset"),o?this._fireEvent("onDataRowsDeleted",o,this.$_getRowIds(o)):this._fireEvent("onDataRowDeleted",i,r.id()),o?this._flags._rowsDeleted(c.sortNum(this.$_getRowIds(o))):this._flags._rowDeleted(i),this._fireEvent("onDataCountChanged",this._rows.length,n),this._fireEvent("onDataChanged")}onDataRowsDeleted(t,e,s){if((e=this.getRowsOfIds(t,s)).length>0){const i=this._rows.length;let r=[];e.forEach((e=>{const i=this._rows[e],n=this.$_getRowIds(i.getDescendants());r.push(e),n.length>0&&(r=r.concat(this.getRowsOfIds(t,n)),s=s.concat(n))})),r=c.dedupe(r),s=c.dedupe(s),this.$_reset(),this._fireEvent("onDataRowsDeleted",r,s),this._fireEvent("onDataReset"),this._flags._rowsDeleted(c.sortNum(r)),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}}onDataRangeDeleted(t,e,s){const i=c.makeIntArray(e,e+s),r=i.map((e=>t.getRowId(e)));this.onDataRowsDeleted(t,i,r)}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}info(){return this._info}root(){return this._root}levels(){return this._info._levels}setDataTags(t,e){for(const t of this._rows)t.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getDataViews(){return this._dvs.slice(0)}getLevel(t){return this._rows[t].level()}getLinkInfo(t){return this._infoMap[t.hash]}getLinkRows(){return this._rows.slice(0)}getRows(){return this._rows.map((t=>t.dataRow))}getDetailCount(t,e){return e?1:this._rows[t].detailCount()}isLeaf(t){return ah.checkRow(this,t),this._rows[t].level()===this._info._levels-1}_internalLeaf(t){return this._rows[t].level()===this._info._levels-1}isLast(t){return t===this._rows.length-1}isMaster(t){return ah.checkRow(this,t),this._rows[t].level()<this._info._levels-1}getRowOf(t,e){for(let s=0,i=this._rows.length;s<i;s++){const i=this._rows[s];if(i.dv===t&&t.getDataRow(e)===i.dataRow)return s}return-1}getRowsOf(t,e){const s=[],i=e.length;for(let r=0,n=this._rows.length;r<n;r++){const n=this._rows[r];if(n.dv===t)for(let o=0;o<i;o++)if(n.dataRow==t.getDataRow(e[o])){s.push(r);break}if(s.length===i)break}return s}getRowOfId(t){for(let e=0,s=this._rows.length;e<s;e++)if(this._rows[e].id()===t)return e;return-1}getRowsOfIds(t,e){const s=[],i=e.length;for(let r=0,n=this._rows.length;r<n;r++){const n=this._rows[r];if(n.dv===t)for(let t=0;t<i;t++)if(n.id()==e[t]){s.push(r);break}if(s.length===i)break}return s}$_collectDetails(t,e,s,i){function r(t,e){const s=[];for(let i=0,r=e.length;i<r;i++)s.push(t.values[e[i]]);return s}function n(t,e){for(let s=0,i=t.length;s<i;s++)if(t[s]!==e[s])return!1;return!0}const o=[];return s.forEach((t=>{const s=t.keyFields.map((t=>t.name)),h=t.masterFields.map((t=>t.name)),a=function(t,e,s,i,h,a){const l=[],d=r(i.dataRow,a);for(let t=0,a=e.rowCount();t<a;t++)if(s[t]&&n(r(e.getDataRow(t),h),d)){const r=new Dl(i,e,s[t]);l.push(r),o.push(r),s[t]=null}return l}(0,t.data,t.drows,e,s,h);a.length>0&&a.forEach((e=>{i.push(e),e.no=t.no++,Array.isArray(t.details)&&(e.details=this.$_collectDetails(t.data,e,t.details,i))}))})),o}$_buildRows(){function t(e){e.drows=e.data.getRows().slice(0),e.no=0,Array.isArray(e.details)&&e.details.forEach((e=>t(e)))}function e(t){delete t.drows,Array.isArray(t.details)&&t.details.forEach((t=>e(t)))}const s=this._info.details,i=this._root,r=i.getRows(),n=[];s&&s.forEach((e=>t(e)));for(let t=0,e=r.length;t<e;t++){const e=new Dl(null,i,r[t]);e.no=t,n.push(e),s&&(e.details=this.$_collectDetails(i,e,s,n))}return s&&s.forEach((t=>e(t))),n}$_reset(){this._rows=this.$_buildRows(),this._fireEvent("onDataReset")}$_getRowIds(t){return t.map((t=>t.id()))}}class Ol extends f{constructor(t,e){super(),this._owner=t,this._defs=e,this._row=new Po(t,e&&e._row),!e&&this._doInitDefaults()}_doInitDefaults(){}owner(){return this._owner}row(){return this._row}load(t){return this.assignProps(t)}_changed(){this._owner.invalidateLayout()}}const Bl=[];var Fl;!function(t){t.AFTER="after",t.BEFORE="before"}(Fl||(Fl={}));class Hl extends Ol{constructor(){super(...arguments),this._drows=[]}_doInitDefaults(){this._visible=!0,this._position=Fl.AFTER}visible(){return ie(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}position(){return ie(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}data(){return ie(this._data,this._defs&&this._defs._data)}setData(t){t!==this._data&&(this._data&&this._data.removeListener(this),this._data=t,this._data&&this._data.addListener(this),this._changed())}rows(){var t;return null===(t=ie(this._rows,this._defs&&this._defs._rows))||void 0===t?void 0:t.slice(0)}setRows(t){t!=this._rows&&(this._rows=t&&t.slice(0),this._changed())}rowCount(){return this._drows===Bl?this._data.rowCount():this._drows.length}prepareRender(t){if(this.visible){let e=this._rows;if(void 0===e&&this._defs&&(e=this._defs._rows),e&&e.length>0){if(this._drows=[],t=this._dv=this._data||t){const s=t.rowCount();e.forEach((t=>{t>=0&&t<s&&this._drows.push(t)}))}}else this._data&&(this._dv=this._data,this._drows=Bl);return this.rowCount()>0}}getRow(t){return this._drows===Bl?t:this._drows[t]}getValue(t,e){return this._dv.getValue(this.getRow(t),e,!0)}}class Wl extends Ol{constructor(t,e,s,i){super(e,s),this._landscape=i,this._rowBar=new En(t,e,s&&s._rowBar),this._editBar=new xn(t,e,s&&s._editBar),this._scrollIndicator=new Ph(t,s&&s._scrollIndicator),this._indexBar=new Ha(t,s&&s._indexBar),this._scrollBar=new Za(t,s&&s._scrollBar),this._pageNavigator=new ja(t,e,s&&s._pageNavigator),this._pageScroller=new Qa(t,s&&s._pageScroller),this._commandBox=new ia(t,s&&s._commandBox),this._selectionMask=new Xa(t,s&&s._selectionMask),this._headRows=new Hl(e,s&&s._headRows),this._header=new Vh(e,s&&s._header),this._footer=new Eh(e,s&&s._footer),this._searchBar=new pl(e,s&&s._searchBar),this._searchResultBar=new fl(e,s&&s._searchResultBar),this._fieldBar=new wl(e,s&&s._fieldBar),this._subheader=new Ma(e,s&&s._subheader),this._rowGroup=new Tl(e,this,s&&s._rowGroup),this._dataGroup=new kl(e,this,s&&s._dataGroup),this._dataRowInfos=new tl(e,s&&s._dataRowInfos),this._infoPage=new Sl(e,s&&s._infoPage),this._editPage=new ll(e,s&&s._editPage),this._addPage=new ll(e,s&&s._addPage),this._singleRow=new gl(e,s&&s._singleRow),this._attachedRow=new ml(e,s&&s._attachedRow),this._formPanel=new sh(t,s&&s._formPanel),this._buttonPanel=new eh(t,s&&s._buttonPanel),this._searchPanel=new ih(t,s&&s._searchPanel),this._filterPanel=new bh(t,s&&s._filterPanel),this._emptyPage=new Oo(e,s&&s._emptyPage),this._loadingPage=new Bo(e,s&&s._loadingPage),this._rowTemplateArgs={control:t.wrapperOrThis(),large:!1,row:-1}}_doDestory(){super._doDestory(),this._dataLink=this._dv=null}_doInitDefaults(){super._doInitDefaults(),this._rowType=Gt.NORMAL,this._orientation=Ut.VERTICAL,this._largeSize=Wl.LARGE_SIZE,this._rowsPerLine=1,this._levelIndent=8,this._overScrollEffect=xe.BALLOON,this._dragEdgeGap=10}groupSectionChanged(t){this._changed()}rowCellObjectChanged(t){this._changed()}rowType(){return ie(this._rowType,this._defs&&this._defs._rowType)}setRowType(t){t!==this._rowType&&(this._rowType=t,this._changed())}table(){return ie(this._table,this._defs&&this._defs._table)}setTable(t){t!==this._table&&(this._table=t,this._changed())}isLandscape(){return this._landscape}orientation(){return ie(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){t!==this._orientation&&(t===Ut.HORIZONTAL&&this._owner.isGrouped()&&z(v.canNotHorzInGrouping),this._orientation=t,this._changed())}largeSize(){return oe(this._largeSize,this._defs&&this._defs._largeSize)}setLargeSize(t){t!==this._largeSize&&(this._largeSize=t,this._changed())}rowWidth(){return oe(this._rowWidth,this._defs&&this._defs._rowWidth)}setRowWidth(t){t!==this._rowWidth&&(this._rowWidth=t,this._changed())}minRowWidth(){return oe(this._minRowWidth,this._defs&&this._defs._minRowWidth)}setMinRowWidth(t){t!==this._minRowWidth&&(this._minRowWidth=t,this._changed())}maxRowWidth(){return oe(this._maxRowWidth,this._defs&&this._defs._maxRowWidth)}setMaxRowWidth(t){t!==this._maxRowWidth&&(this._maxRowWidth=t,this._changed())}rowCount(){return oe(this._rowCount,this._defs?this._defs._rowCount:NaN)}setRowCount(t){(t=c.toNumber(t)>>>0)!==this._rowCount&&(this._rowCount=t,this._changed())}levelIndent(){return oe(this._levelIndent,this._defs?this._defs._levelIndent:NaN)}setLevelIndent(t){(t=oe(t,0))!==this._levelIndent&&(this._levelIndent=t,this._changed())}menu(){return ie(this._menu,this._defs&&this._defs._menu)}setMenu(t){this._menu=t}overScrollEffect(){return ie(this._overScrollEffect,this._defs&&this._defs._overScrollEffect)}setOverScrollEffect(t){this._overScrollEffect=t}dragEdgeGap(){return he(this._dragEdgeGap,this._defs&&this._defs._dragEdgeGap,10)}setDragEdgeGap(t){this._dragEdgeGap=t}headRows(){return this._headRows}header(){return this._header}footer(){return this._footer}searchBar(){return this._searchBar}searchResultBar(){return this._searchResultBar}fieldBar(){return this._fieldBar}subheader(){return this._subheader}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}dataRowInfos(){return this._dataRowInfos}editBar(){return this._editBar}scrollIndicator(){return this._scrollIndicator}indexBar(){return this._indexBar}scrollBar(){return this._scrollBar}pageNavigator(){return this._pageNavigator}pageScroller(){return this._pageScroller}commandBox(){return this._commandBox}selectionMask(){return this._selectionMask}infoPage(){return this._infoPage}editPage(){return this._editPage}addPage(){return this._addPage}singleRow(){return this._singleRow}attachedRow(){return this._attachedRow}formPanel(){return this._formPanel}buttonPanel(){return this._buttonPanel}searchPanel(){return this._searchPanel}filterPanel(){return this._filterPanel}emptyPage(){return this._emptyPage}loadingPage(){return this._loadingPage}load(t){return super.load(t)}isLarge(){return this.isLandscape()?this._owner.height()>=this.largeSize():this._owner.width()>=this.largeSize()}getListRow(){return this.row()}getDefaultRowTemplate(){return this._runRowTemplate}getRowTemplate(t){const e=this._runRowTemplateCallback;let s;if(e&&(this._rowTemplateArgs.row=t,this._rowTemplateArgs.large=this.isLarge(),s=e(this._rowTemplateArgs)),!s){let e;e=this._dataLink?this._dataLink.getSource(t).name():this._dv.name(),s=e&&this.dataRowInfos().getRowTemplate(e)}return s||this._runRowTemplate}getRowParams(){return this._runRowParams}getRowStyle(){return this._runRowStyle}getRowCommands(){const t=this._owner.rowCommands(),e=[];return c.makeArray(this.getListRow().commands(),!0).forEach((s=>{const i=t.get(s);i&&e.push(i)})),e}prepareRender(){this.$_prepareRunnings(),this._dv=this.owner().data(),this._dataLink=this._dv instanceof Il?this._dv:null,this._rowBar.visible()&&this._rowBar.prepareRender(),this._editBar.visible()&&this._editBar.prepareRender(),this._scrollIndicator.visible()&&this._scrollIndicator.prepareRender(),this._indexBar.visible()&&this._indexBar.prepareRender(),this._scrollBar.visible()&&this._scrollBar.prepareRender(),this._owner.isPaging()&&this._pageNavigator.visible()&&this._pageNavigator.prepareRender(),this._owner.isPaging()&&this._pageScroller.visible()&&this._pageScroller.prepareRender(),this._commandBox.visible()&&this._commandBox.prepareRender(),this._selectionMask.visible()&&this._selectionMask.prepareRender(),this._dataRowInfos.prepareRender(),this._rowBar.visible()&&this._rowBar.prepareRender()}unprepareRender(){this._rowBar.visible()&&this._rowBar.unprepareRender(),this._editBar.visible()&&this._editBar.unprepareRender()}$_getPanel(t){switch(t){case sh.TYPE:return this._formPanel;case eh.TYPE:return this._buttonPanel;case ih.TYPE:return this._searchPanel;case bh.TYPE:return this._filterPanel}}$_prepareRunnings(){const t=this._row;this._runRowTemplateCallback=t.templateCallback(),this._runRowTemplate=this.isLarge()&&t.largeTemplate()||t.template(),this._runRowParams=t.$_internalParams(),this._runRowStyle=t.style()}}Wl.LARGE_SIZE=600;class zl extends $r{constructor(t){super(t,!1,zl.CLASS_NAME,Oe)}_doInitDom(t,e){}_doMeasure(t,e,s,i){return{width:s,height:i}}_doRender(t,e,s){}}zl.CLASS_NAME="rtc-focus-mask";class Gl extends $r{constructor(t,e){super(t,!1,"rtc-table-cell",Oe),this.merged=e}setModel(t,e){e!==this.model&&(e&&this.model&&e.layout.tid!==this.model.layout.tid&&this._layoutView&&(this._layoutView.remove(),this._layoutView=void 0),this.model=e);const s=this.model&&this.model.layout;!this._layoutView&&s&&(s instanceof yi?this._layoutView=new xo(t,s):s instanceof bi&&(this._layoutView=new Vo(t,s)),this._layoutView&&(this._layoutView.dom.style.position="relative",this.addChild(this._layoutView)))}prepareLayout(t,e){this._manager=e,this._layoutView.prepareView(e),this._layoutView.prepareLayout(t,e)}_getPositionStyle(){return""}_doInitDom(t,e){Object.assign(e.style,{overflow:"hidden",position:"relative"})}_doMeasure(t,e,s,i){const r=this.model,n=this.dom,o=n.style,h=r.column._padding?r.column._padding:r.column._padding=Fe.getPaddingBorder(n);if(this.internalClearSize(),this._prevStyle){for(const t in this._prevStyle)o[t]="";this._prevStyle=""}return r.style&&Object.assign(o,this._prevStyle=Object.assign({},r.style)),s-=this._padHorz=h.left+h.right+h.borderLeft+h.borderRight,i-=this._padVert=h.top+h.bottom+h.borderTop+h.borderBottom,this._layoutView.measureLayout(t,this._manager,s,i),O}_doRender(t,e,s){this._layoutView.internalSetSize(e-this._padHorz,s-this._padVert),this._layoutView.render(t)}_getRenderSize(){return this.getSize()}}class Ul extends $r{simpleByDom(t,e){return e?this.findDescendant((e=>e instanceof So&&e.containsDom(t))):this.findChild((e=>e instanceof So&&e.containsDom(t)))}_getDisplayStyle(){return"grid"}_doApplyStyles(t){t.gridTemplateColumns=this._getTable().columnWidths}_doMeasure(t,e,s,i){const r=this._manager,n=this._getTable(),o=n.rowCount,h=n.colCount,a=this._cells,l=n._internalColumns();let d=0;this.clearSize();for(let s=0;s<o;s++){const n=a[s];for(let s=0;s<h;s++){const o=n[s];o&&o.model&&o.visible&&(o.prepareLayout(t,e),o.measure(t,r,l[s]._runWidth,i)),d+=l[s]._runWidth}}return{width:this.mw=d,height:this.mh=this.dom.offsetHeight}}_doRender(t,e,s){const i=this._getTable(),r=i.rowCount,n=i.colCount,o=this._cells,h=i._internalColumns();for(let e=0;e<r;e++){const i=o[e];for(let e=0;e<n;e++){const r=i[e];r&&r.model&&r.visible&&(r.internalSetSize(h[e]._runWidth,s),r.render(t))}}Fe.resize(this.dom,e,s)}_getMinRowHeight(t){}_buildCells(t,e,s){const i=e.rowCount,r=e.colCount,n=this._cells=e.createCellArray(),o=this._cellViewType();for(let e=0;e<i;e++){const s=this._getMinRowHeight(e),i=isNaN(s)?"":ae(s);for(let s=0;s<r;s++){const r=new o(t,!1);r.dom.style.minHeight=i,this.addChild(r),n[e][s]=r}}s.cells.forEach((e=>{if(e.col<r&&e.row<i){n[e.row][e.col].setModel(t,e)}}));for(let t=0;t<i;t++)for(let e=0;e<r;e++){const s=n[t][e];if(isNaN(s.rspan))if(s.model){if(s.rspan=Math.min(s.model.rspan,i-t),s.rspan>1){for(let i=t+1;i<t+s.rspan;i++)n[i][e].setVisible(!1);s.dom.style.gridRowStart=String(t+1),s.dom.style.gridRowEnd=String(t+s.rspan+1)}}else s.rspan=1;if(isNaN(s.cspan))if(s.model){if(s.cspan=Math.min(s.model.cspan,r-e),s.cspan>1){for(let i=e+1;i<e+s.cspan;i++)n[t][i].setVisible(!1);s.dom.style.gridColumnStart=String(e+1),s.dom.style.gridColumnEnd=String(e+s.cspan+1)}}else s.cspan=1}}}class jl extends Ul{constructor(t,e){super(t,!1,"rtc-table-row-layout",Oe),e||z(v.layoutMustSet),this._model=e}build(t,e){this._buildCells(t,this._model.table,this._model)}refreshModels(t){const e=this.doc,s=this._getTable(),i=this._cells;this._model=t,t.cells.forEach((t=>{t.row<s.rowCount&&t.col<s.colCount&&i[t.row][t.col].setModel(e,t)}))}prepareLayout(t,e){const s=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(s),this._doApplyImportantStyles(s),this.mw=this.mh=NaN}measureLayout(t,e,s,i){return this._doMeasure(t,e,s,i)}prepareView(t){}_cellViewType(){return Gl}_getTable(){return this._model.table}_getMinRowHeight(t){return this._model.table.minRowHeight}_doPrepareRender(t,e){this._manager=e}_doAfterRender(){this._manager=null}}const ql="flex-start",Yl="flex-end";class Ql extends Co{constructor(t,e){super(t,e)}_getDisplayStyle(){return"flex"}needMeasuredSize(){return!1}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.length>0&&this._visibles.forEach(((t,s)=>{t.prepareView(e)}))}_doApplyStyles(t){super._doApplyStyles(t),this._doApplyFlex(t,this._model)}_doMeasureLayout(t,e,s,i){const r=this._visibles;return isNaN(this._explicitWidth)||(s=this._explicitWidth),isNaN(this._explicitHeight)||(i=this._explicitHeight),this._measureChildren(r,t,e,s,i,null),{width:oe(this._explicitWidth,this.dom.offsetWidth),height:oe(this._explicitHeight,this.dom.offsetHeight)}}_doLayoutContent(t,e,s){}_isVert(){return!1}_doApplyFlex(t,e){const s=this._isVert(),i=e.itemGap;switch(t.gap=ae(i),e.itemsArrange){case Jt.START:t.justifyContent="flex-start";break;case Jt.END:t.justifyContent="flex-end";break;case Jt.CENTER:t.justifyContent="center";break;case Jt.SPACE_AROUND:t.justifyContent="space-around";break;case Jt.SPACE_AROUND:t.justifyContent="space-between"}this._visibles.forEach(((e,r)=>{t=e.dom.style;const n=e.model()._internalChildProps(),o=+n.grow,h=+n.shrink;if(isNaN(o))if(s){const e=+n[Bt];isNaN(e)||(t.flexGrow=e)}else{const e=+n[Ot];isNaN(e)||(t.flexGrow=e)}else t.flexGrow=o;let a;isNaN(h)||(t.flexShrink=h),s?null!=(a=n.left)?(t.alignSelf=ql,t.marginLeft=le(a)):null!=(a=n.right)&&(t.alignSelf=Yl,t.marginRight=le(a)):null!=(a=n.top)?(t.alignSelf=ql,t.marginTop=le(a)):null!=(a=n.bottom)&&(t.alignSelf=Yl,t.marginBottom=le(a)),a=n.gap,isNaN(a)||(s?t.marginTop=t.marginBottom=ae(a-i):t.marginRight=t.marginLeft=ae(a-i))}))}}class Zl extends Ql{_doInitStyle(t){t.flexDirection="row"}_doApplyFlex(t,e){switch(super._doApplyFlex(t,e),e.itemsAlign){case Zt.BOTTOM:t.alignItems="flex-end";break;case Zt.MIDDLE:t.alignItems="center";break;case Zt.TOP:t.alignItems="flex-start"}}}class Xl extends Ql{_isVert(){return!0}_doInitStyle(t){t.flexDirection="column"}_doApplyFlex(t,e){switch(super._doApplyFlex(t,e),e.itemsAlign){case Yt.RIGHT:t.alignItems="flex-end";break;case Yt.CENTER:t.alignItems="center";break;case Yt.LEFT:t.alignItems="flex-start"}}}class Kl extends p{constructor(t){super(),null!=t&&this.assignObject(t,null)}_prepareRender(t){this._runGrow=he(this.grow,t.columnGrow,dd.DEF_GROW),this._runShrink=he(this.shrink,t.columnShrink,dd.DEF_SHRINK)}}class Jl extends Kl{constructor(t){super(t)}_doAssignProps(t){if(!isNaN(t))return this.width=t,!0}get width(){return this._width}set width(t){t!=this._width&&(this._width=t,this._widthDim=N(t,!0),this._widthDim&&this._widthDim.rated&&(this.grow=this._widthDim.size,this._widthDim=void 0))}getProxy(){return{width:this._width}}getWidth(t){}prepareRender(t,e){let s;super._prepareRender(t),this._widthDim?this._widthDim.fixed?s=this._widthDim.size:isNaN(e)||(s=this._widthDim.size*e/100):s=t.columnWidth,this._runWidth=Math.max(s,0)}}class td extends Kl{constructor(t){super(t)}get height(){return this._height}set height(t){t!=this._height&&(this._height=t,this._heightDim=N(t,!0),this._heightDim&&this._heightDim.rated&&(this.grow=this._heightDim.size))}getProxy(){return{height:this._height}}prepareRender(t,e){let s;super._prepareRender(t),s=this._heightDim?this._heightDim.fixed?this._heightDim.size:this._heightDim.rated||isNaN(e)?NaN:this._heightDim.size*e/100:NaN,this._runHeight=isNaN(s)?s:Math.max(s,0)}}var ed;!function(t){t.NONE="none",t.TEXT="text",t.SHAPE="shape",t.IMAGE="image"}(ed||(ed={}));class sd extends p{constructor(t,e){super(),this._section=t,this._doInit(),c.isObject(e)&&(Object.assign(this,e),c.isObject(e.style)&&(this.style=Object.assign({},e.style)))}_doInit(){this.display=ed.TEXT,this.shapeWidth=20}click(t){this.onClick&&this.onClick({control:t,section:this._section.type(),cell:this.type()})}}class id extends p{constructor(t,e){super(),this.visible=!0,this.minRowHeight=id.MIN_ROW_HEIGHT,this.sortMarkVisible=!0,this.sortOrderVisible=!0,this.table=t,this._head=this._createHead(e&&e.head),this._foot=this._createFoot(e&&e.foot),null!=e&&this.assignObject(e,["head","foot"])}inflateParam(t,e,s){}inflateStock(t,e,s){}data(){return this._data}setData(t){t!==this._data&&(this._data=t,this._changed=!0)}isDirty(){return this._changed}clean(){this._changed=!1}dataChanged(){this._changed=!0}click(){}sortField(t){if(t){const e=this.data();e instanceof yh&&e.toggleSort(t,!0)}}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}id.MIN_ROW_HEIGHT=24;class rd extends sd{type(){return"head"}}class nd extends sd{type(){return"foot"}}class od extends id{constructor(){super(...arguments),this.defRenderer="field"}type(){return"header"}_createHead(t){return this.head=new rd(this,t)}_createFoot(t){return this.foot=new nd(this,t)}inflateStock(t,e,s){}}class hd extends sd{type(){return"head"}_doInit(){super._doInit(),this.text="Σ"}}class ad extends sd{type(){return"foot"}}class ld extends id{type(){return"footer"}_createHead(t){return this.head=new hd(this,t)}_createFoot(t){return this.foot=new ad(this,t)}inflateStock(t,e,s){const i=s.name;if(this._data&&rn.hasOwnProperty(i))return this._data.getSummary(s.field||e)[i]}}class dd extends p{constructor(t){super(),this.colCount=1,this.rowCount=1,this.fixedColCount=0,this.fixedRowCount=0,this.columnWidth=dd.DEF_COLUMN_WIDTH,this.minRowHeight=dd.MIN_ROW_HEIGHT,this.columnGrow=dd.DEF_GROW,this.columnShrink=dd.DEF_SHRINK,t?this.$_load(t):this.$_init()}$_load(t){this.name=t.name,this.colCount=Math.max(oe(t.colCount,1),1),this.rowCount=Math.max(oe(t.rowCount,1),1),this.minWidth=t.minWidth,this.maxWidth=t.maxWidth,this._minWidthDim=k(t.minWidth,!0),this._maxWidthDim=k(t.maxWidth,!0),this.columnWidth=oe(+t.columnWidth,this.columnWidth),this.minRowHeight=oe(+t.minRowHeight,this.minRowHeight),this.maxRowHeight=oe(+t.maxRowHeight,this.maxRowHeight),this.columnGrow=oe(+t.columnGrow,this.columnGrow),this.columnShrink=oe(+t.columnShrink,this.columnShrink),this._columns=this.$_buildColumns(t.columns),this._rows=this.$_buildRows(t.rows),this.header=new od(this,t.header),this.footer=new ld(this,t.footer)}$_init(){this._columns=this.$_buildColumns(null),this._rows=this.$_buildRows(null),this.header=new od(this,void 0),this.footer=new ld(this,void 0)}get columns(){return this._columns.map((t=>t.getProxy()))}get rows(){return this._rows.map((t=>t.getProxy()))}rowHeightsFixed(){return!1}getColumn(t){return this._columns[t].getProxy()}getRow(t){return this._rows[t].getProxy()}preapreRender(t,e,s){function i(){let t=0;return r.forEach((e=>{t+=e._runWidth})),t}const r=this._columns,n=D(this._maxWidthDim,e),o=oe(D(this._minWidthDim,e),e),h=he(n,o,e),a=s;let l;this.viewWidth=e,this.viewHeight=s,r.forEach((t=>t.prepareRender(this,h))),function(){let t=i();if(!isNaN(n)&&t>n){const e=[];let s=0;t-=n,r.forEach((t=>{t._runShrink>0&&(s+=t._runShrink,e.push(t))}));for(let i=0;i<e.length;i++){const r=e[i]._runShrink*t/s;e[i]._runWidth-=r}}else if(!isNaN(o)&&t<o){const e=[];let s=0;t=o-t,r.forEach((t=>{t._runGrow>0&&(s+=t._runGrow,e.push(t))}));for(let i=0;i<e.length;i++){const r=e[i]._runGrow*t/s;e[i]._runWidth+=r}l=0}}(),this.columnWidths=this._internalColumns().map((t=>ae(t._runWidth))).join(" "),this.overWidth=l,this._rows.forEach((t=>t.prepareRender(this,a))),this._cellArray=[];for(let t=0,e=this._rows.length;t<e;t++)this._cellArray.push(new Array(this.colCount));isNaN(l)&&(this.modelWidth=i(),l=Math.max(0,this.modelWidth-e)),this.overWidth=l}createCellArray(){return this._cellArray.map((t=>t.slice(0)))}setData(t){this.header.setData(t),this.footer.setData(t)}dataChanged(){this.header.dataChanged(),this.footer.dataChanged()}clean(){this.header.clean(),this.footer.clean()}_internalColumn(t){return this._columns[t]}_internalColumns(){return this._columns}_internalRows(){return this._rows}$_buildColumns(t){const e=Array.isArray(t)?t.map((t=>new Jl(t))):[];if(this.colCount>e.length)for(let t=e.length;t<this.colCount;t++)e.push(new Jl(null));return e}$_buildRows(t){const e=Array.isArray(t)?t.map((t=>new td(t))):[];if(this.rowCount>e.length)for(let t=e.length;t<this.rowCount;t++)e.push(new td(null));return e}_tableObjectChanged(t){}}dd.DEF_COLUMN_WIDTH=70,dd.MIN_ROW_HEIGHT=35,dd.DEF_GROW=0,dd.DEF_SHRINK=1;class _d extends $r{constructor(t,e){super(t,!1,e,Oe),this._views=[],this.appendDom(this._span=t.createElement("span"))}setModel(t){(this._modelChanged=t!==this._model)&&(this._model=t,this._doModelChanged(t))}click(t){this._model.click(this.control.wrapperOrThis())}isDom(t){return t===this._span||t===this._shape||t===this._image||super.isDom(t)}_doInitStyle(t){Object.assign(t,{display:"flex",justifyContent:"center",alignItems:"center"})}_doApplyStyles(t){Object.assign(t,this._model.style)}_doPrepareRender(t,e){function s(t){for(let e=t.length-1;e>=0;e--)t[e]&&t[e].remove()}switch(this._model.display){case ed.TEXT:s([this._shape,this._image]),this._span=this._span||t.createElement("span"),this.appendDom(this._span);break;case ed.SHAPE:s([this._span,this._image]),this._shape=this._shape||oi.create(t),this.appendDom(this._shape);break;case ed.IMAGE:s([this._span,this._shape]),this._image=this._image||t.createElement("img"),this.appendDom(this._image);break;default:s([this._span,this._shape,this._shape])}}_doMeasure(t,e,s,i){const r=this._model;switch(r.display){case ed.TEXT:this._span.textContent=r.text;break;case ed.SHAPE:this.control.shapes().createStock(this._shape,r.shapeName),isNaN(r.shapeWidth)||(this._shape.style.width=ae(r.shapeWidth)),isNaN(r.shapeHeight)||(this._shape.style.height=ae(r.shapeHeight));break;case ed.IMAGE:this._image.src=r.imageUrl,isNaN(r.imageWidth)||(this._image.width=r.imageWidth),isNaN(r.imageHeight)||(this._image.height=r.imageHeight)}return{width:s,height:i}}_doRender(t,e,s){}_doModelChanged(t){}}class cd extends Ul{clearCells(){}buildCells(t,e,s){this._buildCells(t,e,s)}_getTable(){return this.model.table}_getMinRowHeight(t){return this.model.minRowHeight}_doPrepareRender(t,e){this._manager=e.owner()}_doAfterRender(){this._manager=null}}class ud extends $r{constructor(t,e){super(t,!1,e,Oe),this.addChild(this._headView=this._createHeadView(t)),this.addChild(this._footView=this._createFootView(t))}setModel(t){t!==this._model&&(this._model=t,this._modelChanged=!0),this._modelChanged=this._modelChanged||this._model.isDirty(),this._layoutView&&this._modelChanged&&(this.removeChild(this._layoutView),this._layoutView=null)}click(t,e,s){const i=this._layoutView instanceof Ul&&this._layoutView.simpleByDom(t,!0),r=i&&i.model().renderer;r instanceof di?this._model.sortField(r.field||i.model().getField()):this._model.click()}clickable(){return!0}_doPrepareRender(t,e){if(this._startIndent=e.startIndent(),this._endIndent=e.endIndent(),this._rowOff=e.rowOffset(),this._layoutView||this.insertBefore(this._layoutView=this._createLayoutView(t),this._headView),this._headView.setVisible(this._startIndent>0)&&this._headView.setModel(this._model._head),this._footView.setVisible(this._endIndent>0)&&this._footView.setModel(this._model._foot),this._modelChanged){const s=this._model.template||e.owner().current().getDefaultRowTemplate(),i=e.owner().getTableLayout(s,this._model);i.layout.setTable(this._model.table),this._layoutView.model=this._model,this._layoutView.buildCells(t,e.table,i.layout),this._modelChanged=!1}}_doMeasure(t,e,s,i){let r=s,n=this._layoutView.measure(t,e,r-this._startIndent-this._endIndent,i).height;return this._headView.visible&&this._headView.measure(t,e,this._startIndent,n),this._footView.visible&&this._footView.measure(t,e,this._endIndent,n),{width:r,height:n}}_doRender(t,e,s){this._headView.visible&&this._headView.setBounds(0,0,this._startIndent,s),this._footView.visible&&this._footView.setBounds(e-this._endIndent,0,this._endIndent,s),this._layoutView.resize(this._layoutView.mw,s),this._layoutView.move(this._startIndent-this._rowOff,0),this._layoutView.render(t),this.$_clipView(this._model.table,this._rowOff)}setLayoutPos(t){this._rowOff=t,this._layoutView.moveX(this._startIndent-t),this.$_clipView(this._model.table,t)}$_clipView(t,e){if(t.overWidth>0){const s=e,i=this._layoutView.width-t.overWidth+e,r=`polygon(${s}px 0, ${i}px 0, ${i}px 100%, ${s}px 100%)`;this._layoutView.dom.style.clipPath=r}else this._layoutView.dom.style.clipPath="none"}}ud.CLASS_NAME="rtc-table-section";class gd extends _d{constructor(t){super(t,gd.CLASS_NAME)}}gd.CLASS_NAME="rtc-table-header-head";class pd extends _d{constructor(t){super(t,pd.CLASS_NAME)}}pd.CLASS_NAME="rtc-table-header-foot";class fd extends Gl{constructor(t,e){super(t,e),this.dom.classList.add("rtc-table-header-cell")}}class wd extends cd{_cellViewType(){return fd}}class md extends ud{constructor(t){super(t,md.CLASS_NAME)}_createLayoutView(t){return new wd(t,!1,void 0,Oe)}_createHeadView(t){return new gd(t)}_createFootView(t){return new pd(t)}}md.CLASS_NAME=ud.CLASS_NAME+" rtc-table-header";class yd extends _d{constructor(t){super(t,yd.CLASS_NAME)}}yd.CLASS_NAME="rtc-table-footer-head";class bd extends _d{constructor(t){super(t,bd.CLASS_NAME)}}bd.CLASS_NAME="rtc-table-footer-foot";class vd extends Gl{constructor(t,e){super(t,e),this.dom.classList.add("rtc-table-footer-cell")}}class Cd extends cd{_cellViewType(){return vd}}class Sd extends ud{constructor(t){super(t,Sd.CLASS_NAME)}_createLayoutView(t){return new Cd(t,!1,void 0,Oe)}_createHeadView(t){return new yd(t)}_createFootView(t){return new bd(t)}}Sd.CLASS_NAME=ud.CLASS_NAME+" rtc-table-footer";class Rd extends Wo{getItemClass(){return Rd.CLASS_NAME}_getPadding(){return B}_isRelativeLayout(){return!1}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._rowCell&&this._rowCell.setTable(!0),this._editCell&&this._editCell.setTable(!0),this.setItemData("detail",this.detailed?"1":"0")}_doRender(t,e,s){super._doRender(t,e,s);const i=this._owner.rowOffset();this._layoutView.moveX(this._layoutView.x-i),this.$_clipView(this._owner.table,i)}_isLayoutChanged(t){return this._tableDirty}setTable(t){this._tableDirty=t!==this._table,this._table=t}setLayoutPos(t,e){super.setLayoutPos(t,e),this._vertical?this._layoutView.moveX(e):this._layoutView.moveY(e),this.$_clipView(this._table,t)}$_clipView(t,e){if(t.overWidth>0){const s=e,i=this._layoutView.mw-t.overWidth+e,r=`polygon(${s}px 0, ${i}px 0, ${i}px 100%, ${s}px 100%)`;this._layoutView.dom.style.clipPath=r}else this._layoutView.dom.style.clipPath="none"}}Rd.TR_CLASS="rtc-tr",Rd.CLASS_NAME=Wo.CLASS_NAME+" "+Rd.TR_CLASS;class xd extends p{constructor(t){super(),this._bodyView=t}_doDestory(){this.stop()}start(){return this._doStart()||this.stop(),this}stop(){this._doStop()}}class Vd extends We{}class Ed extends $r{constructor(t,e){super(t,!1,Ed.CLASS_NAME,Oe),this._panelViews=[],this.pageMoving=!1,this.orderWidth=NaN,this.rightMargin=0,this._owner=e,this.addChild(this._bodyView=this._bodyView=this._createBodyView(t,e.noCache(),!1)),this._bodyView._setListView(this),this.addChild(this._sectionContainer=new We(t,!1,"rtc-sections",Oe)),this._sectionContainer.addChild(this._rowCell=new co(t)),this._sectionContainer.addChild(this._editCell=new uo(t)),this._rowCell.visible=this._editCell.visible=!1,this.addChild(this._panelContainer=new ze(t,!1,"rtc-panels",Oe)),this._panelContainer.dom.style.overflow="hidden",this.addChild(this._toolContainer=new ze(t,!1,"rtc-tools",Oe))}_doDestory(){super._doDestory(),this.rowBar=this.editBar=this._renderInfo=this._owner=null,this._panelViews.length=0}isSkeleton(){return!1}startIndent(){return this._startIndent}endIndent(){return this._endIndent}createLayoutView(t,e){return e instanceof Ti?new jl(t,e):e instanceof ki?void x.debugging():e instanceof xi?new Oa(t,e):new Td[e.type](t,e)}borrowRenderer(t){return this._owner.borrowRenderer(t)}freeRenderer(t){this._owner.freeRenderer(t)}useImage(t){this._owner.useImage(t)}getImageSize(t){return this._owner.getImageSize(t)}getIcon(t,e){return this._owner.getIcon(t,e)}rowBorderVisible(t){return!t._last||!this._owner.rowBorder.skipLast}setExplicits(t){t.setExplicit(this._bodyView._expWidth,this._bodyView._expHeight)}owner(){return this._owner}data(){return this._owner.data()}isVertical(){return this._vertical}isLandscape(){return this._owner.isLandscape()}itemCount(){return this._bodyView.itemViewCount()}headRowsView(){return this._headRowsView}formPanelView(){return this._formPanelView}buttonPanelView(){return this._buttonPanelView}bodyView(){return this._bodyView}headerView(){return this._headerView}subheaderView(){return this._subheaderView}footerView(){return this._footerView}searchBarView(){return this._searchBarView}fieldBarView(){return this._fieldBarView}tableHeaderView(){return this._tableHeaderView}tableFooterView(){return this._tableFooterView}scrollIndicatorView(){return this._scrollIndicatorView}indexBarView(){return this._indexBarView}scrollBarView(){return this._scrollBarView}pageNavigatorView(){return this._pageNavigatorView}pageScrollerView(){return this._pageScrollerView}menuView(){return this._menuView}renderInfo(){return this._renderInfo}scrollPos(){return this._bodyView.scrollPos()}scrollOff(){return this._bodyView.scrollOff()}topRow(){return this._bodyView.topRow()}rowOffset(){return this._bodyView.rowOffset()}activePanel(){return this._activePanel}menu(){return this._menu}getExpander(t){return this._bodyView.getExpander(t)}_resetScrollStates(){const t=this.scrollPos(),e=this.scrollOff();this.$_setScrollRate(this._scrollIndicatorView,t,e,!0),this.$_setScrollBar(this._scrollBarView,!0)}scrollBy(t){const e=this._bodyView.scrollBy(t);return this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView(),e}scrollToEnd(t){this._bodyView.scrollToEnd(t),this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView()}rowOffsetBy(t){const e=this._bodyView.rowOffsetBy(t);return!0===e&&(t=this._bodyView.rowOffset(),this._tableHeaderView&&this._tableHeaderView.visible&&this._tableHeaderView.setLayoutPos(t),this._tableFooterView&&this._tableFooterView.visible&&this._tableFooterView.setLayoutPos(t)),e}setTablePos(t){}pageChanged(t){const e=this._pageScrollerView;e&&e.visible&&e.makeVisible(t)}closePanel(t){if(this._activePanel){const e=this._panelContainer.width,s=this._panelContainer.height,i=this.$_getPanelView(this._activePanel);t?i&&this.$_hidePanel(i,e,s,null):(this._activePanel=null,i&&(this._panelContainer.dom.style.pointerEvents="none",this._panelContainer.removeChild(i),i.setVisible(!1)))}}showPanel(t,e){function s(t){return"string"==typeof t?t:isNaN(t)?"":ae(t)}if(c.isObject(e)){const i=e,r=i.container;if(r instanceof HTMLElement){const e=this.$_getPanelView(this._activePanel=t);e&&(Object.assign(e.dom.style,{left:s(i.left),top:s(i.top),width:s(i.width),height:s(i.height)}),r.appendChild(e.dom))}else e=!0}const i=this._panelContainer.width,r=this._panelContainer.height;if(e)t&&t!==this._activePanel&&(this._activePanel?this.$_hidePanel(this.$_getPanelView(this._activePanel),i,r,(()=>{this.$_showPanel(this.$_getPanelView(t),i,r,null)})):this.$_showPanel(this.$_getPanelView(t),i,r,null));else if(t&&t!==this._activePanel){const e=this.$_getPanelView(this._activePanel=t);e?(this._panelContainer.dom.style.pointerEvents="auto",e.setVisible(!0),this._panelContainer.addChild(e)):this._panelContainer.removeChild(e)}}togglePanel(t,e){if(t){const s=this._panelContainer.width,i=this._panelContainer.height,r=t===this._activePanel,n=this.$_getPanelView(t);n&&(e?r?this.$_hidePanel(n,s,i,null):this.$_showPanel(n,s,i,null):(this._activePanel=r?null:t,n.setVisible(!r)?this._panelContainer.addChild(n):this._panelContainer.removeChild(n)))}}getPanel(t){const e=this._activePanel&&this.$_getPanelView(this._activePanel);return e&&e.containsDom(t)?e:null}isInPanel(t){const e=this.getPanel(t);return e&&e.containsDom(t)}isMenuView(t){return this._menuView&&this._menuView.isMenuView(t)}showMenu(t,e){!function(t,e){if(!t)throw new Error(e||t+" is null.")}(!!t,"menu object is required."),this.closePanel(!1),this.hideMenu(!1),t.onShow&&t.show(this.control.wrapperOrThis());let s=this._menuView;s||(s=this._menuView=new Aa(this.doc),s.setVisible(!1)),this._panelContainer.addChild(s),s.show(this._menu=t,this.width,this.height,this.canAnimate())}hideMenu(t){return this._menuView&&this._menuView.hide(this.canAnimate()&&t)}canMovePage(t,e){const s=this._owner;if(s.isPaging())if(t>0){if(s.page()>0)return!0;e&&this._bodyView.$_showOverEffect(W.LEFT)}else if(t<0){if(s.page()<s.pageCount()-1)return!0;e&&this._bodyView.$_showOverEffect(W.RIGHT)}}canMoveSingle(t,e){return!1}getSpareBody(){return this._spareBodyView||(this._spareBodyView=this._createBodyView(this.doc,this._owner.noCache(),!0),this._spareBodyView._listView=this),this._spareBodyView}refreshPanel(){this._buttonPanelView&&this._buttonPanelView.visible&&this._buttonPanelView.refresh(this,this.width,this.height)}focusedRowChanged(t,e){this._bodyView.focusedRowChanged(t,e)}getLayoutView(t){for(const e of this._layoutViews)if(e&&e.visible&&e.isView(t))return e}addTooltipView(t){this.control.lock((()=>{this._toolContainer.addChild(t)}))}removeTooltipView(t){this.control.lock((()=>{this._toolContainer.removeChild(t)}))}addFeedback(t){this._toolContainer.appendDom(t)}showToast(t){const e=new Fa(this.doc),s=new Ba(t);e.show(this._toolContainer,s)}keepSelectInfo(t){}getSelectInfo(){return null}_doPrepareRender(t,e){const s=this._owner,i=s.isEmpty(),r=s.data(),n=s.fullMode(),o=s.isSingleRow(),h=s.getRowCount()>0,a=s.current(),l=this._sectionContainer,d=a.searchResultBar(),_=a.headRows(),c=a.row(),u=this.rowBar=a._rowBar.visible()?a._rowBar:null,g=this.editBar=a._editBar.visible()?a._editBar:null,p=this.table=s.getTableModel(a.table());let f,w=this._searchResultView;this._vertical=s.isVertical(),this._renderInfo=e,this._table=e&&e.table,this.borderLine=o&&!a.singleRow().rowBorderVisible||!c.borderLine().visible()?null:c.borderLine(),this.focusMask=!o&&c.focusMask().visible()?c.focusMask():null,this._startIndent=this._endIndent=0,this.textFormatter=s.getTextFormatter(),this.boolFormatter=s.getBoolFormatter(),this.numberFormatter=s.getNumberFormatter(),this.dateFormatter=s.getDateFormatter(),u&&u.prepareGaps(p),g&&g.prepareGaps(p),_.prepareRender(s.data())?l.addChild(this._headRowsView=new Gh(t,_)):this._headRowsView&&this._headRowsView.setVisible(!1),f=a._scrollIndicator.visible()&&!i,n||!f||this._scrollIndicatorView?this._scrollIndicatorView&&this._scrollIndicatorView.setVisible(h&&f)&&this._scrollIndicatorView.setModel(a.scrollIndicator()):l.addChild(this._scrollIndicatorView=new Ih(t,a.scrollIndicator())),f=a.header().visible(),f&&!this._headerView?l.addChild(this._headerView=new Nh(t,a.header())):this._headerView&&this._headerView.setVisible(f)&&this._headerView.setModel(a.header()),f=a.subheader().visible(),f&&!this._subheaderView?l.addChild(this._subheaderView=new Ia(t,a.subheader())):this._subheaderView&&this._subheaderView.setVisible(f)&&this._subheaderView.setModel(a.subheader()),f=a.searchBar().visible(),f&&!this._searchBarView?l.addChild(this._searchBarView=new fa(t,a.searchBar())):this._searchBarView&&this._searchBarView.setVisible(f)&&this._searchBarView.setModel(a.searchBar()),f=a.fieldBar().visible()&&r&&r.canSort(),f&&!this._fieldBarView?l.addChild(this._fieldBarView=new Da(t,a.fieldBar())):this._fieldBarView&&this._fieldBarView.setVisible(f)&&this._fieldBarView.setModel(a.fieldBar()),f=p&&p.header.visible,f&&!this._tableHeaderView&&l.addChild(this._tableHeaderView=new md(t)),this._tableHeaderView&&this._tableHeaderView.setVisible(f)&&this._tableHeaderView.setModel(p.header),f=p&&p.footer.visible,f&&!this._tableFooterView&&l.addChild(this._tableFooterView=new Sd(t)),this._tableFooterView&&this._tableFooterView.setVisible(f)&&this._tableFooterView.setModel(p.footer),f=a.searchResultBar().visible()&&(this._searchPanelView&&this._searchPanelView.canShowResult(s.searchResult())||a.searchBar().canShowResult(s.searchResult())),f&&!w?l.addChild(this._searchResultView=w=new wa(t,d)):w&&w.setVisible(f)&&w.setModel(d),f=a.footer().visible(),f&&!this._footerView?l.addChild(this._footerView=new Dh(t,a.footer())):this._footerView&&this._footerView.setVisible(f)&&this._footerView.setModel(a.footer()),f=h&&s.indexBar().visible()&&!i,n||!f||this._indexBarView?this._indexBarView&&this._indexBarView.setVisible(h&&f)&&this._indexBarView.setModel(a.indexBar()):l.addChild(this._indexBarView=new qh(t,a.indexBar()));let m=this._scrollBarView;f=s.scrollBar().visible()&&!i,!n&&h&&f&&!m?l.addChild(m=this._scrollBarView=new Yh(t,a.scrollBar())):m&&m.setVisible(h&&f)&&m.setModel(a.scrollBar()),f&&m&&m.setVertical(this._vertical),s.isPaging()?(f=s.pageNavigator().visible(),f&&!this._pageNavigatorView?l.addChild(this._pageNavigatorView=new Hh(t,s,a.pageNavigator())):this._pageNavigatorView&&this._pageNavigatorView.setVisible(f)&&this._pageNavigatorView.setModel(a.pageNavigator()),f=s.pageScroller().visible(),f&&!this._pageScrollerView?l.addChild(this._pageScrollerView=new zh(t,s,a.pageScroller())):this._pageScrollerView&&this._pageScrollerView.setVisible(f)&&this._pageScrollerView.setModel(a.pageScroller())):(this._pageNavigatorView&&this._pageNavigatorView.setVisible(!1),this._pageScrollerView&&this._pageScrollerView.setVisible(!1));const y=this.$_getPanelView(this._activePanel);if(y&&y.setVisible(!0),this._panelViews.forEach((t=>{t!==y&&!t.animating()&&t.setVisible(!1)})),this._bodyView.setData("table",this.table?1:void 0),this._runScrollIndicator=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,this._runPageNavigator=this._pageNavigatorView&&this._pageNavigatorView.visible?this._pageNavigatorView:null,this._layoutViews=[this._headerView,this._subheaderView,this._footerView,this._tableHeaderView,this._tableFooterView],this._headerViews=[this._headerView,this._subheaderView,this._fieldBarView,this._searchBarView],this._footerViews=[this._footerView],w&&w.visible){const t=d.position();switch(t){case _l.TOP:this._headerViews.push(w);break;case _l.REPLACE:this._footerView&&this._footerView.setVisible(!1),this._footerViews.push(w);break;case _l.AFTER:this._footerViews.unshift(w);break;case _l.BEFORE:default:this._footerViews.push(w)}w.setData("pos",t)}p&&(this._headerViews.push(this._tableFooterView),this._footerViews.push(this._tableFooterView)),r&&this.$_calcIndents(u,g)}$_calcIndents(t,e){function s(t,e){let s=0;return isNaN(t.size())?(e.visible=!0,s+=e.measure(t,i,0,r,n)[o?"width":"height"]):s+=t.size(),s+=o?t._runGaps.horz:t._runGaps.vert,e.visible=!1,s}const i=this.data(),r=this.width,n=this.height,o=this._vertical;this._startIndent=this._endIndent=0,t&&(this._rowCell.setTable(this.table),t.position()===gr.NEAR?this._startIndent+=s(t,this._rowCell):this._endIndent+=s(t,this._rowCell)),e&&(this._editCell.setTable(this.table),e.position()===gr.NEAR?this._startIndent+=s(e,this._editCell):this._endIndent+=s(e,this._editCell)),this._startIndent+=this._bodyView.getGroupIndent(this._owner)}_measureTable(t,e,s){this._vertical?t.preapreRender(!0,e-this._startIndent-this._endIndent,s):t.preapreRender(!0,e,s-this._startIndent-this._endIndent)}$_measureFull(t,e,s,i){let r=0;this.rightMargin=0,this._headRowsView&&this._headRowsView.visible&&(r+=this._headRowsView.measure(e,null,s,i).height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),r+=this._headerView.measure(e,this,s,i).height),this._searchBarView&&this._searchBarView.visible&&(r+=this._searchBarView.measure(e,t,s,i).height),this._fieldBarView&&this._fieldBarView.visible&&(r+=this._fieldBarView.measure(e,t,s,i).height),this._subheaderView&&this._subheaderView.visible&&(r+=this._subheaderView.measure(e,t,s,i).height),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),r+=this._footerView.measure(e,this,s,i).height),r+=this._bodyView.measure(e,t,s,i).height,this._runPageNavigator&&(r+=this._runPageNavigator.measure(e,this,s,i).height),this._pageScrollerView&&this._pageScrollerView.visible&&(r+=this._pageScrollerView.measure(e,this,s,i).height);const n=this.$_getPanelView(this._activePanel);return n&&!n.animating()&&n.measure(e,this,s,i),{width:s,height:r}}_doMeasure(t,e,s,i){const r=this._owner;if(this._table&&this._measureTable(this._table,s,i),r.fullMode())return this.$_measureFull(r,t,s,Number.MAX_SAFE_INTEGER);if(!this._vertical)return this._doMeasureHorz(t,s,i);const n=r.isLandscape(),o=r.searchResult(),h=this._searchResultView;let a,l=i,d=s,_=0,c=0,u=0,g=0,p=0,f=0,w=0,m=0;h&&h.setResult(o);const y=this._runPageNavigator;y&&(y.setPosition(n),a=y.measure(t,this,d,l),y.vertical?d-=a.width:l-=a.height);const b=this._runScrollIndicator;b&&(b.setPosition(n),a=b.measure(t,this,d,l),b.vertical?d-=a.width:l-=a.height),this._headRowsView&&this._headRowsView.visible&&(a=this._headRowsView.measure(t,null,d,l),l-=a.height),this._pageScrollerView&&this._pageScrollerView.visible&&(a=this._pageScrollerView.measure(t,this,d,l),l-=a.height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),_=this._headerView.measure(t,this,d,l).height),this._subheaderView&&this._subheaderView.visible&&(this._subheaderView.setLayout(this._subheaderView.model().layout()),c=this._subheaderView.measure(t,this,d,l).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(o),u=this._searchBarView.measure(t,r,d,l).height),this._fieldBarView&&this._fieldBarView.visible&&(g=this._fieldBarView.measure(t,r,d,l).height),this._tableHeaderView&&this._tableHeaderView.visible&&(p=this._tableHeaderView.measure(t,this,d,l).height),this._tableFooterView&&this._tableFooterView.visible&&(f=this._tableFooterView.measure(t,this,d,l).height),h&&h.visible&&(w=h.measure(t,this,d,l).height),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),m=this._footerView.measure(t,this,d,l).height),l-=_+c+u+g+p+f+w+m,this.rightMargin=0,this._scrollBarView&&this._scrollBarView.visible&&(a=this._scrollBarView.measure(t,this,d,l),this._scrollBarView.model().floating()||(this.rightMargin+=a.width)),this._indexBarView&&this._indexBarView.visible&&(a=this._indexBarView.measure(t,this,d,l),this._indexBarView.model().floating()||(this.rightMargin+=a.width));const v=this.$_getPanelView(this._activePanel);return v&&!v.animating()&&v.measure(t,this,s,l),this._bodyView._searchResult=o,this._bodyView.measure(t,r,d,l),{width:s,height:i}}_doRender(t,e,s){function i(){const i=o.mh;o.resize(e,i).move(u,g),s=-i,g+=i,o.render(t)}if(!this._vertical)return void this._doRenderHorz(t,e,s);const r=this.scrollPos(),n=this.scrollOff(),o=this._headRowsView&&this._headRowsView.visible?this._headRowsView:null,h=this._runPageNavigator,a=this._runScrollIndicator;let l,d=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,_=e,c=s,u=0,g=0,p=s;if(h&&h.vertical){const i=h.mw;h.position===ur.LEFT?(h.resize(i,s).move(u,g),u+=i):h.resize(i,s).move(_-i,g),e-=i,_-=i,h.render(t)}if(a){if(a.vertical){const t=a.mw;a.resize(t,s),a.position===ur.LEFT?(a.move(u,g),u+=t):a.move(_-t,g),e-=t,_-=t}else{const t=a.mh;a.resize(e,t),a.position===ur.TOP?(a.move(u,g),g+=t):(a.move(u,c-t),p-=t),s-=t,c-=t}a.render(t)}if(o&&o.model.position()===Fl.BEFORE&&i(),l=this._pageScrollerView,l&&l.visible){const i=l.mh;l.resize(e,i).move(u,c-i),s-=i,c-=i,l.render(t)}if(h&&!h.vertical){const i=h.mh;h.position===ur.TOP?(h.resize(e,i).move(u,g),g+=i):(h.resize(e,i).move(u,c-i),p-=i),s-=i,c-=i,h.render(t)}for(const i of this._footerViews)if(i&&i.visible){const r=i.mh;p-=r,i.resize(e,r).move(u,p),s-=r,c-=r,i.render(t)}for(const i of this._headerViews)if(i&&i.visible){const r=i.mh;i.resize(e,r).move(u,g),s-=r,g+=r,i.render(t)}o&&o.model.position()===Fl.AFTER&&i();let f=0;if(l=d,l){const t=l.mw;l.resize(t,s).move(e-t,g),this._scrollBarView.model().floating()||(f+=t)}if(l=this._indexBarView,l&&l.visible){const i=l.mw,r=l.mh;l.resize(i,r).move(e-f-i,(s-r)/2),l.render(t),this._indexBarView.model().floating()||(f+=i)}this._panelContainer.setBounds(0,g,e,s);const w=this.$_getPanelView(this._activePanel);if(w&&!w.animating()){const e=w.mw,s=w.mh;w.resize(e,s),this.$_movePanel(w),w.render(t)}const m=this._bodyView;m.resize(e,Math.max(0,s)).move(u,g),m.render(t),m.isEmpty()&&d&&(d.setVisible(!1),d=null),a&&(this.$_setScrollRate(a,r,n,!1),a.render(t)),d&&(this.$_setScrollBar(d,!1),d.render(t)),this._toolContainer.setBounds(0,0,e,c)}_doMeasureHorz(t,e,s){const i=this._owner,r=i.searchResult();let n,o=s,h=e,a=0,l=0,d=0,_=0;this.rightMargin=0;const c=this._scrollIndicatorView;c&&c.visible&&(n=c.measure(t,this,h,o),o-=n.height);const u=this._runPageNavigator;u&&u.vertical;const g=this._headerView;g&&g.visible&&(g.setLayout(g.model().layout()),a=g.measure(t,this,h,o).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(r),l=this._searchBarView.measure(t,this,h,o).height),this._searchResultView&&(this._searchResultView.setResult(r),this._searchResultView.visible&&(d=this._searchResultView.measure(t,this,h,o).height));const p=this._footerView;p&&p.visible&&(p.setLayout(p.model().layout()),_=p.measure(t,this,h,o).height),o-=a+l+d+_,this._scrollBarView&&this._scrollBarView.visible&&(n=this._scrollBarView.measure(t,this,h,o),this._scrollBarView.model().floating());const f=this.$_getPanelView(this._activePanel);return f&&!f.animating()&&f.measure(t,this,e,o),this._bodyView._searchResult=r,this._bodyView.measure(t,i,h,o),{width:e,height:s}}_doRenderHorz(t,e,s){const i=this.scrollPos(),r=this.scrollOff();let n,o=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,h=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,a=s,l=0;if(n=o,n){const t=n.mh;n.resize(e,t).move(0,l),s-=t,l+=t}if(n=this._footerView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,a-i),s-=i,a-=i,n.render(t)}if(n=this._searchResultView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,a-i),s-=i,a-=i,n.render(t)}if(n=this._headerView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,l),s-=i,l+=i,n.render(t)}if(n=this._searchBarView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,l),s-=i,l+=i,n.render(t)}if(n=h,n){const t=n.mh;n.resize(e,t).move(0,a-t),this._scrollBarView.model().floating()}const d=this._bodyView;d.resize(e,Math.max(0,s)).move(0,l),d.render(t),d.isEmpty()&&(o&&(o.setVisible(!1),o=null),h&&(h.setVisible(!1),h=null)),o&&(this.$_setScrollRate(o,i,r,!1),o.render(t)),h&&(this.$_setScrollBar(h,!1),h.render(t)),this._panelContainer.setBounds(0,l,e,s);const _=this.$_getPanelView(this._activePanel);if(_&&!_.animating()){const e=_.mw,s=_.mh;_.resize(e,s).move(0,0),_.render(t)}}_doAfterRender(){this._runPageNavigator=null,this._bodyView.checkItemViewOrders()}$_destroyPanel(t){if(t)return this._panelViews.splice(this._panelViews.indexOf(t),1),t.destroy()}$_getButtonPanel(t){const e=this._panelViews,s=t.getDisplay(this.isLandscape());let i=this._buttonPanelView;return i&&i.display()==s||(this.$_destroyPanel(i),i=aa.createView(this.doc,t,s),e.push(this._buttonPanelView=i)),i}$_getFormPanel(t){const e=this._panelViews;return this._formPanelView||e.push(this._formPanelView=new ha(this.doc,t)),this._formPanelView}$_getSearchPanel(t){const e=this._panelViews,s=t.getDisplay(this.isLandscape());let i=this._searchPanelView;return i&&i.display()==s||(this.$_destroyPanel(i),i=ua.createView(this.doc,t,s),e.push(this._searchPanelView=i)),i}$_getFilterPanel(t){const e=this._panelViews;return this._filterPanelView||e.push(this._filterPanelView=new Ta(this.doc,t)),this._filterPanelView}$_setScrollRate(t,e,s,i){if(t){const s=this._owner,r=this._bodyView,n=this._vertical;if(s.isSingleRow())t.updateRate(this._owner,e,1,1,i);else if(s.preMode()){const e=r.getPreLength(),s=r.itemLayerOff()+(n?r.height:r.width);t.setRate(s/e,i)}else{const n=r.lastItemView();if(n){const o=this._vertical?n.height:n.width,h=this._vertical?r.height-n.y:r.width-n.x;t.updateRate(s,e+r.itemViewCount()-1,o,h,i)}}}}$_getPageLen(t){const e=this._bodyView._itemPoints();let s=e.length-1;if(s>0){let i=s-t.scrollOff()/(e[1]-e[0]);return i-=(e[s]-(this._vertical?t.height:t.width))/(e[s]-e[s-1]),i}return 0}$_setScrollBar(t,e){if(t&&t.visible){const s=this._bodyView,i=s.scrollPos();if(s._preMode){const r=s.getPreLength(),n=s.getPrePos(i,s.scrollOff());t.setScroll(r,this._vertical?s.height:s.width,n,e)}else{const r=this._owner,n=r.isPaging()?r.pageSize():r.isGrouped()?r.groupModel().visItemCount():r.data().rowCount(),o=this._vertical?s.getItemView(0).height:s.getItemView(0).width,h=i+(s.itemViewCount()>0?s.scrollOff()/o:0),a=this.$_getPageLen(s);t.setScroll(n,a,h,e)}}}$_getPanelView(t){return this._panelViews,t instanceof eh?this.$_getButtonPanel(t):t instanceof sh?this.$_getFormPanel(t):t instanceof ih?this.$_getSearchPanel(t):t instanceof bh?this.$_getFilterPanel(t):void 0}$_movePanel(t){const e=this._panelContainer.width,s=this._panelContainer.height;let i=0,r=0;switch(t.model().getPosition()){case Uo.RIGHT:i=e-t.mw;break;case Uo.BOTTOM:r=s-t.mh;break;case Uo.CENTER:i+=(e-t.mw)/2,r+=(s-t.mh)/2;case Uo.LEFT:case Uo.TOP:}t.move(i,r)}$_hidePanel(t,e,s,i){function r(e){t.setVisible(!1),e._panelContainer.removeChild(t),e._activePanel=null,i&&i()}if(this._panelContainer.dom.style.pointerEvents="none",this.canAnimate()){const i=function(){switch(t.model().getPosition()){case Uo.CENTER:return[{opacity:"1"},{opacity:"0"}];case Uo.LEFT:return[{left:_e},{left:ae(-t.width)}];case Uo.RIGHT:return[{left:ae(e-t.width)},{left:ae(e)}];case Uo.BOTTOM:return[{top:ae(s-t.height)},{top:ae(s)}];case Uo.TOP:default:return[{top:_e},{top:ae(-t.height)}]}}(),n=t.dom.animate(i,{duration:Ed.PANEL_DURATION,fill:"backwards"});t.setAnimating(!0),n.addEventListener("finish",(()=>{t.setAnimating(!1),r(this)}))}else r(this)}$_showPanel(t,e,s,i){function r(t){i&&i()}if(this._activePanel=t.model(),this._panelContainer.dom.style.pointerEvents="auto",this._panelContainer.addChild(t),t.setVisible(!0),t.refresh(this,e,s),this.$_movePanel(t),this.canAnimate()){const i=function(){switch(t.model().getPosition()){case Uo.CENTER:return[{opacity:"0"},{opacity:"1"}];case Uo.LEFT:return[{left:ae(-t.width)},{left:_e}];case Uo.RIGHT:return[{left:ae(e)},{left:ae(e-t.width)}];case Uo.BOTTOM:return[{top:ae(s)},{top:ae(s-t.height)}];case Uo.TOP:default:return[{top:ae(-t.height)},{top:_e}]}}(),n=t.dom.animate(i,{duration:Ed.PANEL_DURATION,fill:"backwards"});t.setAnimating(!0),n.addEventListener("finish",(()=>{t.setAnimating(!1),r()}))}else r()}}Ed.CLASS_NAME="rtc-list-view",Ed.PANEL_DURATION=250;class $d extends $h{_doMeasure(t,e,s,i){super._doMeasure(t,e,s,i);const r=this._model;let n=s,o=i;return e.owner().fullMode()&&(e.isVertical()?(o=oe(r.fullModeHeight(),400),isNaN(r.fullModeWidth())||(n=r.fullModeWidth())):(n=oe(r.fullModeWidth(),300),isNaN(r.fullModeHeight())||(o=r.fullModeHeight()))),{width:n,height:o}}}class Ad extends $d{constructor(t){super(t,"rtc-loading-page")}}class Ld extends $d{constructor(t){super(t,"rtc-empty-page")}}const Td={vlinear:Xl,hlinear:Zl,vflex:Xl,hflex:Zl,frame:class extends Eo{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.forEach((t=>{t.prepareView(e)}))}},stack:class extends Eo{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this._model.getActiveChild(e,this._model.row);let i=this._visibles.find((t=>t.model().id()===s));i||(i=this._visibles.length>0?this._visibles[this._visibles.length-1]:null),this._visibles.forEach((t=>t._internalVisible(t===i))),i?(this._visibles=[this._childView=i],i.prepareView(e)):this._visibles=[]}},scroll:class extends Co{constructor(t,e){super(t,e)}scrollable(){return!0}_doInitContent(t,e){super._doInitContent(t,e),e.style.overflow="auto"}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.length>0&&this._visibles[0].prepareView(e)}_doLayoutContent(t,e,s){this._visibles.length>0&&this._visibles[0].applyMeasuredBounds()}_doMeasureLayout(t,e,s,i){return this._measureChildren(this._visibles,t,e,s,i,null),{width:s,height:i}}},form:ca,grid:class extends Co{constructor(t,e){super(t,e)}_getDisplayStyle(){return"grid"}_doLayoutContent(t,e,s){}_doMeasureLayout(t,e,s,i){this._measureChildren(this._visibles,t,e,s,i,null)}}};class kd extends We{constructor(t){super(t,!1,"rtc-search-field",Oe),this.setVisible(!1)}_doInitDom(t,e){["tl","tr","bl","br"].forEach((s=>{const i=t.createElement("span"),r={position:"absolute",width:"5px",height:"5px",borderStyle:"solid"},n=s.charAt(0),o=s.charAt(1);r[Be[n]+"Width"]="2px",r[Be[o]+"Width"]="2px","b"===n&&(r.bottom="0"),"r"===o&&(r.right="0"),Object.assign(i.style,r),e.appendChild(i)}))}}class Dd extends $r{constructor(t,e){super(t,!0,Dd.CLASS_NAME,Oe),this._layoutChanged=!1,this._body=e,this.setVisible(!1)}_doDestory(){this._body=null,super._doDestory()}_getContentPosition(){return"absolute"}_doPrepareRender(t,e){const s=e,i=this._model=s.current().attachedRow(),r=i.layout(),n=this.content;if(this._vertical=s.isVertical(),this.dom.dataset.dir=this._vertical?"v":"h",r)if(this._layoutChanged=!this._layout||r.layout.tid!==this._layout.tid,this._layout=r.layout,this._rowStyle=r.rowStyle,this._layoutChanged&&this._layoutView&&(n.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView)this._layoutView&&this._layoutView.refreshModels(this._layout);else{const e=this._body.listView();this._layoutView=e.createLayoutView(t,this._layout),this._layoutView.build(t,e),n.appendChild(this._layoutView.dom)}else this._layoutView&&(n.removeChild(this._layoutView.dom),this._layoutView=null);if(s.isDataAppending()&&i.indicatorVisible()){!this._indicator||this._indiSize===i.indicatorSize()&&this._indiType===i.indicatorType()||(Fe.hide(this._indicator),Fe.clearChildren(this._indicator)),this._indicator||(this._indicator=oi.create(t),this._indicator.style.position="absolute",this.appendDom(this._indicator));const e=this._indiSize=i.indicatorSize();Fe.show(this._indicator),Fe.resize(this._indicator,e,e),ai.render(t,this._indicator,{type:this._indiType=i.indicatorType(),itemCount:10,width:e,height:e})}else this._indicator&&(Fe.hide(this._indicator),this._indiSize=0)}_doApplyStyles(t){this._rowStyle&&(t=this.content.style,Object.assign(t,this._rowStyle.default))}_doMeasure(t,e,s,i){const r=this._model,n=this._padding=Fe.getPadding(this.dom),o=s,h=i,a=n.left+n.right,l=n.top+n.bottom;let d=0;if(s-=a,i-=l,this._indiSize>0&&(d=this._indiSize+2*r.indicatorMargin()),this._space=Math.max(0,oe(r.endSpace(),0)),this._vertical){let e=0;if(this._layoutView){const r=this._body.listView();this._layoutView.prepareLayout(t,r),this._layoutView._explicitWidth=s,e+=this._layoutView.measureLayout(t,r,s,i).height+l,s+=a}return e+=d+this._space,{width:o,height:e}}{let e=0;if(this._layoutView){const r=this._body.listView();this._layoutView.prepareLayout(t,r),this._layoutView._explicitHeight=i,e+=this._layoutView.measureLayout(t,r,s,i).width+a,i+=l}return e+=d+this._space,{width:e,height:h}}}_doRender(t,e,s){const i=this._padding,r=this._layoutView;if(e-=i.left+i.right,s-=i.top+i.bottom,this.setContentBounds(i.left,i.top,e,s),this._vertical){let s=0;r&&(r.resizeByMeasure().render(t),s+=r.height+i.top+i.bottom),this._indiSize>0&&this._indicator&&Fe.move(this._indicator,(e-this._indiSize)/2,s+this._model.indicatorMargin())}else{let e=0;r&&(r.resizeByMeasure().render(t),e+=r.width+i.left+i.right),this._indiSize>0&&this._indicator&&Fe.move(this._indicator,e+this._model.indicatorMargin(),(s-this._indiSize)/2)}}}Dd.CLASS_NAME="rtc-attached-row";class Nd extends We{_doInitDom(t,e){Object.assign(e.style,{width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"})}}class Pd extends $r{constructor(t,e){super(t,!1,Pd.CLASS_NAME,Oe),this._vertical=!0,this._rowViewPool=[],this._tableRowViewPool=[],this._rowViewMap={},this._touchedRow=-1,this._commandRow=-1,this._noCache=!1,this._positionsDirty=!1,this._arVis=!1,this._scrollPos=0,this._scrollOff=0,this._topRow=0,this._rowOffset=0,this._focusedRow=-1,this._rowEnded=!1,this._scrollEnded=!1,this._deletingRowIds=[],this.addChild(this._loadingView=new Ad(t)),this.addChild(this._emptyView=new Ld(t)),this.addChild(this._indentLayer=new We(t,!1,"rtc-indent-layer",Oe)),this.addChild(this._deletingLayer=new We(t,!1,"rtc-deleting-layer",Oe)),this.addChild(this._scrollLayer=new Vd(t,!1,"rtc-scroll-layer",Oe)),this._scrollLayer.addChild(this._itemLayer=new We(t,!1,"rtc-item-layer",Oe)),this._scrollLayer.addChild(this._itemSubLayer=new We(t,!1,"rtc-items-sub",Oe)),this._itemSubLayer.addChild(this._attachedView=new Dd(t,this)),this._itemSubLayer.addChild(this._searchFieldView=new kd(t)),this.addChild(this._maskLayer=new Nd(t,!1,"rtc-mask-layer",Oe)),this.addChild(this._feedback=new _a(t,!1,void 0,Oe)),this.addChild(this._toolLayer=new ze(t,!1,"rtc-tools",Oe)),this._itemLayer.moveY(0),this._itemSubLayer.moveY(0)}_setListView(t){this._listView=t}_doDestory(){this._focusView=this._focusView&&this._focusView.destroy(),this._selectionView=this._selectionView&&this._selectionView.destroy(),this._commandsView=this._commandsView&&this._commandsView.destroy(),super._doDestory()}listView(){return this._listView}owner(){return this._owner}isVertical(){return this._vertical}data(){return this._listView.data()}scrollPos(){return this._scrollPos}scrollOff(){return this._scrollOff}topRow(){return this._topRow}commandRow(){return this._commandRow}animating(){return!!this._rowAnimation}isRowEnded(){return this._rowEnded}isScrollEnded(){return this._scrollEnded}itemLayerOff(){return-this._itemLayer[this.POS]}length(){return this[this.SIZE]}isEmpty(){return this.itemViewCount()<1}rowOffset(){return this._rowOffset}canOffsetRow(){return this._table&&this._table.overWidth>0}getGroupIndent(t){return 0}addFeedback(t){this._toolLayer.appendDom(t)}indexOfRow(t){for(let e=0,s=this.itemViewCount();e<s;e++)if(this.getItemView(e).row()===t)return e;return-1}getRowView(t){return this._rowViewMap[this._dv.getRowId(t)]}getRenderer(t,e){let s;if(this._emptyView.visible)s=this._emptyView.simpleViewByDom(e,!0);else if(this._loadingView.visible)s=this._loadingView.simpleViewByDom(e,!0);else if(t>=0){s=this.getRowView(t).simpleViewByDom(e,!0)}return s&&s.renderer()}findSimpleLayoutView(t,e){var s;return null===(s=this.getRowView(t))||void 0===s?void 0:s.simpleViewByTag(e,!0)}findDom(t,e){return this.doc.getElementById(po.getDomId(t,NaN,e))}getRow(t){let e=t;for(;e;){if(e instanceof HTMLDivElement&&zo.isRowView(e)){const t=this._rowViewOfDom(e);if(t)return t.row();break}e=e.parentElement}}setTouchedRow(t){if(t!==this._touchedRow){if(this._touchedRow>=0){const t=this.getRowView(this._touchedRow);t&&t.setTouched(!1)}if(this._touchedRow=t,this._touchedRow>=0){const t=this.getRowView(this._touchedRow);t&&t.setTouched(!0)}}}scrollBy(t){const e=this.doc,s=this._vertical,i=this.width,r=this.height;let n;if((t>>=0)<0){if(0===this._scrollPos&&0===this._scrollOff)return this.$_scrollEnded(!1),"near";t=s?Math.min(r,-t):Math.min(i,-t),n=this._doScrollNear(e,this._scrollPos,this._scrollOff,t,i,r),n.pos<=0&&n.off<=0?this.$_scrollEnded(!1):this.$_removeEndEffect()}else if(t>0){if(this.isScrollEnded())return this.$_scrollEnded(!0),"far";t=s?Math.min(r,t):Math.min(i,t),n=this._doScrollFar(e,this._scrollPos,this._scrollOff,t,i,r),this._scrollEnded?this.$_scrollEnded(!0):this.$_removeEndEffect()}if(n)return this._scrollPos=n.pos,this._scrollOff=n.off,this._topRow=n.row,this._searchResult&&this.$_renderSearchField(this._searchResult),this.$_renderSelection(e,i,r),!0}resetRowOffset(t){return this._rowOffset=Math.max(0,Math.min(this._rowOffset,t))}setCommands(t,e,s){t<0||!e||e.length<1||this.control.silentLock((()=>{const i=this.getRowView(t);if(i){const r=this.doc,n=this._owner,o=n.isVertical(),h=i.getOffsetBounds(),a=n.commandBox().mode()===ta.SHIFT;let l=this._commandsView;if(this._commandRow=t,l||(l=this._commandsView=new Kh(r,n.commandBox()),this.addChild(this._commandsView)),l.visible=!0,l.setCommands(n.data(),t,e),l.measure(r,null,this.width,this.height),o?l.resize(l.mw,Math.max(h.height,l.mh)):l.resize(Math.max(h.width,l.mw),l.mh),l.render(r),o){const t=h.y+(this._itemLayer.y||0),e=h.x+h.width-l.mw+1,r=h.x-l.mw;l.move(e,t),this._commandPos=i.x,a&&i.move(r,t),s&&this.canAnimate()&&(this._commandsView.dom.animate([{left:h.x+h.width+"px"},{left:e+"px"}],{duration:150,fill:"none"}),a&&i.dom.animate([{left:h.x+"px"},{left:r+"px"}],{duration:150,fill:"none"}))}else{const t=h.x+(this._itemLayer.x||0),e=h.y+h.height-l.mh+1,r=h.y-l.mh;l.move(t,e),this._commandPos=i.y,a&&i.move(t,r),s&&this.canAnimate()&&(this._commandsView.dom.animate([{top:h.y+h.height+"px"},{top:e+"px"}],{duration:150,fill:"none"}),a&&i.dom.animate([{top:h.y+"px"},{top:r+"px"}],{duration:150,fill:"none"}))}}}))}clearCommands(t){if(this._commandRow>=0&&this._commandsView.visible)return this.control.silentLock((()=>{const t=this.getRowView(this._commandRow);this._commandsView.visible=!1,this._commandRow=-1,t&&(this._owner.isVertical()?t.moveX(this._commandPos):t.moveY(this._commandPos))})),!0}isCommandVisible(){var t;return null===(t=this._commandsView)||void 0===t?void 0:t.visible}focusedRowChanged(t,e){this._focusedRow=t}canMoveTo(t,e){return!0}_doInitStyle(t){t.overflow="hidden"}_doPrepareRender(t,e){if(e){const t=e.current(),s=e.isDataLoading(),i=this._vertical=e.isSingleRow()||e.isVertical();this._table=e.table(),this._startIndent=this.listView().startIndent(),this._endIndent=this.listView().endIndent(),this._preMode=e.preMode(),this._noCache=e.noCache(),this._owner=e,this._dv=e.data(),this.SIZE=i?"height":"width",this.MEASURE_SIZE=i?"mh":"mw",this.POS=i?"y":"x",this._arVis=t.attachedRow().visible(),this._positionsDirty=e.isDataChanged(),this._loadingView.setVisible(s&&!e.skeletonVisible)&&(this._loadingView._model=t.loadingPage()),this._emptyView.setVisible(!s&&e.shouldShowEmptyPage()&&0===this._deletingRowIds.length)&&(this._emptyView._model=t.emptyPage())}}_measureLayoutView(t,e,s,i,r,n,o){if(e.visible){const h=this._owner,a=s&&h.getTemplate(s)||ar.get(i),l=or.Instance.layoutFromTemplate(h.wrapperOrThis(),-1,!1,!1,a,r||{inflateParam:function(t,e,s){},inflateStock:function(t,e,s){}});e.setLayout(l);return e.measure(t,this._listView,n,o)}}_renderLayoutedView(t,e,s,i){if(e.visible)return e.resize(s,i),e.render(t),!0}_createRowAnimation(){let t;if(this._deletingRowIds.length>0){const e=this._deletingRowIds.sort(((t,e)=>t-e));t=this._createRowsDeleingAnimation(e),this._deletingRowIds=[]}else this._detailingRow>=0&&(t=this._owner.isRowDetailed(this._detailingRow)?new Od(this,this._detailingRow):new Bd(this,this._detailingRow),this._detailingRow=-1);return t}_doMeasure(t,e,s,i){this._rowAnimation&&(this._rowAnimation.stop(),this._rowAnimation=null),this._expWidth=this._vertical?s:NaN,this._expHeight=this._vertical?NaN:i;const r=this._owner.current();let n=this._measureLayoutView(t,this._loadingView,r.loadingPage().template(),"@it_loading_page",r.loadingPage(),s,i)||this._measureLayoutView(t,this._emptyView,r.emptyPage().template(),"@it_empty_page",r.emptyPage(),s,i);return n?(this.clearItemViews(),this._attachedView&&this._attachedView.setVisible(!1)):(this._rowAnimation=this._createRowAnimation(),this._searchFieldView.setVisible(this._searchResult&&this._searchResult.currentVisible),n=this._vertical?this._doMeasureVert(t,s,i):this._doMeasureHorz(t,s,i)),n}$_renderSelection(t,e,s){const i=this._owner.getSelection();let r=this._selectionView;i?(r||(r=this._selectionView=new Zh(t),this.addChild(r)),r.visible=!0,r.vertical=this._vertical,this._doRenderSelection(t,i,r,e,s)):r&&(r.visible=!1)}$_renderSearchField(t){const e=this._searchFieldView;if(e.visible)if(t.isEmpty())e.setVisible(!1);else{const s=t.getCurrrentField(),i=this.getRowView(s.row);if(i){const t=i.simpleViewByModel(s.layout,!0);if(t){const s=this.getClientRect(),i=t.getClientRect();e.setBounds(i.x-s.x-4,i.y-s.y-2,i.width+8,i.height+4)}else e.setVisible(!1)}else e.setVisible(!1)}}_doRender(t,e,s){this._renderLayoutedView(t,this._loadingView,e,s)||this._renderLayoutedView(t,this._emptyView,e,s)||(this._feedback.resize(e,s),this._vertical?this._doRenderVert(t,e,s):this._doRenderHorz(t,e,s),this._searchResult&&this.$_renderSearchField(this._searchResult),this.setFocusedRow(this._focusedRow)),this.$_renderSelection(t,e,s),this._toolLayer.setBounds(0,0,e,s)}setFocusedRow(t){const e=t>=0?this.getRowView(t):void 0;if(e){this._focusView||(this._focusView=new zl(this.doc)),this._maskLayer.addChild(this._focusView);const t=this._listView.focusMask,s=e.getBounds(),i=e.getNearIndent(t.nearIndent());s.x+=i,s.width-=i+e.getFarIndent(t.farIndent()),this._focusView.setRect(s)}else this._focusView&&this._focusView.remove()}resetFocusedView(){this.setFocusedRow(this._focusedRow)}_doAfterRender(){this._rowAnimation&&this._rowAnimation.start(),R.log("ROW VIEW POOL: ",this._rowViewPool.length)}_moveItemLayer(t){let e=this._vertical?"moveY":"moveX";this._itemLayer[e](t),this._itemSubLayer[e](t),this._deletingLayer[e](t)}_canShowAttached(t){return!t.isPaging()&&t.current().attachedRow().visible()}_measureAttached(t,e,s,i,r){const n=this._attachedView;if(this._canShowAttached(e)&&(n.setVisible(!0),n.measure(t,e,i,r).height>0))return n;n.setVisible(!1)}_getRowIndent(t){return 0}_getBodyIndent(t){return 0}_getBodyMargin(t){return 0}_prepareRowView(t,e,s){var i;const r=s.getRowLayout(e);t.setData("state",void 0),r.layout instanceof Ti&&(r.layout.setTable(this._table),t.setTable(this._table)),t.setLayout(r,s),t.indent=this._getRowIndent(t),t.bodyIndent=this._getBodyIndent(t),t.bodyMargin=this._getBodyMargin(t),t.alternate=e%2==1,t.rowState=s.data().internalRowState(e),t.detailed=s.isRowDetailed(e),t.checked=s.isRowChecked(e),t.selected=null===(i=s.getSelection())||void 0===i?void 0:i.isRowSelected(e),t.searched=s.isRowSearched(e)}_getRowView(t,e,s,i){const r=this._owner,n=this._rowViewMap,o=this._dv.internalRowId(e);let h=n[o];if(h)delete n[o];else{const s=r.getRowTemplate(e)instanceof bs,n=s?this._tableRowViewPool:this._rowViewPool;if(n.length>0){for(let t=n.length-1;t>0;t--)if(n[t]._rowid===o){h=n.splice(t,1)[0];break}h||(h=n.pop(),h._borrowed())}h||(h=this._createItemView(t,s)),i?this._itemLayer.insertBefore(h,i):this._itemLayer.addChild(h)}return h.setRow(this._dv,e,o,s),this._prepareRowView(h,e,r),h}_returnRowView(t){this._itemLayer.removeChild(t),delete this._rowViewMap[t._rowid],(t instanceof Rd?this._tableRowViewPool:this._rowViewPool).push(t),t._returned()}_returnRowViews(t,e){for(let s=t.length-1;s>=e;s--)this._returnRowView(t[s])}_resetRowViews(t){let e=this._rowViewMap;for(const t in e){const s=e[t];this._returnRowView(s)}e=this._rowViewMap={};for(const s of t)s instanceof Wo&&(e[s._rowid]=s)}_addRowView(t,e,s,i,r,n,o){const h=this._getRowView(t,e,s,i),a=h.bodyIndent+h.bodyMargin,l=h.measure(t,this._listView,n-a,o);return r?h.resize(Math.max(l.width,n-a),l.height):h.resize(l.width,o-a),h.render(t),h.setLayoutPos(this._rowOffset,this._startIndent-this._rowOffset),this._rowViewMap[h._rowid]=h,h}_createItemView(t,e){return e?new Rd(t):new zo(t)}_setScrollPos(t,e,s){this._scrollPos=t,this._scrollOff=e,this._topRow=s}$_addDeletingRows(t){this.canAnimate()&&(Array.isArray(t)?this._deletingRowIds=this._deletingRowIds.concat(t):this._deletingRowIds.push(t))}$_setDetailingRow(t){this._detailingRow=t}$_scrollEnded(t){this.$_showOverEffect(t?this._vertical?W.UP:W.RIGHT:this._vertical?W.DOWN:W.LEFT)}$_showOverEffect(t){this._owner.current().overScrollEffect(),this._feedback.showEndBalloon(function(t,e,s,i){return{x:t,y:e,width:s,height:i}}(0,0,this.width,this.height),t)}$_removeEndEffect(){this._owner.current().overScrollEffect(),this._feedback.removeEndBalloon()}}Pd.CLASS_NAME="rtc-body",Pd.DELETE_DURATION=300,Pd.DETAIL_DURATION=300;class Md extends xd{constructor(t,e){super(t);const s=t.isVertical(),i=e.sort(((t,e)=>t-e));this.SIZE=s?"height":"width",this.POS=s?"y":"x",this.MOVE=s?"moveY":"moveX",this._allViews=t.itemViews(),this.$_collectDeleted(i)}_doStart(){return this._doPrepare(),this._rowAni=to.create((t=>{this._doRun(t)}),((t,e)=>{}),Pd.DELETE_DURATION),!0}_doStop(){this._rowAni&&this.$_clear()}_doPrepare(){const t=this._bodyView,e=this.POS,s=this.SIZE,i=this._deletedViews,r=this._views=this._getItemViews(),n=r.slice(0),o=r.length>0?r[0][e]:0;let h=o,a=0;i.forEach((t=>t.rv.newPos=t.rv[e])),r.forEach((t=>t.newPos=t[e])),i.forEach((t=>{const e=t.rv.vindex(),s=n.findIndex((t=>t.vindex()===e));s>=0?n.splice(s,0,t.rv):n.length>0&&e>n[n.length-1].vindex()&&n.push(t.rv)})),n.forEach((t=>{t.oldPos=h,h+=t[s],a+=t[s]})),t.isScrollEnded()&&a>t[s]&&(h=a-t[s]+o,r.forEach((t=>{t.oldPos-=h})))}_preparePre(){const t=this.POS,e=this._allViews,s=this._deletedViews,i=this._views=this._getItemViews();let r=0;e.forEach((t=>{t.oldPos=r,r+=t.height})),s.forEach((e=>{e.rv.newPos=e[t]})),i.forEach((e=>{e.newPos=e[t]}))}_doRun(t){const e=this.MOVE;this._views.forEach((s=>{s[e](s.oldPos+(s.newPos-s.oldPos)*t)}))}$_collectDeleted(t){const e=this._bodyView.isVertical(),s=this._bodyView._rowViewMap,i=this._bodyView._deletingLayer,r=this._deletedViews=[],n=e?this._bodyView.width:this._bodyView.height;for(const o of t){const t=s[o];if(t){const h={};h[e?"left":"top"]=[_e,ae(-n)],h[e?"height":"width"]=[ae(e?t.height:t.width),_e];const a=t.dom.animate(h,{duration:Pd.DELETE_DURATION,fill:"none"}),l={rv:t,ani:a};a.addEventListener("finish",(()=>{i.removeChild(t)})),a.addEventListener("cancel",(()=>{i.removeChild(t)})),r.push(l),l.rv.aniTag=e?l.rv.height:l.rv.width,i.addChild(l.rv),delete s[o]}}r.sort(((t,e)=>t.rv.row()-e.rv.row()))}$_clear(){const t=this._bodyView._rowViewPool,e=this._bodyView._deletingLayer,s=this._deletedViews;if(s)for(let i=s.length-1;i>=0;i--){const r=s[i];r.ani=Fe.stopAnimation(r.ani),e.removeChild(r.rv),t.push(r.rv),s.splice(i,1)}this._rowAni=p.destroy(this._rowAni)}}class Id extends xd{constructor(t,e){super(t),this._rowView=t.getRowView(e),this._oldHeight=this._rowView.height}_doStart(){const t=this._rowView.bottom()-this._bodyView.height;return this._ani=this._createAnimation(),this._moveOthers(this.$_collectOtherViews(),this._rowView.height-this._oldHeight),t>0&&this._bodyView._owner.scrollBy(t),!0}_doStop(){this._ani=Fe.stopAnimation(this._ani),this._rowView=null}$_collectOtherViews(){const t=this._bodyView.isVertical(),e=[],s=this._rowView.row(),i=this._bodyView,r=i.itemViewCount(),n=i.indexOfRow(s);if(n>=0&&n+1<r)for(let s=n+1;s<r;s++){const r=i.getItemView(s);e.push(r),r.aniTag=t?r.y:r.x}return e}}class Od extends Id{_createAnimation(){const t=this._rowView.height;return this._rowView.dom.animate([{height:this._oldHeight+"px"},{height:t+"px"}],{duration:Pd.DETAIL_DURATION,fill:"none"})}_moveOthers(t,e){this._moveAni=to.create((s=>{t.forEach((t=>this._doStep(t,e,s)))}),((t,e)=>{this._bodyView.control.invalidateLayout()}),Pd.DETAIL_DURATION)}_doStep(t,e,s){t.moveY(t.aniTag-e+e*s)}_doStop(){this._moveAni=p.destroy(this._moveAni),super._doStop()}}class Bd extends Od{}class Fd extends Ed{get startCol(){return this._startCol}get endCol(){return this._endCol}canMoveSingle(t,e){return this._bodyView.canMoveSingle(t,e)}_createBodyView(t,e,s){const i=this._owner.fullMode();return e?s?new zd(t,i):new qd(t,i):s?new zd(t,i):new Wd(t,i)}_measureTable(t,e,s){super._measureTable(t,e,s);const i=t._internalColumns(),r=i.length,n=this._bodyView.rowOffset();let o=oe(this.reqRowOffset,n);if(isNaN(o)||(o=this._bodyView.resetRowOffset(t.overWidth)),t.rowHeightsFixed()){this._startCol=0,this._endCol=r-1;let e=0,s=0;for(;e<r;){if(s+i[e]._runWidth>=o){this._startCol=e;break}e++}for(;e<r;){if(s+=i[e]._runWidth,s>t.viewWidth){this._endCol=e;break}e++}}}_doMeasure(t,e,s,i){const r=this.headerView(),n=this.footerView(),o=this._owner,h=o.data(),a=this.renderInfo();return this.reqScrollPos=a&&h?Math.max(0,Math.min(o.getRowCount()-1,a.scrollPos)):0,this.reqScrollOff=a?a.scrollOff:0,this.reqRowOffset=a?a.rowOffset:NaN,o.isSingleRow()&&h?(r&&r.model().setTopRow(this.reqScrollPos),n&&n.model().setTopRow(this.reqScrollPos)):(r&&r.model().setTopRow(NaN),n&&n.model().setTopRow(NaN)),this._bodyView._expander=o.groupExpander(),super._doMeasure(t,e,s,i)}}let Hd=class extends Md{_getItemViews(){return this._bodyView._internalRowViews()}};class Wd extends Pd{constructor(){super(...arguments),this._rowViews=[],this._rowPts=[0],this._singleMode=!1,this.singleMoving=!1}_internalRowPoints(){return this._rowPts}singleView(){return this._singleView}spareSingleView(){return this._spareSingleView||(this._spareSingleView=this.$_createSingleView(this.doc,!0)),this._spareSingleView}canMoveSingle(t,e){if(this._singleMode){const s=this.owner(),i=this._singleView.row(),r=s.getRowCount();if(t>0){if(i>0)return!0;e&&this.$_showOverEffect(W.LEFT)}else if(t<0){if(i<r-1)return!0;e&&this.$_showOverEffect(W.RIGHT)}}}rowViewAt(t){return this._rowViews[t]}_internalRowViews(){return this._rowViews}bottomRow(){return this._topRow+this._rowPts.length-1}isEmpty(){return!this._singleMode&&this._rowPts.length<2}itemViewCount(){return this._rowPts.length-1}_itemPoints(){return this._rowPts}rowViewCount(){return this._rowPts.length-1}lastItemView(){return this._rowViews[this._rowViews.length-1]}getItemViewPoints(){return this._rowPts.slice(0)}itemViews(){return this._rowViews.slice(0)}getItemView(t){return this._rowViews[t]}itemViewAt(t,e,s){const i=this._vertical?e:t,r=this._rowPts;for(let t=0,e=r.length-1;t<e;t++)if(s>0&&(s=Math.min((r[t+1]-r[t])/2,s)),i>=r[t]+s&&i<r[t+1]-s)return this._rowViews[t]}getRowView(t){return this._singleMode?t===this._singleView.row()?this._singleView.rowView():null:super.getRowView(t)}getPreLength(){return this._rowPts[this._rowPts.length-1]+(this._attachedView.visible?this._attachedView[this.SIZE]:0)}getPrePos(t,e){return this._rowPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){if(this._singleMode)return this._singleView.rowView().isDom(t)?this._singleView.rowView():null;for(const e of this._rowViews)if(e.isDom(t))return e}validateViews(){const t=this._listView.owner(),e=this.height,s=this._rowViews,i=this._rowViewMap,r=this._rowPts,n=r.length;if(r.length!==s.length+1)throw`Invalid length: ${r.length}, ${s.length}`;if(0!==s.length){if(s[0].row()!==t.getRowAt(this.scrollPos()))throw`Invalid top index: ${this.scrollPos()}, ${s[0].row()}`;s.forEach((t=>{if(!i[t._rowid])throw`Invalid map: ${t.row()} is not in view map.`}));for(let t in i)if(!s.find((e=>e._rowid===+t)))throw`Invalid map: ${t} is not in view array.`;if(-r[0]!==this.scrollOff())throw`Invalid start: ${r[0]}, ${this.scrollOff()}`;for(let t=1;t<n;t++)if(r[t]<0||r[t]<=r[t-1])throw`Invalid pos: ${t}, ${r[t]}`;for(let t=1;t<n-1;t++)if(r[t]>e)throw`Invalid end pos: ${t}, ${r[t]}`;if(r[n-1]<e&&0!==r[0])throw`Invalid first pos: ${r[0]}`;r[0];for(let t=0;t<n-1;t++){const e=r[t+1]-r[t];if(e!==s[t].height)throw`Invalid height: ${t}, ${e}, ${s[t].height}`}}}$_createSingleView(t,e){return new Ud(t,this,this._owner.current().singleRow(),e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._indentLayer.setVisible(!1),this._singleMode=e&&e.isSingleRow(),e&&(this._singleMode?(this._singleView||this.insertBefore(this._singleView=this.$_createSingleView(t,!1),this._feedback),this._singleView.setVisible(!0)):this._singleView&&(this._singleView.setVisible(!1),this._spareSingleView&&this._spareSingleView.setVisible(!1)))}$_clearRowViews(){this._itemLayer.clear(),this._returnRowViews(this._rowViews,0),this._rowViews=[],this._rowViewMap={}}clearItemViews(){this.$_clearRowViews()}_measureSingle(t,e,s){const i=this._listView,r=i.reqScrollPos,n=i.reqScrollOff;this.$_clearRowViews(),this._setScrollPos(r,n,r),this._prepareRowView(this._singleView.rowView(),r,this._owner);const o=this._singleView.measure(t,this._owner,e,s);return this._singleView.mh=o.height,o}setSingleRow(t,e,s){e>=0&&this._prepareRowView(t.rowView(),e,this._owner),t.setRow(e,s)}_doMeasureVert(t,e,s){if(this._singleMode)return this._expWidth=e,this._expHeight=NaN,this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[];let h,a=i.reqScrollPos,l=i.reqScrollOff,d=a,_=s+l,c=0;for(;_>0&&d<n;){const n=r.getRowAt(d),h=this._getRowView(t,n,null,null),a=h.measure(t,i,e,s);o.push(h),_-=a.height,c=Math.max(c,a.width),d++}if(d===n&&_>0&&(h=this._measureAttached(t,r,!0,e,_))&&(_-=h.mh),_>0)for(l>0&&(_>l?(_-=l,l=0):(l-=_,_=0));a>0&&_>0;){const n=this._getRowView(t,r.getRowAt(a-1),null,null),h=n.measure(t,i,e,s);o.unshift(n),_>=h.height?_-=h.height:(l=h.height-_,_=0),c=Math.max(c,h.width),a--}return o.length>0?(this._setScrollPos(a,l,o[0].row()),!r.isPaging()&&I(o[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:c,height:s-_}}_doMeasureHorz(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner();let n=i.reqScrollPos,o=i.reqScrollOff;const h=r.getRowCount(),a=this._rowViews=[];let l,d=n,_=e+o,c=0;for(;_>0&&d<h;){const n=r.getRowAt(d),o=this._getRowView(t,n,null,null),h=o.measure(t,i,e,s);a.push(o),_-=h.width,c=Math.max(c,h.height),d++}if(d===h&&_>0&&(l=this._measureAttached(t,r,!0,_,s))&&(_-=l.mw),_>0)for(o>0&&(_>o?(_-=o,o=0):(o-=_,_=0));n>0&&_>0;){const h=this._getRowView(t,r.getRowAt(n-1),null,null),l=h.measure(t,i,e,s);a.unshift(h),_>=l.width?_-=l.width:(o=l.width-_,_=0),c=Math.max(c,l.height),n--}return a.length>0?(this._setScrollPos(n,o,a[0].row()),!r.isPaging()&&a.length>0&&I(a[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:e-_,height:c}}_doRenderVert(t,e,s){if(this._singleMode){const i=Math.max(s,this._singleView.mh);this._singleView.resize(e,i),this._singleView.move(0,-this._scrollOff),this._singleView.render(t)}else this._renderVert(t,this.scrollOff(),e,s),this._resetRowViews(this._rowViews)}_doRenderHorz(t,e,s){if(this._singleMode){const i=Math.max(e,this._singleView.mw);this._singleView.resize(i,s),this._singleView.move(-this._scrollOff,0),this._singleView.render(t)}else this._renderHorz(t,this.scrollOff(),e,s),this._resetRowViews(this._rowViews)}_doAfterRender(){if(this._singleMode)this._singleView._doAfterRender();else{super._doAfterRender();if(this._table){let t=this._rowOffset;if(!isNaN(t)){const e=this.listView().startIndent()-t;this._rowViews.forEach((s=>{s.setLayoutPos(t,e)}))}}}}_doRenderSelection(t,e,s,i,r){let n=e.start,o=e.end;const h=this.topRow(),a=this.rowViewCount();if(s.visible=n<h+a&&o>=h){n-=h,o-=h;const a=oe(this._rowPts[n],-20),l=oe(this._rowPts[o+1]-a,(this._vertical?r:i)+20);this._vertical?(s.measure(t,e,i,l),s.move(0,a).resize(i,l)):(s.measure(t,e,l,r),s.move(a,0).resize(l,r)),s.render(t)}}_doScrollNear(t,e,s,i,r,n){const o=this._listView.owner(),h=this._vertical,a=this._rowViews;let l,d=e,_=s;for(_>0&&(i>_?(i-=_,_=0):(_-=i,i=0));i>0&&d>0;){const e=a.length>0?a[0]:null;l=this._addRowView(t,o.getRowAt(--d),null,e,h,r,n),a.unshift(l),(i-=h?l.height:l.width)<=0&&(_=-i)}for(h?this._renderVert(t,_,r,n,!1,!1):this._renderHorz(t,_,r,n,!1,!1);a.length>1;){const t=a[a.length-1];if(!(t.y>=n))break;x.debugging(),this._returnRowView(t),a.pop(),this._rowPts.pop()}return a.length>0?{pos:d,off:_,row:a[0].row()}:{pos:0,off:0,row:-1}}$_scrollSingle(t){const e=this._singleView.height-this.height;let s=this._scrollOff;return t>>=0,s=Math.min(e,Math.max(0,s+t)),this._singleView.moveY(-s),this._scrollOff=s,s<=0&&t<0?(this.$_scrollEnded(!1),"near"):s>=e&&t>0?(this.$_scrollEnded(!0),"far"):0!==t}scrollBy(t){return this._singleMode?this.$_scrollSingle(t):super.scrollBy(t)}_doScrollFar(t,e,s,i,r,n){const o=this._listView.owner(),h=o.getEndRow(),a=this._vertical,l=this._rowViews,d=this._arVis,_=this._attachedView;let c=_.visible?a?_.height:_.width:0;const u=this._rowPts,g=a?n:r;let p,f,w=!1,m=l[l.length-1];I(!!m,"data가 없는데 스크롤이 될려고 했다. 원인을 찾아야 한다.");let y=m.row(),b=u[u.length-1]-g;const v=i;for(I(b>=0||_.visible,"lastOff 가 0보다 작으면 스크롤할게 없다 이쪽으로 들어오는게 이상하다.");i>0&&y<h&&v>b;){const e=this._addRowView(t,o.getRowAt(++y),null,null,a,r,n);l.push(e),i-=e[this.SIZE]}if(i>0&&y===h&&(()=>{if(d&&!_.visible&&!o.isPaging())return _.setVisible(!0),c=_.measure(t,o,r,n)[this.SIZE],w=!0,!0})()&&(i-=c),i<0||y!==h){let t=1;for(;t<u.length-1;){if(u[t]-v>0){t--;break}t++}l.splice(0,t).forEach((t=>this._returnRowView(t))),f=v-u[t]}else{let t=c,e=l.length;for(;t<g&&e>0;)t+=l[--e][this.SIZE];l.splice(0,e).forEach((t=>this._returnRowView(t))),f=t-g}return p=l[0].row(),a?this._renderVert(t,f,r,n,!1,w):this._renderHorz(t,f,r,n,!1,w),{pos:p,off:f,row:l.length>0?l[0].row():-1}}_createRowsDeleingAnimation(t){return new Hd(this,t)}isRowVisible(t,e){let s=t>=this._scrollPos&&t<this._scrollPos+this._rowViews.length;if(e){const e=this._rowPts,s=t-this._scrollPos;if(0===s)return e[0]>=0;const i=this._rowViews[s];return i&&this._vertical?i.y+i.height<=this.height:i.x+i.width<=this.width}return s}makeRowVisible(t){if(this._singleMode)return;const e=this._owner.isPaging()?this._owner.pageModel().startRow():0,s=t-e;let i=this._scrollPos,r=this._scrollOff;if(s===i){if(r>0)return{pos:t,off:0}}else{if(s<i)return{pos:t,off:0};if(s===i+this._rowViews.length-1){const n=this._vertical?this.height:this.width,o=this._rowPts,h=s-i+1;let a=o[h]-n;if(a>0){let t=0;for(;t<h&&a>0;){const e=o[t+1]-o[t];if(e>a){r+=a;break}e>=a&&(i++,r=0,a-=e),t++}}return{pos:i+e,off:i===t?0:r}}if(s>=i+this._rowViews.length)return this._vertical?this.$_pullUpVert(t):this.$_pullUpHorz(t)}}$_pullUpVert(t){let e=this.height;const s=this.doc,i=this._listView,r=i.owner(),n=r.data(),o=this.width,h=this.height,a=this._createItemView(s,null);let l=t;for(this._itemLayer.addChild(a);l>=0;){a.setRow(n,l,n.getRowId(l),null),this._prepareRowView(a,l,r);if(e-=a.measure(s,i,h,o).height,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(a),{pos:l,off:0}}$_pullUpHorz(t){let e=this.width;const s=this.doc,i=this._listView,r=i.owner(),n=r.data(),o=this.width,h=this.height,a=this._createItemView(s,null);let l=t;for(this._itemLayer.addChild(a);l>=0;){a.setRow(n,l,n.getRowId(l),null),this._prepareRowView(a,l,r);if(e-=a.measure(s,i,h,o).width,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(a),{pos:l,off:0}}scrollToEnd(t){const e=this._listView,s=e.owner(),i=this.doc,r=this._vertical,n=this._rowViews=[],o=this.width,h=this.height;let a=r?h:o,l=0;const d=t<0&&this._measureAttached(i,s,r,o,h);for(d&&(a-=r?d.mh:d.mw),t=t<0?s.getEndRow():t;t>=0;){const s=this._getRowView(i,t,null,null),r=s.measure(i,e,o,h);if(n.unshift(s),a-=r[this.SIZE],a<=0){l=-a;break}t--}this._setScrollPos(t,l,t),r?this._renderVert(i,l,o,h,!0,!!d):this._renderHorz(i,l,o,h,!0,!!d),this._resetRowViews(this._rowViews)}rowOffsetBy(t){const e=this._table;if(e){if((t>>=0)>0){if(0===e.overWidth)return this.$_showOverEffect(W.LEFT),"far"}else if(0===e.overWidth)return this.$_showOverEffect(W.RIGHT),"near";try{let s=Math.max(0,Math.min(this._rowOffset+t,e.overWidth));if(s!==this._rowOffset)return this._rowOffset=s,s=this.listView().startIndent()-this._rowOffset,this._rowViews.forEach((t=>{t.setLayoutPos(this._rowOffset,s)})),!0}finally{0===this._rowOffset?this.$_showOverEffect(W.LEFT):this._rowOffset>=e.overWidth&&this.$_showOverEffect(W.RIGHT)}}}checkItemViewOrders(){const t=Array.from(this._itemLayer.dom.children);if(t.length>1)for(let e=1;e<t.length;e++);}$_checkPositions(){if(this._positionsDirty){this._rowViews.length,this._positionsDirty=!1}}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._arVis,h=this._attachedView,a=this._rowViews,l=this._commandRow,d=a.length,_=this._rowPts=[-e];let c=_[0],u=0;for(this.$_checkPositions();u<d&&c<i;){const e=a[u++],s=e.mh;e.isRow(l)?e.moveY(c):e.move(0,c),r&&e.resize(e.mw,s).render(t),c+=s,_.push(c)}this._returnRowViews(a,u),a.length=u,h.visible?c>=i?h.setVisible(!1):(h.move(0,c),n&&h.resize(s,h.mh).render(t),c+=h.mh):o&&(c<i?x.debugging():c++),this._rowEnded=0===a.length||a[a.length-1].row()-this._owner.pageOff()==this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&c<=i}_renderHorz(t,e,s,i,r=!0,n=!0){const o=this._owner.pageOff(),h=this._arVis,a=this._attachedView,l=this._rowViews,d=this._commandRow,_=l.length,c=this._rowPts=[-e];let u=c[0],g=0;for(this.$_checkPositions();g<_&&u<s;){const e=l[g++],s=e.mw;e.isRow(d)?e.moveX(u):e.move(u,0),r&&e.resize(s,i).render(t),u+=s,c.push(u)}this._returnRowViews(l,g),l.length=g,a.visible?u>=s?a.setVisible(!1):(a.move(u,0),n&&a.resize(a.mw,i).render(t),u+=a.mw):h&&(u<s?x.debugging():u++),this._rowEnded=0===l.length||l[l.length-1].row()-o==this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&u<=s}}class zd extends Wd{constructor(){super(...arguments),this._page=-1}get page(){return this._page}setPage(t,e,s){if(s||t!==this._page){const s=this.doc;this._page=t,t>=0&&(this.measure(s,e.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(s))}}scrollPos(){return 0}scrollOff(){return 0}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner(),n=this._page,o=r.getPageRows(n),h=o.length,a=this._rowViews=[];let l=0,d=s,_=0;for(;d>0&&l<h;){const r=o[l],n=this._getRowView(t,r,null,null),h=n.measure(t,i,e,s);a.push(n),d-=h.height,_=Math.max(_,h.width),l++}return{width:_,height:s-d}}}class Gd extends zo{isFixedWidth(){return!0}_prepareRowBorder(t,e){}}class Ud extends $r{constructor(t,e,s,i){super(t,!1,Ud.CLASS_NAME,Oe),this._requestRow=-1,this._row=-1,this._dimmed=0,this._model=s,this._bodyView=e,this._spare=i,this.addChild(this._rowView=new Gd(t)),this._prevView=new zo(t),this._nextView=new zo(t),this.appendDom(this._mask=t.createElement("div")),Object.assign(this._mask.style,{width:"100%",height:"100%",background:"#333",opacity:"0",pointerEvents:"none"})}_doDestory(){super._doDestory(),this._bodyView=null}isSpare(){return this._spare}row(){return this._row}setRow(t,e){if(t!==this._row&&t>=0){const s=this.doc;e=e||this,this._requestRow=t,this.measure(s,e._bodyView.owner(),e.width,e.height),this.move(e.x,e.y),this.resize(e.width,e.height),this.render(s)}}rowView(){return this._rowView}getRow(t){const e=this._rowView;if(e&&e.containsDom(t))return{dv:e._dv,row:e.row()}}isRowEnded(){return!this._rowView||this._rowView.row()===this._bodyView.owner().getRowCount()-1}scrollBy(t){return t>0?"near":t<0?"far":void 0}setDimmed(t){this._model.maskEffect()&&t!==this._dimmed&&(this._dimmed=t,this.dom.style.opacity=t>0?Math.max(.3,1-t)+"":"",this._mask.style.opacity=t>0?t+"":"0")}_doPrepareRender(t,e){const s=this._row=this._requestRow>=0?this._requestRow:this._bodyView.listView().reqScrollPos,i=e.data(),r=e.getRowLayout(s),n=this._rowView;n.setRow(i,s,i.getRowId(s),null),n.setLayout(r,e),this._requestRow=-1}_doMeasure(t,e,s,i){return e.isVertical()?this._doMeasureVert(t,s,i):this._doMeasureHorz(t,s,i)}_doRender(t,e,s){return this._bodyView.owner().isVertical()?this._doRenderVert(t,e,s):this._doRenderHorz(t,e,s)}_doAfterRender(){}_doMeasureVert(t,e,s){return this._rowView.measure(t,this._bodyView.listView(),e,s)}_doMeasureHorz(t,e,s){return this._doMeasureVert(t,e,s)}_doRenderVert(t,e,s){this._rowView.setWidth(e),this._rowView.render(t),this._rowView.setFillHeight(this._model.fillHeight())}_doRenderHorz(t,e,s){this._doRenderVert(t,e,s)}}Ud.CLASS_NAME="rtc-single-body";let jd=class extends Hd{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);this._bodyView._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}};class qd extends Wd{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[],h=this._rowPts=[0];let a,l=i.reqScrollPos,d=i.reqScrollOff,_=0,c=0,u=0;for(;_<n;){const n=r.getRowAt(_),a=this._getRowView(t,n,null,null),l=a.measure(t,i,e,s);o.push(a),c+=l.height,h.push(c),u=Math.max(u,l.width),_++}if((a=this._measureAttached(t,r,!0,e,c))&&(c+=a.mh),o.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(l,d),s);this._setScrollPos(t.pos,t.off,o[t.pos].row())}}else this.$_scrollTo(0,s),this._setScrollPos(0,0,-1);return{width:u,height:c}}_doMeasureHorz(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[],h=this._rowPts=[0];let a,l=i.reqScrollPos,d=i.reqScrollOff,_=0,c=0,u=0;for(;_<n;){const n=r.getRowAt(_),a=this._getRowView(t,n,null,null),l=a.measure(t,i,e,s);o.push(a),c+=l.width,h.push(c),u=Math.max(u,l.height),_++}if((a=this._measureAttached(t,r,!1,e,s))&&(c+=a.mw),o.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(l,d),e);this._setScrollPos(t.pos,t.off,o[t.pos].row())}}else this.$_scrollTo(0,e),this._setScrollPos(0,0,-1);return{width:c,height:u}}_doScrollNear(t,e,s,i,r,n){const o=this.$_scrollBy(-i);return{pos:o.pos,off:o.off,row:o.row}}_doScrollFar(t,e,s,i,r,n){const o=this.$_scrollBy(i);return{pos:o.pos,off:o.off,row:o.row}}scrollToEnd(t){if(t<0){const t=this._listView.owner(),e=this.doc,s=this._vertical,i=this.width,r=this.height,n=this._measureAttached(e,t,s,i,r);n&&(n.resize(s?i:n.mw,s?n.mh:r),n.render(e))}const e=this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE]);this._setScrollPos(e.pos,e.off,e.row)}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._attachedView,h=this._rowViews,a=this._commandRow,l=h.length;let d=0,_=0;for(;_<l;){const e=h[_++];e.isRow(a)?e.moveY(d):e.move(0,d),r&&e.resizeByMeasure().render(t),d+=e.mh}o.visible&&(o.move(0,d),n&&o.resize(s,o.mh).render(t),d+=o.mh),this.$_checkEnded()}_renderHorz(t,e,s,i,r=!0,n=!0){const o=this._attachedView,h=this._rowViews,a=this._commandRow,l=h.length;let d=0,_=0;for(s=Number.MAX_SAFE_INTEGER;_<l&&d<s;){const e=h[_++];e.isRow(a)?e.moveX(d):e.move(d,0),r&&e.resizeByMeasure().render(t),d+=e.mw}o.visible&&(o.move(d,0),n&&o.resize(o.mw,i).render(t),d+=o.mw),this.$_checkEnded()}_createRowsDeleingAnimation(t){return new jd(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(t,e){const s=this._rowViews,i=this.MEASURE_SIZE;let r=0;for(let e=0;e<t;e++)r+=s[e][i];return r+=e,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(t,e){const s=this._rowViews,i=this.MEASURE_SIZE,r=s.length;if(r>0){const n=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,o=this._rowPts,h=o[r]+n;e=oe(e,this[this.SIZE]);let a=r-1,l=0,d=t=Math.max(0,Math.min(t,h-e)),_=0,c=0;for(;c<r;){const t=s[c][i];if(t>d){a=c,l=d,_+=l;break}d-=t,_+=t,c++}if(d=h-o[a]-l,d<e)if(d=e-d,l>=d)l-=d,_-=d;else for(;a>0&&d>0;){const t=s[--a][i];d>t?(d-=t,_-=t,l=0):(l=d,_-=d,d=0)}return this._moveItemLayer(-_),this.$_checkEnded(),{pos:a,off:l,row:s[a].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){const t=this._rowPts,e=t.length-1;if(e>0){const s=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,r=t[e]+i,n=-this._itemLayer[this.POS];this._rowEnded=t[e-1]-n<=s,this._scrollEnded=r-n<=s}else this._rowEnded=this._scrollEnded=!0}}class Yd extends Ed{clickItem(t){this._bodyView.$_clickItem(t)}makeItemVisible(t){return this._bodyView.makeItemVisible(t.index)}_createBodyView(t,e,s){return s?new Kd(t,this._owner.fullMode()):e?new i_(t,this._owner.fullMode()):new Xd(t,this._owner.fullMode())}_doPrepareRender(t,e){this._bodyView._expander=this._owner.dataExpander(),this._bodyView.setTheme(this._owner),super._doPrepareRender(t,e)}rowBorderVisible(t){if(super.rowBorderVisible(t))return!t._groupLast||!this._owner.rowBorder.skipGroupLast}keepSelectInfo(t){t?(this._keepSelectStart=t.start,this._keepSelectEnd=t.end):this._keepSelectStart=this._keepSelectStart=null}getSelectInfo(){return{start:this._keepSelectStart,end:this._keepSelectEnd}}}class Qd extends Md{_getItemViews(){return this._bodyView._internalItemViews()}}class Zd extends zo{}class Xd extends Pd{constructor(){super(...arguments),this._headerPool=[],this._headerPoolMap={},this._headerMap={},this._footerPool=[],this._footerPoolMap={},this._footerMap={},this._itemViews=[],this._itemPts=[0],this._rowCount=0}_internalItemViews(){return this._itemViews}_internalItemPoints(){return this._itemPts}getGroupItem(t){const e=this._headerMap;for(const s in e)if(e[s].isView(t))return e[s].model();const s=this._footerMap;for(const e in s)if(s[e].isView(t))return s[e].model()}$_clickItem(t){t instanceof Xe&&this.$_clickHeader(t)}$_clickHeader(t){if(t){switch(this.owner().current().rowGroup().header().clickAction()){case je.EXPAND:this.owner().groupModel().toggle(t.group,!1);case je.COMMAND:}return!0}}bottomRow(){return this._topRow+this._rowCount-1}itemViewCount(){return this._itemPts.length-1}_itemPoints(){return this._itemPts}rowViewCount(){return this._rowCount}getItemViewPoints(){return this._itemPts.slice(0)}itemViews(){return this._itemViews.slice(0)}getItemView(t){return this._itemViews[t]}itemViewAt(t,e,s){const i=this._itemPts;for(let t=0,r=i.length-1;t<r;t++)if(e>=i[t]+s&&e<i[t+1]-s)return this._itemViews[t]}lastItemView(){return this._itemViews[this._itemViews.length-1]}getPreLength(){return this._itemPts[this._itemPts.length-1]}getPrePos(t,e){return this._itemPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){for(const e of this._itemViews)if(e instanceof zo&&e.isDom(t))return e}validateViews(){this.height;const t=this._itemViews;this._rowViewMap,this._headerMap,this._footerMap;const e=this._itemPts;if(e.length,e.length!==t.length+1)throw`Invalid length: ${e.length}, ${t.length}`}$_itemCount(t){return this._pageItems?this._pageItems.length:t.visItemCount()}$_getItem(t,e){return this._pageItems?this._pageItems[e]:t.getVisItem(e)}_createItemView(t,e){return e?new Rd(t):new Zd(t)}_getGroupOptions(t){return t.current().rowGroup()}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}getGroupIndent(t){return this._theme.getGroupIndent(t.groupModel())}rowOffsetBy(t){}clearItemViews(){this._itemLayer.clear(),this._itemViews.forEach((t=>this.$_returnItemView(t))),this._itemViews=[],this._rowViewMap={}}setTheme(t){this._options=this._getGroupOptions(t),this._theme=this._options.getTheme().prepareRender()}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._indented=this._theme.bodyIndented(),this._indentLayer.setVisible(this._indented),this._indentLayer.setData("theme",this._theme.type()),this._pageItems=e.isPaging()?this._getPageItems(e):null}_getPageItems(t){return t.pageModel().getGroupItems()}_doMeasure(t,e,s,i){this._itemViews=[];const r=this._listView,n=r.renderInfo(),o=r.owner().groupModel(),h=this.$_itemCount(o);return r.reqScrollPos=n?Math.max(0,Math.min(h-1,n.scrollPos)):0,r.reqScrollOff=n?n.scrollOff:0,super._doMeasure(t,e,s,i)}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner(),n=r.groupModel(),o=this.$_itemCount(n),h=this._itemViews;let a,l=i.reqScrollPos,d=i.reqScrollOff,_=l,c=s+d,u=0;for(;c>0&&_<o;){const r=this.$_getItem(n,_);let o=this.$_getItemView(t,r,null);const a=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);h.push(o),c-=a.height,u=Math.max(u,a.width),_++}if(_===o&&c>0&&(a=this._measureAttached(t,r,!0,e,c))&&(c-=a.mh),c>0)for(d>0&&(c>d?(c-=d,d=0):(d-=c,c=0));l>0&&c>0;){const r=this.$_getItem(n,l-1),o=this.$_getItemView(t,r,null),a=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);h.unshift(o),c>=a.height?c-=a.height:(d=a.height-c,c=0),u=Math.max(u,a.width),l--}return h.length>0?this._setScrollPos(l,d,this.$_getTopRow()):this._setScrollPos(0,0,-1),{width:u,height:s-c}}_doMeasureHorz(t,e,s){this._listView.owner().groupModel(),this._itemViews;return{width:e,height:s-0}}_doRender(t,e,s){this._indentLayer.visible&&this._indentLayer.setBounds(0,0,e,s),super._doRender(t,e,s)}_doRenderVert(t,e,s){this._renderVert(t,this.scrollOff(),e,s),this._resetRowViews(this._itemViews),this.$_resetGroupViews(this._itemViews)}_doRenderHorz(t,e,s){}_doRenderSelection(t,e,s,i,r){const n=this.owner().groupModel();let o=-1,h=-1;for(let t=e.start;o<0&&t<=e.end;t++)o=n.getItem(t).vindex;for(let t=e.end;h<0&&t>=e.start;t--)h=n.getItem(t).vindex;const a=this.scrollPos(),l=this.itemViewCount();if(s.visible=o<a+l&&h>=a){o-=a,h-=a;const l=oe(this._itemPts[o],-20),d=oe(this._itemPts[h+1]-l,(this._vertical?r:i)+20),_=s.dom.style;n.getItem(e.start).vindex<0?_.borderTopStyle="dashed":_.removeProperty("border-top-style"),n.getItem(e.end).vindex<0?_.borderBottomStyle="dashed":_.removeProperty("border-bottom-style"),this._vertical?(s.measure(t,e,i,d),s.move(0,l).resize(i,d)):(s.measure(t,e,d,r),s.move(l,0).resize(d,r)),s.render(t)}}_doScrollNear(t,e,s,i,r,n){const o=this._listView.owner(),h=o.isVertical(),a=o.groupModel(),l=this._itemViews;let d,_,c=e,u=s;for(u>0&&(i>u?(i-=u,u=0):(u-=i,i=0));i>0&&c>0;){const e=l.length>0?l[0]:null;d=this.$_getItem(a,--c),_=this.$_addItemView(t,h,d,e,r,n),l.unshift(_),(i-=_.height)<=0&&(u=-i)}return this._renderVert(t,u,r,n,!1,!1),l.length>0?{pos:c,off:u,row:this.$_getTopRow()}:{pos:0,off:0,row:-1}}_doScrollFar(t,e,s,i,r,n){const o=this._listView.owner(),h=o.isPaging(),a=o.groupModel(),l=h?this._pageItems[0].vindex:0,d=this.$_itemCount(a)-1,_=o.isVertical(),c=this._itemViews,u=this._arVis,g=this._attachedView;let p=g.visible?g.height:0;const f=this._itemPts,w=_?n:r;let m=f[f.length-1]+p,y=e,b=s,v=!1;if(i=Math.min(i,w-1),0===y&&0===b&&w>m)return{pos:y,off:b,row:this.$_getTopRow()};I(b===-f[0],"-off가 pts[0]과 동일해야 한다.");let C=c[c.length-1].model().vindex-l,S=f[f.length-1]-w;const R=i;for(;i>0&&C<d&&R>S;){const e=this.$_addItemView(t,_,this.$_getItem(a,++C),null,r,n);c.push(e),i-=e[this.SIZE]}if(i>0&&C===d&&(()=>{if(u&&!g.visible&&!h)return g.setVisible(!0),p=g.measure(t,o,r,n).height,v=!0,!0})()&&(i-=p),i<0||C!==d){let t=f.length-1;for(;--t>0&&!(f[t]-R<=0););c.splice(0,t).forEach((t=>this.$_returnItemView(t))),b=R-f[t]}else{let t=p,e=c.length;for(;t<w&&e>0;)t+=c[--e][this.SIZE];c.splice(0,e).forEach((t=>this.$_returnItemView(t))),b=t-w}return y=c[0].model().vindex-l,this._renderVert(t,b,r,n,!1,v),{pos:y,off:b,row:this.$_getTopRow()}}_createRowsDeleingAnimation(t){return new Qd(this,t)}scrollToEnd(t){this._itemViews.forEach((t=>this.$_returnItemView(t)));const e=this._itemViews=[],s=this._listView,i=s.owner(),r=i.isVertical(),n=i.groupModel(),o=this.doc,h=this.width,a=this.height;let l=a,d=0;const _=t<0&&this._measureAttached(o,i,r,h,a);_&&(l-=_.mh);let c=t<0?n.visItemCount()-1:n.visIndexOfRow(t);for(;c>=0;){const t=this.$_getItem(n,c);let i=this.$_getItemView(o,t,null);const r=i.measure(o,s,h,a);if(e.unshift(i),l-=r.height,l<=0){d=-l;break}c--}this._setScrollPos(t,d,this.$_getTopRow()),r?this._renderVert(o,d,h,a,!0):this._renderHorz(o,d,h,a,!0)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("theme",this._theme.type()),r.setData("no",s.no),r}canMoveTo(t,e){const s=this.getRowView(t);if(s)return e instanceof zo&&s.group()===e.group()}$_getItemView(t,e,s){var i;let r;if(e instanceof Rs)r=this._getRowView(t,e.row(),e,s),r._gindex=e.index,r._gvindex=e.vindex;else if(e instanceof Qe)r=this._getRowView(t,e.row(),e,s),r._gindex=e.index,r._gvindex=e.vindex;else if(e instanceof Xe){if(r=this._headerMap[e.index],r)delete this._headerMap[e.index];else{const i=this._headerPoolMap[e.index];i>=0?(r=this._headerPool[i],this._headerPool.splice(i,1),delete this._headerPoolMap[e.index]):r=this._headerPool.pop(),r||(r=new t_(t)),r.indent=this.$_getItemIndent(e),s?this._itemLayer.insertBefore(r,s):this._itemLayer.addChild(r),r.setModel(e)}r.setModel(e),r.setTheme(this._theme.type()),r.setItemData("exp",e.group.expanded()?"1":"0")}else if(e instanceof Ke){if(r=this._footerMap[e.index],r)delete this._footerMap[e.index];else{const i=this._footerPoolMap[e.index];i>=0?(r=this._footerPool[i],this._footerPool.splice(i,1),delete this._footerPoolMap[e.index]):r=this._footerPool.pop(),r||(r=new e_(t)),r.indent=this.$_getItemIndent(e),s?this._itemLayer.insertBefore(r,s):this._itemLayer.addChild(r),r.setModel(e)}r.setModel(e),r.bodyIndent=this._getBodyIndent(r),r.bodyMargin=this._getBodyMargin(r),r.setTheme(this._theme.type())}const n=this._listView.owner();if(r instanceof Jd)r.setLayout(n.getGroupItemLayout(r.model()),n);else if(e instanceof Qe){const t=e.row();r.alternate=e.vindex%2==1,r.detailed=n.isRowDetailed(t),r.checked=n.isRowChecked(t),r.selected=null===(i=n.getSelection())||void 0===i?void 0:i.isRowSelected(t)}return r.dom[Ct]=e.vindex,!r.hasData("state")&&r.setData("state","g"),r}$_getItemIndent(t){return t.group.level()*this._options.groupIndent()}$_addItemView(t,e,s,i,r,n){if(s||x.debugging(),s instanceof Qe){const o=this._addRowView(t,s.row(),s,i,e,r,n);return!o.hasData("state")&&o.setData("state","g"),o.dom[Ct]=s.vindex,o}{const e=this.$_getItemView(t,s,i),o=e.measure(t,this._listView,r-e.bodyIndent-e.bodyMargin,n);return e.resize(r-e.bodyIndent-e.bodyMargin,o.height),e.render(t),e instanceof t_?this._headerMap[s.index]=e:this._footerMap[s.index]=e,e}}$_resetGroupViews(t){for(const t in this._headerMap){const e=this._headerMap[t];this.$_returnItemView(e)}this._headerMap={};for(const e of t)e instanceof t_&&(this._headerMap[e.model().index]=e);for(const t in this._footerMap){const e=this._footerMap[t];this.$_returnItemView(e)}this._footerMap={};for(const e of t)e instanceof e_&&(this._footerMap[e.model().index]=e)}$_returnItemView(t){if(t instanceof zo||t instanceof Rd)this._returnRowView(t);else if(this._itemLayer.removeChild(t),t instanceof t_){const e=t.model().index;delete this._headerMap[e],this._headerPool.push(t),this._headerPoolMap[e]=this._headerPool.length-1}else if(t instanceof e_){const e=t.model().index;delete this._footerMap[e],this._footerPool.push(t),this._footerPoolMap[e]=this._footerPool.length-1}else G(v.unknownItemViewType,t)}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._arVis,h=this._attachedView,a=this._itemViews,l=a.length,d=this._itemPts=[-e];let _,c=d[0],u=0;for(this._rowCount=0;u<l&&c<i;){const e=a[u++],s=e.mh;e.move(0+e.bodyIndent,c),r&&e.resize(e.mw,s).render(t),c+=s,d.push(c),e instanceof zo&&(_=e,this._rowCount++)}for(let t=u;t<l;t++)this.$_returnItemView(a[t]);a.length=u,h.visible?c>i?h.setVisible(!1):(h.move(0,c),n&&h.resize(s,h.mh).render(t),c+=h.mh):o&&(c<i?x.debugging():c++),this._rowEnded=0===a.length||_&&_.row()===this.owner().getEndRow(),this._scrollEnded=this._rowEnded&&c<=i}_renderHorz(t,e,s,i,r=!0){}$_getTopRow(){for(const t of this._itemViews)if(t instanceof zo)return t.row();return-1}checkItemViewOrders(){const t=Array.from(this._itemLayer.dom.children);if(t.length>1)for(let e=1;e<t.length;e++);}isRowVisible(t,e){return this.isItemVisible(this.indexOfRow(t),e)}isItemVisible(t,e){if(this._itemViews.length>0)return t>=this._itemViews[0].gvindex()&&t<=this._itemViews[this._itemViews.length-1].gvindex()}makeRowVisible(t){const e=this._listView.owner().groupModel().indexOfRow(t);return e>=0?this.makeItemVisible(e):null}makeItemVisible(t){const e=this._listView.owner(),s=e.isPaging()?this._pageItems[0].vindex:0,i=e.groupModel(),r=this._scrollPos,n=this._scrollOff;if(!(t<0||t>=i.itemCount()))if((t=i.getItem(t).vindex-s)===r){if(n>0)return{pos:t,off:0}}else{if(t<r)return{pos:t,off:0};if(t===r+this._itemViews.length-1)return{pos:r+1,off:0};if(t>=r+this._itemViews.length)return this.$_pullUpVert(i,t)}}$_pullUpVert(t,e){const s=this.doc,i=this._listView,r=this.width,n=this.height,o=this._itemViews=[];let h=.7*n>>0,a=e;for(;a>=0;){const e=this.$_getItem(t,a);let l=this.$_getItemView(s,e,null);const d=l.measure(s,i,r,n);if(o.unshift(l),h-=d.height,h<=0)break;a--}const l=a,d=-h;return this._setScrollPos(l,d,this.$_getTopRow()),this._doRenderVert(this.doc,r,n),{pos:l,off:d}}$_pullUpHorz(t,e){this.doc;this._listView.owner().data(),this.width,this.height}}class Kd extends Xd{constructor(){super(...arguments),this._page=-1}get page(){return this._page}setPage(t,e,s){if(s||t!==this._page){const s=this.doc;this._page=t,e&&(this._theme=e._theme,this._options=e._options),t>=0&&(this.measure(s,e.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(s))}}scrollPos(){return 0}scrollOff(){return 0}_getPageItems(t){return t.pageModel().getGroupItems(this._page)}_doMeasureVert(t,e,s){const i=this._pageItems,r=i.length,n=this._itemViews=[];let o=0,h=s,a=0;for(;h>0&&o<r;){const r=i[o++],l=this.$_getItemView(t,r,null),d=l.measure(t,this._listView,e-l.bodyIndent-l.bodyMargin,s);n.push(l),h-=d.height,a=Math.max(a,d.width)}return{width:a,height:s-h}}}class Jd extends Ho{model(){return this._model}group(){return this._model.group}row(){return this._model.row()}dv(){return null}gvindex(){return this._model.vindex}vindex(){return this._model.vindex}index(){return this._model.index}setModel(t){return this._model=t,this}getItemStyle(t){return this._model.getStyle()}}class t_ extends Jd{getItemClass(){return t_.CLASS_NAME}_getExpander(){const t=this._owner.getExpander(this.gvindex());if(t){const e=t.position(),s=e===dn.HEAD?gr.NEAR:e===dn.FOOT?gr.FAR:void 0;if(e)return{pos:s,size:18}}}_isExpanded(){return this._model.group.expanded()}}t_.CLASS_NAME="rtc-item rtc-group-header";class e_ extends Jd{getItemClass(){return e_.CLASS_NAME}_toggleExpanded(){}}e_.CLASS_NAME="rtc-group-footer";class s_ extends Qd{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);this._bodyView._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}}class i_ extends Xd{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner(),n=r.groupModel(),o=this.$_itemCount(n),h=this._itemViews,a=this._itemPts=[0];let l,d=i.reqScrollPos,_=i.reqScrollOff,c=0,u=0,g=0;for(;c<o;){const r=this.$_getItem(n,c);let o=this.$_getItemView(t,r,null);const l=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);h.push(o),u+=l.height,a.push(u),g=Math.max(g,l.width),c++}if((l=this._measureAttached(t,r,!0,e,u))&&(u+=l.mh),h.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(d,_),s);this._setScrollPos(t.pos,t.off,h[t.pos].row())}}else this.$_scrollTo(0,s),this._setScrollPos(0,0,-1);return{width:g,height:u}}_doMeasureHorz(t,e,s){this._listView.owner().groupModel(),this._itemViews;return{width:0,height:0}}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._attachedView,h=this._itemViews,a=h.length;let l=0,d=0;for(this._rowCount=0;d<a;){const e=h[d++];e.move(0+e.bodyIndent,l),r&&e.resizeByMeasure().render(t),l+=e.mh,e instanceof zo&&this._rowCount++}o.visible&&(l>i?o.setVisible(!1):(o.move(0,l),n&&o.resize(s,o.mh).render(t),l+=o.mh)),this.$_checkEnded()}_renderHorz(t,e,s,i,r=!0){}_doScrollNear(t,e,s,i,r,n){const o=this.$_scrollBy(-i);return{pos:o.pos,off:o.off,row:o.row}}_doScrollFar(t,e,s,i,r,n){const o=this.$_scrollBy(i);return{pos:o.pos,off:o.off,row:o.row}}scrollToEnd(t){if(t<0){const t=this._listView.owner(),e=this.doc,s=this._vertical,i=this.width,r=this.height,n=this._measureAttached(e,t,s,i,r);n&&(n.resize(s?i:n.mw,s?n.mh:r),n.render(e))}this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE])}_createRowsDeleingAnimation(t){return new s_(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(t,e){const s=this._itemViews,i=this.MEASURE_SIZE;let r=0;for(let e=0;e<t;e++)r+=s[e][i];return r+=e,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(t,e){const s=this._itemViews,i=this.MEASURE_SIZE,r=s.length;if(r>0){const n=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,o=this._itemPts,h=o[r]+n;e=oe(e,this[this.SIZE]);let a=r-1,l=0,d=t=Math.max(0,Math.min(t,h-e)),_=0,c=0;for(;c<r;){const t=s[c][i];if(t>d){a=c,l=d,_+=l;break}d-=t,_+=t,c++}if(d=h-o[a]-l,d<e)if(d=e-d,l>=d)l-=d,_-=d;else for(;a>0&&d>0;){const t=s[--a][i];d>t?(d-=t,_-=t,l=0):(l=d,_-=d,d=0)}return this._moveItemLayer(-_),this.$_checkEnded(),{pos:a,off:l,row:s[a].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){const t=this._itemPts,e=t.length-1;if(e>0){const s=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,r=t[e]+i,n=-this._itemLayer[this.POS];this._rowEnded=t[e-1]-n<=s,this._scrollEnded=r-n<=s}else this._rowEnded=this._scrollEnded=!0}}class r_ extends zo{}class n_ extends Xd{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t,e){return e?new Rd(t):new r_(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("master",s.isLeaf()?"0":"1"),r}rowOffsetBy(t){}}class o_ extends Kd{}class h_ extends i_{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t,e){return e?new Rd(t):new r_(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("master",s.isLeaf()?"0":"1"),r}}class a_ extends Yd{_createBodyView(t,e,s){const i=this._owner.fullMode();return s?new o_(t,i):e?new h_(t,i):new n_(t,i)}rowBorderVisible(t){if(super.rowBorderVisible(t))return!this._owner.rowBorder.leafOnly||!t._master}}class l_ extends po{_doPrepare(t,e){e[Tt]=this.$_getButton(t,e)}_getStyleTarget(t){return t[Tt].style}_doMeasure(t,e,s,r){const n=t.doc,o=this._model,h=o.label,a=o.imageUrl,l=e[Tt],d=i?l.firstElementChild:l;let _,c,u=Fe.childByClass(d,l_.IMAGE_CLASS),g=Fe.childByClass(d,l_.SHAPE_CLASS),p=o.buttonWidth,f=o.buttonHeight;if(this._setContext(t,l,o),o.borderless&&Fe.setData(l,"borderless",1),o.borderless||Fe.setData(d,"image",1),this._setClass(d,t.row),a){g=Fe.remove(g),u||(u=t.doc.createElement("img"),u.className=l_.IMAGE_CLASS,u.style.pointerEvents="none",u.style.verticalAlign="middle",Fe.setAttr(u,"aria-hidden",!0),d.appendChild(u));let e=o.imageWidth,s=o.imageHeight;if(u.src=a,!u.complete&&t.useImage(a),isNaN(e)&&isNaN(s)){const r=i&&t.getImageSize(a);r?(e=r.width,s=r.height):(e=u.naturalWidth,s=u.naturalHeight)}isNaN(e)||(u.width=e),isNaN(s)||(u.height=s),_=u}else if(c=o.shape){u=Fe.remove(u);const e=o.getShapeSize();if(g&&g[Vt]===c)g&&Fe.resize(g,e.width,e.height);else{const s=t.manager().owner().shapes(),i=s.createStock(t.doc,c,l_.SHAPE_CLASS)||s.createCustom(c,null,null);g=Fe.remove(g),i&&(i instanceof vr&&i.setShape(s.getCustom(c)),i.appendTo(d),g=i._svg.svg,g[Vt]=c,g.style.verticalAlign="middle",i.resize(e.width,e.height))}_=g}if(_)i?this.$_arrangeafari(n,d,_):this.$_arrange(n,d,_);else{let t=Fe.childByClass(d,l_.LABEL_CLASS),e=Fe.childByClass(d,l_.BR_CLASS);u=Fe.remove(u),g=Fe.remove(g),e=Fe.remove(e),t||(t=this.$_createSpan(n),d.appendChild(t)),t.textContent=h,Fe.setData(d,"image",void 0)}if(isNaN(p)||(d.style.width=p+"px"),isNaN(f)||(d.style.height=f+"px"),Fe.setDisabled(d.parentElement,o.disabled),We.TESTING)return isNaN(p)&&(p=d.offsetWidth),isNaN(f)&&(f=d.offsetHeight),{width:Math.ceil(p),height:Math.ceil(f)}}$_createSpan(t){const e=t.createElement("span");return e.className=l_.LABEL_CLASS,e.style.pointerEvents="none",e.style.verticalAlign="middle",e}$_arrange(t,e,s){const i=this._model,r=i.label;let n=Fe.childByClass(e,l_.LABEL_CLASS),o=Fe.childByClass(e,l_.BR_CLASS);if(r&&i.labelPosition!==Ae.NONE)switch(n||(n=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case Ae.LEFT:o=Fe.remove(o),s.style.paddingLeft=Tr,e.insertBefore(n,s);break;case Ae.RIGHT:o=Fe.remove(o),s.style.paddingRight=Tr,e.appendChild(n);break;case Ae.TOP:e.insertBefore(n,s),e.insertBefore(o||Fe.createBR(t,l_.BR_CLASS),s),s.style.paddingTop=Tr;break;default:s.style.paddingBottom=Tr,e.appendChild(n),e.insertBefore(o||Fe.createBR(t,l_.BR_CLASS),n)}else o=Fe.remove(o),n||(n=this.$_createSpan(t)),e.insertBefore(n,s),n.textContent=""}$_arrangeafari(t,e,s){const i=this._model,r=i.label;let n=Fe.childByClass(e,l_.LABEL_CLASS);if(r&&i.labelPosition!==Ae.NONE)switch(n||(n=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case Ae.LEFT:e.style.flexDirection="row",s.style.paddingLeft=Tr,e.insertBefore(n,s);break;case Ae.RIGHT:e.style.flexDirection="row",s.style.paddingRight=Tr,e.appendChild(n);break;case Ae.TOP:e.insertBefore(n,s),s.style.paddingTop=Tr,e.style.flexDirection="column";break;default:e.style.flexDirection="column",s.style.paddingBottom=Tr,e.appendChild(n)}else n=Fe.remove(n)}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Tt]=null}setValue(t,e){}$_getButton(t,e){let s=e.getElementsByClassName(l_.BUTTON_CLASS)[0];if(!s&&(s=t.createElement("button"),s.type="button",s.className=l_.BUTTON_CLASS,s[It]="1",Object.assign(s.style,mr),e.appendChild(s),i)){const e=t.doc.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.boxSizing="border-box",s.appendChild(e)}return s}}l_.BUTTON_CLASS="rtc-button-button",l_.BR_CLASS="rtc-button-br",l_.LABEL_CLASS="rtc-button-label",l_.IMAGE_CLASS="rtc-button-image",l_.SHAPE_CLASS="rtc-button-shape";class d_ extends yr{draw(t){const e=t.model;let s=e.getStyle();const i=Math.ceil((parseFloat(s.strokeWidth)||0)/2),{cx:r,cy:n,rx:o,ry:h}=e.getExtents(t.width,t.height),a=e.startAngle||0;let l=(e.endAngle||0)-a;this._svg.clear(),this._svg.arc(r,n,o-i,h-i,a,l,e.clockwise,s),l*=e.getValueRate(t.value),s=e.getValueStyle(),this._svg.arc(r,n,o-i,h-i,a,l,e.clockwise,s),this._svg.setSize(t.width,t.height)}_doInit(t){}}class __ extends fo{_doPrepare(t,e){}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model(),n=r.getGaugeWidth(),o=r.getGaugeHeight(),h=this._getShape(t,e);return this._setClass(e,t.row),this._rendered=!isNaN(n)&&!isNaN(o),this._rendered&&h.draw({model:this.model(),value:this._value,width:n,height:o}),{width:n,height:o}}_doRender(t,e,s,i){if(!this._rendered){this._getShape(t,e).draw({model:this.model(),value:this._value,width:s,height:i})}}_doUnprepare(t,e){}setValue(t,e){}_getShape(t,e){let s,i=e.getElementsByClassName(__.SVG_CLASS)[0];return i?s=new d_(i,__.SVG_CLASS):(s=new d_(t.doc,__.SVG_CLASS),s.appendTo(e)),s}}__.SVG_CLASS="rtc-gauge-svg";class c_ extends po{_doPrepare(t,e){this._img=this.$_getImage(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model(),n=this._img,o=t.getIcon(r.iconSet,r.iconName);let h,a;if(this._setClass(n,t.row),n.src=o.url,n.alt=r.hint||o.url,isNaN(o.width)||(n.width=h=o.width),isNaN(o.height)||(n.height=a=o.height),We.TESTING)return isNaN(h)&&(h=n.offsetWidth||0),isNaN(a)&&(a=n.offsetHeight||0),{width:h,height:a}}_doRender(t,e,s,i){}_doUnprepare(t,e){this._img=null}setValue(t,e){}$_getImage(t,e){let s=e.getElementsByClassName(c_.IMAGE_CLASS)[0];return s||(s=t.doc.createElement("img"),s.className=c_.IMAGE_CLASS,e.appendChild(s)),s}}c_.IMAGE_CLASS="rtc-icon-image";class u_ extends fo{_doPrepare(t,e){e[Lt]=this.$_getImage(t,e)}_getStyleTarget(t){return t[Lt].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[Lt],{url:o,isNull:h}=r.getUrl(this._value);let a=h?r.nullWidth:r.imageWidth,l=h?r.nullHeight:r.imageHeight;const d=n.alt=r.alt||r.hint||"";if(this._setClass(n,t.row),Fe.setAttr(n,"aria-hidden",r.decorative||!d),n.src=o,!n.complete&&t.useImage(o),isNaN(a)&&isNaN(l)&&(a=n.naturalWidth,isNaN(a)||(l=n.naturalHeight)),isNaN(this._imageWidth=a)||(n.width=a),isNaN(this._imageHeight=l)||(n.height=l),We.TESTING)return a=he(n.width,a,0),l=he(n.height,l,0),{width:Math.ceil(a),height:Math.ceil(l)}}_doRender(t,e,s,i){if(isNaN(this._imageWidth)&&isNaN(this._imageHeight)){const t=e[Lt];t.width=s,t.height=i}}_doUnprepare(t,e){e[Lt]=null}setValue(t,e){}$_getImage(t,e){let s=e.getElementsByClassName(u_.IMAGE_CLASS)[0];return s||(s=t.doc.createElement("img"),s.className=u_.IMAGE_CLASS,e.appendChild(s)),s}}u_.IMAGE_CLASS="rtc-image-image";class g_ extends fo{_getStyleTarget(t){return t[At].style}_doPrepare(t,e){const s=this._model,i=e[At],r=i.style;this._setClass(i,t.row),Object.assign(r,s.singleLine?p_.SPAN_STYLE_SINGLE:s.wrap?p_.SPAN_STYLE_WRAP:p_.SPAN_STYLE),r.maxWidth="",r.maxHeight="",r.lineHeight="",i.textContent=s.getText(t,this._value,t.manager().owner().lineSepReg())}_doMeasure(t,e,s,i){const r=e[At];if(t.needMeasureRenderer())return{width:r.offsetWidth+1,height:r.offsetHeight}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[At]=null}setValue(t,e){}_createSpan(t,e,s){const i=t.createElement(s);return i.className=e,i.style.display="inline-block",i.style.verticalAlign="middle",i}}g_.SPAN_STYLE={whiteSpace:"pre",wordWrap:"normal",textOverflow:"ellipsis",overflow:"hidden"},g_.SPAN_STYLE_WRAP={whiteSpace:"pre-wrap",textOverflow:"ellipsis",overflow:"hidden"},g_.SPAN_STYLE_SINGLE={whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"};class p_ extends g_{_doPrepare(t,e){e[At]=this.$_getSpan(t,e),super._doPrepare(t,e)}$_getSpan(t,e){let s=e.getElementsByClassName(p_.SPAN_CLASS)[0];return s||(s=this._createSpan(t,p_.SPAN_CLASS,"span"),e.appendChild(s)),s}}p_.SPAN_CLASS="rtc-text-span";class f_ extends p_{_doMeasure(t,e,s,i){super._doMeasure(t,e,s,i);const r=e[At];return{width:Math.ceil(r.offsetWidth),height:Math.ceil(r.offsetHeight)}}}class w_ extends g_{_doPrepare(t,e){const s=e[At]=this.$_getAnchor(t,e);super._doPrepare(t,e),s.href=this._model.getLink(t)}setValue(t,e){}$_getAnchor(t,e){let s=e.getElementsByClassName(w_.ANCHOR_CLASS)[0];return s||(s=this._createSpan(t,w_.ANCHOR_CLASS,"a"),e.appendChild(s)),s}}w_.ANCHOR_CLASS="rtc-link-anchor";class m_ extends fo{_doPrepare(t,e){e[Nt]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model();let n=this._barWidth=r.barWidth,o=this._barHeight=r.barHeight;const h=e[Nt],a=r.minValue,l=r.maxValue,d=r.lowValue,_=r.highValue,u=r.optimumValue,g=c.pickNum(r.value,this._value);if(this._setClass(h,t.row),isNaN(a)||(h.min=a),isNaN(l)||(h.max=l),isNaN(d)||(h.low=d),isNaN(_)||(h.high=_),isNaN(u)||(h.optimum=u),isNaN(g)||(h.value=g),isNaN(n)||(h.style.width=n+"px"),isNaN(o)||(h.style.height=o+"px"),We.TESTING)return n=h.offsetWidth,o=h.offsetHeight,{width:n,height:o}}_doRender(t,e,s,i){const r=e[Nt];isNaN(this._barWidth)&&(r.style.width=s+"px"),isNaN(this._barHeight)&&(r.style.height=i+"px")}_doUnprepare(t,e){e[Nt]=null}setValue(t,e){}$_getBar(t,e){let s=e.getElementsByClassName(m_.BAR_CLASS)[0];return s||(s=t.doc.createElement("meter"),s.className=m_.BAR_CLASS,e.appendChild(s)),s}}m_.BAR_CLASS="rtc-meter-bar";class y_ extends fo{_doPrepare(t,e){e[Nt]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model(),n=e[Nt];let o=r.barWidth,h=r.barHeight;const a=r.minValue,l=r.maxValue,d=+this._value;if(this._setClass(n,t.row),!isNaN(a)&&!isNaN(l)&&!isNaN(d)&&l>a?(n.max=l-a,n.value=d-a):delete n.value,this._setFitWidth(n,r,o),this._setFitHeight(n,r,h),We.TESTING)return o=isNaN(o)?n.offsetWidth:o,h=isNaN(h)?n.offsetHeight:h,{width:o,height:h}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Nt]=null}setValue(t,e){}$_getBar(t,e){let s=e.getElementsByClassName(y_.BAR_CLASS)[0];return s||(s=t.doc.createElement("progress"),s.className=y_.BAR_CLASS,e.appendChild(s)),s}}y_.BAR_CLASS="rtc-progress-bar";var b_={},v_={},C_={};let S_;const R_=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];C_.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},C_.getSymbolTotalCodewords=function(t){return R_[t]},C_.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},C_.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');S_=t},C_.isKanjiModeEnabled=function(){return void 0!==S_},C_.toSJIS=function(t){return S_(t)};var x_={};function V_(){this.buffer=[],this.length=0}!function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},t.from=function(e,s){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(t){return s}}}(x_),V_.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let s=0;s<e;s++)this.putBit(1==(t>>>e-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var E_=V_;function $_(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}$_.prototype.set=function(t,e,s,i){const r=t*this.size+e;this.data[r]=s,i&&(this.reservedBit[r]=!0)},$_.prototype.get=function(t,e){return this.data[t*this.size+e]},$_.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s},$_.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var A_=$_,L_={};!function(t){const e=C_.getSymbolSize;t.getRowColCoords=function(t){if(1===t)return[];const s=Math.floor(t/7)+2,i=e(t),r=145===i?26:2*Math.ceil((i-13)/(2*s-2)),n=[i-7];for(let t=1;t<s-1;t++)n[t]=n[t-1]-r;return n.push(6),n.reverse()},t.getPositions=function(e){const s=[],i=t.getRowColCoords(e),r=i.length;for(let t=0;t<r;t++)for(let e=0;e<r;e++)0===t&&0===e||0===t&&e===r-1||t===r-1&&0===e||s.push([i[t],i[e]]);return s}}(L_);var T_={};const k_=C_.getSymbolSize;T_.getPositions=function(t){const e=k_(t);return[[0,0],[e-7,0],[0,e-7]]};var D_={};!function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e=3,s=3,i=40,r=10;function n(e,s,i){switch(e){case t.Patterns.PATTERN000:return(s+i)%2==0;case t.Patterns.PATTERN001:return s%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(s+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return s*i%2+s*i%3==0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2==0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(t){const s=t.size;let i=0,r=0,n=0,o=null,h=null;for(let a=0;a<s;a++){r=n=0,o=h=null;for(let l=0;l<s;l++){let s=t.get(a,l);s===o?r++:(r>=5&&(i+=e+(r-5)),o=s,r=1),s=t.get(l,a),s===h?n++:(n>=5&&(i+=e+(n-5)),h=s,n=1)}r>=5&&(i+=e+(r-5)),n>=5&&(i+=e+(n-5))}return i},t.getPenaltyN2=function(t){const e=t.size;let i=0;for(let s=0;s<e-1;s++)for(let r=0;r<e-1;r++){const e=t.get(s,r)+t.get(s,r+1)+t.get(s+1,r)+t.get(s+1,r+1);4!==e&&0!==e||i++}return i*s},t.getPenaltyN3=function(t){const e=t.size;let s=0,r=0,n=0;for(let i=0;i<e;i++){r=n=0;for(let o=0;o<e;o++)r=r<<1&2047|t.get(i,o),o>=10&&(1488===r||93===r)&&s++,n=n<<1&2047|t.get(o,i),o>=10&&(1488===n||93===n)&&s++}return s*i},t.getPenaltyN4=function(t){let e=0;const s=t.data.length;for(let i=0;i<s;i++)e+=t.data[i];return Math.abs(Math.ceil(100*e/s/5)-10)*r},t.applyMask=function(t,e){const s=e.size;for(let i=0;i<s;i++)for(let r=0;r<s;r++)e.isReserved(r,i)||e.xor(r,i,n(t,r,i))},t.getBestMask=function(e,s){const i=Object.keys(t.Patterns).length;let r=0,n=1/0;for(let o=0;o<i;o++){s(o),t.applyMask(o,e);const i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),i<n&&(n=i,r=o)}return r}}(D_);var N_={};const P_=x_,M_=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],I_=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];N_.getBlocksCount=function(t,e){switch(e){case P_.L:return M_[4*(t-1)+0];case P_.M:return M_[4*(t-1)+1];case P_.Q:return M_[4*(t-1)+2];case P_.H:return M_[4*(t-1)+3];default:return}},N_.getTotalCodewordsCount=function(t,e){switch(e){case P_.L:return I_[4*(t-1)+0];case P_.M:return I_[4*(t-1)+1];case P_.Q:return I_[4*(t-1)+2];case P_.H:return I_[4*(t-1)+3];default:return}};var O_={},B_={};const F_=new Uint8Array(512),H_=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)F_[e]=t,H_[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)F_[t]=F_[t-255]}(),B_.log=function(t){if(t<1)throw new Error("log("+t+")");return H_[t]},B_.exp=function(t){return F_[t]},B_.mul=function(t,e){return 0===t||0===e?0:F_[H_[t]+H_[e]]},function(t){const e=B_;t.mul=function(t,s){const i=new Uint8Array(t.length+s.length-1);for(let r=0;r<t.length;r++)for(let n=0;n<s.length;n++)i[r+n]^=e.mul(t[r],s[n]);return i},t.mod=function(t,s){let i=new Uint8Array(t);for(;i.length-s.length>=0;){const t=i[0];for(let r=0;r<s.length;r++)i[r]^=e.mul(s[r],t);let r=0;for(;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},t.generateECPolynomial=function(s){let i=new Uint8Array([1]);for(let r=0;r<s;r++)i=t.mul(i,new Uint8Array([1,e.exp(r)]));return i}}(O_);const W_=O_;function z_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}z_.prototype.initialize=function(t){this.degree=t,this.genPoly=W_.generateECPolynomial(this.degree)},z_.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const s=W_.mod(e,this.genPoly),i=this.degree-s.length;if(i>0){const t=new Uint8Array(this.degree);return t.set(s,i),t}return s};var G_=z_,U_={},j_={},q_={isValid:function(t){return!isNaN(t)&&t>=1&&t<=40}},Y_={};const Q_="[0-9]+";let Z_="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Z_=Z_.replace(/u/g,"\\u");const X_="(?:(?![A-Z0-9 $%*+\\-./:]|"+Z_+")(?:.|[\r\n]))+";Y_.KANJI=new RegExp(Z_,"g"),Y_.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Y_.BYTE=new RegExp(X_,"g"),Y_.NUMERIC=new RegExp(Q_,"g"),Y_.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const K_=new RegExp("^"+Z_+"$"),J_=new RegExp("^"+Q_+"$"),tc=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Y_.testKanji=function(t){return K_.test(t)},Y_.testNumeric=function(t){return J_.test(t)},Y_.testAlphanumeric=function(t){return tc.test(t)},function(t){const e=q_,s=Y_;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(t,s){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!e.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?t.ccBits[0]:s<27?t.ccBits[1]:t.ccBits[2]},t.getBestModeForData=function(e){return s.testNumeric(e)?t.NUMERIC:s.testAlphanumeric(e)?t.ALPHANUMERIC:s.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},t.isValid=function(t){return t&&t.bit&&t.ccBits},t.from=function(e,s){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(t){return s}}}(j_),function(t){const e=C_,s=N_,i=x_,r=j_,n=q_,o=e.getBCHDigit(7973);function h(t,e){return r.getCharCountIndicator(t,e)+4}function a(t,e){let s=0;return t.forEach((function(t){const i=h(t.mode,e);s+=i+t.getBitsLength()})),s}t.from=function(t,e){return n.isValid(t)?parseInt(t,10):e},t.getCapacity=function(t,i,o){if(!n.isValid(t))throw new Error("Invalid QR Code version");void 0===o&&(o=r.BYTE);const a=8*(e.getSymbolTotalCodewords(t)-s.getTotalCodewordsCount(t,i));if(o===r.MIXED)return a;const l=a-h(o,t);switch(o){case r.NUMERIC:return Math.floor(l/10*3);case r.ALPHANUMERIC:return Math.floor(l/11*2);case r.KANJI:return Math.floor(l/13);case r.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,s){let n;const o=i.from(s,i.M);if(Array.isArray(e)){if(e.length>1)return function(e,s){for(let i=1;i<=40;i++)if(a(e,i)<=t.getCapacity(i,s,r.MIXED))return i}(e,o);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,s,i){for(let r=1;r<=40;r++)if(s<=t.getCapacity(r,i,e))return r}(n.mode,n.getLength(),o)},t.getEncodedBits=function(t){if(!n.isValid(t)||t<7)throw new Error("Invalid QR Code version");let s=t<<12;for(;e.getBCHDigit(s)-o>=0;)s^=7973<<e.getBCHDigit(s)-o;return t<<12|s}}(U_);var ec={};const sc=C_,ic=sc.getBCHDigit(1335);ec.getEncodedBits=function(t,e){const s=t.bit<<3|e;let i=s<<10;for(;sc.getBCHDigit(i)-ic>=0;)i^=1335<<sc.getBCHDigit(i)-ic;return 21522^(s<<10|i)};var rc={};const nc=j_;function oc(t){this.mode=nc.NUMERIC,this.data=t.toString()}oc.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},oc.prototype.getLength=function(){return this.data.length},oc.prototype.getBitsLength=function(){return oc.getBitsLength(this.data.length)},oc.prototype.write=function(t){let e,s,i;for(e=0;e+3<=this.data.length;e+=3)s=this.data.substr(e,3),i=parseInt(s,10),t.put(i,10);const r=this.data.length-e;r>0&&(s=this.data.substr(e),i=parseInt(s,10),t.put(i,3*r+1))};var hc=oc;const ac=j_,lc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function dc(t){this.mode=ac.ALPHANUMERIC,this.data=t}dc.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},dc.prototype.getLength=function(){return this.data.length},dc.prototype.getBitsLength=function(){return dc.getBitsLength(this.data.length)},dc.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let s=45*lc.indexOf(this.data[e]);s+=lc.indexOf(this.data[e+1]),t.put(s,11)}this.data.length%2&&t.put(lc.indexOf(this.data[e]),6)};var _c=dc;const cc=function(t){for(var e=[],s=t.length,i=0;i<s;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319&&s>i+1){var n=t.charCodeAt(i+1);n>=56320&&n<=57343&&(r=1024*(r-55296)+n-56320+65536,i+=1)}r<128?e.push(r):r<2048?(e.push(r>>6|192),e.push(63&r|128)):r<55296||r>=57344&&r<65536?(e.push(r>>12|224),e.push(r>>6&63|128),e.push(63&r|128)):r>=65536&&r<=1114111?(e.push(r>>18|240),e.push(r>>12&63|128),e.push(r>>6&63|128),e.push(63&r|128)):e.push(239,191,189)}return new Uint8Array(e).buffer},uc=j_;function gc(t){this.mode=uc.BYTE,"string"==typeof t&&(t=cc(t)),this.data=new Uint8Array(t)}gc.getBitsLength=function(t){return 8*t},gc.prototype.getLength=function(){return this.data.length},gc.prototype.getBitsLength=function(){return gc.getBitsLength(this.data.length)},gc.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var pc=gc;const fc=j_,wc=C_;function mc(t){this.mode=fc.KANJI,this.data=t}mc.getBitsLength=function(t){return 13*t},mc.prototype.getLength=function(){return this.data.length},mc.prototype.getBitsLength=function(){return mc.getBitsLength(this.data.length)},mc.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=wc.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else{if(!(s>=57408&&s<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");s-=49472}s=192*(s>>>8&255)+(255&s),t.put(s,13)}};var yc=mc,bc={};!function(t){var e={single_source_shortest_paths:function(t,s,i){var r={},n={};n[s]=0;var o,h,a,l,d,_,c,u=e.PriorityQueue.make();for(u.push(s,0);!u.empty();)for(a in h=(o=u.pop()).value,l=o.cost,d=t[h]||{})d.hasOwnProperty(a)&&(_=l+d[a],c=n[a],(void 0===n[a]||c>_)&&(n[a]=_,u.push(a,_),r[a]=h));if(void 0!==i&&void 0===n[i]){var g=["Could not find a path from ",s," to ",i,"."].join("");throw new Error(g)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var s=[],i=e;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,s,i){var r=e.single_source_shortest_paths(t,s,i);return e.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(t){var s,i=e.PriorityQueue,r={};for(s in t=t||{},i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r.queue=[],r.sorter=t.sorter||i.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var s={value:t,cost:e};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e}({get exports(){return bc},set exports(t){bc=t}}),function(t){const e=j_,s=hc,i=_c,r=pc,n=yc,o=Y_,h=C_,a=bc;function l(t){return unescape(encodeURIComponent(t)).length}function d(t,e,s){const i=[];let r;for(;null!==(r=t.exec(s));)i.push({data:r[0],index:r.index,mode:e,length:r[0].length});return i}function _(t){const s=d(o.NUMERIC,e.NUMERIC,t),i=d(o.ALPHANUMERIC,e.ALPHANUMERIC,t);let r,n;h.isKanjiModeEnabled()?(r=d(o.BYTE,e.BYTE,t),n=d(o.KANJI,e.KANJI,t)):(r=d(o.BYTE_KANJI,e.BYTE,t),n=[]);return s.concat(i,r,n).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function c(t,o){switch(o){case e.NUMERIC:return s.getBitsLength(t);case e.ALPHANUMERIC:return i.getBitsLength(t);case e.KANJI:return n.getBitsLength(t);case e.BYTE:return r.getBitsLength(t)}}function u(t,o){let a;const l=e.getBestModeForData(t);if(a=e.from(o,l),a!==e.BYTE&&a.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+e.toString(a)+".\n Suggested mode is: "+e.toString(l));switch(a!==e.KANJI||h.isKanjiModeEnabled()||(a=e.BYTE),a){case e.NUMERIC:return new s(t);case e.ALPHANUMERIC:return new i(t);case e.KANJI:return new n(t);case e.BYTE:return new r(t)}}t.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(u(e,null)):e.data&&t.push(u(e.data,e.mode)),t}),[])},t.fromString=function(s,i){const r=function(t){const s=[];for(let i=0;i<t.length;i++){const r=t[i];switch(r.mode){case e.NUMERIC:s.push([r,{data:r.data,mode:e.ALPHANUMERIC,length:r.length},{data:r.data,mode:e.BYTE,length:r.length}]);break;case e.ALPHANUMERIC:s.push([r,{data:r.data,mode:e.BYTE,length:r.length}]);break;case e.KANJI:s.push([r,{data:r.data,mode:e.BYTE,length:l(r.data)}]);break;case e.BYTE:s.push([{data:r.data,mode:e.BYTE,length:l(r.data)}])}}return s}(_(s,h.isKanjiModeEnabled())),n=function(t,s){const i={},r={start:{}};let n=["start"];for(let o=0;o<t.length;o++){const h=t[o],a=[];for(let t=0;t<h.length;t++){const l=h[t],d=""+o+t;a.push(d),i[d]={node:l,lastCount:0},r[d]={};for(let t=0;t<n.length;t++){const o=n[t];i[o]&&i[o].node.mode===l.mode?(r[o][d]=c(i[o].lastCount+l.length,l.mode)-c(i[o].lastCount,l.mode),i[o].lastCount+=l.length):(i[o]&&(i[o].lastCount=l.length),r[o][d]=c(l.length,l.mode)+4+e.getCharCountIndicator(l.mode,s))}}n=a}for(let t=0;t<n.length;t++)r[n[t]].end=0;return{map:r,table:i}}(r,i),o=a.find_path(n.map,"start","end"),d=[];for(let t=1;t<o.length-1;t++)d.push(n.table[o[t]].node);return t.fromArray(function(t){return t.reduce((function(t,e){const s=t.length-1>=0?t[t.length-1]:null;return s&&s.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(d))},t.rawSplit=function(e){return t.fromArray(_(e,h.isKanjiModeEnabled()))}}(rc);const vc=C_,Cc=x_,Sc=E_,Rc=A_,xc=L_,Vc=T_,Ec=D_,$c=N_,Ac=G_,Lc=U_,Tc=ec,kc=j_,Dc=rc;function Nc(t,e,s){const i=t.size,r=Tc.getEncodedBits(e,s);let n,o;for(n=0;n<15;n++)o=1==(r>>n&1),n<6?t.set(n,8,o,!0):n<8?t.set(n+1,8,o,!0):t.set(i-15+n,8,o,!0),n<8?t.set(8,i-n-1,o,!0):n<9?t.set(8,15-n-1+1,o,!0):t.set(8,15-n-1,o,!0);t.set(i-8,8,1,!0)}function Pc(t,e,s){const i=new Sc;s.forEach((function(e){i.put(e.mode.bit,4),i.put(e.getLength(),kc.getCharCountIndicator(e.mode,t)),e.write(i)}));const r=8*(vc.getSymbolTotalCodewords(t)-$c.getTotalCodewordsCount(t,e));for(i.getLengthInBits()+4<=r&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);const n=(r-i.getLengthInBits())/8;for(let t=0;t<n;t++)i.put(t%2?17:236,8);return function(t,e,s){const i=vc.getSymbolTotalCodewords(e),r=$c.getTotalCodewordsCount(e,s),n=i-r,o=$c.getBlocksCount(e,s),h=i%o,a=o-h,l=Math.floor(i/o),d=Math.floor(n/o),_=d+1,c=l-d,u=new Ac(c);let g=0;const p=new Array(o),f=new Array(o);let w=0;const m=new Uint8Array(t.buffer);for(let t=0;t<o;t++){const e=t<a?d:_;p[t]=m.slice(g,g+e),f[t]=u.encode(p[t]),g+=e,w=Math.max(w,e)}const y=new Uint8Array(i);let b,v,C=0;for(b=0;b<w;b++)for(v=0;v<o;v++)b<p[v].length&&(y[C++]=p[v][b]);for(b=0;b<c;b++)for(v=0;v<o;v++)y[C++]=f[v][b];return y}(i,t,e)}function Mc(t,e,s,i){let r;if(Array.isArray(t))r=Dc.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let i=e;if(!i){const e=Dc.rawSplit(t);i=Lc.getBestVersionForData(e,s)}r=Dc.fromString(t,i||40)}}const n=Lc.getBestVersionForData(r,s);if(!n)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<n)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+n+".\n")}else e=n;const o=Pc(e,s,r),h=vc.getSymbolSize(e),a=new Rc(h);return function(t,e){const s=t.size,i=Vc.getPositions(e);for(let e=0;e<i.length;e++){const r=i[e][0],n=i[e][1];for(let e=-1;e<=7;e++)if(!(r+e<=-1||s<=r+e))for(let i=-1;i<=7;i++)n+i<=-1||s<=n+i||(e>=0&&e<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===e||6===e)||e>=2&&e<=4&&i>=2&&i<=4?t.set(r+e,n+i,!0,!0):t.set(r+e,n+i,!1,!0))}}(a,e),function(t){const e=t.size;for(let s=8;s<e-8;s++){const e=s%2==0;t.set(s,6,e,!0),t.set(6,s,e,!0)}}(a),function(t,e){const s=xc.getPositions(e);for(let e=0;e<s.length;e++){const i=s[e][0],r=s[e][1];for(let e=-2;e<=2;e++)for(let s=-2;s<=2;s++)-2===e||2===e||-2===s||2===s||0===e&&0===s?t.set(i+e,r+s,!0,!0):t.set(i+e,r+s,!1,!0)}}(a,e),Nc(a,s,0),e>=7&&function(t,e){const s=t.size,i=Lc.getEncodedBits(e);let r,n,o;for(let e=0;e<18;e++)r=Math.floor(e/3),n=e%3+s-8-3,o=1==(i>>e&1),t.set(r,n,o,!0),t.set(n,r,o,!0)}(a,e),function(t,e){const s=t.size;let i=-1,r=s-1,n=7,o=0;for(let h=s-1;h>0;h-=2)for(6===h&&h--;;){for(let s=0;s<2;s++)if(!t.isReserved(r,h-s)){let i=!1;o<e.length&&(i=1==(e[o]>>>n&1)),t.set(r,h-s,i),n--,-1===n&&(o++,n=7)}if(r+=i,r<0||s<=r){r-=i,i=-i;break}}}(a,o),isNaN(i)&&(i=Ec.getBestMask(a,Nc.bind(null,a,s))),Ec.applyMask(i,a),Nc(a,s,i),{modules:a,version:e,errorCorrectionLevel:s,maskPattern:i,segments:r}}v_.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let s,i,r=Cc.M;return void 0!==e&&(r=Cc.from(e.errorCorrectionLevel,Cc.M),s=Lc.from(e.version),i=Ec.from(e.maskPattern),e.toSJISFunc&&vc.setToSJISFunction(e.toSJISFunc)),Mc(t,s,r,i)};var Ic={},Oc={};!function(t){function e(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const s=parseInt(e.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:255&s,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(t){t||(t={}),t.color||(t.color={});const s=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,i=t.width&&t.width>=21?t.width:void 0,r=t.scale||4;return{width:i,scale:i?4:r,margin:s,color:{dark:e(t.color.dark||"#000000ff"),light:e(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},t.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},t.getImageWidth=function(e,s){const i=t.getScale(e,s);return Math.floor((e+2*s.margin)*i)},t.qrToImageData=function(e,s,i){const r=s.modules.size,n=s.modules.data,o=t.getScale(r,i),h=Math.floor((r+2*i.margin)*o),a=i.margin*o,l=[i.color.light,i.color.dark];for(let t=0;t<h;t++)for(let s=0;s<h;s++){let d=4*(t*h+s),_=i.color.light;if(t>=a&&s>=a&&t<h-a&&s<h-a){_=l[n[Math.floor((t-a)/o)*r+Math.floor((s-a)/o)]?1:0]}e[d++]=_.r,e[d++]=_.g,e[d++]=_.b,e[d]=_.a}}}(Oc),function(t){const e=Oc;t.render=function(t,s,i){let r=i,n=s;void 0!==r||s&&s.getContext||(r=s,s=void 0),s||(n=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=e.getOptions(r);const o=e.getImageWidth(t.modules.size,r),h=n.getContext("2d"),a=h.createImageData(o,o);return e.qrToImageData(a.data,t,r),function(t,e,s){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=s,e.width=s,e.style.height=s+"px",e.style.width=s+"px"}(h,n,o),h.putImageData(a,0,0),n},t.renderToDataURL=function(e,s,i){let r=i;void 0!==r||s&&s.getContext||(r=s,s=void 0),r||(r={});const n=t.render(e,s,r),o=r.type||"image/png",h=r.rendererOpts||{};return n.toDataURL(o,h.quality)}}(Ic);var Bc={};const Fc=Oc;function Hc(t,e){const s=t.a/255,i=e+'="'+t.hex+'"';return s<1?i+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':i}function Wc(t,e,s){let i=t+e;return void 0!==s&&(i+=" "+s),i}Bc.render=function(t,e,s){const i=Fc.getOptions(e),r=t.modules.size,n=t.modules.data,o=r+2*i.margin,h=i.color.light.a?"<path "+Hc(i.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",a="<path "+Hc(i.color.dark,"stroke")+' d="'+function(t,e,s){let i="",r=0,n=!1,o=0;for(let h=0;h<t.length;h++){const a=Math.floor(h%e),l=Math.floor(h/e);a||n||(n=!0),t[h]?(o++,h>0&&a>0&&t[h-1]||(i+=n?Wc("M",a+s,.5+l+s):Wc("m",r,0),r=0,n=!1),a+1<e&&t[h+1]||(i+=Wc("h",o),o=0)):r++}return i}(n,r,i.margin)+'"/>',l='viewBox="0 0 '+o+" "+o+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+l+' shape-rendering="crispEdges">'+h+a+"</svg>\n";return"function"==typeof s&&s(null,d),d};const zc=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},Gc=v_,Uc=Ic,jc=Bc;function qc(t,e,s,i,r){const n=[].slice.call(arguments,1),o=n.length,h="function"==typeof n[o-1];if(!h&&!zc())throw new Error("Callback required as last argument");if(!h){if(o<1)throw new Error("Too few arguments provided");return 1===o?(s=e,e=i=void 0):2!==o||e.getContext||(i=s,s=e,e=void 0),new Promise((function(r,n){try{const n=Gc.create(s,i);r(t(n,e,i))}catch(t){n(t)}}))}if(o<2)throw new Error("Too few arguments provided");2===o?(r=s,s=e,e=i=void 0):3===o&&(e.getContext&&void 0===r?(r=i,i=void 0):(r=i,i=s,s=e,e=void 0));try{const n=Gc.create(s,i);r(null,t(n,e,i))}catch(t){r(t)}}b_.create=Gc.create,b_.toCanvas=qc.bind(null,Uc.render),b_.toDataURL=qc.bind(null,Uc.renderToDataURL),b_.toString=qc.bind(null,(function(t,e,s){return jc.render(t,s)}));class Yc extends fo{_doPrepare(t,e){}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=this._value,o=null==n?"":String(n),{w:h,h:a}=r.getQrcodeSize(),l={errorCorrectionLevel:r.correctionLevel,width:h,height:a,margin:2,color:{}},d=e.getElementsByTagName("canvas")[0];if(d&&d.remove(),b_.toCanvas(o,l,((t,s)=>{e.appendChild(s)})),We.TESTING)return{width:h,height:a}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Pt]=null}setValue(t,e){}}Yc.SPAN_CLASS="rtc-qrcode-span";class Qc extends Yc{_doPrepare(t,e){e[Pt]=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const{w:r,h:n}=this._model.getQrcodeSize();return{width:r,height:n}}}class Zc extends po{_doPrepare(t,e){e[Dt]=this.$_getGroup(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){return{width:0,height:0}}_doRender(t,e,s,i){}_doUnprepare(t,e){}setValue(t,e){}$_getGroup(t,e){let s=e.getElementsByClassName(Zc.GROUP_CLASS)[0];return s||(s=t.doc.createElement("div"),s.className=Zc.GROUP_CLASS,e.appendChild(s)),s}}Zc.GROUP_CLASS="rtc-rating-group";class Xc extends po{_doDisposeContent(){this._shape=p.destroy(this._shape)}_doPrepare(t,e){this._shape=this.$_getShape(t,e)}_getStyleTarget(t){return this._shape&&this._shape.styleTarget()}_doMeasure(t,e,s,i){const r=this.model();let n=r.getShapeWidth()||t._explicitWidth,o=r.getShapeHeight()||t._explicitHeight;if(this._shape){const e=this._shape.dom();this._setClass(e,t.row);const s=r.hint||"";this._shape.resize(n,o),Fe.resize(e,n,o),Fe.setAttr(e,"aria-label",s),Fe.setAttr(e,"aria-hidden",r.decorative||!s)}return{width:n,height:o}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Mt]=null}setValue(t,e){}$_getShape(t,e){const s=t.manager().owner().shapes(),i=this._model.getShapeName(),r=e.getElementsByClassName(Xc.SVG_CLASS)[0];let n;return r&&e[Vt]===i?r&&(n=s.createStock(r,i,Xc.SVG_CLASS)||s.createCustom(i,r,null)):(r&&r.remove(),n=s.createStock(t.doc,i,Xc.SVG_CLASS)||s.createCustom(i,null,null),n&&(n instanceof vr&&n.setShape(s.getCustom(i)),n.appendTo(e),e[Vt]=i,this._shape=n)),n}}Xc.SVG_CLASS="rtc-shape-svg";class Kc extends Xc{_doPrepare(t,e){this._shape=e[Mt]=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const r=this.model();return{width:r.getShapeWidth()||t._explicitWidth,height:r.getShapeHeight()||t._explicitHeight}}}class Jc extends mo{_doMeasure(t,e,s,i){const r=this._model,n=this._values=this._getValues(t,r.baseValue);let o=oe(r.chartWidth,t._explicitWidth),h=oe(r.chartHeight,t._explicitHeight);return this._setClass(this._svg.svg,t.row),isNaN(o)?o=this._measureChart(t,this._svg,n.values):this._wPoint=NaN,isNaN(h)&&(h=Math.min(Jc.DEF_HEIGHT,i)),{width:o,height:h}}_doRender(t,e,s,i){this._svg.setSize(s,i),this._svg.clear(),this._values.values.length&&this._renderChart(t,this._svg,this._values,s,i)}setValue(t,e){}_measureChart(t,e,s){return(this._wPoint=Math.max(1,oe(this._model.pointWidth,1)))*s.length}}Jc.DEF_HEIGHT=30;class tu extends Jc{_getSvgClass(){return tu.SVG_CLASS}_renderChart(t,e,s,i,r){const n=this._model,o=s.values,h=s.hasBelow,a=oe(n.maxValue,s.max),l=o.length,d=oe(this._wPoint,i/l),_=d*this._model.pointSize;let c=0;if(h);else{let t=oe(n.minValue,n.baseValue);isNaN(t)&&(t=s.min,n.minPadding>0&&(t-=(a-t)*n.minPadding));for(let i=0;i<l;i++){const h=o[i],u=c+d/2,g=r-(o[i]-t)*r/(a-t),p=e.rect(u-_/2,g,_,r,null).style;0===i&&n.firstStyle&&Object.assign(p,n.firstStyle),i===l-1&&n.lastStyle&&Object.assign(p,n.lastStyle),h===s.max&&n.maxStyle&&Object.assign(p,n.maxStyle),h===s.min&&n.minStyle&&Object.assign(p,n.minStyle),c+=d}}}}tu.SVG_CLASS="rtc-sparkbar-svg";class eu extends Jc{_getSvgClass(){return eu.SVG_CLASS}_renderChart(t,e,s,i,r){const n=this._model,o=s.values,h=oe(n.maxValue,s.max),a=o.length,l=oe(this._wPoint,i/a),d=[];let _=0,c=n.minValue;isNaN(c)&&(c=s.min,n.minPadding>0&&(c-=(h-c)*n.minPadding));for(let t=0;t<a;t++){const e=_+l/2,s=r-(o[t]-c)*r/(h-c);d.push(e,s),_+=l}e.polyline(d)}}eu.SVG_CLASS="rtc-sparkline-svg";class su extends tu{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){return{width:10,height:10}}_doRender(t,e,s,i){}}class iu extends eu{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){return{width:10,height:10}}_doRender(t,e,s,i){}}class ru extends mo{_getSvgClass(){return ru.SVG_CLASS}_doMeasure(t,e,s,i){const r=this.model();let n=t._explicitWidth||r.getSvgWidth(),o=t._explicitHeight||r.getSvgHeight();if(this._svg){const e=this._svg,s=r.shapes,i=e.svg;e.clear(),Array.isArray(s)?s.forEach((t=>e.path(t))):s&&e.path(s),e.setViewSize(r.getVboxWidth(),r.getVboxHeight()),e.setSize(r.getSvgWidth(),r.getSvgHeight()),this._setClass(i,t.row);const h=r.hint||"";Fe.resize(i,n,o),Fe.setAttr(i,"aria-label",h),Fe.setAttr(i,"aria-hidden",r.decorative||!h)}}_doRender(t,e,s,i){}setValue(t,e){}}ru.SVG_CLASS="rtc-svg-svg";class nu extends g_{_doPrepare(t,e){e[At]=this.$_getLabel(t,e),super._doPrepare(t,e)}$_getLabel(t,e){let s=e.getElementsByClassName(nu.LABEL_CLASS)[0];return s||(s=this._createSpan(t,nu.LABEL_CLASS,"span"),e.appendChild(s)),s}}nu.LABEL_CLASS="rtc-label-label";class ou extends po{_doPrepare(t,e){e[Mt]=this.$_getShape(t,e)}_getStyleTarget(t){return t[Mt].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[Mt],o=n.firstElementChild;this._setClass(o,t.row),o.textContent=r.letter,o.setAttribute("x",50+100*(r.offsetX||0)+"%"),o.setAttribute("y",50+100*(r.offsetY||0)+"%");const h=o.getBoundingClientRect();if(n.style.width=h.width+"px",n.style.height=h.height+"px",We.TESTING)return{width:20,height:30}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Mt]=null}setValue(t,e){}$_getShape(t,e){let s=e.getElementsByClassName(ou.SVG_CLASS)[0];if(!s){const i=t.doc.createElementNS(ni,"text");i.setAttribute("x","50%"),i.setAttribute("y","50%"),i.setAttribute("dominant-baseline","middle"),i.setAttribute("text-anchor","middle"),s=t.doc.createElementNS(ni,"svg"),s.classList.add(ou.SVG_CLASS),s.appendChild(i),e.appendChild(s)}return s}}ou.SVG_CLASS="rtc-letter-svg";class hu extends po{_doPrepare(t,e){e[At]=this.$_getSpan(t,e)}_getStyleTarget(t){return t[At].style}_doMeasure(t,e,s,i){const r=this._model,n=this._wLine=r.thickness||0,o=e[At],h=t.layout._parent,a=this._horz="horizontal"===r.dir||"vertical"!==r.dir&&h.canContainVspace(),l=oe(t._explicitWidth,a?s:n),d=oe(t._explicitHeight,a?n:i),_=o.style;return this._setClass(o,t.row),_.borderWidth=a?`0 0 ${n}px 0`:`0 ${n}px 0 0`,_.borderColor=r.lineColor,_.borderStyle=r.lineStyle,{width:l,height:d}}_doRender(t,e,s,i){const r=e[At],n=this._wLine;this._horz?i!==n&&(Fe.setHeight(r,n),Fe.moveY(r,-(i-n)/2)):s!==n&&(Fe.setWidth(r,n),Fe.moveX(r,-(s-n)/2))}_doUnprepare(t,e){e[At]=null}setValue(t,e){}$_getSpan(t,e){let s=e.getElementsByClassName(hu.SPAN_CLASS)[0];return s||(s=t.createElement("span"),s.className=hu.SPAN_CLASS,Object.assign(s.style,{display:"block",position:"relative",boxSizing:"border-box",width:"100%",height:"100%"}),e.appendChild(s)),s}}hu.SPAN_CLASS="rtc-line-span";class au extends po{_doPrepare(t,e){e[Mt]=this.$_getSVG(t,e)}_getStyleTarget(t){return t[Mt].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[Mt];let o=r.getSpinnerWidth()||t._explicitWidth,h=r.getSpinnerHeight()||t._explicitHeight;if(this._setClass(n,t.row),n){const t=n[$t],e=r.hint||"";let s;if(r.spinnerType===hi.SPOKES)s="rtc-spinner-spoke";else s="rtc-spinner-default";return t&&n.classList.remove(t),n.classList.add(s),n[$t]=s,Fe.setAttr(n,"aria-label",e),Fe.setAttr(n,"aria-hidden",!e),Fe.clearChildren(n),void Fe.resize(n,o,h)}}_doRender(t,e,s,i){const r=this.model(),n=e[Mt];Fe.resize(n,s,i),ai.render(t.doc,n,{type:r.spinnerType,width:s,height:i,itemCount:r.itemCount,duration:r.duration})}_doUnprepare(t,e){e[Mt]=null}setValue(t,e){}$_getSVG(t,e){let s=e.getElementsByClassName(au.SVG_CLASS)[0];if(!s){const i=t.doc;s=oi.create(i),s.classList.add(au.SVG_CLASS),e.appendChild(s)}return s}}au.SVG_CLASS="rtc-spinner-svg";class lu extends au{_doMeasure(t,e,s,i){const r=this.model();return{width:r.getSpinnerWidth()||t._explicitWidth,height:r.getSpinnerHeight()||t._explicitHeight}}_doRender(t,e,s,i){}}class du extends fo{_getStyleTarget(t){return t[At]}_doPrepare(t,e){e[At]=this.$_getDiv(t,e)}_doMeasure(t,e,s,i){const r=this._model,n=t.needMeasureRenderer(),o=t.manager().data(),h=o&&o.fieldByName(r.field||t.layout.getField()),a=h&&o instanceof yh&&o.isSorted(h),l=null==r.markVisible?t.layout.scope.sortMarkVisible:r.markVisible,d=null==r.orderVisible?t.layout.scope.sortOrderVisible:r.orderVisible,{span:_,dir:c,order:u}=this.$_getSpans(e);let g=0,p=0;if(this._setClass(_,t.row),_.textContent=r.label||(h?h.displayText():r.field||this._value),a?(l?(Fe.show(c),c.textContent=a.dir===te.ASCENDING?"↓":"↑",g=n?c.offsetWidth:0):Fe.hide(c),d?(Fe.show(u),u.textContent=String.fromCharCode(E+a.order),g+=n?u.offsetWidth:0):Fe.hide(u)):(Fe.hide(c),Fe.hide(u)),n)return g+=_.offsetWidth,p=Math.max(_.offsetHeight,c.offsetHeight),d&&(p=Math.max(p,u.offsetHeight)),{width:g,height:p}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[At]=null}setValue(t,e){}$_getDiv(t,e){function s(){const e=t.doc.createElement("span");return i.appendChild(e),e}let i=e.getElementsByClassName(du.FIELD_CLASS)[0];return i||(i=t.createElement("div"),i.className=du.FIELD_CLASS,Fe.setStyle(s(),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),s().className=du.DIR_CLASS,s().className=du.ORDER_CLASS,e.appendChild(i)),i}$_getSpans(t){const e=t[At].children;return{span:e[0],dir:e[1],order:e[2]}}}du.FIELD_CLASS="rtc-field-field",du.DIR_CLASS="rtc-field-dir",du.ORDER_CLASS="rtc-field-order",du.IS_FIELD_ORDER_VISIBLE="isFieldOrderVisible";const _u={width:"",color:"transparent"},cu=Object.assign(_u,{backgroundColor:"#e0e0e0",backgroundImage:"linear-gradient(90deg, #e0e0e0, #efefef 50%, #e0e0e0)",backgroundRepeat:"no-repeat"});class uu extends po{setAnimation(t){this._ani=t}_getStyleTarget(t){return t[At]}_doPrepare(t,e){e[At]=this.$_getDiv(t,e)}_doMeasure(t,e,s,i){this._model;const r=e[At];if(this._setClass(r,t.row),r.style.width=isNaN(t._explicitWidth)?"100%":t._explicitWidth+"px",r.textContent="Hello",We.TESTING){const t=e[At];return{width:Math.ceil(t.offsetWidth),height:Math.ceil(t.offsetHeight)}}}_doRender(t,e,s,i){const r=e[At],n=this._ani;if(r.style.maxWidth=s+"px",n){const t=e[At],s=n.container.getBoundingClientRect(),i=t.getBoundingClientRect();t.style.backgroundSize=`50px ${s.height}px`,t.animate([{backgroundPositionX:s.x-i.x+"px"},{backgroundPositionX:s.x+s.width-i.x+"px"}],{duration:oe(n.duration,n.duration||1200),iterations:1/0})}}_doUnprepare(t,e){e[At]=null}setValue(t,e){}$_getDiv(t,e){let s=e.getElementsByClassName(uu.DUMMY_CLASS)[0];return s||(s=t.createElement("div"),s.className=uu.DUMMY_CLASS,Object.assign(s.style,g_.SPAN_STYLE),Object.assign(s.style,t.manager().isSkeleton()?cu:_u),s.style.display="inline-blick",e.appendChild(s)),s}}uu.DUMMY_CLASS="rtc-dummy-dummy";const gu="$_tid_";class pu extends fo{_doPrepare(t,e){const s=e[Lt]=this.$_getHtml(t,e);this._setClass(s,t.row)}_getStyleTarget(t){return t[Lt].style}_doMeasure(t,e,s,i){const r=e[Lt];return{width:Math.ceil(r.offsetWidth),height:Math.ceil(r.offsetHeight)}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Lt]=null}setValue(t,e){}$_getHtml(t,e){const s=this.model();let i=e.getElementsByClassName(pu.HTML_CLASS)[0];i&&i[gu]!==s.tid&&(e.removeChild(i),i=null),i||(i=t.doc.createElement("div"),i.className=pu.HTML_CLASS,i[gu]=s.tid,e.appendChild(i)),i.style.width="";let r=s.html;if(!r&&s.domid){const e=t.manager().owner().getTemplateHtml(s.domid);if(e instanceof HTMLElement){let i=zt.parse(s.useInner?e.innerHTML:e.outerHTML);r=i instanceof zt?t.inflate(i):i}}return i.innerHTML=r,i}}pu.HTML_CLASS="rtc-html-html";const fu={button:l_,dummy:uu,field:du,ftext:class extends p_{_doPrepare(t,e){super._doPrepare(t,e)}},gauge:__,html:pu,icon:c_,image:u_,label:nu,letter:ou,line:hu,link:w_,meter:m_,progress:y_,qrcode:Yc,rating:Zc,shape:Xc,spacer:yo,sparkbar:tu,sparkline:eu,spinner:au,svg:ru,text:p_};class wu{static setTesting(){fu.qrcode=Qc,fu.shape=Kc,fu.sparkbar=su,fu.sparkline=iu,fu.svg=ru,fu.text=f_,fu.spinner=lu}setTesting(){this._renderer=new Ws,this._default=new f_(this._renderer)}constructor(){this._impls={},this._renderer=new Ws,this._default=new p_(this._renderer)}borrow(t){if(t){const e=t.type(),s=(this._impls[e]||(this._impls[e]=[])).pop()||this.$_createImpl(e);if(s)return s.setModel(t),s}return this._default}free(t){if(t!==this._default){const e=t.model(),s=e?e.type():this.$_getType(t.constructor);let i=this._impls[s];i||(i=this._impls[s]=[]),i.push(t)}}$_getType(t){for(let e in fu)if(t===fu[e])return e}$_createImpl(t){return new fu[t]}}class mu extends so{constructor(t){super(t),this._listControl=t}get control(){return this._listControl}get listView(){return this._listControl.listView()}}class yu extends ro{constructor(t){super(t.control),this._handler=()=>{this.list.scrollBy(this._delta);const t=this.list.listView().bodyView().itemViews();let e,s=-1;if(this._delta<0){const i=t[0];i instanceof zo&&(s=i.row(),e="start")}else{const i=t[t.length-1];i instanceof zo&&(s=i.row(),e="end")}this._edge=e,this._scrollCallback(t,s,e)},this._body=t.bodyView(),this._vertical=this._body.isVertical(),this._edgeGap=t.control.current().dragEdgeGap()}get list(){return this.control}checkScroll(t,e,s,i){const r=this._vertical,n=r?e:t,o=r?this._body.y:this._body.x,h=o+(r?this._body.height:this._body.width);let a=0;if(n<=o+this._edgeGap?this._body.scrollPos()>0&&(a=-10):n>=h-this._edgeGap&&(this._body.isScrollEnded()||(a=10)),0!==a)return this._timer||(this._scrollCallback=s,this._endScrollCallback=i,this._delta=a,this._timer=setInterval(this._handler,30)),!0;this.$_ended(!1)}end(t=-1,e=-1){try{this.$_ended(!0)}finally{super.end(t,e)}}$_ended(t){if(this._timer)try{t&&this._endScrollCallback&&this._endScrollCallback(this._edge)}finally{clearInterval(this._timer),this._timer=void 0,this._scrollCallback=void 0,this._endScrollCallback=void 0}}}class bu extends ro{constructor(t){super(t.control),this._view=t}_doStart(t,e,s,i,r){return this._off=this._view.dom.offsetTop,!0}_doDrag(t,e,s,i,r){const n=this._view.calcPosition(r-this._off);return this.control.setScrollIndex(n,0),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}}class vu extends ro{constructor(t){super(t)}canSwipe(){return!0}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){const n=this.control,o=e-i,h=s-r;return n.isVertical()?Math.abs(o)>Math.abs(h)?n.rowOffsetBy(o):n.scrollBy(h):Math.abs(h)>Math.abs(o)?n.rowOffsetBy(h):n.scrollBy(o),!0}_canAccept(t,e,s){return!0}_doEnded(){this.control.releaseLock()}}class Cu extends yu{constructor(t){super(t),this._callback=(t,e,s)=>{const i="start"===s;if(e>=0){const e=this.control.bodyView();let s=i?0:t.length-1,r=t[s];for(let n=0;n<t.length/2;n++)if(!(r instanceof Wo&&e.isRowVisible(r.row(),!0))){if(r=i?t[++s]:t[--s],r instanceof Wo){this.$_resizeSelection(r);break}if(!r)break}}},this._endCallback=t=>{}}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){if(this.checkScroll(i,r,this._callback,this._endCallback))return!0;const n=this.control,o=n.listView().bodyView(),h=n.toElement(o,i,r),a=o.itemViewAt(h.x,h.y,We.TESTING?0:this.handle.height/2);return this.$_resizeSelection(a),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(t,e){const s=this.control,i=s.listView().bodyView(),r=s.toElement(i,t,e),n=i.itemViewAt(r.x,r.y,0);n instanceof Wo&&s.makeRowVisible(n.row())}$_resizeSelection(t){if(t){const e=this.control,s=e.getSelection(),i=t.index(),r=this.handle.isEnd()?i:NaN,n=this.handle.isEnd()?NaN:i;oe(r,s.end)>=oe(n,s.start)&&e.resizeSelection(n,r)}}}class Su extends ro{constructor(t){super(t.control),this._view=t}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){return this._view.scrollBy(i-e),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}}class Ru extends ro{constructor(t){super(t),this._nextPage=-1,this._listView=t.listView()}_doStart(t,e,s,i,r){return this._dx=i-e,this.$_preparePageMove(this._dx),!0}_doDrag(t,e,s,i,r){return this._dx=i-e,this.$_movePage(this._dx),!0}_doCanceled(){this.$_cancelPageMove()}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){this.$_commitPageMove(this._dx)}_doSwipe(t){return this.$_swipePageMove(t)}_doEnded(){this.$_endPageMove(this._dx)}$_preparePageMove(t){const e=this._listView,s=e.bodyView();let i=e.getSpareBody();this._bodyPos=s.x,this.control.lock((()=>{e.addChild(i),i.setPage(e.owner().page()+(t<0?1:-1),s,!1),i.moveX(0)})),this._nextPage=-1,e.pageMoving=!0}$_unpreparePageMove(){const t=this._listView,e=t.bodyView(),s=t.getSpareBody();e.moveX(this._bodyPos),t.removeChild(s),s.setPage(-1),e.$_removeEndEffect(),t.pageMoving=!1,this._nextPage>=0&&(t.owner().setPage(this._nextPage),this.control.updateNow())}$_movePage(t){if(0===t)return;const e=this._listView,s=e.owner(),i=e.bodyView(),r=e.getSpareBody(),n=s.page(),o=i.width;let h=i.x+t;i.moveX(h),h=i.x,h<this._bodyPos?(r.setPage(n+1,i,!1),r.moveX(h+o+1)):h>this._bodyPos&&(r.setPage(n-1,i,!1),r.moveX(h-o-1))}$_cancelPageMove(){}$_commitPageMove(t){const e=this._listView,s=e.bodyView(),i=e.owner(),r=e.getSpareBody(),n=i.page(),o=this._bodyPos,h=s.width;(r.page>n&&r.x<=o+.8*h||r.page<n&&s.x>=o+h*(1-.8))&&(this._nextPage=r.page)}$_swipePageMove(t){const e=this._listView,s=e.bodyView(),i=e.owner().page(),r=this._bodyPos,n=s.width,o=e.getSpareBody().x;return t===W.LEFT&&o<r+n?(this._nextPage=i+1,!0):t===W.RIGHT&&o+n>r?(this._nextPage=i-1,!0):void 0}$_endPageMove(t){const e=this._listView;if(e.canAnimate()){const t=e.getSpareBody(),s=e.bodyView(),i=this._nextPage>=0,r=e.width;let n=i?0:t.x<0?-r:r;t.dom.animate([{left:t.x+"px"},{left:n+"px"}],{duration:100,fill:"none"}).addEventListener("finish",(()=>{this.$_unpreparePageMove()})),n=i?s.x<0?-r:r:0,s.dom.animate([{left:s.x+"px"},{left:n+"px"}],{duration:100,fill:"none"})}else this.$_unpreparePageMove()}}class xu extends ro{constructor(t){super(t),this._nextRow=-1,this._bodyView=t.listView().bodyView(),this._singleView=this._bodyView.singleView(),this._spareView=this._bodyView.spareSingleView()}_doStart(t,e,s,i,r){return this._dx=i-e,this.$_prepareSingleMove(),!0}_doDrag(t,e,s,i,r){return this._dx=i-e,this.$_moveSingle(i-e),!0}_doCanceled(){this.$_cancelMoveSingle()}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){this.$_commitMoveSingle(this._dx)}_doSwipe(t){return this.$_swipeMoveSingle(t)}_doEnded(){this.$_endSingleMove(this._dx)}$_prepareSingleMove(){const t=this._bodyView,e=this._singleView,s=this._spareView;this._singlePos=e.x,this.control.lock((()=>{t.insertBefore(s,e),s.moveX(0),s.setDimmed(1)})),this._nextRow=-1,t.singleMoving=!0}$_unprepareSingleMove(){const t=this._bodyView,e=this._singleView,s=this._spareView;e.moveX(this._singlePos),t.removeChild(s),t.setSingleRow(s,-1,e),t.$_removeEndEffect(),t.singleMoving=!1,this._nextRow>=0&&(t.owner().setScrollIndex(this._nextRow),t.setSingleRow(e,this._nextRow,e),this.control.updateNow())}$_moveSingle(t){if(0===t)return;const e=this._singleView,s=this._spareView,i=e.row(),r=e.width;let n=e.x+t;e.moveX(n),n=e.x,n<this._singlePos?(this._bodyView.setSingleRow(s,i+1,e),s.moveX(n+r+1),s.setDimmed(c.clamp((s.x-.55*r)/(.45*r),0,1))):(this._bodyView.setSingleRow(s,i-1,e),s.moveX(n-r-1),s.setDimmed(c.clamp((.45*r-n)/(.45*r),0,1)))}$_cancelMoveSingle(){}$_getNextRow(){const t=this._singleView,e=this._spareView,s=t.row(),i=this._singlePos,r=t.width;return e.row()>s&&e.x<=i+.8*r||e.row()<s&&t.x>=i+r*(1-.8)?e.row():-1}$_commitMoveSingle(t){this._nextRow=this.$_getNextRow()}$_swipeMoveSingle(t){const e=this._bodyView,s=this._singleView,i=s.row(),r=this._singlePos,n=s.width,o=e.spareSingleView().x;return s.setDimmed(0),t===W.LEFT&&o<r+n?(this._nextRow=i+1,!0):t===W.RIGHT&&o+n>r?(this._nextRow=i-1,!0):void 0}$_endSingleMove(t){const e=this._bodyView;if(e.canAnimate()){const t=this._singleView,s=this._spareView,i=this._nextRow>=0,r=e.width;let n=i?0:s.x<0?-r:r;t.setDimmed(0),s.dom.style.left=n+"px";const o=s.dom.animate([{left:s.x+"px"},{left:n+"px"}],{duration:100,fill:"none"});o&&(o.addEventListener("finish",(()=>{this.$_unprepareSingleMove()})),n=i?t.x<0?-r:r:0,t.dom.animate([{left:t.x+"px"},{left:n+"px"}],{duration:100,fill:"none"}))}else this.$_unprepareSingleMove()}}class Vu extends ro{constructor(t){super(t.control),this._view=t}canSwipe(){return!0}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){return this._view.scrollBy(r-s),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){this.control.releaseLock()}}let Eu="y",$u="top",Au="height",Lu="moveY";class Tu extends yu{constructor(t){super(t),this._off=0,this._scrolling=!1,this._callback=(t,e,s)=>{const i="start"===s;if(this._scrolling=!0,this.$_resetItems(t),e>=0){let e;e=i?t[0]:t[t.length-1],this._body.canMoveTo(this._row,e)?this.$_setTarget(e,i,!0):this.$_swapViews(-1,i,!0)}else this.$_swapViews(-1,i,!0)},this._endCallback=t=>{this._target&&setTimeout((()=>{this.list.makeRowVisible(this._target)}),0)},this._vertical||(Eu="x",$u="left",Au="width",Lu="moveX"),this.$_resetItems(this._body.itemViews()),this._targetFeedback=this.$_createTargetFeedback(t.doc)}$_createTargetFeedback(t){const e=t.createElement("div");return e.className="rtc-row-move-target",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}setRequest(t){const e=this._body.getRowView(this._row=t.row);return this._target=this._pts=void 0,this._hRow=e.height,this._pRow=e[Eu],this._rowFeedback=this.$_createFeedback(e),this}_doStart(t,e,s,i,r){const n=this._body,o=this.control.toElement(n,i,r);return this._off=o[Eu]-this._pRow,this.control.setLock(),this.$_resetItems(n.itemViews()),Fe.setVisible(this._targetFeedback,!1),n.addFeedback(this._targetFeedback),this.$_moveFeedback(this._rowFeedback,i,r),!0}_doDrag(t,e,s,i,r){if(this.$_moveFeedback(this._rowFeedback,i,r),this.checkScroll(i,r,this._callback,this._endCallback))return!0;const n=this._body,o=this._vertical,h=this._off,a=o?r<s:i<e,l=this._hRow;this._scrolling&&(this._scrolling=!1,this.$_resetItems(n.itemViews()),this.$_swapViews(this._row,a,!1)),i+=o?0:a?-h:l-h,r+=o?a?-h:l-h:0;const d=this.control.toElement(n,i,r),_=this.$_itemViewAt(d[Eu]+n.scrollOff());let c=_&&_.view;return c&&c.row()!==this._row&&(n.canMoveTo(this._row,c)?(a&&_.pos>c.height/2||!a&&_.pos<c.height/2)&&(c=null):c=null),c&&this.$_setTarget(c,a,!1),Fe.setVisible(this._targetFeedback,!!this._target),!0}_doCanceled(){}_canAccept(t,e,s){return this._target>=0&&this._target!==this._row}_doCompleted(t,e,s){const i=this.control.data();i instanceof ah&&i.moveRow(this._row,this._target)}_doEnded(t=-1,e=-1){super._doEnded(t,e),this._views.forEach((t=>t.visible=!0)),this._rowFeedback.remove(),this._rowFeedback=null,this._targetFeedback.remove(),this.control.releaseLock(),this.control.invalidateLayout()}$_resetItems(t){const e=this._pts=[0];(this._views=t).forEach((t=>{e.push(e[e.length-1]+t[Au])}))}$_itemViewAt(t){const e=this._pts;for(let s=0,i=e.length-1;s<i;s++)if(t>=e[s]&&t<e[s+1])return{view:this._views[s],pos:t-e[s]}}$_createFeedback(t){const e=t.dom.cloneNode(!0);return Object.assign(e.style,{boxShadow:"0px 0px 5px"}),this._body.listView().addFeedback(e),e}$_moveFeedback(t,e,s){this._vertical?Fe.move(this._rowFeedback,0,s-this._off):Fe.move(this._rowFeedback,e-this._off,0)}$_swapViews(t,e,s){const i=[],r=this._views,n=r.slice(0),o=-this._body.scrollOff();let h,a=0;if(h=r.findIndex((t=>t.row()===this._row)),h>=0){const e=n.splice(h,1)[0];s||(h=r.findIndex((e=>e.row()===t)),h>=0&&n.splice(h,0,e)),e.move(-1e5,-1e4)}return i.push(a),n.forEach((e=>{e.aniTag=e[Eu],e.row()===t&&Fe.setRect(this._targetFeedback,e.getBounds()),e[Lu](a+o),a+=e.height,i.push(a)})),this._prevUp=e,this._views=n,this._pts=i,this._target=t,n}$_setTarget(t,e,s){if(t.row()===this._row||this._target&&e===this._prevUp&&t.row()===this._target)s&&this.$_swapViews(t.row(),e,s);else{const i=this.$_swapViews(t.row(),e,s);s||i.forEach((t=>{const e=i.findIndex((e=>e.row()===t.row())),s=t.aniTag,r=t[Eu];t instanceof zo&&e>=0&&r!==s&&Fe.animate(t.dom,$u,ae(s),ae(r))}))}}}class ku extends yu{constructor(t){super(t),this._callback=(t,e)=>{this._views=t.filter((t=>t instanceof zo)),this.$_checkRow(e)},this._vertical,this._views=this._body.itemViews().filter((t=>t instanceof zo))}setRequest(t){return this}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){if(this.checkScroll(i,r,this._callback,null))return!0;for(const e of this._views)if(e.rowCell.displayOfDom(t)===cn.CHECK){this.$_checkRow(e.row());break}return!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}$_checkRow(t){if(t>=0&&t!==this._prev){switch(this._body._owner.current()._rowBar.check().dragMode()){case ln.CHECK:this.list.checkRow(t,!0,!1);break;case ln.UNCHECK:this.list.checkRow(t,!1,!1);break;case ln.TOGGLE:this.list.toggleChecked(t,!1)}this._prev=t}}}class Du{constructor(){this._handler=()=>{this._off<=0||this._control.listView().bodyView().isScrollEnded()?(clearInterval(this._timer),this._timer=null):(this._control.scrollBy(Math.min(this._step*this._dir,this._off)),this._off-=this._step)}}run(t,e,s){const i=t.listView().bodyView().getItemView(0),r=t.isVertical()?i.height:i.width;this._control=t,this._dir=e,this._step=s,this._off=e>0?r-t.scrollOff():t.scrollOff(),this._timer=setInterval(this._handler,20)}}class Nu extends mu{constructor(t){super(t),this._clickRow=-1}_doPointerDown(t){const e=this.control,s=e.fullMode(),i=e.listView(),r=i.bodyView(),n=r.getRow(t),o=r instanceof Xd?r.getGroupItem(t):null,h=e.elementOfDom(t);let a;return clearTimeout(this._touchTimer),i.menuView()&&i.menuView().clearTouched(),e.releaseLock(),this._clickDom=this._clickRow=this._clickItem=void 0,this._flingScroller=this._flingScroller&&this._flingScroller.destroy(),We.TESTING&&(h instanceof Xh||r.isCommandVisible()&&r.clearCommands(!0)),this._clickDom=t,this._clickRow=n,this._clickItem=o,!(i.isMenuView(t)||!i.hideMenu(!0))||(!e.editPageView()||!e.editPageView().visible)&&(!(h instanceof ho)&&(h instanceof Va?i.menuView().setTouched(h):h instanceof Qh?(a=this._rowSelectTracker||(this._rowSelectTracker=new Cu(i)),this._rowSelectTracker.handle=h):h instanceof kh||e.isSingleRow()||(s?this.$_rowTouched(this._clickRow):this._touchTimer=setTimeout((()=>{this.$_rowTouched(this._clickRow)}),50)),a&&this.setDragTracker(a),!s))}_doPointerMove(t){if(this.dragging){const e=this.listView.bodyView();e.isCommandVisible()&&e.clearCommands(!1),this._clearTouchEffects(),this.control.listView().isInPanel(t)||this.control.closePanel(!0)}}_doPointerUp(t){return this.control.elementOfDom(t)instanceof Va&&this.listView.menuView().clearTouched(),!0}_doPointerCancel(t){this.dragging&&this.dragTracker&&(this.dragTracker.cancel(),this.setDragTracker(null))}_doPointerLeave(t){this.dragging&&this.dragTracker}_doTouchMove(t){let e;const s=this.control,i=this._touches,r=i[0],n=i[i.length-1],o=this.control.options().orientation()===Ut.HORIZONTAL,h=r.x-n.x,a=r.y-n.y;if(t.touches.length<=1&&(e=this.control.fullMode()?o?Math.abs(a)>Math.abs(h):Math.abs(h)>Math.abs(a):!s.isEmpty()),e)return t.cancelable&&t.preventDefault(),!1}_clearTouchEffects(){clearTimeout(this._touchTimer),this.$_rowTouched(-1)}_processClick(t,e){const s=this.control,i=s.listView(),r=s.rowPageView(),n=i.bodyView(),o=s.elementOfDom(e),h=i.activePanel(),a=i.getLayoutView(e),l=s.searchResult();let d=!a&&i.getPanel(e),_=!!h;if(l&&l.hideCurrent(),o instanceof Va||!i.isMenuView(e))if(o instanceof $r&&o.clickable()){const{x:t,y:i}=s.toElement(o,this.touchX(),this.touchY());o.click(e,t,i)}else if(o instanceof ra)_=d.clickButton(o,s);else if(o instanceof Nr)o.enabled()&&o.click(s);else if(o instanceof Va)i.menuView().clickItem(s.wrapperOrThis(),o)&&s.closeMenu(!0);else if(o instanceof Fo)o.parent instanceof r_?s.dataGroup().toggle(s.getDataGroupOfRow(o.parent.row(),!0),!1):o.parent instanceof zo||o.parent instanceof Ho&&s.groupModel().toggle(o.parent.model().group,!1);else if(o instanceof Pr)o.enabled()&&o.click();else if(o instanceof co)o.click(s.rowBar(),e);else if(o instanceof uo)o.click(s.editBar(),e);else if(o instanceof _d)o.click(e);else if(a)a.clickable()&&a.click(e,NaN,NaN);else if(d)_=d.click(e,NaN,NaN);else{let i=!1;if(r){const t=r.getRenderer(e);t&&(t.click(s,e,-1,null),i=!0)}if(!i){const r=this._clickRow>=0&&n.getRow(e)===this._clickRow?this._clickRow:-1,h=n.getRenderer(r,e);if(h){let t=e[bt];!t&&o instanceof xo&&(t=o.field()),i=h.click(s,e,r,t)}else n instanceof Xd&&this._clickItem&&this._clickItem===n.getGroupItem(e)&&(s.$_groupItemClicked(this._clickItem),i=!0);!i&&r>=0?s.$_rowClicked(r):i&&c.stopEvent(t)}}else i.menu().autoHide&&i.hideMenu(!0);_&&i.activePanel()!==h&&(_=!1),_&&s.closePanel(!0)}_doClick(t,e){if(e!==this._clickDom)return;if(1!==this._tapped)return;We.TESTING&&(this._tapped=0);const s=this.control,i=s.listView(),r=i.bodyView(),n=s.elementOfDom(e);n instanceof Qh||s.clearSelection(i instanceof Yd&&n instanceof Fo),n instanceof Xh||!r.isCommandVisible()?(r.clearCommands(!0),this._processClick(t,e)):r.clearCommands(!0)}_doLongPressed(t,e,s){const i=this.control,r=this.listView.bodyView(),n=r.getRow(t);if(n>=0&&n===this._clickRow){const e=t===this._clickDom&&r.getRenderer(n,t);let s=!1;if(e){const i=t[bt];s=e.longPressed(this.control,n,i)}s||i.$_rowLongPressed(n)}}_doWheel(t){const e=this.control;return e.isVertical()?e.scrollBy(t.deltaY):e.scrollBy(t.deltaX||t.deltaY)}_doSwipe(t,e,s,i,r){const n=this.control;if(n.elementOfDom(t)instanceof Nr)return;const o=n.listView(),h=n.rowPageView(),a=this._clickRow,l=.5;if(o.isInPanel(t)||n.closePanel(!0),h&&h.layoutBack().contains(t)){const t=s===W.UP?1:-1;return this._flingScroller=new no(r,i,l,((e,s)=>!0===h.scrollBy(-e*t))).run(),!0}if(o.bodyView().containsDom(t))if(n.isVertical()){if(s===W.UP||s===W.DOWN){const t=s===W.UP?1:-1;if(!n.fullMode())return this._flingScroller=new no(r,i,l,((e,s)=>!0!==n.scrollBy(e*t)),(()=>{n.fitRowWhenScroll&&o.scrollOff()>0&&(new Du).run(n,t,l)})).run(),!0}else if(a>=0){if(n.current().rowType()===Gt.TABLE&&o.bodyView().canOffsetRow()){const t=s===W.LEFT?1:-1;this._flingScroller=new no(r,i,l,((e,s)=>!0!==n.rowOffsetBy(e*t)),(()=>{})).run()}return n.swipeRow(a,s),!0}}else if(s===W.LEFT||s===W.RIGHT){const t=s===W.LEFT?1:-1;if(!n.fullMode()&&(!this.dragTracker||this.dragTracker.canSwipe()))return R.log("FLING HORZ",s,r,i),this._flingScroller=new no(r,i,l,((e,s)=>!0!==n.scrollBy(e*t)),(()=>{n.fitRowWhenScroll&&o.scrollOff()>0&&(new Du).run(n,t,l)})).run(),!0}else if(a>=0)return n.swipeRow(a,s),!0}_doKeyPress(t){const e=t.target,s=t.key,i=this.control,r=i.elementOfDom(t.target);"Enter"===s&&e instanceof HTMLInputElement&&(e.blur(),r instanceof fa&&r.canEnter()?r.search():r instanceof ua&&r.search()&&i.closePanel(!0),this.$_moveToNextInput(e))}getTrackerFromRequest(t){const e=this.listView;return t instanceof lo?(this._rowMoveTracker||(this._rowMoveTracker=new Tu(e)),this._rowMoveTracker.setRequest(t)):t instanceof _o?(this._checkTracker||(this._checkTracker=new ku(e)),this._checkTracker.setRequest(t)):void 0}_getDragTracker(t,e,s){const i=this.control,r=i.current(),n=i.isSingleRow(),o=i.rowPageView(),h=i.listView(),a=h.scrollBarView(),l=h.pageScrollerView(),d=i.elementOfDom(t);let _;return d instanceof ho?_=this.getTrackerFromRequest(d.getDragRequest(t,r)):d instanceof Nr&&d.enabled()||(a&&a.isView(t)?_=this._scrollBarTracker||(this._scrollBarTracker=new bu(a)):l&&l.isView(t)?_=this._pageScrollTracker||(this._pageScrollTracker=new Su(l)):o?_=this._rowPageTracker||(this._rowPageTracker=new Vu(o)):h.bodyView().containsDom(t)&&(n&&Math.abs(e)>=Math.abs(s)?h.canMoveSingle(e,!0)&&(_=this._singleRowTracker||(this._singleRowTracker=new xu(i))):i.current().row().swipeAction()===Ve.PAGE&&Math.abs(e)>=Math.abs(s)?h.canMovePage(e,!0)&&(_=this._pageMoveTracker||(this._pageMoveTracker=new Ru(i))):n||i.fullMode()||(_=this._bodyTracker||(this._bodyTracker=new vu(i))))),_}$_rowTouched(t){this.control.$_rowTouched(t)}$_moveToNextInput(t){}}const Pu={rowStyle:{padding:"5px 6px"}};var Mu;!function(t){t.Developer="developer",t.Evaluation="evaluation",t.Limited="limited",t.Enterprise="enterprise"}(Mu||(Mu={}));const Iu={name:"RealGrid-Touch",version:"1.0.0",license:"enterprise",code:""};class Ou{static decode(t){const e=Ou.CHARS,s=Ou.PAD;let i=t.split(""),r=[],n=i.length;for(;i[--n]==s;);for(let t=0;t<n;){let s=e.indexOf(i[t++])<<18;t<=n&&(s|=e.indexOf(i[t++])<<12),t<=n&&(s|=e.indexOf(i[t++])<<6),t<=n&&(s|=e.indexOf(i[t++])),r.push(s>>>16&255),r.push(s>>>8&255),r.push(255&s)}for(;0==r[r.length-1];)r.pop();return r}}Ou.PAD="=",Ou.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";class Bu{static union(t,e){const s=e.s3[255&t];t>>=8;const i=e.s2[255&t];t>>=8;const r=e.s1[255&t];t>>=8;const n=e.s0[255&t];let o=(n>>16)+(r>>16)+((65535&n)+(65535&r)>>16)<<16|(65535&n)+(65535&r)&65535;return o=(o>>16^i>>16)<<16|65535&(65535&o^65535&i),(o>>16)+(s>>16)+((65535&o)+(65535&s)>>16)<<16|(65535&o)+(65535&s)&65535}static xor(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)}static _encryptBlock(t,e){const s=Bu.xor,i=Bu.union;let r=t.left,n=t.right;r=s(r,e.p[0]),n=s(n,s(i(r,e),e.p[1])),r=s(r,s(i(n,e),e.p[2])),n=s(n,s(i(r,e),e.p[3])),r=s(r,s(i(n,e),e.p[4])),n=s(n,s(i(r,e),e.p[5])),r=s(r,s(i(n,e),e.p[6])),n=s(n,s(i(r,e),e.p[7])),r=s(r,s(i(n,e),e.p[8])),n=s(n,s(i(r,e),e.p[9])),r=s(r,s(i(n,e),e.p[10])),n=s(n,s(i(r,e),e.p[11])),r=s(r,s(i(n,e),e.p[12])),n=s(n,s(i(r,e),e.p[13])),r=s(r,s(i(n,e),e.p[14])),n=s(n,s(i(r,e),e.p[15])),r=s(r,s(i(n,e),e.p[16])),t.right=r,t.left=s(n,e.p[17])}static _decryptBlock(t,e){const s=Bu.xor,i=Bu.union;let r=t.left,n=t.right;r=s(r,e.p[17]),n=s(n,s(i(r,e),e.p[16])),r=s(r,s(i(n,e),e.p[15])),n=s(n,s(i(r,e),e.p[14])),r=s(r,s(i(n,e),e.p[13])),n=s(n,s(i(r,e),e.p[12])),r=s(r,s(i(n,e),e.p[11])),n=s(n,s(i(r,e),e.p[10])),r=s(r,s(i(n,e),e.p[9])),n=s(n,s(i(r,e),e.p[8])),r=s(r,s(i(n,e),e.p[7])),n=s(n,s(i(r,e),e.p[6])),r=s(r,s(i(n,e),e.p[5])),n=s(n,s(i(r,e),e.p[4])),r=s(r,s(i(n,e),e.p[3])),n=s(n,s(i(r,e),e.p[2])),r=s(r,s(i(n,e),e.p[1])),t.right=r,t.left=s(n,e.p[0])}static _init(t){let e=t.split("").map((function(t){return 255&t.charCodeAt(0)}));const s=Bu.kb,i=Bu._encryptBlock;let r,n,o,h=0,a=0,l={left:0,right:0};const d={p:s.p.slice(0).map((function(t){let s,i=e.length;for(s=0;s<4;s++)a=a*Bu.POW8|e[h++%i];return(t>>16^a>>16)<<16|65535&(65535&t^65535&a)})),s0:s.s0.slice(0),s1:s.s1.slice(0),s2:s.s2.slice(0),s3:s.s3.slice(0)};for(r=0,o=d.p.length;r<o;)i(l,d),d.p[r++]=l.left,d.p[r++]=l.right;for(r=0;r<4;r++)for(n=0,o=d["s"+r].length;n<o;)i(l,d),d["s"+r][n++]=l.left,d["s"+r][n++]=l.right;return d}static decrypt(t,e){const s=Bu._decryptBlock;let i=Bu._init(e),r=[],n=Ou.decode(t),o=n.length>>3,h=0,a={left:null,right:null};for(let t=0;t<o;t++){a.left=n[h]*Bu.POW24|n[h+1]*Bu.POW16|n[h+2]*Bu.POW8|n[h+3],a.right=n[h+4]*Bu.POW24|n[h+5]*Bu.POW16|n[h+6]*Bu.POW8|n[h+7],s(a,i);const t=a.left,e=a.right;r.push(t>>24&255),r.push(t>>16&255),r.push(t>>8&255),r.push(255&t),r.push(e>>24&255),r.push(e>>16&255),r.push(e>>8&255),r.push(255&e),h+=8}if(r[r.length-1]==r[r.length-2]||1==r[r.length-1]){let t=r[r.length-1];r.splice(r.length-t,t)}return String.fromCharCode.apply(null,r)}}Bu.POW2=Math.pow(2,2),Bu.POW3=Math.pow(2,3),Bu.POW4=Math.pow(2,4),Bu.POW8=Math.pow(2,8),Bu.POW16=Math.pow(2,16),Bu.POW24=Math.pow(2,24),Bu.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]};class Fu{static eqaulsUpperDomain(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)}static _getLDKey(t){let e="";for(let s=0,i=t.length;s<i;s++)e+=String.fromCharCode(t[s]>>1);return e}static includedDomains(t,e,s){let i=t.split(",");for(let t=0,r=i.length;t<r;t++){const r=i[t];if(this.eqaulsUpperDomain(r,e))return!0;if(s&&r&&"*"===r[0]&&"*."!==r.substring(0,2)){if(new RegExp("^/"+r.substring(1)+"/").exec(s))return!0}}return!1}static decrypt(t){const e={},s=Bu.decrypt(t,"dkdl"+this._getLDKey(Bu.kb.k)).split(";");for(let t=0,i=s.length;t<i;t++){const i=s[t].split("="),r=i[0],n=i[1];n&&n.length>0&&(e[r]=n)}return e}}class Hu{constructor(t,e){this.label=t,"string"==typeof e?this.className=e:e&&(this.style=Object.assign({},e))}getStyle(){return this.style}run(t,e,s){this._canRun(t,e,s)&&(this.enableCallback&&!1===this.enableCallback(t,this.label,e,s)||this._doRun(t,e,s))}_canRun(t,e,s){return!0}}class Wu extends Hu{constructor(t,e){super(e.label||t,e.style),this.className=e.className,this.enableCallback=e.enableCallback,this._runner=e.run}_doRun(t,e,s){this._runner(t,e,s)}}class zu{constructor(){this._commandMap={"@info":new Uu,"@edit":new ju,"@create":new qu,"@delete":new Yu,"@moveup":new Qu,"@movedown":new Zu},this.row=-1}registeredCommands(){return Object.keys(this._commandMap)}register(t,e,s){t||z(v.requireCommandName),!s&&t in this._commandMap&&G(v.commandNameDuplicated,t),c.isObject(e)&&"function"==typeof e.run&&(this._commandMap[t]=new Wu(t,e))}unregister(t){}get(t){const e=this._commandMap[t];return"function"==typeof e?new e:e}update(t,e){if(e){const s=this._commandMap[t];return s&&c.assignStyleAndProps(s,e)}}}class Gu extends Hu{constructor(t,e){super(t),this.className=e}}class Uu extends Gu{constructor(){super(Uu.LABEL,"rtc-command-info")}_doRun(t,e,s){t.showInfoPage(s,{},!0)}}Uu.LABEL="자세히";class ju extends Gu{constructor(){super(ju.LABEL,"rtc-command-edit")}_doRun(t,e,s){t.showEditPage(s,{},!0)}}ju.LABEL="수정";class qu extends Gu{constructor(){super(qu.LABEL,"rtc-command-create")}_doRun(t,e,s){t.showEditPage(-1,{},!0)}}qu.LABEL="추가";class Yu extends Gu{constructor(){super(Yu.LABEL,"rtc-command-delete"),this.confirm=!1}_doRun(t,e,s){e&&s>=0&&s<e.rowCount()&&(this.confirm?window.confirm(this.confirmMessage||Yu.MESSAGE)&&e.deleteRow(s,!1):e.deleteRow(s,!1))}}Yu.LABEL="삭제",Yu.MESSAGE="정말로 삭제하시겠습니까?";class Qu extends Gu{constructor(){super(Qu.LABEL,"rtc-command-moveup")}_doRun(t,e,s){alert("Move Up!")}}Qu.LABEL="↑";class Zu extends Gu{constructor(){super(Zu.LABEL,"rtc-command-movedown")}_doRun(t,e,s){alert("Move Down!")}}var Xu;Zu.LABEL="↓",function(t){t.ALWAYS="always",t.AUTO="auto",t.NONE="none"}(Xu||(Xu={}));class Ku extends p{constructor(t,e){super(),this._owner=t,this._fields=e||[],this._current=-1}_doDestory(){this._owner=null}fields(){return this._fields}count(){return this._fields.length}isEmpty(){return 0===this._fields.length}current(){return this._current}getRows(){const t=[];return this._fields.forEach((e=>{e.row!==t[t.length-1]&&t.push(e.row)})),t}getCurrrentField(){return this.isEmpty()?null:this._fields[this._current]}moveFirst(){return this.isEmpty()?null:(0!==this._current&&(this._current=0,this._owner.searchIndexChanged(this)),this._fields[this._current])}movePrev(){return this.isEmpty()?null:(this._current!==(this._fields.length+this._current-1)%this._fields.length&&(this._current=(this._fields.length+this._current-1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveNext(){return this.isEmpty()?null:(this._current!==(this._current+1)%this._fields.length&&(this._current=(this._current+1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveLast(){return this.isEmpty()?null:(this._current!==this._fields.length-1&&(this._current=this._fields.length-1,this._owner.searchIndexChanged(this)),this._fields[this._current])}delete(t){for(let e=this._fields.length-1;e>=0;e--)this._fields[e].rowid===t&&this._fields.splice(e,1);this.$_refreshRows(),this._current=Math.min(this._current,this._fields.length-1)}clear(){this._owner.clearSearch(this)}refreshRows(){this.$_refreshRows()}setCurrentDisplay(t){this._currentDisplay=t,this.currentVisible=this._currentDisplay!==Xu.NONE}showCurrent(){const t=this._currentDisplay!==Xu.NONE;t!==this.currentVisible&&(this.currentVisible=t,this._owner.searchCurrentDisplayChanged())}hideCurrent(){const t=this._currentDisplay===Xu.ALWAYS;t!==this.currentVisible&&(this.currentVisible=t,this._owner.searchCurrentDisplayChanged())}$_refreshRows(){const t=this._owner.data();this._fields.forEach((e=>{e.row=t.rowById(e.rowid)}))}}const Ju=function(t,e,s){if(t==e)return!0;let i=c.toStr(t),r=c.toStr(e);return i&&r?(s.matchCase||(i&&(i=i.toLowerCase()),r&&(r=r.toLowerCase())),s.matchWholeWord?i===r:r.indexOf(i)>=0):void 0};class tg{constructor(t){this._owner=t}search(t,e,s,i){let r;return t=Object.assign({},this._owner.searchOptions(),t),this.filtering=t.filtering,s instanceof sn?r=this.$_searchData(s,t,e,i):s instanceof Je&&(r=this.$_searchGroup(s,t,e,i)),r&&r.setCurrentDisplay(t.currentDisplay),r}$_search(t,e,s,i,r){const n=this._owner.getSearchLayout(i).getSimples();if(n)for(let o of n){o.row=i,o.dv=t;const n=o.getValue();if(Ju(s,n,e)){const e=t.getRowId(i),s={dv:t,row:i,rowid:e,value:n,field:o instanceof yi?o.field:void 0,layout:o};r.push(s)}}}$_searchData(t,e,s,i){const r=t.rowCount(),n=e.fromRow||0,o=[];if(e.searchAll){const i=isNaN(e.toRow)||e.toRow<0?n:e.toRow;if(i<=n){for(let i=n;i<r;i++)this.$_search(t,e,s,i,o);for(let i=0;i<n;i++)this.$_search(t,e,s,i,o)}else for(let r=n;r<i;r++)this.$_search(t,e,s,r,o)}else{let h=i&&!i.isEmpty()?(i.getCurrrentField().row+1)%r:n;do{if(this.$_search(t,e,s,h,o),o.length>0)break;h=(h+1)%r}while(h!==n)}return new Ku(this._owner,o)}$_searchGroup(t,e,s,i){const r=t.data(),n=t.itemCount(),o=Math.max(e.fromRow>=0?t.indexOfRow(e.fromRow):-1,0),h=[];if(e.searchAll){const i=isNaN(e.toRow)||e.toRow<0?o:Math.max(o,t.indexOfRow(e.toRow));if(i<=o){for(let i=o;i<n;i++){const n=t.getItem(i).row();n>=0&&this.$_search(r,e,s,n,h)}for(let i=0;i<o;i++){const n=t.getItem(i).row();n>=0&&this.$_search(r,e,s,n,h)}}else for(let n=o;n<i;n++){const i=t.getItem(n).row();i>=0&&this.$_search(r,e,s,i,h)}}else{let a=i?t.nextRow((i.current()+1)%n):o;do{const i=t.getItem(a).row();if(i>=0&&this.$_search(r,e,s,i,h),h.length>0)break;a=(a+1)%n}while(a!==o)}return new Ku(this._owner,h)}}class eg extends Ed{isSkeleton(){return!0}_createBodyView(t,e,s){return new ig(t,this._owner.fullMode())}}class sg extends Ho{dv(){}row(){return-1}model(){}group(){}gvindex(){return-1}vindex(){return-1}index(){return-1}getItemStyle(t){}getItemClass(){return sg.CLASS_NAME}_doMeasure(t,e,s,i){const r=super._doMeasure(t,e,s,i);if(this._layoutView instanceof Co){const t=this._layoutView.simplesByRenderer(_i.TYPE),e={container:this.dom,duration:1e3};for(let s of t)s.rendererImpl().setAnimation(e)}return r}_doApplyStyles(t){this.dom.className=this.getItemClass()}}sg.CLASS_NAME="rtc-skeleton-row";class ig extends Pd{constructor(){super(...arguments),this._rowViews=[],this._rowPool=[]}isRowEnded(){return!0}isScrollEnded(){return!0}footerView(){}bottomRow(){return this._topRow}itemViewCount(){return 0}rowViewCount(){return 0}getItemView(t){}itemViews(){return[]}itemViewAt(t,e){}lastItemView(){}getItemViewPoints(){}validateViews(){}getPreLength(){return 0}getPrePos(t,e){}getExpander(t){}scrollToEnd(t){}checkItemViewOrders(){}isRowVisible(t,e){return!1}makeRowVisible(t){}_itemPoints(){}_rowViewOfDom(t){}_createRowsDeleingAnimation(t){}_doRenderSelection(t,e,s,i,r){}_doScrollNear(t,e,s,i,r,n){}_doScrollFar(t,e,s,i,r,n){}rowOffsetBy(t){}clearItemViews(){}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._rowPool=this._rowPool.concat(this._rowViews),this._rowViews=[],this._itemLayer.clear()}_doMeasureVert(t,e,s){const i=this._listView,r=this._rowPool,n=this._rowViews;let o,h=0,a=s,l=0;for(;a>0&&h<1e4;){const d=r.pop()||new sg(t),_=i.owner().getSkeletonLayout();d.setLayout(_,i.owner()),this._itemLayer.addChild(d),o=d.measure(t,i,e,s),n.push(d),a-=o.height,l=Math.max(l,o.width),h++}return{width:l,height:s-a}}_doMeasureHorz(t,e,s){}_doRenderVert(t,e,s){const i=this._rowViews,r=i.length,n=this._rowPts=[0];let o=n[0],h=0;for(;h<r&&o<s;){const e=i[h++],s=e.mh;e.move(0,o),e.resize(e.mw,s).render(t),o+=s,n.push(o)}}_doRenderHorz(t,e,s){}}class rg extends $r{constructor(t,e,s){super(t,!1,s,Oe),this._animated=0,this._layoutChanged=!1,this._hHeader=0,this._hLayout=0,this._scrollPos=0,this._firstTime=!0,this._model=e,this.appendDom(this._layoutBack=this.$_createLayoutBack(t)),this.addChild(this._headerView=new Nh(t,e.header())),this.setVisible(!1)}_doDestory(){super._doDestory()}model(){return this._model}setModel(t){this._model=t}layoutBack(){return this._layoutBack}scrollHeight(){return this._hLayout-(this.height-this._hHeader)}refresh(t,e,s,i=!1){const r=this.doc;t=oe(t,this.width),e=oe(e,this.height),(this._silent=i)&&this._doSilentRefresh();try{this.measure(r,s,t,e),this.resize(t,e),this.render(r)}finally{i&&(this._silent=!1)}}_doSilentRefresh(){}$_getDuration(){const t=this._model.effectDuration();return t>=.1?1e3*t:rg.SHOW_DURATION}show(t,e,s){if(this.visible)return;const i=c.now(),r=this.$_getDuration();if(!(this._animated>0&&i-this._animated<r)){if(this._scrollPos=0,this._internalVisible(!0),this.refresh(e.width,e.height,t),this._doShow(),s&&this.canAnimate()){const t=this.dom.animate(function(t,e){switch(e){case Te.RIGHT:return[{left:-t.width+"px"},{left:"0"}];case Te.LEFT:return[{left:t.width+"px"},{left:"0"}];case Te.DOWN:return[{top:-t.height+"px"},{top:"0"}];default:return[{top:t.height+"px"},{top:"0"}]}}(e,this._showDirection=this._model.getShowDirection()),{duration:r,fill:"none"});this._animated=c.now(),t.addEventListener("finish",(()=>{this._animated=0}))}this._firstTime&&(this._firstTime=!1,setTimeout((()=>{this.refresh(this.width,this.height,this.control._listView,!0)}),0))}}_doShow(){}hide(t,e){if(!this.visible)return;const s=c.now(),i=this.$_getDuration();if(!(this._animated>0&&s-this._animated<i))if(this._doHide(),e&&this.canAnimate()){const e=this.dom.animate(function(t,e){switch(e){case Te.RIGHT:return[{left:"0"},{left:t.width+"px"}];case Te.LEFT:return[{left:"0"},{left:-t.width+"px"}];case Te.DOWN:return[{top:"0"},{top:t.height+"px"}];default:return[{top:"0"},{top:-t.height+"px"}]}}(t,this._model.getHideDirection(this._showDirection)),{duration:i,fill:"none"});this._animated=c.now(),e.addEventListener("finish",(()=>{this._animated=0,this.setVisible(!1),this.control.invalidateLayout()}))}else this.setVisible(!1)}_doHide(){}getRenderer(t){return this._layoutView instanceof Co&&this._layoutView.getRenderer(t)}scrollBy(t){return this.setScrollPos(this._scrollPos-t),0===this._scrollPos||this._scrollPos>=this.scrollHeight()}setScrollPos(t){const e=this._layoutBack;if((t=Math.max(0,Math.min(t,this.scrollHeight())))!==this._scrollPos){const s=this._scrollPos=t;e.style.top=this._hHeader-s+"px"}}$_createLayoutBack(t){const e=t.createElement("div");return e.className="rtc-row-page-back",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}_doPrepareRender(t,e){if(this._layoutManager=e,!this._silent||!this._layout){const{layout:e,rowProps:s,rowStyle:i}=this._model.getLayout();this._headerView.setModel(this._model.header()),this._layoutChanged=!this._layout||e.tid!==this._layout.tid,this._layout=e,this._rowStyle=i,this._layoutChanged&&this._layoutView&&(this._layoutBack.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this._layoutView=this._layoutManager.createLayoutView(t,this._layout),this._layoutBack.appendChild(this._layoutView.dom),this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,this._layoutManager))}}_doApplyStyles(t){const e=this._rowStyle&&this._rowStyle.default;e&&Object.assign(this._layoutBack.style,e)}_doMeasure(t,e,s,i){const r=this._model,n=this._headerView,o=this._layoutView,h=this._padding=Fe.getPadding(this._layoutBack);let a=0,l=s,d=i;n.setVisible(n.model().visible())&&(n.setLayout(n.model().layout()),d-=a=n.measure(t,this._layoutManager,l,d).height),l-=h.left+h.right,d-=h.top+h.bottom,this._layout.setRow(r.data(),r.row(),-1),o._explicitWidth=l,o.prepareLayout(t,this._layoutManager);const _=o.measureLayout(t,this._layoutManager,l,d);return _.width+=h.left+h.right,_.height+=h.top+h.bottom,{width:s,height:Math.max(i,_.height+a)}}_doRender(t,e,s){const i=this._padding,r=this._layoutView;let n=this._headerView,o=0;if(s=Math.max(s,n.mh+r.mh+i.top+i.bottom),n&&n.visible){const i=this._hHeader=n.mh;n.resize(e,i).move(0,o),s-=i,o+=i,n.render(t)}else this._hHeader=0;s=this._hLayout=Math.max(0,s),Fe.resize(this._layoutBack,e,s),Fe.move(this._layoutBack,0,o),r.setWidth(e-i.left-i.right),r.render(t)}_doAfterRender(){this._layoutManager=null}}rg.SHOW_DURATION=300;class ng extends rg{constructor(t,e){super(t,e,ng.CLASS_NAME),this._model=e}}ng.CLASS_NAME="rtc-row-info-page";class og extends rg{constructor(t,e){super(t,e,og.CLASS_NAME),this._changeHandler=t=>{const e=this.model(),s=this._layoutView;if(s instanceof Co){const i=s.childOfDom(t.target);if(i instanceof xo){const t=i.getEditValue(this.control);e.valueChanged(this._ctx,t.field,t.value,i.value())}}},this._ctx={getValue:t=>this.getFieldValue(t),setValue:(t,e)=>{this.setFieldValue(t,e)},isVisible:t=>this.isFieldVisible(t),setVisible:(t,e)=>{this.setFieldVisible(t,e)}}}model(){return this._model}setModel(t){this._model=t}getValues(t){if(this._layoutView instanceof Co)return this._layoutView.getValues(t)}getFieldValue(t){const e=this._layoutView;if(e instanceof Co){const s=e.simpleById(t,!0);if(s instanceof xo){const t=s.getEditValue(this.control);return void 0!==t?t.value:void 0}}}setFieldValue(t,e){const s=this._layoutView;if(s instanceof Co){const i=s.simpleById(t,!0);i instanceof xo&&i.setEditValue(this.control,e)}this.refresh(this.width,this.height,this.control._listView,!0)}isFieldVisible(t){const e=this._layoutView;if(e instanceof Co){const s=e.simpleById(t,!0);return s&&s.visible}}setFieldVisible(t,e){const s=this._layoutView;if(s instanceof Co){const i=s.simpleById(t,!0);i&&(i.layout.visible=e,this.refresh(this.width,this.height,this.control._listView,!0))}}commit(t){return this._model.commit(this._ctx,t)}_doShow(){const t=this.dom;this.$_clearHandlers(),t.addEventListener("change",this._changeHandler)}_doHide(){this.$_clearHandlers()}_doSilentRefresh(){this._layoutView instanceof Co&&this._layoutView.saveEditValues(this.control)}$_clearHandlers(){this.dom.removeEventListener("change",this._changeHandler)}}og.CLASS_NAME="rtc-row-edit-page";class hg extends p{constructor(t){super(),this._body=t,this._view=t.singleView(),this._spare=t.spareSingleView()}_doDestory(){this._body=null}run(t,e){return this.$_prepare(this._model=t),this._endCallback=e,this._doRun(),this}stop(){this.$_unprepare()}$_prepare(t){this._body.control.lock((()=>{this._body.addChild(this._spare)})),this._doPrepare(t)}$_unprepare(){this._doUnprepare(),this._body.removeChild(this._spare)}}class ag extends hg{constructor(){super(...arguments),this._handler=()=>{const t=this._model.changeDuration(),e=c.now(),s=e-this._started;let i=this._width-this._pos;if(s>=t||i<=0)this.$_stop(),this._endCallback(this._view.row());else{const r=t-s;i*=(e-this._prev)/r,this._prev=e}i&&(this._pos+=i,this._view.moveX(-this._pos),this._spare.moveX(this._width-this._pos))}}_doPrepare(t){this._nextRow=(this._view.row()+1)%this._view.rowView().dv().rowCount(),this._width=this._view.width,this._pos=0,this._body.setSingleRow(this._spare,this._nextRow,this._view),this._view.moveX(0),this._spare.moveX(this._width)}_doUnprepare(){this.$_stop()}_doRun(){this._started=this._prev=c.now(),this._timer=setInterval(this._handler,20)}$_stop(){this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._body.setSingleRow(this._view,this._nextRow,null),this._view.moveX(0))}}class lg extends hg{_doPrepare(t){}_doUnprepare(){}_doRun(){}}class dg extends lg{}class _g extends p{constructor(t){super(),this._rowHandler=()=>{const t=c.now();this._body.isScrollEnded()?this.stop():t>=this._prev+this._model.duration()&&(this._doStartChange(this._model),this._prev=t)},this._owner=t,this._body=t.bodyView()}_doDestory(){this._owner=this._body=null}start(t){this.stop(),this._doStart(t)&&(this._model=t,this._prev=c.now(),this._rowTimer=setInterval(this._rowHandler,10))}stop(){this._rowTimer&&(clearTimeout(this._rowTimer),this._rowTimer=void 0,this._doStop(),this._model=void 0)}_showNext(){this._prev=c.now()}}class cg extends _g{constructor(){super(...arguments),this._scrollHandler=()=>{let t=this._body.scrollPos()!==this._startRow?0:this.$_getScrollAmount();const e=this._model.changeDuration(),s=c.now(),i=s-this._started;if(i>=e||t<=0)this.$_stopChange(),this._showNext();else{const r=e-i;t*=(s-this._prev2)/r,this._prev2=s}t&&this._owner.scrollBy(t)}}_doStart(t){return!0}_doStop(){this.$_stopChange()}_doStartChange(t){this.$_stopChange(),this._started=this._prev2=c.now(),this._startRow=this._body.scrollPos(),this._scrollTimer=setInterval(this._scrollHandler,20)}$_getScrollAmount(){return this._body.getItemView(0).height-this._body.scrollOff()}$_stopChange(){this._scrollTimer&&(clearTimeout(this._scrollTimer),this._scrollTimer=void 0)}}class ug extends _g{constructor(){super(...arguments),this._endCallback=t=>{this._showNext(),this._owner.setScrollIndex(t,0)}}_doStart(t){return!0}_doStop(){this.$_stopChange()}_doStartChange(t){this.$_stopChange();const e=this._model.changeEffect(),s=this._body;let i;switch(e){case dl.SLIDE:i=new ag(s);break;case dl.FLIP:i=new dg(s)}(this._changer=i)&&i.run(this._model,this._endCallback)}$_stopChange(){this._changer&&(this._changer.stop(),this._changer=null)}}class gg extends bo{_doPrepare(t,e){e[kt]=this.$_getBox(t,e)}_getStyleTarget(t){}_measureBox(t,e){e.checked=this._model.isTrue(this._value)}_doMeasure(t,e,s,i){const r=this._model,n=e[kt],o=e.getElementsByClassName(gg.LABEL_CLASS)[0];let h=r.getBoxWidth(),a=r.getBoxHeight();if(this._setClass(n,t.row),isNaN(t._explicitWidth)||Fe.setWidth(e.firstElementChild.firstElementChild,t._explicitWidth),this._setContext(t,n,r),this._measureBox(t,n),isNaN(h)||(n.style.width=h+"px"),isNaN(a)||(n.style.height=h+"px"),o.style.whiteSpace=r.labelWrap&&isNaN(t._explicitWidth)?"pre-wrap":"pre",o.textContent=r.getLabel(n.checked),We.TESTING)return isNaN(h)&&(h=n.offsetWidth),isNaN(a)&&(a=n.offsetHeight),{width:h,height:a}}_doRender(t,e,s,i){}_doUnprepare(t,e){}getValue(t){const e=this._getBoxClass(),s=Fe.childByClass(t,e);if(s){return s.checked?this._model.trueValue:this._model.falseValue}}setValue(t,e){}_getBoxType(){return"checkbox"}_getBoxClass(){return gg.BOX_CLASS}$_getBox(t,e){const s=this._getBoxClass();let i=e.getElementsByClassName(s)[0];if(!i){const r=t.doc.createElement("div");r.style.position="relative";const n=t.doc.createElement("div");n.style.display="flex",n.style.alignItems="center",i=t.doc.createElement("input"),i.className=s,i.style.marginRight="5px",i.style.flex="none",i.type=this._getBoxType();const o=t.doc.createElement("label");o.className=gg.LABEL_CLASS,Object.assign(o.style,{flexGrow:1}),n.appendChild(i),n.appendChild(o),r.appendChild(n),e.appendChild(r)}return i}}gg.BOX_CLASS="rtc-check-box",gg.LABEL_CLASS="rtc-check-label";const pg="autohide";class fg extends bo{_doPrepare(t,e){e[kt]=this.$_getInput(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[kt];let o=r.boxWidth,h=r.boxHeight;if(this._setClass(n,t.row),n.style.maxWidth="",this._setFitWidth(n,r,o),r.autoHide?n.dataset[pg]="1":delete n.dataset[pg],this._setContext(t,n,r),n.value=ie(this._valueToText(this._value),this._valueToText(this._getDefaultValue())),this._prepareInput(n),We.TESTING)return{width:o||0,height:h||0}}_doRender(t,e,s,i){const r=e[kt];r.style.width||(r.style.maxWidth=s+"px")}_doUnprepare(t,e){e[kt]=null}getValue(t){const e=Fe.childByClass(t,fg.INPUT_CLASS);return e&&this._textToValue(e.value)}setValue(t,e){const s=Fe.childByClass(t,fg.INPUT_CLASS);s&&(s.value=this._valueToText(e))}_initInput(t){}_prepareInput(t){}_getDefaultValue(){return""}_valueToText(t){return t}_textToValue(t){return t}$_getInput(t,e){let s=e.getElementsByClassName(fg.INPUT_CLASS)[0];return s||(s=t.doc.createElement("input"),s.className=fg.INPUT_CLASS,s.type=this._getInputType(),s.style.boxSizing="border-box",s.onkeydown=function(t){"1"===s.dataset[pg]&&"Enter"===t.key&&(t.preventDefault(),t.currentTarget.blur())},s.onfocus=t=>{He.currentInput=s.id},this._initInput(s),e.appendChild(s)),s}}fg.INPUT_CLASS="rtc-input-input";class wg extends fg{_getInputType(){return"text"}}class mg extends fg{_initInput(t){t.style.backgroundColor="white"}_prepareInput(t){this._value instanceof Date&&!isNaN(+this._value)?t.style.height="":t.style.height="1.8em"}_getDefaultValue(){return new Date}_textToValue(t){return new Date(t)}setValue(t,e){}}class yg extends gg{_measureBox(t,e){super._measureBox(t,e);const s=this._model;e.name=(s.group||"_rtc_radio_group_")+t.row}setValue(t,e){}_getBoxType(){return"radio"}_getBoxClass(){return yg.BOX_CLASS}}yg.BOX_CLASS="rtc-radio-box";class bg extends bo{_doPrepare(t,e){e[Dt]=this.$_buildGroup(t,this._model,e)}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const r=this._model,n=r.values,o=n?n.length:0,h=e[Dt].firstElementChild;let a=0,l=0;if(this._setClass(h,t.row),this._setContext(t,e,r),o>0){const s=t.value(),i=r.labels||[],o=r.labelWrap&&!isNaN(t._explicitWidth)?"pre-wrap":"pre",a=r.boxGap+"px",l=r.itemGap+"px";h.style.gap=l,n.forEach(((r,l)=>{const d=h.children[l],_=d.firstElementChild,c=d.children[1],u=e.id+"-"+l;o&&Fe.setWidth(d,t._explicitWidth),_.checked=r===s,_.id=u,_.name=e.id,_.style.marginRight=a,c.style.whiteSpace=o,c.textContent=i[l]||n[l],c.htmlFor=u}))}return a=e.offsetWidth,l=e.offsetHeight,{width:a,height:l}}_doRender(t,e,s,i){e[Dt]}_doUnprepare(t,e){e[Dt]=null}getValue(t){}setValue(t,e){}$_buildGroup(t,e,s){let i,r=s.getElementsByClassName(bg.CLASS_NAME)[0];r?i=r.firstElementChild:(r=t.doc.createElement("div"),r.className=bg.CLASS_NAME,i=t.doc.createElement("div"),i.className=bg.GROUP_CLASS,Object.assign(i.style,{display:"flex",flexDirection:"column"}),r.appendChild(i),s.appendChild(r));const n=e.valueCount;for(;i.children.length<n;){const e=t.doc.createElement("div"),s=t.doc.createElement("input"),r=t.doc.createElement("label");Object.assign(e.style,{display:"flex"}),s.className=bg.BOX_CLASS,s.type="radio",Object.assign(s.style,{flex:"none"}),r.className=bg.LABEL_CLASS,Object.assign(r.style,{flexGrow:1}),e.appendChild(s),e.appendChild(r),i.appendChild(e)}for(;i.children.length>n;)i.lastElementChild.remove();return r}}bg.CLASS_NAME="rtc-radiogroup",bg.GROUP_CLASS="rtc-radiogroup-group",bg.BOX_CLASS="rtc-radiogroup-box",bg.LABEL_CLASS="rtc-radiogroup-label";class vg extends bo{_doDisposeContent(t){t.getElementsByClassName(vg.BOX_CLASS)[0].onchange=null}_doPrepare(t,e){e[kt]=this.$_getSelect(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[kt];let o=r.boxWidth;if(this._setClass(n,t.row),this._setFitWidth(n,r,o),n.style.height="",this._setContext(t,n,r),r.itemsChanged&&(Fe.clearChildren(n),r.isGrouped?this.$_buildGroups(t.doc,r,n):this.$_buildOptions(t.doc,r,n)),n.value=t.value(),We.TESTING){return{width:n.offsetWidth,height:n.offsetHeight}}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[kt]=null}getValue(t){}setValue(t,e){}$_getSelect(t,e){let s=e.getElementsByClassName(vg.BOX_CLASS)[0];return s||(s=t.doc.createElement("select"),s.className=vg.BOX_CLASS,s.onchange=t=>{const e={id:s.id,field:s[bt],selectedIndex:s.selectedIndex,selectedValue:s.value};console.log("select changed",e,t)},e.appendChild(s)),s}$_buildOptions(t,e,s){const i=e._values,r=i?i.length:0;if(r>0){const n=e._labels,o=n?n.length:0;for(let e=0;e<r;e++){const r=t.createElement("option");r.value=i[e],r.text=o>e?n[e]:i[e],s.add(r)}}}$_buildGroups(t,e,s){const i=e._groups;i.length;for(let e of i){const i=e.values,r=e.labels,n=i?i.length:0,o=r?r.length:0,h=t.createElement("optgroup");if(h.label=e.group,n>0){for(let e=0;e<n;e++){const s=t.createElement("option");s.value=i[e],s.text=o>e?r[e]:i[e],h.appendChild(s)}s.add(h)}}}}vg.BOX_CLASS="rtc-select-box";class Cg extends bo{getValue(t){let e=t.getElementsByClassName(Cg.BOX_CLASS)[0];return e instanceof HTMLInputElement&&!!e.checked}_doDisposeContent(t){let e=t.getElementsByClassName(Cg.CLASS_NAME)[0];if(e){e.firstElementChild.children[1].onclick=null}}_doPrepare(t,e){e[Dt]=this.$_getSwitch(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[Dt].firstElementChild,o=n.firstElementChild,h=n.children[1],a=c.pickNum(r.boxSize,Cg.DEF_SIZE);let l=1.7*a,d=a;if(this._setClass(n,t.row),this._setContext(t,o,r),h.id=r.id+"_span",o.checked=r.isTrue(this._value),n.style.setProperty("--switch-size",a+"px"),n.style.setProperty("--switch-on",.7*a+"px"),r.style&&r.style.backgroundColor&&n.style.setProperty("--switch-color",r.style.backgroundColor),h.style.width=l+"px",h.style.height=d+"px",We.TESTING)return{width:l,height:d}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[Dt]=null}setValue(t,e){}$_getSwitch(t,e){let s=e.getElementsByClassName(Cg.CLASS_NAME)[0];if(!s){s=t.doc.createElement("div"),s.className=Cg.CLASS_NAME;const i=t.doc.createElement("div");i.className=Cg.SWITCH_CLASS,Object.assign(i.style,{});const r=t.doc.createElement("input");r.className=Cg.BOX_CLASS,r.type="checkbox",r.style.display="none";const n=t.doc.createElement("div");n.className=Cg.SPAN_CLASS,Object.assign(n.style,{position:"relative",display:"block"}),n.onclick=function(t){const e=t.target.parentElement.getElementsByClassName(Cg.BOX_CLASS)[0];e.checked=!e.checked},n[It]=!0,i.appendChild(r),i.appendChild(n),s.appendChild(i),e.appendChild(s)}return s}}Cg.CLASS_NAME="rtc-switch",Cg.SWITCH_CLASS="rtc-switch-switch",Cg.BOX_CLASS="rtc-switch-box",Cg.SPAN_CLASS="rtc-switch-span",Cg.SWITCH_SIZE="--rt-switch-size",Cg.SWITCH_COLOR="--rt-switch-color",Cg.DEF_SIZE=24;const Sg={check:gg,date:class extends mg{_getInputType(){return"date"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+c.pad(t.getMonth()+1)+"-"+c.pad(t.getDate()):t}},datetime:class extends mg{_getInputType(){return"datetime-local"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+c.pad(t.getMonth()+1)+"-"+c.pad(t.getDate())+"T"+c.pad(t.getHours())+":"+c.pad(t.getMinutes()):t}},number:class extends fg{_getInputType(){return"number"}},radio:yg,radiogroup:bg,select:vg,switch:Cg,text:wg,time:class extends mg{_getInputType(){return"time"}_valueToText(t){return t instanceof Date?c.pad(t.getHours())+":"+c.pad(t.getMinutes()):t}_textToValue(t){const e=t?t.split(":"):null;let s=this._value;return s instanceof Date||(s=new Date),e&&(e.length>0&&s.setHours(+e[0]),e.length>1&&s.setMinutes(+e[1]),e.length>2&&s.setSeconds(+e[2])),s}}};class Rg{static setTesting(){}setTesting(){this._editor=new qi}constructor(){this._impls={},this._editor=new qi,this._default=new wg(this._editor)}borrow(t){if(t){const e=t.type(),s=(this._impls[e]||(this._impls[e]=[])).pop()||this.$_createImpl(e);if(s)return s.setModel(t),s}return this._default}free(t){if(t!==this._default){const e=t.model(),s=e?e.type():this.$_getType(t.constructor);let i=this._impls[s];i||(i=this._impls[s]=[]),i.push(t)}}$_getType(t){for(let e in Sg)if(t===Sg[e])return e}$_createImpl(t){return new Sg[t]}}class xg{constructor(t){this._row=-1,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0,value:void 0},this._stocks={value:t=>(this._dv.checkField(t),this._values||(this._values=this._data.internalRowValues(this._row)),this._values[t]),no:()=>this._row+1,row:()=>this._row,detail_count:()=>this._dg?this._dg.getDetailCount(this._row):0,is_landscape:()=>this._owner.isLandscape(),is_portrait:()=>this._owner.isPortrait()},this._owner=t}inflateParam(t,e,s){const i=s.name;let r;if(this.templateParams&&(r=this.templateParams[i]),void 0===r){const e=this._owner.getRowParams(t);e&&(r=e[i])}if("function"==typeof r){const s=this._args;return s.control=this._owner.wrapperOrThis(),s.row=t,s.field=e,s.values=this._values=this._values||Object.freeze(this._dv.internalRowValues(t)),s.value=this._values[e],r(s)}return r}inflateStock(t,e,s){const i=s.name,r=this._stocks[i];return r?r(e):this._dv.containsField(i)?this._stocks.value(i):(console.error("Invalid stock param: "+s.source),s.source)}setData(t){this._data=t,this._dg=t instanceof Il?t:null}setRow(t){if(this._data instanceof Il){const e=this._data.getSourceRow(t);this._dv=e.dv,this._row=e.row}else this._dv=this._data,this._row=t;return this._values=void 0,this}}class Vg{constructor(t){this._owner=t,this._rowInflater=new xg(t)}prepareRender(){this._rowInflater.setData(this._owner.data())}getRowInflater(t){return this._rowInflater.setRow(t)}getRowLayout(t,e,s){const i=this._owner.getRowTemplate(e);return{layout:or.Instance.layoutFromTemplate(t||this._owner.wrapperOrThis(),e,!1,s,i,this._rowInflater.setRow(e)),rowProps:i.rowProps,rowStyle:i.rowStyle}}getGroupItemLayout(t){const e=this._owner.groupModel();let s,i;t instanceof Xe?(i=e.getHeaderTemplate(t),s=!t.group.expanded()):t instanceof Ke&&(i=e.getFooterTemplate(t));const r=this._owner._templates.get(i)||lr.get(i)||ar.get(i);return{layout:or.Instance.layoutFromTemplate(e,t,s,!1,r,e),rowProps:r.rowProps,rowStyle:r.rowStyle}}getTableLayout(t,e){let s=this._owner.getTemplate(t);e instanceof od?s=s instanceof Cs?s:s.headerTemplate:e instanceof ld&&(s=s instanceof Ss?s:s.footerTemplate);return{layout:or.Instance.layoutFromTemplate(e,e,!1,!1,s,e),rowProps:s.rowProps,rowStyle:s.rowStyle}}inflate(t,e){return t.inflate(this._owner.wrapperOrThis(),void 0,e,this._rowInflater)}}class Eg{constructor(){this.matchCase=!1,this.matchWholeWord=!1,this.useRegExp=!1,this.dataOnly=!0,this.ignoreFormat=!0,this.searchAll=!0,this.fromRow=0,this.toRow=-1,this.circular=!0,this.filtering=!1,this.checkRows=!1,this.currentDisplay=Xu.AUTO}assign(t){c.assign(this,t)}}class $g extends He{constructor(t,e,s){super(t,e,$g.CLASS_NAME),this._alwaysFirstGroupHeader=!0,this._searchOptions=new Eg,this._silentCommandSweep=!1,this._renderMode=fe.DEFAULT,this._tableModels={},this._flags=Jr.Instance,this._templates=new H,this._runTextFormatter=be(""),this._runBoolFormatter=ve($g.BOOLEAN_FORMAT),this._runNumberFormatter=Ce($g.NUMBER_FORMAT),this._runDateFormatter=Se($g.DATE_FORMAT),this._prevImages={},this._imageList={},this._imageSizes={},this._imageLoaded=t=>{const e=t.target;i&&(this._imageSizes[e._src_]={width:e.naturalWidth,height:e.naturalHeight}),this.bodyView().animating()||this.invalidateLayout(!0),(this._infoPageView&&this._infoPageView.visible||this._editPageView&&this._editPageView.visible)&&setTimeout((()=>{const t=this._infoPageView;t&&t.visible&&t.refresh(NaN,NaN,this._listView,!0);const e=this._editPageView;e&&e.visible&&e.refresh(NaN,NaN,this._listView,!0),this.listView().refreshPanel()}),0)},this._menus={},this._layoutNeeded=!0,this._dataLoading=!1,this._dataAppending=!1,this._dataChanged=!1,this._topRow=-1,this._scrollIndex=0,this._scrollOff=0,this._lastRowRevealed=!1,this._rowOffset=0,this._focusedRow=-1,this._rowClickArgs={control:this.wrapperOrThis(),row:-1,cancel:!1},this._userState={},this._rowStyleArgs={control:void 0,data:void 0,row:-1},this.fitRowWhenScroll=!1,this.fitRowWhenClick=!0,this.skeletonVisible=!1,this.alwaysEmptyPage=!1,this.selectable=!1,this.autoClearSelection=!1,this._renderMode=s,this._fullMode=s===fe.FULL,this._preMode=s===fe.PRE,this._noCache=this._fullMode||this._preMode,this.addElement(this._listView=this._defaultListView=new Fd(t,this))}_doDestory(){super._doDestory(),this._shapes=this._shapes.destroy()}optionItemChanged(t){this.invalidateLayout()}autoScrollChanged(t){t instanceof No&&!this._singleRow?t.enabled()?this._rowScroller||(this._rowScroller=new cg(this),this._rowScroller.start(this._current.row().autoScroll())):this._rowScroller&&(this._rowScroller.stop(),this._rowScroller=void 0):t instanceof ul&&this._singleRow&&(t.enabled()?this._singleScroller||(this._singleScroller=new ug(this),this._singleScroller.start(this._current.singleRow().autoScroll())):(this._singleScroller.stop(),this._singleScroller=void 0))}getTemplateHtml(t){const e=this._htmlTempls[t];return e&&e.cloneNode(!0)}control(){return this.wrapperOrThis()}sectionChanged(t){this.invalidateLayout()}sectionLayoutChanged(t){this.invalidateLayout()}$_dataCountChanged(){this.isPaging()&&(this._pageModel.$_reset(),this.invalidateLayout())}onDataReset(t){}onDataEndUpdated(t,e,s){e!==s&&(this.clearSearch(),this.$_dataCountChanged())}onDataValueUpdated(t,e,s,i,r){}onDataRowUpdated(t,e,s){}onDataRowsUpdated(t,e){}onDataRowAdded(t,e){}onDataRowsAdded(t,e,s){}onDataCleared(t,e){}onDataLoaded(t,e){}onDataRowDeleted(t,e,s){this._searchResult&&this._searchResult.delete(s),this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(s)}onDataRowsDeleted(t,e,s){this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(s)}onDataRangeDeleted(t,e,s){}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}onDataCountChanged(t,e,s){this.$_dataCountChanged()}onDataStateChanged(t,e){}onDataStatesChanged(t,e){}onDataChanged(t){this._dataChanged=!0,this._table&&this._table.dataChanged(),this._searchResult&&this._searchResult.refreshRows(),this.setFocusedRow(this._focusedRow),this.resetSelection(),this._noCache,this.invalidateLayout()}onDataFlagChanged(t,e,s,i){Kr.isCheckedFlag(i)?this.onRowCheck&&this.onRowCheck({control:this.wrapperOrThis(),row:s}):Kr.isDetailedFlag(i)?this.onRowDetail&&this.onRowDetail({control:this.wrapperOrThis(),row:s}):(i=Kr.isUserFlag(i),this.onRowFlagChange&&this.onRowFlagChange({control:this.wrapperOrThis(),row:s,flag:i})),this.invalidateLayout()}onDataFlagsChanged(t,e,s,i){Kr.isCheckedFlag(i)?this.onRowsCheck&&this.onRowsCheck({control:this.wrapperOrThis(),rows:s}):Kr.isDetailedFlag(i)?this.onRowsDetail&&this.onRowsDetail({control:this.wrapperOrThis(),rows:s}):(i=Kr.isUserFlag(i),this.onRowsFlagChange&&this.onRowsFlagChange({control:this.wrapperOrThis(),rows:s,flag:i})),this.invalidateLayout()}onDataFlagAllChanged(t,e,s){Kr.isCheckedFlag(s)?this.onAllRowsCheck&&this.onAllRowsCheck({control:this.wrapperOrThis()}):Kr.isDetailedFlag(s)?this.onAllRowsDetail&&this.onAllRowsDetail({control:this.wrapperOrThis()}):(s=Kr.isUserFlag(s),this.onAllRowsFlagChange&&this.onAllRowsFlagChange({control:this.wrapperOrThis(),flag:s})),this.invalidateLayout()}onDataViewFilterChanged(t){this._searchResult&&this._searchResult.refreshRows(),this.invalidateLayout()}onDataViewSortChanged(t){this._searchResult&&this._searchResult.refreshRows(),this.invalidateLayout()}onGroupExpanded(t,e){this.$_restoreSelection(),this.invalidateLayout()}onGroupChecked(t,e){this.invalidateLayout()}onDataGroup2Expanded(t,e){this.invalidateLayout()}onPageChanged(t,e,s){this.setScrollIndex(0,0),this.invalidateLayout(),this._listView.pageChanged(e)}pageIndexClick(t){this.setPage(t)}preMode(){return this._preMode}fullMode(){return this._fullMode}noCache(){return this._noCache}description(){return this._description}setDescription(t){t!==this._description&&(this._description=t,this.invalidate())}renderMode(){return this._renderMode}rowInfos(){return this._current.dataRowInfos()}groupExpander(){return this._current.rowGroup().expander()}dataExpander(){return this._current.dataGroup().expander()}rowBar(){return this._current._rowBar}editBar(){return this._current._editBar}scrollIndicator(){return this._current._scrollIndicator}indexBar(){return this._current._indexBar}scrollBar(){return this._current._scrollBar}pageNavigator(){return this._current._pageNavigator}pageScroller(){return this._current._pageScroller}commandBox(){return this._current._commandBox}selectionMask(){return this._current._selectionMask}options(){return this._defaults}portrait(){return this._portrait}landscape(){return this._landscape}current(){return this._current}data(){return this._data}setData(t){if(t!=this._data){const e=this._groupModel;this._data&&(e&&this._data.removeListener(e),this._data.removeListener(this)),this._flags=Jr.Instance,this._data&&this._data.removeFlags(this),this._data=t,this._defRowTempl=new Lg(this),this._data&&(this._data.addListener(this),e&&this._data.addListener(e),this._flags=this._data.addFlags(this)),this._dataGroup?this._data instanceof Il?this._dataGroup.refresh(this._data):this.$_destroyGroupModel(this._dataGroup):this._rowGroup&&(this._data instanceof Il?this.$_destroyGroupModel(this._rowGroup):this._rowGroup.refresh(this._data)),this.invalidateLayout()}return t}table(){return this._table}isRowGrouped(){return this._rowGroup&&this._rowGroup.levels()>0}isDataGrouped(){return this._dataGroup&&this._dataGroup.levels()>0}isGrouped(){return this._groupModel&&this._groupModel.levels()>0}isPaging(){return!!this._pageModel}pageSize(){return this._pageModel?this._pageModel.size():NaN}pageCount(){return this._pageModel?this._pageModel.pageCount():NaN}page(){return this._pageModel?this._pageModel.page():NaN}setPage(t){if(!this.isPaging())throw new Error("Control is not a paging mode.");this._pageModel.setPage(t)}isVertical(){return this._current.orientation()===Ut.VERTICAL}isLandscape(){return this.orientation()===jt.LANDSCAPE}setDataLoading(t){return t!=this._dataLoading&&(this._dataLoading=t,this.invalidateLayout(),!0)}isDataLoading(){return this._dataLoading}setDataAppending(t,e){return this._dataAppending!==t&&(this._dataAppending=t,e&&t?this.scrollToEnd(-1):this.invalidateLayout(),!0)}isDataAppending(){return this._dataAppending}isDataEmpty(){return!this._data||this._data.source().rowCount()<1}isEmpty(){return!this._data||this._data.rowCount()<1}shouldShowEmptyPage(){return this.isDataEmpty()||this.alwaysEmptyPage&&this.isEmpty()}isDataChanged(){return this._dataChanged}scrollIndex(){return this._scrollIndex}setScrollIndex(t,e){this.isEmpty()||(t=Math.max(0,oe(t,0)),this.isPaging()&&(t-=this._pageModel.startIndex()),t===this._scrollIndex&&this._scrollOff===e||(this._reqScrollIndex=Math.max(0,t),this._reqScrollOff=oe(e,0),this.invalidateLayout()))}scrollOff(){return this._scrollOff}topRow(){return this._topRow}setTopRow(t){const e=this._rowGroup?this._rowGroup.visIndexOfRow(t):t;this.setScrollIndex(e,0)}rowOffset(){return this._rowOffset}setRowOffset(t){this._tableModels&&(this._reqRowOffset=Math.max(0,t),this.invalidateLayout())}textFormatter(){return this._textFormatter}setTextFormatter(t){t!==this._textFormatter&&(this._textFormatter=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormatter(){return this._boolFormatter}setBoolFormatter(t){t!==this._boolFormatter&&(this._boolFormatter=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormatter(){return this._numberFormatter}setNumberFormatter(t){t!==this._numberFormatter&&(this._numberFormatter=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormatter(){return this._dateFormatter}setDateFormatter(t){t!==this._dateFormatter&&(this._dateFormatter=t,this._runDateFormatter=void 0,this.invalidateLayout())}textFormat(){return this._textFormat}setTextFormat(t){t!==this._textFormat&&(this._textFormat=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormat(){return this._boolFormat}setBoolFormat(t){t!==this._boolFormat&&(this._boolFormat=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormat(){return this._numberFormat}setNumberFormat(t){t!==this._numberFormat&&(this._numberFormat=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormat(){return this._dateFormat}setDateFormat(t){t!==this._dateFormat&&(this._dateFormat=t,this._runDateFormatter=void 0,this.invalidateLayout())}groupModel(){return this._rowGroup||this._dataGroup}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}pageModel(){return this._pageModel}get layoutViewManager(){return this._listView}get alwaysFirstGroupHeader(){return this._alwaysFirstGroupHeader}set alwaysFirstGroupHeader(t){t!==this._alwaysFirstGroupHeader&&(this._alwaysFirstGroupHeader=t,this.isRowGrouped()&&this.invalidateLayout())}focusedRow(){return this._focusedRow}rowCommands(){return this._rowCommands}commandRow(){return this.bodyView().commandRow()}setCommandRow(t,e){if(t>=0){this.makeRowVisible(t)&&this.updateNow();const s=this._current.getRowCommands();s&&s.length>0&&this.bodyView().setCommands(t,s,e)}else this.bodyView().clearCommands(e)}listView(){return this._listView}bodyView(){return this._listView.bodyView()}rowPageView(){return this._rowPageView}infoPageView(){return this._infoPageView}editPageView(){return this._editPageView}leafRowCount(){return this._dataGroup?this._dataGroup.leafRowCount():this._data?this._data.rowCount():0}checkedRowCount(){return this._flags.checkedCount()}lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}setLineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._lineSepReg=c.makeLineSeparator(this._lineSeparator),this.invalidateLayout())}shapes(){return this._shapes}lineSepReg(){return this._lineSepReg}searchOptions(){return this._searchOptions}setSearchOptions(t){this._searchOptions.assign(t)}searchResult(){return this._searchResult}silentCommandSweep(){return this._silentCommandSweep}setSilentCommandSweep(t){this._silentCommandSweep=t}state(){return this._userState}setState(t){let e=!1;if(c.isObject(t)){const s=this._userState;for(const i in t){const r=t[i];s.hasOwnProperty(i)?void 0===r?(delete s[i],e=!0):s[i]!==r&&(s[i]=r,e=!0):void 0!==r&&(s[i]=r,e=!0)}}e&&this.invalidateLayout()}useImage(t){if(t)if(this._prevImages[t])this._imageList[t]=this._prevImages[t],delete this._prevImages[t];else{const e=new Image;e.src=t,e._src_=t,e.decoding="sync",e.onload=this._imageLoaded,this._imageList[t]=e}}getImageSize(t){return this._imageSizes[t]}registerShape(t,e,s,i){this._shapes.registerCustom(t,e,s,i)}registerShapes(t){this._shapes.registerCustoms(t)}registerIconSet(t,e){t&&e?(e instanceof ee||!c.isObject(e)||(e=new ee(e)),this._iconSets[t]=e):t&&delete this._iconSets[t]}getIcon(t,e){const s=this._iconSets[t];if(s)return{width:s.width,height:s.height,url:s.getUrl(e)}}registerTemplate(t,e,s,i){return i?dr(null,lr,t,e,s):dr(this,this._templates,t,e,s)}getStockTemplate(t){return ar.get(t)}getUserTemplate(t){return this._templates.get(t)||lr.get(t)}getTemplate(t){return this._templates.get(t)||lr.get(t)||ar.get(t)}getRowTemplate(t){const e=this._current.getRowTemplate(t);return this._templates.get(e)||lr.get(e)||ar.get(e)||this._defRowTempl}getDefaultRowTemplate(){const t=this._current.getDefaultRowTemplate();return this._templates.get(t)||lr.get(t)||ar.get(t)||this._defRowTempl}getRowInflater(t){return this._layoutPool.getRowInflater(t)}getRowParams(t){return this._current.getRowParams()}inflateField(t,e){return this._layoutPool.inflate(t,e)}registerTableModel(t,e){c.isObject(e)&&(!(t=t||e.name)&&z(v.requireTableName),this._tableModels[t]instanceof dd&&G(v.alreadyTableExists,t),this._tableModels[t]=new dd(e))}registerTableModels(t){if(c.isObject(t))for(const e in t)this.registerTableModel(e,t[e])}getTableModel(t){return this._tableModels[t]}getRowLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t))}getTableLayout(t,e){return this._layoutPool.getTableLayout(t,e)}getSearchLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t)).layout}getSkeletonLayout(){return this._layoutPool.getRowLayout(nr,0,!1)}searchIndexChanged(t){const e=t.getCurrrentField();this.makeRowVisible(e.row),this.invalidateLayout()}searchCurrentDisplayChanged(){this.invalidateLayout()}getGroupItemLayout(t){return this._layoutPool.getGroupItemLayout(t)}getRowStyleArgs(t){return this._rowStyleArgs.row=t,this._rowStyleArgs}getRowStyle(t){const e=this._current.row().styleCallback();let s;return e&&(s=e(this.getRowStyleArgs(t))),{itemDef:this._current.getRowStyle(),levelDef:undefined,dynamic:s}}borrowRenderer(t){return t instanceof Wi?this._editorPool.borrow(t):this._rendererPool.borrow(t)}freeRenderer(t){return t instanceof bo?this._editorPool.free(t):this._rendererPool.free(t)}getTextFormatter(){return this._runTextFormatter}getBoolFormatter(){return this._runBoolFormatter}getNumberFormatter(){return this._runNumberFormatter}getDateFormatter(){return this._runDateFormatter}getRowCount(){return this._pageModel?this._pageModel.rowCount():this._data?this._data.visRowCount():0}getStartRow(){return this._pageModel?this._pageModel.startRow():0}getEndRow(){return this._pageModel?this._pageModel.lastRow():this.data?this._data.visRowCount()-1:0}getEndIndex(){return this.isGrouped()?this._groupModel.visItemCount()-1:this.getEndRow()}pageOff(){return this._pageModel?this._pageModel.startRow():0}getRowAt(t){return this._pageModel?this._pageModel.getRow(t):t}clearGroupBy(){if(this.isGrouped()){const t=this._groupModel;this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=this._rowGroup=this._dataGroup=null,this.invalidateLayout()}}$_destroyGroupModel(t){t&&(this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=null,t===this._rowGroup&&(this._rowGroup=null),t===this._dataGroup&&(this._dataGroup=null))}$_destroyPageModel(){this._pageModel&&(this._pageModel.removeListener(this),this._pageModel=this._pageModel.destroy())}rowGroupBy(t){if(this.current().orientation()===Ut.HORIZONTAL&&z(v.canNotHorzGrouping),this._data||z(v.dataMustSet),t&&0!==t.length||z(v.requireGroupingInfos),this._data instanceof Il&&z(v.canNotRowGrouping),!Array.isArray(t))return;this.$_destroyPageModel(),this.$_destroyGroupModel(this._dataGroup);let e=this._rowGroup;const s=this.isRowGrouped(),i=this._current.rowGroup();for(let e=0;e<t.length;e++){const s=t[e];"string"==typeof s?t[e]={field:s,header:{},footer:{}}:(s.header||(s.header={}),s.footer||(s.footer={}))}e?e.clear():(e=this._rowGroup=new rs,this._data&&this._data.addListener(e),e.addListener(this)),e.build(this._data,i,t),0==e.levels()?this.$_destroyGroupModel(e):this._groupModel=e,this.isRowGrouped()!==s&&this.invalidateLayout()}dataGroupBy(t){this.current().orientation()===Ut.HORIZONTAL&&z(v.canNotHorzGrouping),this._data||z(v.dataMustSet),this._data instanceof Il||z(v.canNotDataGrouping),this.$_destroyPageModel(),this.$_destroyGroupModel(this._rowGroup);let e=this._dataGroup;const s=this.isDataGrouped();e?e.clear():(e=this._dataGroup=new As,this._data&&this._data.addListener(e),e.addListener(this)),e.build(this._data,this._current.dataGroup(),t),this._groupModel=e,this.isDataGrouped()!==s&&this.invalidateLayout()}isMaster(t){return this._data.isMaster(t)}setPaging(t){this.$_destroyPageModel(),t?(this._pageModel=new Ls(this._rowGroup||this._dataGroup||this._data,t),this._pageModel.addListener(this),this.invalidateLayout()):this.invalidateLayout()}getPageRows(t){return this._pageModel.getPageRows(t)}isSingleRow(){return this._singleRow}getSummary(t){return this._data&&this._data.getSummary(t)}scrollBy(t){if(this._fullMode||this.isEmpty())return!1;if(0===t)return!1;const e=this._listView;this.setLock();try{const s=e.scrollBy(t);return!0===s&&(this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow()),this.$_checkRowEnded(),!0===s}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}scrollToEnd(t){if(this.isEmpty()||t>=this._data.rowCount())return;t=oe(t,-1);const e=this._listView;this.setLock();try{e.scrollToEnd(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this.$_checkRowEnded()}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}rowOffsetBy(t){if(this.isEmpty())return!1;if(0===(t=t>0?Math.ceil(t):Math.floor(t)))return!1;const e=this._listView;this.setLock();try{const s=e.rowOffsetBy(t);return!0===s&&(this._rowOffset=e.rowOffset()),!0===s}finally{this.releaseLock(!1),this._reqRowOffset=NaN}}findView(t,e){return this.bodyView().findSimpleLayoutView(t,e)}findElement(t,e){return this.bodyView().findDom(t,e)}isRowCheckable(t){return this._flags.isCheckable(t)}isRowChecked(t){return this._flags.isChecked(t)}checkRow(t,e,s){if(s||this._flags.isCheckable(t))return this._flags.setChecked(t,e)}toggleChecked(t,e){(e||this._flags.isCheckable(t))&&this._flags.setChecked(t,!this._flags.isChecked(t))}checkRows(t,e,s){return s||(t=this._flags.getCheckableRows(!0,t)),this._flags.checkRows(t,e)}checkRowRange(t,e,s,i){return i?this._flags.checkRange(t,e,s):this.checkRows(c.makeIntArray(t,t+e),s,!1)}checkAll(t,e){if(e)return this._flags.checkAll(t);{let e=this._flags.getCheckableRows(!0,void 0);return this._flags.checkRows(e,t).length>0}}checkSearchRows(t,e){t&&this.checkAll(!1,e),this._searchResult&&this._flags.checkRows(this._searchResult.getRows(),!0)}isRowSearched(t){if(this._searchResult&&!this._searchModel.filtering)return this._flags.isSearched(t)}isRowDetailed(t){return this._flags.isDetailed(t)}setRowDetailed(t,e,s,i){this._flags.setDetailed(t,e,s),i&&this.bodyView().$_setDetailingRow(t)}$_getFlags(){return this._flags}getSelection(){return this._selection}clearSelection(t){if(this._selection)return this._listView.keepSelectInfo(t&&this._selection),this._selection=this._selection.destroy(),this.onSelectionClear&&this.onSelectionClear({control:this.wrapperOrThis()}),this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:-1,newEnd:-1,oldStart:-1,oldEnd:-1}),this.invalidateLayout(),!0}itemCount(){return this._groupModel?this._groupModel.itemCount():this._data?this._data.rowCount():0}setSelection(t,e){const s=this._data,i=this.itemCount();this.clearSelection(),e=isNaN(e)?t:e,s&&t>=0&&t<i&&e>=0&&e<i&&(this._selection=new Ka(this.isGrouped()?this._groupModel:s,t,e),t=this._selection.start,e=this._selection.end,this.onSelectionAdd&&this.onSelectionAdd({control:this.wrapperOrThis(),start:t,end:e}),this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:t,newEnd:e,oldStart:t,oldEnd:e}),this.invalidateLayout())}resizeSelection(t,e){const s=this._selection;if(s){const i=s.start,r=s.end;s.resize(e,t)&&(this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:s.start,newEnd:s.end,oldStart:i,oldEnd:r}),this.invalidateLayout())}}resetSelection(){const t=this._selection;if(t){const e=t.start,s=t.end;if(this._data&&this._selection.reset()){const i=t.start,r=t.end;i===e&&r===s||(this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:i,newEnd:r,oldStart:e,oldEnd:s}),this.invalidateLayout())}else this.clearSelection()}}swipeRow(t,e){let s=!1;if(this.onRowSwipe){const i={control:this.wrapperOrThis(),dir:e,row:t};this.onRowSwipe(i),s=i.cancel}if(!s)switch(this._current.getListRow().swipeAction()){case Ve.COMMAND:this.setCommandRow(t,!0);case Ve.PAGE:case Ve.TAP:case Ve.INFO:case Ve.EDIT:case Ve.ROW_BAR:case Ve.EDIT_BAR:}}closePanel(t){this._listView.closePanel(t)}showPanel(t,e){this._listView.showPanel(t,e)}togglePanel(t,e){this._listView.togglePanel(this.current().$_getPanel(t),e)}showFormPanel(t,e){t&&this.current().formPanel()._setActionTemplate(t),this.showPanel(this.current().formPanel(),e)}showButtonPanel(t){this.showPanel(this.current().buttonPanel(),t)}showSearchPanel(t,e){this.showPanel(this.current().searchPanel(),e)}showFilterPanel(t,e){const s=this.current().filterPanel();s.setModel(t),this.showPanel(s,e)}registerMenu(t,e){t&&(c.isObject(e)?this._menus[t]=e:this.unregisterMenu(t))}unregisterMenu(t){delete this._menus[t]}showMenu(t,e){"string"==typeof t?t=this._menus[t]:t||(t=this._menus[this._current.menu()]),t&&t.items&&t.items.length>0&&this._listView.showMenu(new ba(this,t),e)}closeMenu(t){this._listView.hideMenu(t)}toggleMenu(t,e){this._listView.hideMenu(e)||this.showMenu(t,e)}clearSearch(){const t=this._searchResult;if(t&&(this._flags.clearSearched(),this.invalidateLayout(),this._searchResult=t.destroy(),this._searchFilter)){const t=this._data;t instanceof yh&&t.removeFilter(this._searchFilter,!0),this._searchFilter=null}return t}search(t,e){const s=this.clearSearch();if(this._data){const i=this._groupModel,r=this._groupModel||this._data,n=this._searchModel=new tg(this),o=e?n.search(t,e,r,s):null,h=o&&o.fields();if(h&&h.length>0)for(const t of h)this._flags.setSearched(t.row,!0),i&&i.revealRow(t.row);if(this._searchResult=o,n.filtering){const t=this._data;if(this._searchFilter=$g.SEARCH_FILTER+c.irandom(1e4),t instanceof yh){const e=this._flags.getSearchedRows();t.setDataTags(e,1);const s={name:this._searchFilter,filter:(e,s)=>t.isDataTag(e,1)};t.addFilter(s,!0,!0)}}return o&&o.moveNext(),this.invalidateLayout(),o}return null}isRowPageVisible(){return this._rowPageView&&this._rowPageView.visible}closeRowPage(t,e){let s=this._rowPageView;if(s&&s.visible){if(s instanceof og&&t)try{const t=s.getValues(this._listView);if(!s.commit(t))return}catch(t){return console.error(t),void alert(t.message||t)}this._rowPageView=null,s.hide(this._listView.getOffsetBounds(),e)}}isInfoPageVisible(){return this._infoPageView&&this._infoPageView.visible}showInfoPage(t,e,s){if(this._rowPageView)return void console.warn("이미 Row Info View가 표시되고 있습니다.");let i,r=this._infoPageView;if(this._data instanceof Il){const e=this._data.getSourceRow(t);i=e.dv,t=e.row}else i=this._data;if(i&&t>=0&&t<i.rowCount()){const n=this._current.infoPage();r?r.setModel(n):(r=this._infoPageView=new ng(this.doc(),n),this.addElement(r)),n.setModel(e,i,t),r.show(this._listView,this._listView.getOffsetBounds(),s),this._rowPageView=r}}isEditPageVisible(){return this._editPageView&&this._editPageView.visible}showEditPage(t,e,s){if(this._rowPageView)return void console.warn("이미 Row Edit View가 표시되고 있습니다.");let i,r=this._editPageView;if(this._data instanceof Il){const e=this._data.getSourceRow(t);i=e.dv,t=e.row}else i=this._data;if(i&&t<i.rowCount()){const n=t>=0?this._current.editPage():this._current.addPage();r?r.setModel(n):(r=this._editPageView=new og(this.doc(),n),this.addElement(r)),n.setModel(e,i,t),r.show(this._listView,this._listView.getOffsetBounds(),s),this._rowPageView=r}}makeRowVisible(t){const e=this._data;if(e&&t>=0&&t<e.rowCount()){this._groupModel&&this._groupModel.revealRow(t);const e=this.bodyView().makeRowVisible(t);if(e&&(e.pos!==this._scrollIndex||e.off!==this._scrollOff))return this.setScrollIndex(e.pos,e.off),!0}}makeGroupItemVisible(t){if(t instanceof Ye){const e=this._listView.makeItemVisible(t);if(e)return this.setScrollIndex(e.pos,e.off),!0}}setFocusedRow(t){const e=this._focusedRow,s=this._data;if(s&&t>=0&&t<s.rowCount()?e!==t&&(this._focusedRow=t):e>=0&&(this._focusedRow=-1),this._focusedRow!==e&&(this.bodyView().setFocusedRow(this._focusedRow),this._listView.focusedRowChanged(this._focusedRow,e),this.onFocusedRowChange)){const t={control:this.wrapperOrThis(),row:this._focusedRow,oldRow:e};this.onFocusedRowChange(t)}}getEditValues(){if(this._rowPageView===this._editPageView)return this._editPageView.getValues(this._listView)}addTooltipView(t){this._listView.addTooltipView(t)}removeTooltipView(t){this._listView.removeTooltipView(t)}showToast(t){"string"==typeof t&&(t={message:t}),t&&(t.message||t.html)&&this._listView.showToast(t)}getDataGroupOfRow(t,e){const s=this._dataGroup;return s&&s.itemOfRow(t,e).group}expandAll(){this._groupModel&&this._groupModel.expandAll()}collapseAll(){this._groupModel&&this._groupModel.collapseAll()}_prepareRenderers(t){const e=t.children,s=this._htmlTempls={};for(let i=e.length-1;i>=0;i--){const r=e[i];t.removeChild(r),r instanceof HTMLElement&&r.id&&(s[r.id]=r)}}invalidateLayout(t=!1){this.invalidate(t),this._layoutNeeded=!0}_windowResized(){this.invalidateLayout()}_creatDefaultTool(){return new Nu(this)}_doInitModel(){!function(){const t=location.hostname;let e;try{if(e=realTouchLic,!e)return!1}catch(t){return!1}const s=Fu.decrypt(e);if("RealGrid-Touch"!=s.name||"RealGrid-Touch"!==Iu.name)return!1;const i=s.server.toLowerCase(),r=location.pathname.toLowerCase();if(Iu.license!=Mu.Developer&&!Fu.includedDomains(i,t.toLowerCase(),r))return!1;const n=s.lic.toLowerCase();if(!Object.values(Mu).includes(n))return!1;if(Iu.code=s.code,Iu.license=s.lic,n==Mu.Evaluation||n==Mu.Limited){const t=s.expire.split(".").map((function(t){return parseInt(t)})),e=new Date(t[0],t[1],t[2],23,59,59,999);if(new Date>e)return!1}return!0}()?console.error("need license!"):(this._defaults=new Wl(this,this,null,!1).load(Pu),this._current=this._portrait=new Wl(this,this,this._defaults,!1),this._landscape=new Wl(this,this,this._defaults,!0),this._layoutPool=new Vg(this),this._iconSets={},this._shapes=new Bh(this),this._rendererPool=new wu,this._editorPool=new Rg,this._defRowTempl=new Lg(this),this._rowCommands=new zu)}_doInitView(t){this._current=this.orientation()===jt.LANDSCAPE?this._landscape:this._portrait}_doOrientationChanged(t){this.closeMenu(!1),this.closePanel(!1),this._current=t===jt.LANDSCAPE?this._landscape:this._portrait,this._orientationChanged&&this._orientationChanged(t),this.setScrollIndex(this._scrollIndex,this._scrollOff),this._tableModels&&this.setRowOffset(this.rowOffset()),this.invalidateLayout()}_doControlObjectChanged(t,e){this.invalidateLayout()}_doBeforeRender(){this._fullMode;const t=this._listView,e=this._current;this._rowStyleArgs.control=this.wrapperOrThis(),this._rowStyleArgs.data=this._data,this._table=e.rowType()===Gt.TABLE?this.getTableModel(e.table()):void 0,this._table&&(this._table.setData(this._data),e.orientation()===Ut.HORIZONTAL&&(console.error("수평 모드에서는 table 행을 표시할 수 없습니다."),this._table=void 0)),this._prevImages=this._imageList,this._imageList={},this._layoutNeeded&&(this._current.prepareRender(),this._defRowTempl.clear(),this._layoutPool.prepareRender()),this._singleRow=!this._table&&this._current.singleRow().visible(),this.isDataLoading()&&this.skeletonVisible?(this._skeletonListView||(this._skeletonListView=new eg(this.doc(),this)),this._listView=this._skeletonListView):this._singleRow?this._listView=this._defaultListView:this.isRowGrouped()?(this._groupedListView||(this._groupedListView=new Yd(this.doc(),this)),this._listView=this._groupedListView):this.isDataGrouped()?(this._dataListView||(this._dataListView=new a_(this.doc(),this)),this._listView=this._dataListView):this._listView=this._defaultListView,t&&this._listView!==t&&this.removeElement(t),this.addElement(this._listView),this._listView.visible=!0,void 0===this._runTextFormatter&&(this._runTextFormatter=this._textFormatter||be(this._textFormat)),void 0===this._runBoolFormatter&&(this._runBoolFormatter=this._boolFormatter||ve(this._boolFormat)),void 0===this._runNumberFormatter&&(this._runNumberFormatter=this._numberFormatter||Ce(this._numberFormat)),void 0===this._runDateFormatter&&(this._runDateFormatter=this._dateFormatter||Se(this._dateFormat));const s=this._current.row().borderLine();this.rowBorder=s.visible()?{style:s.style()||this.getCssVar("--rt-row-border-line"),masterStyle:s.masterStyle()||this.getCssVar("--rt-master-border-line"),skipLast:s.skipLast(),skipGroupLast:s.skipGroupLast(),leafOnly:s.leafOnly()}:void 0}_doRender(t){this._rowPageView?this.$_renderRowList(t):this._fullMode?this.$_renderFull(t):this.$_renderDefault(t)}$_renderRowList(t){}$_renderFull(t){const e=(t,e,s)=>{const i={table:this._table,scrollPos:0,scrollOff:0,rowOffset:this._reqRowOffset};this._listView.measure(t,i,e,s)},s=t=>{const e=this._listView;e.resizeByMeasure().move(0,0),e.render(t)};try{const i=this.doc(),r=c.watch();this.isVertical()?e(i,t.width,Number.MAX_SAFE_INTEGER):e(i,Number.MAX_SAFE_INTEGER,t.height),R.log("ListControl measured in "+r.elapsedText(!0)),s(i),this.isVertical()?this._setSize(NaN,this._listView.height):this._setSize(this._listView.width,NaN),R.log("ListControl rendered in "+r.elapsedText())}finally{this._layoutNeeded=!1}}$_renderDefault(t){const e=(t,e,s)=>{let i=this._scrollIndex,r=this._scrollOff;isNaN(this._reqScrollIndex)||(i=this._reqScrollIndex,r=oe(this._reqScrollOff,0));const n={table:this._table,scrollPos:i,scrollOff:r,rowOffset:this._reqRowOffset};this._listView.measure(t,n,e,s)},s=t=>{const e=this._listView,s=this._scrollIndex;e.resizeByMeasure().move(0,0),e.render(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this._rowOffset=e.rowOffset(),this._scrollIndex!=s&&this.onScroll&&this.onScroll({control:this.wrapperOrThis(),top:this._scrollIndex})};try{const i=this.doc(),r=+new Date;e(i,t.width,t.height);const n=+new Date;R.log("ListControl measured in "+(n-r)+"ms."),s(i),R.log("ListControl rendered in "+(+new Date-n)+"ms."),this.$_checkRowEnded()}finally{this._layoutNeeded=!1,this._reqScrollIndex=this._reqScrollOff=this._reqRowOffset=NaN}}_doAfterRender(){this._dataChanged=!1,this.$_clearUsedImages(),this._current.unprepareRender(),this._table&&this._table.clean()}$_rowTouched(t){this._current.row().touchEffect()&&this.bodyView().setTouchedRow(t)}$_restoreSelection(){const{start:t,end:e}=this._listView.getSelectInfo();return null!=t&&null!=e&&(this.setSelection(t,e),!0)}$_performRowClick(t,e){switch(e){case Re.SELECT:this.isGrouped()?this.setSelection(this._groupModel.indexOfRow(t),NaN):this.setSelection(t,NaN);break;case Re.CHECK:this.isRowCheckable(t)&&this.checkRow(t,!this.isRowChecked(t),!1);break;case Re.COMMAND:this.setCommandRow(t,!0);break;case Re.EXPAND:if(this.isDataGrouped()){const e=this._dataGroup;e&&e.toggle(e.itemOfRow(t,!0).group,!1)}break;case Re.DETAIL:this.setRowDetailed(t,!this.isRowDetailed(t),!1,!0);break;case Re.DETAILEX:this.setRowDetailed(t,!this.isRowDetailed(t),!0,!0);break;case Re.LINK:const e=this._current.row().link(),s=e.getLink(this.wrapperOrThis(),this._data,t);s&&(e.target()?window.open(s,e.target()):location.href=s);break;case Re.INFO:this.showInfoPage(t,null,!0);break;case Re.EDIT:this.showEditPage(t,null,!0);break;case Re.MOVE:this.activeTool().requestDrag(new lo(t))}}$_rowClicked(t){if(t>=0){const e=this._current;if(this.fitRowWhenClick&&this.makeRowVisible(t),e.row().focusable()&&this.setFocusedRow(t),this.onRowClick){const e=this._rowClickArgs;if(e.control=this.wrapperOrThis(),e.row=t,e.cancel=!1,this.onRowClick(e),e.cancel)return}let s=e.row().clickAction();if(this.isDataGrouped()&&this._data.isMaster(t)){const t=e.row().masterClickAction();t&&(s=t)}this.$_performRowClick(t,s)}}$_rowLongPressed(t){if(t>=0){if(this.onRowLongPress){const e=this._rowClickArgs;if(e.control=this.wrapperOrThis(),e.row=t,e.cancel=!1,this.onRowLongPress(e),e.cancel)return}const e=this._current;let s=e.getListRow().longPressAction();if(this.isDataGrouped()&&this._data.isMaster(t)){const t=e.getListRow().masterPressAction();t&&(s=t)}this.$_performRowClick(t,s)}}$_groupItemClicked(t){t instanceof Qe?this.$_rowClicked(t.row()):(this.fitRowWhenClick&&this.makeGroupItemVisible(t),this._listView.clickItem(t))}$_clearUsedImages(){const t=this._prevImages;for(const e in t){t[e].onload=null,i&&delete this._imageSizes[e]}this._prevImages={}}$_checkRowEnded(){const t=this.bodyView().isRowEnded();t&&!this._lastRowRevealed&&setTimeout((()=>{this.onLastRowRevealed&&this.onLastRowRevealed({control:this.wrapperOrThis()})}),0),this._lastRowRevealed=t}}$g.CLASS_NAME="rtc-control",$g.SEARCH_FILTER="@_dlist_search_filter_",$g.NUMBER_FORMAT="",$g.BOOLEAN_FORMAT="False:True",$g.DATE_FORMAT="yyyy.MM.dd HH:mm";let Ag=1;class Lg{constructor(t){this.id=Ag++,this.detailId=Ag++,this.collapsedId=Ag++,this._rowStyle=new ue,this._layouts={},this._control=t}get rowProps(){return{}}get rowStyle(){return this._rowStyle}get layout(){function t(t){const e=t&&t.fields()||[],s=[],i={layout:Fi.TYPE,itemsAlign:"center",children:s};for(let t of e)s.push({field:t.name});return i.style={backgroundColor:"#efefef"},new ls(null,i,us.Vars)}const e=this._control.data();if(e instanceof Il){const s=e.getSource(this.target);let i=this._layouts[s.hash];return i||(i=t(s),this._layouts[s.hash]=i),i}return this._layout||(this._layout=t(e)),this._layout}get detailed(){return null}clear(){this._layout=null}}class Tg extends w{get control(){return this.$_c.wrapper()}get cellStyle(){return this.$_c.cellStyle()}set cellStyle(t){this.$_c.setCellStyle(t)}get cellStyleCallback(){return this.$_c.cellStyleCallback()}set cellStyleCallback(t){this.$_c.setCellStyleCallback(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get styleCallback(){return this.$_c.styleCallback()}set styleCallback(t){this.$_c.setStyleCallback(t)}}class kg extends Tg{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get rowOffset(){return this.$_c.rowOffset()}set rowOffset(t){this.$_c.setRowOffset(t)}get fitWidth(){return this.$_c.fitWidth()}set fitWidth(t){this.$_c.setFitWidth(t)}get prefix(){return this.$_c.prefix()}set prefix(t){this.$_c.setPrefix(t)}get suffix(){return this.$_c.suffix()}set suffix(t){this.$_c.setSuffix(t)}}class Dg extends Tg{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get masterVisible(){return this.$_c.masterVisible()}set masterVisible(t){this.$_c.setMasterVisible(t)}get dragMode(){return this.$_c.dragMode()}set dragMode(t){this.$_c.setDragMode(t)}}class Ng extends Tg{get label(){return this.$_c.label()}set label(t){this.$_c.setLabel(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class Pg extends Tg{get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class Mg extends Tg{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get shape(){return this.$_c.shape()}set shape(t){this.$_c.setShape(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get shapeCallback(){return this.$_c.shapeCallback()}set shapeCallback(t){this.$_c.setShapeCallback(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class Ig extends Tg{get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}}class Og extends Ng{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}}class Bg extends Tg{}class Fg extends w{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class Hg extends Fg{get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get gapLeft(){return this.$_c.gapLeft()}set gapLeft(t){this.$_c.setGapLeft(t)}get gapRight(){return this.$_c.gapRight()}set gapRight(t){this.$_c.setGapRight(t)}get gapTop(){return this.$_c.gapTop()}set gapTop(t){this.$_c.setGapTop(t)}get gapBottom(){return this.$_c.gapBottom()}set gapBottom(t){this.$_c.setGapBottom(t)}}class Wg extends Hg{constructor(t){super(),t.setWrapper(this),this._order=t.order().createWrapper(kg),this._check=t.check().createWrapper(Dg),this._shape=t.shape().createWrapper(Mg),this._letter=t.letter().createWrapper(Ig),this._image=t.image().createWrapper(Pg),this._button=t.button().createWrapper(Ng),this._move=t.move().createWrapper(Bg)}get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get order(){return this._order}get check(){return this._check}get shape(){return this._shape}get letter(){return this._letter}get image(){return this._image}get button(){return this._button}get move(){return this._move}}class zg extends Ng{get confirmMessage(){return this.$_c.confirmMessage()}set confirmMessage(t){this.$_c.setConfirmMessage(t)}}class Gg extends Ng{get editHeader(){return this.$_c.editHeader()}set editHeader(t){this.$_c.setEditHeader(t)}get editTemplate(){return this.$_c.editTemplate()}set editTemplate(t){this.$_c.setEditTemplate(t)}}class Ug extends Gg{get appending(){return this.$_c.appending}set appending(t){this.$_c.appending=t}}class jg extends Ng{get infoHeader(){return this.$_c.infoHeader()}set infoHeader(t){this.$_c.setInfoHeader(t)}get infoTemplate(){return this.$_c.infoTemplate()}set infoTemplate(t){this.$_c.setInfoTemplate(t)}}class qg extends Ng{get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}get url(){return this.$_c.url()}set url(t){this.$_c.setUrl(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class Yg extends Hg{constructor(t){super(),t.setWrapper(this),this._delete=t.delete().createWrapper(zg),this._add=t.add().createWrapper(Ug),this._edit=t.edit().createWrapper(Gg),this._info=t.info().createWrapper(jg),this._link=t.link().createWrapper(qg),this._custom=t.custom().createWrapper(Ng),this._move=t.move().createWrapper(Bg)}get action(){return this.$_c.action()}set action(t){this.$_c.setAction(t)}get delete(){return this._delete}setDelete(t){this._delete.assignProps(t)}get add(){return this._add}get edit(){return this._edit}get info(){return this._info}get link(){return this._link}get custom(){return this._custom}get move(){return this._move}}class Qg extends Fg{get onLetterClick(){return this.$_c.onLetterClick()}set onLetterClick(t){this.$_c.setOnLetterClick(t)}get length(){return this.$_c.length()}set length(t){this.$_c.setLength(t)}get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get minWidth(){return this.$_c.minWidth()}set minWidth(t){this.$_c.setMinWidth(t)}get maxWidth(){return this.$_c.maxWidth()}set maxWidth(t){this.$_c.setMaxWidth(t)}get spaceCharacter(){return this.$_c.spaceCharacter()}set spaceCharacter(t){this.$_c.setSpaceCharacter(t)}get caseSensitive(){return this.$_c.caseSensitive()}set caseSensitive(t){this.$_c.setCaseSensitive(t)}get letters(){return this.$_c.letters()}set letters(t){this.$_c.setLetters(t)}get indexField(){return this.$_c.indexField()}set indexField(t){this.$_c.setIndexField(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}}class Zg extends Fg{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get showSelection(){return this.$_c.showSelection()}set showSelection(t){this.$_c.setShowSelection(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get tooltipVisible(){return this.$_c.tooltipVisible()}set tooltipVisible(t){this.$_c.setTooltipVisible(t)}get tooltipValue(){return this.$_c.tooltipValue()}set tooltipValue(t){this.$_c.setTooltipValue(t)}get firstTooltip(){return this.$_c.firstTooltip()}set firstTooltip(t){this.$_c.setFirstTooltip(t)}get lastTooltip(){return this.$_c.lastTooltip()}set lastTooltip(t){this.$_c.setLastTooltip(t)}get tooltipStyle(){return this.$_c.tooltipStyle()}set tooltipStyle(t){this.$_c.setTooltipStyle(t)}}class Xg extends Fg{get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get thumbWidth(){return this.$_c.thumbWidth()}set thumbWidth(t){this.$_c.setThumbWidth(t)}get minThumbLength(){return this.$_c.minThumbLength()}set minThumbLength(t){this.$_c.setMinThumbLength(t)}}class Kg extends w{get action(){return this.$_c.action()}get label(){return this.$_c.label()}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get disabledClass(){return this.$_c.disabledClass()}set disabledClass(t){this.$_c.setDisabledClass(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get disabled(){return this.$_c.disabled()}}class Jg extends Fg{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(Kg),this._prev=t.prev().createWrapper(Kg),this._next=t.next().createWrapper(Kg),this._last=t.last().createWrapper(Kg)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get first(){return this._first}get prev(){return this._prev}get next(){return this._next}get last(){return this._last}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get itemGap2(){return this.$_c.itemGap2()}set itemGap2(t){this.$_c.setItemGap2(t)}}class tp extends w{get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}}class ep extends tp{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}}class sp extends Fg{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(ep),this._last=t.last().createWrapper(ep),this._index=t.index().createWrapper(tp),this._current=t.current().createWrapper(tp)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}get first(){return this._first}get last(){return this._last}get index(){return this._index}get current(){return this._current}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}}class ip extends Fg{get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get minCellWidth(){return this.$_c.minCellWidth()}set minCellWidth(t){this.$_c.setMinCellWidth(t)}get minCellHeight(){return this.$_c.minCellHeight()}set minCellHeight(t){this.$_c.setMinCellHeight(t)}}class rp extends Fg{get showHandle(){return this.$_c.showHandle()}set showHandle(t){this.$_c.setShowHandle(t)}}class np extends w{get rootUrl(){return this.$_c.rootUrl()}set rootUrl(t){this.$_c.setRootUrl(t)}get linkField(){return this.$_c.linkField()}set linkField(t){this.$_c.setLinkField(t)}get linkCallback(){return this.$_c.linkCallback()}set linkCallback(t){this.$_c.setLinkCallback(t)}get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}}class op extends w{get enabled(){return this.$_c.enabled()}set enabled(t){this.$_c.setEnabled(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get backward(){return this.$_c.backward()}set backward(t){this.$_c.setBackward(t)}get duration(){return this.$_c.duration()}set duration(t){this.$_c.setDuration(t)}get changeDuration(){return this.$_c.changeDuration()}set changeDuration(t){this.$_c.setChangeDuration(t)}}class hp extends op{get rowsPerScroll(){return this.$_c.rowsPerScroll()}set rowsPerScroll(t){this.$_c.setRowsPerScroll(t)}}class ap extends w{constructor(t){super(),t.setWrapper(this),this._link=t.link().createWrapper(np),this._focusMask=t.focusMask().createWrapper(kp),this._autoScroll=t.autoScroll().createWrapper(hp),this._borderLine=t.borderLine().createWrapper(Tp)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get largeTemplate(){return this.$_c.largeTemplate()}set largeTemplate(t){this.$_c.setLargeTemplate(t)}get templateCallback(){return this.$_c.templateCallback()}set templateCallback(t){this.$_c.setTemplateCallback(t)}get templateParams(){return this.$_c.templateParams()}set templateParams(t){this.$_c.setTemplateParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get styleCallback(){return this.$_c.styleCallback()}set styleCallback(t){this.$_c.setStyleCallback(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}get masterClickAction(){return this.$_c.masterClickAction()}set masterClickAction(t){this.$_c.setMasterClickAction(t)}get longPressAction(){return this.$_c.longPressAction()}set longPressAction(t){this.$_c.setLongPressAction(t)}get masterPressAction(){return this.$_c.masterPressAction()}set masterPressAction(t){this.$_c.setMasterPressAction(t)}get swipeAction(){return this.$_c.swipeAction()}set swipeAction(t){this.$_c.setSwipeAction(t)}get commands(){return this.$_c.commands()}set commands(t){this.$_c.setCommands(t)}get link(){return this._link}get focusMask(){return this._focusMask}get autoScroll(){return this._autoScroll}get focusable(){return this.$_c.focusable()}set focusable(t){this.$_c.setFocusable(t)}get touchEffect(){return this.$_c.touchEffect()}set touchEffect(t){this.$_c.setTouchEffect(t)}get deleteAnimation(){return this.$_c.deleteAnimation()}set rowDeleteAnimation(t){this.$_c.setDeleteAnimation(t)}get borderLine(){return this._borderLine}updateTemplate(t,e,s,i){this.$_c.updateTemplate(t,e,s,i)}updateTemplateProps(t,e,s){this.$_c.updateTemplateProps(t,e,s)}}class lp extends w{get control(){return this.$_c.owner().wrapper()}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get sortMarkVisible(){return this.$_c.sortMarkVisible()}set sortMarkVisible(t){this.$_c.setSortMarkVisible(t)}get sortOrderVisible(){return this.$_c.sortOrderVisible()}set sortOrderVisible(t){this.$_c.setSortOrderVisible(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class dp extends lp{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get layoutStyle(){return this.$_c.layoutStyle()}set layoutStyle(t){this.$_c.setLayoutStyle(t)}}class _p extends dp{get buttons(){const t=this.$_c.buttons();return t&&t.map((t=>Object.assign({},t)))}set buttons(t){this.$_c.setButtons(t)}get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}getButton(t){const e=this.$_c.getButton(t);return e&&Object.assign({},e)}setButton(t){this.$_c.setButton(t)}removeButton(t){this.$_c.removeButton(t)}showButton(t){this.$_c.setButtonVisible(t,!0)}hideButton(t){this.$_c.setButtonVisible(t,!1)}setButtonEnabled(t,e){this.$_c.setButtonEnabled(t,e)}getButtonState(t){return this.$_c.getButtonState(t)}setButtonState(t,e){this.$_c.setButtonState(t,e)}}class cp extends _p{get caption(){return this.$_c.caption()}set caption(t){this.$_c.setCaption(t)}get captionAlign(){return this.$_c.captionAlign()}set captionAlign(t){this.$_c.setCaptionAlign(t)}get captionColor(){return this.$_c.captionColor()}set captionColor(t){this.$_c.setCaptionColor(t)}get showCheck(){return this.$_c.showCheck()}set showCheck(t){this.$_c.setShowCheck(t)}get autoCheck(){return this.$_c.autoCheck()}set autoCheck(t){this.$_c.setAutoCheck(t)}}class up extends _p{}class gp extends dp{get indent(){return this.$_c.indent()}set indent(t){this.$_c.setIndent(t)}}class pp extends lp{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get resetVisible(){return this.$_c.resetVisible()}set resetVisible(t){this.$_c.setResetVisible(t)}get optionsVisible(){return this.$_c.optionsVisible()}set optionsVisible(t){this.$_c.setOptionsVisible(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class fp extends lp{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get clearWhenClose(){return this.$_c.clearWhenClose()}set clearWhenClose(t){this.$_c.setClearWhenClose(t)}}class wp extends lp{get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}}class mp extends w{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get showMode(){return this.$_c.showMode()}set showMode(t){this.$_c.setShowMode(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get minSize(){return this.$_c.minSize()}set minSize(t){this.$_c.setMinSize(t)}get maxSize(){return this.$_c.maxSize()}set maxSize(t){this.$_c.setMaxSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}}class yp extends mp{get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}}class bp extends yp{get buttonPosition(){return this.$_c.buttonPosition()}set buttonPosition(t){this.$_c.setButtonPosition(t)}get cancelLabel(){return this.$_c.cancelLabel()}set cancelLabel(t){this.$_c.setCancelLabel(t)}get okLabel(){return this.$_c.okLabel()}set okLabel(t){this.$_c.setOkLabel(t)}get closeLabel(){return this.$_c.closeLabel()}set closeLabel(t){this.$_c.setCloseLabel(t)}}class vp extends bp{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}}class Cp extends yp{get buttons(){return this.$_c.buttons()}set buttons(t){this.$_c.setButtons(t)}get arrange(){return this.$_c.arrange()}set arrange(t){this.$_c.setArrange(t)}get align(){return this.$_c.align()}set align(t){this.$_c.setAlign(t)}}class Sp extends bp{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get matchCaseLabel(){return this.$_c.matchCaseLabel()}set matchCaseLabel(t){this.$_c.setMatchCaseLabel(t)}get wholeWordLabel(){return this.$_c.wholeWordLabel()}set wholeWordLabel(t){this.$_c.setWholeWordLabel(t)}get regExpLabel(){return this.$_c.regExpLabel()}set regExpLabel(t){this.$_c.setRegExpLabel(t)}get searchNextLabel(){return this.$_c.searchNextLabel()}set searchNextLabel(t){this.$_c.setSearchNextLabel(t)}get searchAllLabel(){return this.$_c.searchAllLabel()}set searchAllLabel(t){this.$_c.setSearchAllLabel(t)}get lineGap(){return this.$_c.lineGap()}set lineGap(t){this.$_c.setLineGap(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class Rp extends bp{get autoApply(){return this.$_c.autoApply()}set autoApply(t){this.$_c.setAutoApply(t)}get autoClose(){return this.$_c.autoClose()}set autoClose(t){this.$_c.setAutoClose(t)}}class xp extends w{get visible(){return this.$_c.visible}set visible(t){this.$_c.setVisible(t)}get collapsedVisible(){return this.$_c.collapsedVisible}set collapsedVisible(t){this.$_c.setCollapsedVisible(t)}get template(){return this.$_c.template}set template(t){this.$_c.setTemplate(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}}class Vp extends xp{}class Ep extends w{constructor(t){super(),t.setWrapper(this)}get theme(){return this.$_c.theme()}set theme(t){this.$_c.setTheme(t)}get rowIndents(){return this.$_c.rowIndents()}set rowIndents(t){this.$_c.setRowIndents(t)}get indent(){return this.$_c.indent()}set indent(t){this.$_c.setIndent(t)}}class $p extends Ep{constructor(t){super(t),this._header=t.header().createWrapper(xp),this._footer=t.footer().createWrapper(Vp),this._expander=t.expander().createWrapper(Og)}get header(){return this._header}get footer(){return this._footer}get expander(){return this._expander}get groupIndent(){return this.$_c.groupIndent()}set groupIndent(t){this.$_c.setGroupIndent(t)}get endMargin(){return this.$_c.endMargin()}set endMargin(t){this.$_c.setEndMargin(t)}}class Ap extends Ep{constructor(t){super(t),this._expander=t.expander().createWrapper(Og)}get expander(){return this._expander}}class Lp extends w{get master(){return this.$_c.master()}set master(t){this.$_c.setMaster(t)}getInfo(t){return this.$_c.getInfo(t)}setInfo(t,e,s=!0){this.$_c.setInfo(t,e,s)}setInfos(t){this.$_c.setInfos(t)}}class Tp extends w{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get masterStyle(){return this.$_c.masterStyle()}set masterStyle(t){this.$_c.setMasterStyle(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}get skipLast(){return this.$_c.skipLast()}set skipLast(t){this.$_c.setSkipLast(t)}get skipGroupLast(){return this.$_c.skipGroupLast()}set skipGroupLast(t){this.$_c.setSkipGroupLast(t)}get leafOnly(){return this.$_c.leafOnly()}set leafOnly(t){this.$_c.setLeafOnly(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class kp extends w{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}}class Dp extends cp{}class Np extends w{constructor(t){super(),t.setWrapper(this),this._header=this._createHeader(t)}get header(){return this._header}get fitSize(){return this.$_c.fitSize()}set fitSize(t){this.$_c.setFitSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get effectDuration(){return this.$_c.effectDuration()}set effectDuration(t){this.$_c.setEffectDuration(t)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get showDirection(){return this.$_c.showDirection()}set showDirection(t){this.$_c.setShowDirection(t)}get hideDirection(){return this.$_c.hideDirection()}set hideDirection(t){this.$_c.setHideDirection(t)}get allFields(){return this.$_c.allFields()}set allFields(t){this.$_c.setAllFields(t)}get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}get templateVars(){return this.$_c.templateVars()}set templateVars(t){this.$_c.setTemplateVars(t)}get templateParams(){return this.$_c.templateParams2()}set templateParams(t){this.$_c.setTemplateParams2(t)}}class Pp extends Dp{}class Mp extends Np{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}get rowChangeable(){return this.$_c.rowChangeable()}set rowChangeable(t){this.$_c.setRowChangeable(t)}_createHeader(t){return t.header().createWrapper(Pp)}}class Ip extends Dp{}class Op extends Np{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}_createHeader(t){return t.header().createWrapper(Ip)}}class Bp extends op{get changeEffect(){return this.$_c.changeEffect()}set changeEffect(t){this.$_c.setChangeEffect(t)}}class Fp extends w{constructor(t){super(),t.setWrapper(this),this._autoScroll=t.autoScroll().createWrapper(Bp)}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get maskEffect(){return this.$_c.maskEffect()}set maskEffect(t){this.$_c.setMaskEffect(t)}get showPrev(){return this.$_c.showPrev()}set showPrev(t){this.$_c.setShowPrev(t)}get showNext(){return this.$_c.showNext()}set showNext(t){this.$_c.setShowNext(t)}get rowChangeDir(){return this.$_c.rowChangeDir()}set rowChangeDir(t){this.$_c.setRowChangeDir(t)}get rowNavigator(){return this.$_c.rowNavigator()}set rowNavigator(t){this.$_c.setRowNavigator(t)}get rowBorderVisible(){return this.$_c.rowBorderVisible()}set rowBorderVisible(t){this.$_c.setRowBorderVisible(t)}get fillHeight(){return this.$_c.fillHeight()}set fillHeight(t){this.$_c.setFillHeight(t)}get autoScroll(){return this._autoScroll}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class Hp extends w{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get endSpace(){return this.$_c.endSpace()}set endSpace(t){this.$_c.setEndSpace(t)}get rowTemplate(){return this.$_c.rowTemplate()}set rowTemplate(t){this.$_c.setRowTemplate(t)}get indicatorVisible(){return this.$_c.indicatorVisible()}set indicatorVisible(t){this.$_c.setIndicatorVisible(t)}get indicatorType(){return this.$_c.indicatorType()}set indicatorType(t){this.$_c.setIndicatorType(t)}get indicatorSize(){return this.$_c.indicatorSize()}set indicatorSize(t){this.$_c.setIndicatorSize(t)}get indicatorMargin(){return this.$_c.indicatorMargin()}set indicatorMargin(t){this.$_c.setIndicatorMargin(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class Wp extends w{get fullModeWidth(){return this.$_c.fullModeWidth()}set fullModeWidth(t){this.$_c.setFullModeWidth(t)}get fullModeHeight(){return this.$_c.fullModeHeight()}set fullModeHeight(t){this.$_c.setFullModeHeight(t)}}class zp extends Wp{get messageVisible(){return this.$_c.messageVisible()}set messageVisible(t){this.$_c.setMessageVisible(t)}get message(){return this.$_c.message()}set message(t){this.$_c.setMessage(t)}get loadVisible(){return this.$_c.loadVisible()}set loadVisible(t){this.$_c.setLoadVisible(t)}get loadLabel(){return this.$_c.loadLabel()}set loadLabel(t){this.$_c.setLoadLabel(t)}get onLoadClick(){return this.$_c.onLoadClick()}set onLoadClick(t){this.$_c.setOnLoadClick(t)}}class Gp extends Wp{}class Up extends w{constructor(t){super()}}class jp extends Up{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t&&t.$_d))}get rows(){return this.$_c.rows()}set rows(t){this.$_c.setRows(t)}}class qp extends Up{constructor(t){super(t),this._rowBar=new Wg(t._rowBar),this._editBar=new Yg(t._editBar),this._indexBar=t._indexBar.createWrapper(Qg),this._scrollIndicator=t._scrollIndicator.createWrapper(Zg),this._scrollBar=t._scrollBar.createWrapper(Xg),this._pageNavigator=new Jg(t._pageNavigator),this._pageScroller=new sp(t._pageScroller),this._commandBox=t._commandBox.createWrapper(ip),this._selectionMask=t._selectionMask.createWrapper(rp),this._row=new ap(t.row()),this._headRows=t.headRows().setWrapper(new jp(t.headRows())),this._header=t._header.createWrapper(cp),this._footer=t._footer.createWrapper(up),this._searchBar=t._searchBar.createWrapper(pp),this._searchResultBar=t._searchResultBar.createWrapper(fp),this._fieldBar=t._fieldBar.createWrapper(wp),this._subheader=t._subheader.createWrapper(gp),this._formPanel=t._formPanel.createWrapper(vp),this._buttonPanel=t._buttonPanel.createWrapper(Cp),this._searchPanel=t._searchPanel.createWrapper(Sp),this._filterPanel=t._filterPanel.createWrapper(Rp),this._rowGroup=new $p(t._rowGroup),this._dataGroup=new Ap(t._dataGroup),this._rowInfos=t._dataRowInfos.createWrapper(Lp),this._infoPage=new Mp(t._infoPage),this._editPage=new Op(t._editPage),this._addPage=new Op(t._addPage),this._singleRow=new Fp(t._singleRow),this._attachedRow=t._attachedRow.createWrapper(Hp),this._emptyPage=t._emptyPage.createWrapper(zp),this._loadingPage=t._loadingPage.createWrapper(Gp)}get rowType(){return this.$_c.rowType()}set rowType(t){this.$_c.setRowType(t)}get table(){return this.$_c.table()}set table(t){this.$_c.setTable(t)}get isLandScape(){return this.$_c.isLandscape()}get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get largeSize(){return this.$_c.largeSize()}set largeSize(t){this.$_c.setLargeSize(t)}get rowWidth(){return this.$_c.rowWidth()}set rowWidth(t){this.$_c.setRowWidth(t)}get minRowWidth(){return this.$_c.minRowWidth()}set minRowWidth(t){this.$_c.setMinRowWidth(t)}get maxRowWidth(){return this.$_c.maxRowWidth()}set maxRowWidth(t){this.$_c.setMaxRowWidth(t)}get rowCount(){return this.$_c.rowCount()}set rowCount(t){this.$_c.setRowCount(t)}get levelIndent(){return this.$_c.levelIndent()}set levelIndent(t){this.$_c.setLevelIndent(t)}get menu(){return this.$_c.menu()}set menu(t){this.$_c.setMenu(t)}get dragEdgeGap(){return this.$_c.dragEdgeGap()}set dragEdgeGap(t){this.$_c.setDragEdgeGap(t)}get rowBar(){return this._rowBar}get editBar(){return this._editBar}get indexBar(){return this._indexBar}get scrollIndicator(){return this._scrollIndicator}get scrollBar(){return this._scrollBar}get pageNavigator(){return this._pageNavigator}get pageScroller(){return this._pageScroller}get commandBox(){return this._commandBox}get row(){return this._row}get header(){return this._header}get footer(){return this._footer}get searchBar(){return this._searchBar}get searchResultBar(){return this._searchResultBar}get fieldBar(){return this._fieldBar}get subheader(){return this._subheader}get formPanel(){return this._formPanel}get buttonPanel(){return this._buttonPanel}get searchPanel(){return this._searchPanel}get filterPanel(){return this._filterPanel}get rowGroup(){return this._rowGroup}get dataGroup(){return this._dataGroup}get rowInfos(){return this._rowInfos}get singleRow(){return this._singleRow}get attachedRow(){return this._attachedRow}get emptyPage(){return this._emptyPage}get loadingPage(){return this._loadingPage}get infoPage(){return this._infoPage}get editPage(){return this._editPage}get addView(){return this._addPage}assign(t){t&&(this.assignProps(t),t.rowInfos&&this._rowInfos.setInfos(t.rowInfos))}}class Yp{constructor(){}load(t,e){}}class Qp extends qp{constructor(t,e,s,i){super(t),this._owner=e,this._portrait=s,this._landscape=i}get portrait(){return this._portrait}get landscape(){return this._landscape}get current(){return this._owner.current}}function Zp(t){return t&&{_idx:t.header().index,level:t.level(),field:t.field(),value:t.value(),expanded:t.expanded()}}class Xp extends w{constructor(t,e,s=fe.DEFAULT){super();const i=new $g(t,e,s).setWrapper(this).$_c;this._current=this._portrait=i.portrait().setWrapper(new qp(i.portrait())),this._landscape=i.landscape().setWrapper(new qp(i.landscape())),this._options=i.options().setWrapper(new Qp(i.options(),this,this._portrait,this._landscape)),i._orientationChanged=t=>{this._current=this.$_c.current().isWrapper(this._landscape)?this._landscape:this._portrait}}_doDestory(){this.$_c=this.$_c.destroy()}get onScroll(){return this.$_c.onScroll}set onScroll(t){this.$_c.onScroll=t}get onRowClick(){return this.$_c.onRowClick}set onRowClick(t){this.$_c.onRowClick=t}get onRowLongPress(){return this.$_c.onRowLongPress}set onRowLongPress(t){this.$_c.onRowLongPress=t}get onRowSwipe(){return this.$_c.onRowSwipe}set onRowSwipe(t){this.$_c.onRowSwipe=t}get onButtonClick(){return this.$_c.onButtonClick}set onButtonClick(t){this.$_c.onButtonClick=t}get onRowCheck(){return this.$_c.onRowCheck}set onRowCheck(t){this.$_c.onRowCheck=t}get onRowsCheck(){return this.$_c.onRowsCheck}set onRowsCheck(t){this.$_c.onRowsCheck=t}get onAllRowsCheck(){return this.$_c.onAllRowsCheck}set onAllRowsCheck(t){this.$_c.onAllRowsCheck=t}get onRowDetail(){return this.$_c.onRowDetail}set onRowDetail(t){this.$_c.onRowDetail=t}get onRowsDetail(){return this.$_c.onRowsDetail}set onRowsDetail(t){this.$_c.onRowsDetail=t}get onAllRowsDetail(){return this.$_c.onAllRowsDetail}set onAllRowsDetail(t){this.$_c.onAllRowsDetail=t}get onRowFlagChange(){return this.$_c.onRowFlagChange}set onRowFlagChange(t){this.$_c.onRowFlagChange=t}get onRowsFlagChange(){return this.$_c.onRowsFlagChange}set onRowsFlagChange(t){this.$_c.onRowsFlagChange=t}get onAllRowsFlagChange(){return this.$_c.onAllRowsFlagChange}set onAllRowsFlagChange(t){this.$_c.onAllRowsFlagChange=t}get onSelectionAdd(){return this.$_c.onSelectionAdd}set onSelectionAdd(t){this.$_c.onSelectionAdd=t}get onSelectionClear(){return this.$_c.onSelectionClear}set onSelectionClear(t){this.$_c.onSelectionClear=t}get onSelectionChange(){return this.$_c.onSelectionChange}set onSelectionChange(t){this.$_c.onSelectionChange=t}get onLastRowRevealed(){return this.$_c.onLastRowRevealed}set onLastRowRevealed(t){this.$_c.onLastRowRevealed=t}get onBeforeGroupExpand(){return this.$_c.onBeforeGroupExpand}set onBeforeGroupExpand(t){this.$_c.onBeforeGroupExpand=t}get onGroupExpand(){return this.$_c.onGroupExpand}set onGroupExpand(t){this.$_c.onGroupExpand=t}get onBeforeGroupCollapse(){return this.$_c.onBeforeGroupCollapse}set onBeforeGroupCollapse(t){this.$_c.onBeforeGroupCollapse=t}get onGroupCollapse(){return this.$_c.onGroupCollapse}set onGroupCollapse(t){this.$_c.onGroupCollapse=t}get onBeforePageChange(){return this.$_c.onBeforePageChange}set onBeforePageChange(t){this.$_c.onBeforePageChange=t}get onPageChange(){return this.$_c.onPageChange}set onPageChange(t){this.$_c.onPageChange=t}get onFocusedRowChange(){return this.$_c.onFocusedRowChange}set onFocusedRowChange(t){this.$_c.onFocusedRowChange=t}get onEditFieldChange(){return this.$_c.onEditFieldChange}set onEditFieldChange(t){this.$_c.onEditFieldChange=t}get onEditCommit(){return this.$_c.onEditCommit}set onEditCommit(t){this.$_c.onEditCommit=t}get state(){return this.$_c.state()}setState(t){this.$_c.setState(t)}get orientation(){return this.$_c.orientation()}get syncOrientation(){return this.$_c.syncOrientation()}set syncOrientation(t){this.$_c.setSyncOrientation(t)}get screenOrientation(){return this.$_c.screenOrientation()}get syncScreenOrientation(){return this.$_c.syncScreenOrientation()}set screenSyncOrientation(t){this.$_c.setScreenSyncOrientation(t)}get renderMode(){return this.$_c.renderMode()}get description(){return this.$_c.description()}set description(t){this.$_c.setDescription(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t?t.$_d:null))}get textFormatter(){return this.$_c.textFormatter()}set textFormatter(t){this.$_c.setTextFormatter(t)}get boolFormatter(){return this.$_c.boolFormatter()}set boolFormatter(t){this.$_c.setBoolFormatter(t)}get numberFormatter(){return this.$_c.numberFormatter()}set numberFormatter(t){this.$_c.setNumberFormatter(t)}get dateFormatter(){return this.$_c.dateFormatter()}set dateFormatter(t){this.$_c.setDateFormatter(t)}get textFormat(){return this.$_c.textFormat()}set textFormat(t){this.$_c.setTextFormat(t)}get boolFormat(){return this.$_c.boolFormat()}set boolFormat(t){this.$_c.setBoolFormat(t)}get numberFormat(){return this.$_c.numberFormat()}set numberFormat(t){this.$_c.setNumberFormat(t)}get dateFormat(){return this.$_c.dateFormat()}set dateFormat(t){this.$_c.setDateFormat(t)}get options(){return this._options}setOptions(t){return t&&this._options.assign(t),this}get portrait(){return this._portrait}setPortrait(t){return t&&this._portrait.assign(t),this}get landscape(){return this._landscape}setLandscape(t){return t&&this._landscape.assign(t),this}get current(){return this._current}get isEmpty(){return this.$_c.isEmpty()}get topRow(){return this.$_c.topRow()}set topRow(t){this.$_c.setTopRow(t)}get isRowGrouped(){return this.$_c.isRowGrouped()}get isDataGrouped(){return this.$_c.isRowGrouped()}get isPaging(){return this.$_c.isPaging()}get isSingleRow(){return this.$_c.isSingleRow()}get pageSize(){return this.$_c.pageSize()}get pageCount(){return this.$_c.pageCount()}get page(){return this.$_c.page()}set page(t){this.$_c.setPage(t)}get registeredRowCommands(){return this.$_c.rowCommands().registeredCommands()}get commandRow(){return this.$_c.commandRow()}get checkedRowCount(){return this.$_c.checkedRowCount()}get lineSeparator(){return this.$_c.lineSeparator()}set lineSeparator(t){this.$_c.setLineSeparator(t)}get searchOptions(){return Object.assign({},this.$_c.searchOptions())}set searchOptions(t){this.$_c.setSearchOptions(t)}get fitRowWhenScroll(){return this.$_c.fitRowWhenScroll}set fitRowWhenScroll(t){this.$_c.fitRowWhenScroll=t}get fitRowWhenClick(){return this.$_c.fitRowWhenClick}set fitRowWhenClick(t){this.$_c.fitRowWhenClick=t}get scrollIndex(){return this.$_c.scrollIndex()}set scrollIndex(t){this.$_c.setScrollIndex(t,0)}get focusedRow(){return this.$_c.focusedRow()}get dataLoading(){return this.$_c.isDataLoading()}setDataLoading(t){return this.$_c.setDataLoading(t)}get dataAppending(){return this.$_c.isDataAppending()}setDataAppending(t,e=!0){return this.$_c.setDataAppending(t,e)}get skeletonVisible(){return this.$_c.skeletonVisible}set skeletonVisible(t){this.$_c.skeletonVisible=t}get alwaysEmptyPage(){return this.$_c.alwaysEmptyPage}set alwaysEmptyPage(t){this.$_c.alwaysEmptyPage=t}get selectable(){return this.$_c.selectable}set selectable(t){this.$_c.selectable=t}load(t){return(new Yp).load(this.$_c,t),this}setConfig(t){for(let t=0,e=arguments.length;t<e;t++){const e=arguments[t];if(!se(e))return;const s=e.props;if(se(s)){const t=this.$_c,e=s.rowCommands,i=s.icons,r=s.menus;if(s.shapes&&t.registerShapes(s.shapes),s.templates&&this.registerTemplates(s.templates),s.tables&&this.registerTableModels(s.tables),e)for(const s in e)s.startsWith("@")?t.rowCommands().update(s,e[s]):t.rowCommands().register(s,e[s],!0);if(i&&(Array.isArray(i)?i.forEach((e=>t.registerIconSet(e.name,e))):c.isObject(i)&&t.registerIconSet(i.name,i)),r)for(const t in r)this.$_c.registerMenu(t,r[t]);this.assignProps(s)}this.setOptions(e.options),this.setPortrait(e.portrait),this.setLandscape(e.landscape)}return this}registerTemplate(t,e,s){return e=e||t.name||_r(),this.$_c.registerTemplate(e,t,s,!1),e}registerTemplates(t){if(se(t))for(const e in t){const s=t[e];Array.isArray(s)?this.registerTemplate(s[0],e,s[1]):this.registerTemplate(s,e)}}registerSharedTemplate(t,e,s){return e=e||t.name||_r(),this.$_c.registerTemplate(e,t,s,!0),e}registerSharedTemplates(t){if(se(t))for(let e in t)this.registerSharedTemplate(t[e],e)}registerShape(t){t&&this.$_c.registerShape(t.name,t.d,t.width,t.height)}registerShapes(t){const e={};Array.isArray(t)&&t.forEach((t=>{t.name&&(e[t.name]=t)})),this.$_c.registerShapes(e)}registerIconSet(t,e){if(!t)throw new Error("IconSet의 이름이 지정돼야 합니다.");this.$_c.registerIconSet(t,e)}registerTableModel(t,e){if(!t)throw new Error("Table model의 이름이 지정돼야 합니다.");this.$_c.registerTableModel(t,e)}registerTableModels(t){this.$_c.registerTableModels(t)}rowGroupBy(t){t&&!Array.isArray(t)&&(t=[t]),this.$_c.rowGroupBy(t)}groupOfRow(t){const e=this.$_c._groupModel;return e instanceof rs?Zp(e.groupOfRow(t)):null}parentOfGroup(t){if(t){const e=this.$_c._groupModel;if(e){const s=e.getItem(t._idx);return s&&Zp(s.group.parent)}}}childrenOfGroup(t){if(t){const e=this.$_c._groupModel;if(e){const s=e.getItem(t._idx);if(s)return s.group.children.map((t=>Zp(t)))}}}expandGroup(t){return this.$_c._groupModel,!1}collapseGroup(t){return this.$_c._groupModel,!1}dataGroupBy(t){this.$_c.dataGroupBy(t)}setPaging(t){return this.$_c.setPaging(t),this}clearSelection(){this.$_c.clearSelection()}setSelection(t,e){this.$_c.setSelection(t,e)}resizeSelection(t,e=NaN){this.$_c.resizeSelection(e,t)}isRowSelected(t){const e=this.$_c.getSelection();return e&&e.isRowSelected(t)}getSelectedRows(){const t=this.$_c.getSelection();return t&&t.getSelectedRows()}isRowChecked(t){return this.$_c.isRowChecked(t)}getCheckedRows(t=!0){return this.$_c.$_getFlags().getCheckedRows(t)}checkRow(t,e,s=!1){return this.$_c.checkRow(t,e,s)}toggleChecked(t,e=!1){this.$_c.toggleChecked(t,e)}checkRows(t,e,s=!1){return this.$_c.checkRows(t,e,s)}checkRowRange(t,e,s,i=!1){return this.$_c.checkRowRange(t,e,s,i)}checkAllRows(t,e=!1){return this.$_c.checkAll(t,e)}checkAll(t,e=!1){if(!this.$_c.isDataGrouped())return this.checkAllRows(t,e)}checkSearchedRows(t=!1,e=!1){this.$_c.checkSearchRows(t,e)}isRowCheckable(t){return this.$_c.isRowCheckable(t)}setCheckable(t,e){const s=this.$_c.$_getFlags();return s&&s.setCheckable(t,e)}isRowDetailed(t){return this.$_c.isRowDetailed(t)}getDetailedRows(t){return this.$_c.$_getFlags().getDetailedRows(t)}setRowDetailed(t,e,s=!1){this.$_c.setRowDetailed(t,e,s,!1)}setRowsDetailed(t,e,s){return this.$_c.$_getFlags().detailRows(e,s)}setRowRangeDetailed(t,e,s,i){return this.$_c.$_getFlags().detailRange(e,s,i)}setAllRowsDetailed(t){return this.$_c.$_getFlags().detailAll(t)}isRowFlagged(t,e){return this.$_c.$_getFlags().hasUserFlag(t,e)}getFlaggedRows(t,e){return this.$_c.$_getFlags().getUserFlaggedRows(t,e)}setRowFlagAll(t,e){return this.$_c.$_getFlags().setUserFlagAll(t,e)}setRowFlag(t,e,s){return this.$_c.$_getFlags().setUserFlag(t,e,s)}setRowsFlag(t,e,s){return this.$_c.$_getFlags().setUserFlags(t,e,s)}setRowRangeFlag(t,e,s,i){return this.$_c.$_getFlags().setUserFlagRange(t,e,s,i)}registerRowCommand(t,e,s=!1){this.$_c.rowCommands().register(t,e,s)}unregisterRowCommands(t){this.$_c.rowCommands().unregister(t)}getRowCommand(t){return this.$_c.rowCommands().get(t)}updateRowCommand(t,e){this.$_c.rowCommands().update(t,e)}setCommandRow(t,e=!0){this.$_c.setCommandRow(t,e)}closePanel(t=!0){this.$_c.closePanel(t)}showFormPanel(t=!0){this.$_c.showFormPanel(null,t)}showButtonPanel(t=!0){this.$_c.showButtonPanel(t)}showSearchPanel(t,e=!0){this.$_c.showSearchPanel(t,e)}showFilterPanel(t,e=!0){this.$_c.showFilterPanel(t,e)}showMenu(t,e=!0){this.$_c.showMenu(t,e)}closeMenu(t=!0){this.$_c.closeMenu(t)}showInfoPage(t,e,s=!0){this.$_c.showInfoPage(t,e,s)}closeInfoPage(){this.$_c.isInfoPageVisible()&&this.$_c.closeRowPage(!1,!0)}showEditPage(t,e,s=!0){this.$_c.showEditPage(t,e,s)}closeEditPage(t,e=!0){this.$_c.isEditPageVisible()&&this.$_c.closeRowPage(t,e)}getEditValues(){return this.$_c.getEditValues()}search(t,e){const s=this.$_c.search(e,t);return s?s.fields():void 0}makeRowVisible(t){this.$_c.makeRowVisible(t)}setFocusedRow(t){this.$_c.setFocusedRow(t)}scrollToEnd(t){this.$_c.scrollToEnd(t)}showToast(t){this.$_c.showToast(t)}expandAll(){this.$_c.expandAll()}collapseAll(){this.$_c.collapseAll()}}class Kp extends p{isRowUpdated(t){throw V}isRowDeleted(t){throw V}getValue(t,e,s=!0){throw V}findRow(t,e,s){throw V}findRows(t,e,s){throw V}findDistinctRows(t,e,s){throw V}}class Jp extends Kp{createLinkView(t,e){return new sf(t,this,e)}getValues(t,e,s=!0){throw V}getAllValues(t,e,s=!0){throw V}}class tf extends Jp{constructor(t,e,s){super(),this.$_d=t instanceof ah?t:new lh(t,e,s,this)}$_doDestory(){this.$_d=this.$_d.destroy()}get onValueUpdate(){return this.$_d.onValueUpdate}set onValueUpdate(t){this.$_d.onValueUpdate=t}get onRowsUpdate(){return this.$_d.onRowsUpdate}set onRowsUpdate(t){this.$_d.onRowsUpdate=t}get onRowsAdd(){return this.$_d.onRowsAdd}set onRowsAdd(t){this.$_d.onRowsAdd=t}get onRowsClear(){return this.$_d.onRowsClear}set onRowsClear(t){this.$_d.onRowsClear=t}get onRowsDelete(){return this.$_d.onRowsDelete}set onRowsDelete(t){this.$_d.onRowsDelete=t}get onRowMove(){return this.$_d.onRowMove}set onRowMove(t){this.$_d.onRowMove=t}get onRowsMove(){return this.$_d.onRowsMove}set onRowsMove(t){this.$_d.onRowsMove=t}get onRowStateChange(){return this.$_d.onRowStateChange}set onRowStateChange(t){this.$_d.onRowStateChange=t}get onRowStatesChange(){return this.$_d.onRowStatesChange}set onRowStatesChange(t){this.$_d.onRowStatesChange=t}get onRowCountChange(){return this.$_d.onRowCountChange}set onRowCountChange(t){this.$_d.onRowCountChange=t}get onDataChange(){return this.$_d.onDataChange}set onDataChange(t){this.$_d.onDataChange=t}get onEndUpdate(){return this.$_d.onEndUpdate}set onEndUpdate(t){this.$_d.onEndUpdate=t}get title(){return this.$_d.title()}get fieldCount(){return this.$_d.fieldCount()}get fields(){return this.$_d.fields().map((t=>t.proxy()))}get readonly(){return this.$_d.readOnly()}get softDeleting(){return this.$_d.softDeleting()}get restorable(){return this.$_d.restorable()}get validator(){return this.$_d.validator()}getField(t){return this.$_d.getField(t).proxy()}createView(t,e){return new ef(t,this,e)}setRowCount(t,e=!1){this.$_d.setRowCount(t)}isEmpty(t){return this.$_d.isEmpty(t)}getValues(t,e,s=!0){return this.$_d.getValues(t,e,s)}getAllValues(t,e,s){return this.$_d.getAllValues(t,e,s)}loadData(t){return this.$_d.loadData(t),this}beginUpdate(){this.$_d.beginUpdate()}endUpdate(){this.$_d.endUpdate()}insertRow(t,e){return this.$_d.insertRow(t,e)}appendRow(t){return this.$_d.appendRow(t)}insertRows(t,e){return this.$_d.insertRows(t,e)}appendRows(t){return this.$_d.appendRows(t)}deleteAll(t=!1){return this.$_d.deleteAll(t)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){return this.$_d.deleteRows(t,e)}deleteRange(t,e,s=!1){return this.$_d.deleteRange(t,e,s)}updateValue(t,e,s){return this.$_d.updateValue(t,e,s)}updateRow(t,e,s=!1,i=!1){return this.$_d.updateRow(t,e,s,i)}updateRows(t,e,s=!1,i=!1){return this.$_d.updateRows(t,e,s,i)}updateRange(t,e,s,i=!1,r=!1){return this.$_d.updateRange(t,e,s,i,r)}restoreRow(t){return this.$_d.restoreRow(t)}restoreRows(t){return this.$_d.restoreRows(t)}moveRow(t,e){return this.$_d.moveRow(t,e)}moveRows(t,e,s){return this.$_d.moveRows(t,e,s)}get name(){return this.$_d.name()}get source(){return this}get rowCount(){return this.$_d.rowCount()}isRowUpdated(t){return this.$_d.getRowState(t)===Gr.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Gr.DELETED}getValue(t,e,s=!0){if(e){const i=c.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}findRow(t,e=0,s=-1){return this.$_d.findRow(t,e,s)}findRows(t,e=0,s=-1){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e=0,s=-1){return this.$_d.findDistinctRows(t,e,s)}}class ef extends Jp{constructor(t,e,s){super(),this.$_d=new yh(t,e.$_d,s,this),this._source=e}$_doDestory(){this.$_d=this.$_d.destroy()}get onSortChange(){return this.$_d.onSortChange}set onSortChange(t){this.$_d.onSortChange=t}get onFilterChange(){return this.$_d.onFilterChange}set onFilterChange(t){this.$_d.onFilterChange=t}get source(){return this._source}get fields(){return this.$_d.fields().map((t=>t.proxy()))}get autoArrange(){return this.$_d.autoArrange()}set autoArrange(t){this.$_d.setAutoArrange(t)}get hideDeleted(){return this.$_d.hideDeleted()}set hideDeleted(t){this.$_d.setHideDeleted(t)}snapshot(t){return new tf(this.$_d.snapshot(t))}build(t=!1){return this.$_d.build(t),this}sort(t,e=!1){return this.$_d.sort(t,e),this}addSort(t,e,s,i=!1){return this.$_d.addSort(t,e,s,i),this}appendSort(t,e,s=!1){return this.$_d.appendSort(t,e,s),this}removeSort(t,e=!1){return this.$_d.removeSort(t,e),this}toggleSort(t,e=!1){return this.$_d.toggleSort(t,e),this}clearSort(t=!1){return this.$_d.clearSort(t),this}select(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}selectAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}slice(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}sliceAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}dedupe(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}dedupeAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}addFilter(t,e=!1){return this.$_d.addFilter(t,!1,e),this}addPostFilter(t,e=!1){return this.$_d.addFilter(t,!0,e),this}addFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!1,e),this}addPostFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!0,e),this}removeFilter(t,e=!1){return this.$_d.removeFilter(t,e),this}removeFilters(t,e=!1){return this.$_d.removeFilters(t,e),this}clearFilters(t=!1){return this.$_d.clearFilters(t),this}enableFilter(t,e,s=!0){return this.$_d.enableFilter(t,e,s),this}enableFilters(t,e,s=!0){return this.$_d.enableFilters(t,e,s),this}enableAllFilters(t,e=!0){return this.$_d.enableAllFilters(t,!0),this}get name(){return this.$_d.name()}get rowCount(){return this.$_d.rowCount()}getValue(t,e,s){if(e){const i=c.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}getValues(t,e,s=!0){return this.$_d.getValues(t,e,s)}getAllValues(t,e,s){return this.$_d.getAllValues(t,e,s)}isRowUpdated(t){return this.$_d.getRowState(t)===Gr.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Gr.DELETED}findRow(t,e=0,s=-1){return this.$_d.findRow(t,e,s)}findRows(t,e=0,s=-1){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e=0,s=-1){return this.$_d.findDistinctRows(t,e,s)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}appendRows(t){return this.source.appendRows(t)}updateRow(t,e,s=!1,i=!1){return this.$_d.updateRow(t,e,s,i)}updateValue(t,e,s){return this.$_d.updateValue(t,e,s)}}class sf extends Kp{constructor(t,e,s){function i(t){return Array.isArray(t)?t.map((t=>r(t))):[r(t)]}function r(t){return t?{data:t.data.$_d,keyFields:t.keyFields,masterFields:t.masterFields,details:t.details?i(t.details):null}:null}super(),this._data=e,this.$_d=new Il(t,e.$_d,i(s),this)}$_doDestory(){this.$_d=this.$_d.destroy()}isMaster(t){return this.$_d.isMaster(t)}isLeaf(t){return this.$_d.isLeaf(t)}get name(){return this.$_d.name()}get source(){return this._data.source}get rowCount(){return this.$_d.rowCount()}getValue(t,e,s){if(e){const i=c.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}getValues(t){return this.$_d.getRowValues(t)}getAllValues(t){return this.$_d.getAllValues(t)}isRowUpdated(t){return this.$_d.getRowState(t)===Gr.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Gr.DELETED}findRow(t,e,s){return this.$_d.findRow(t,e,s)}findRows(t,e,s){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e,s){return this.$_d.findDistinctRows(t,e,s)}getDataViews(){return this.$_d.getDataViews().map((t=>t.wrapper()))}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}}class rf{static getVersion(){return"1.0.0"}static setLocale(t,e){e&&C(t,e),(t=>{v=y[b=t],v||(v=y[b="ko"])})(t)}static registerLocale(t,e){C(t,e)}static setLogging(t){R.setLogging(t)}static setDebugging(t){x.setDebugging(t)}static setBounding(t){We.BOUNDING=t}static destroy(){ar.destroy(),lr.destroy()}static registerTemplate(t,e,s){return dr(null,lr,t,e,s)}static unregisterTemplates(t){if("string"!=typeof t)return lr.removeAll(t);lr.remove(t)}static createListData(t,e,s){return new tf(t,e,s)}static createDataView(t,e,s){return e instanceof tf||z(v.dataMustSet),new ef(t,e,s)}static createDataLink(t,e,s){return e instanceof Jp||z(v.dataMustSet),new sf(t,e,s)}static createListControl(t,e,s=fe.DEFAULT){return new Xp(t,e,s)}static loadControl(t,e,s,i=fe.DEFAULT){return new Xp(t,e,i).load(s)}}return rf.RtDataSource=Kp,rf.RtListData=tf,rf.RtDataView=ef,rf.RtListControl=Xp,rf.RtRenderMode=fe,rf.RtRowBarDisplay=cn,rf.RtRowIndent=Ao,rf.RtControlObjectPosition=ur,rf.RtScrollIndicatorMode=uh,rf.RtRowIndents=Ne,rf}));
