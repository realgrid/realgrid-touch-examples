/**
 * RealTouch v0.9.11
 * Copyright (C) 2020-2023 Wooritech Inc.
 * All Rights Reserved.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).RealTouch=e()}(this,(function(){"use strict";let t=0;class e{static destroy(t){return t&&t.destroy()}constructor(e){this.$_destroyed=!1,this.$_destroying=!1,e||(this.$_hash=String(t++))}destroy(){return this.$_destroyed||this.$_destroying||(this.$_destroyed=!0,this.$_destroying=!0,this._doDestory()),null}_doDestory(){}get destroying(){return this.$_destroying}get hash(){return this.$_hash}isMe(t){return t===this.$_hash}_doAssignProps(t){return!1}assignProps(t){if(!0===this._doAssignProps(t))return this;if(t){const s=Object.getPrototypeOf(this);for(let i in t){const r=t[i];let n=Object.getOwnPropertyDescriptor(s,i);if(n){if(n.set)n.set.call(this,r);else if(n.get){const t=n.get.call(this);t instanceof e&&t.assignProps(r)}}else{let t=Object.getPrototypeOf(s);for(;t;){let s=Object.getOwnPropertyDescriptor(t,i);if(s){if(s.set)s.set.call(this,r);else if(s.get){const t=s.get.call(this);t instanceof e&&t.assignProps(r)}break}t=Object.getPrototypeOf(t)}}}}return this}toString(){return this.constructor.name}toBool(t){return"string"==typeof t?"true"===t:t}toNum(t,e=NaN){return t=parseFloat(t),isNaN(t)?e:t}}class s extends e{wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}createWrapper(t){const e=this._wrapper=new t;return e.$_c=this,e}setWrapper(t){return this._wrapper=t,t.$_c=this,t}isWrapper(t){return t===this._wrapper}}class i extends e{_doDestory(){this.$_c=null}}class r extends e{constructor(){super(...arguments),this._listeners=[]}addListener(t){t&&this._listeners.indexOf(t)<0&&this._listeners.push(t)}removeListener(t){const e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}_fireEvent(t,...e){const s=Array.prototype.slice.call(arguments,0);s[0]=this;for(const e of this._listeners){const i=e[t];if(i){const t=i.apply(e,s);if(void 0!==t)return t}}}}const n=(new Date).getTime();Element.prototype.animate||(Element.prototype.animate=function(t){});const o=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,a=!!window.chrome&&!o,h=Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!a&&!o&&navigator.userAgent.indexOf("Safari")>=0,l=/\r\n|\n/g,d=/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)(?=(?:[^\']*\'[^\']*\')*[^\']*$)/,_=/\t/g,c=/\t+/g,u=/"([^"]*(?="))"/,g=/'([^']*(?='))'/,p='"'.charCodeAt(0),f="'".charCodeAt(0);class w{static now(){return+new Date}static stopEvent(t,e=!1){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()}static getErrorStack(t){const e=t.stack;return e?e.split("\n").map(t=>t+"<br/>"):""}static getBaseClassName(t){return Object.getPrototypeOf(t.constructor).name}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static assign(t,e){this.isObject(e)&&Object.assign(t,e)}static isValidObject(t){if(this.isObject(t))for(let e in t)if(t.hasOwnProperty(e))return!0}static copyObject(t){if(t&&"object"==typeof t&&!Array.isArray(t))return Object.assign({},t)}static checkArray(t){return Array.isArray(t)?t:void 0}static makeArray(t,e=!1){return null!=t?Array.isArray(t)?t:[t]:e?[]:void 0}static makeNumArray(t){return Array.isArray(t)?t.map(t=>+t):null!=t?[+t]:[]}static getIntArray(t,e=0){const s=[];for(let i=e,r=e+t;i<r;i++)s.push(i);return s}static isValueArray(t){if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)if(null!=t[e]&&"object"==typeof t[e])return!1;return!0}return!1}static toArray(t){return Array.isArray(t)?t:null!=t?[t]:null}static copyArray(t){return Array.isArray(t)?t.slice(0):null!=t?[t]:void 0}static push(t,e){if(e&&e.length>0)for(let s=0,i=e.length;s<i;s++)t.push(e[s])}static isDefined(t){return null!=t}static isNotDefined(t){return null==t}static isNumber(t){return"number"==typeof t}static isValidNumber(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}static toNumber(t,e=0){return isNaN(t)||null===t||""===t?e:+t}static getEnumValues(t){return Object.keys(t).map(e=>t[e])}static compareText(t,e,s=!1){return t=t||"",e=e||"",s&&(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()),t>e?1:t<e?-1:0}static getTimeF(){return(new Date).getTime()/1e3}static getTimer(){return(new Date).getTime()-n}static isWhiteSpace(t){return!t||!t.trim()}static pad(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-String(t).length+1).join(s)+t}static pad16(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-t.toString(16).length+1).join(s)+t.toString(16)}static pick(...t){const e=t.length;let s;for(let i=0;i<e;i++)if(s=t[i],null!=s)return s}static pickNum(...t){const e=t.length;for(let s=0;s<e;s++)if(!isNaN(t[s])&&null!==t[s])return t[s];return NaN}static included(t,...e){const s=e.length;for(let i=0;i<s;i++)if(e[i]==t)return!0;return!1}static compareTextValue(t,e,s,i){if(t===e)return!0;let r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(s||(r=r.toLowerCase(),n=n.toLowerCase()),i?n.indexOf(r)>=0:r==n)}static cast(t,e){return t instanceof e?t:null}static irandom(t,e){if(void 0!==e){const s=t>>0,i=e>>0;return Math.random()*(i-s)+s>>>0}{const e=t>>0;return Math.random()*e>>0}}static irandomExcept(t,e,s){if(0===t&&1===e&&isNaN(s))throw new Error("Invalid irandom2");for(;;){const i=this.irandom(e,s);if(i!==t)return i}}static brandom(){return Math.random()>.5}static srandom(t,e){let s="";const i=this.irandom(t,e);for(let t=0;t<i;t++)s+=String.fromCharCode(this.irandom(97,123));return s}static erandom(t){const e=Object.values(t);return e[this.irandom(e.length)]}static arandom(t){return t[Math.random()*t.length>>0]}static iarandom(t,e,s){const i=new Array;for(let s=t;s<e;s++)i.push(s);for(;i.length>s;)i.splice(w.irandom(i.length),1);return i}static alert(t){window.alert(t)}static toInt(t,e){const s=parseInt(t,e||10);return isNaN(s)?0:s}static toFloat(t){const e=parseFloat(t);return isNaN(e)?0:e}static toEven(t){return 1&t?t+1:t}static hex(t,e=2,s="0"){e=Math.max(e||2,1);const i=t.toString(16);return s=s||"0",new Array(e-i.length+1).join(s)+i}static toStr(t){return Number.isNaN(t)||null==t?"":String(t)}static extend(t,e){t=t||{};for(let s in e)t[s]=e[s];return t}static equalNumbers(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e}static equalArrays(t,e){if(t===e)return!0;if(null==t||null==e)return!1;const s=t.length;if(s!=e.length)return!1;for(let i=0;i<s;++i)if(t[i]!==e[i])return!1;return!0}static equalObjects(t,e){if(t===e)return!0;if(!t&&!e)return!0;if(!t||!e)return!1;for(var s in t)if(t.hasOwnProperty(s)&&t[s]!==e[s])return!1;for(var s in e)if(e.hasOwnProperty(s)&&t[s]!==e[s])return!1;return!0}static parseDate(t,e){const s=new Date(t);return isNaN(s.getTime())?e||new Date:s}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static incMonth(t,e){const s=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(s,w.month_days[w.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t}static minDate(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e}static maxDate(t,e){return null!==t?e:null!==e||t.getTime()>e.getTime()?t:e}static getTextLength2(t){let e=0,s=0,i=0;for(;i=t.charCodeAt(s++);e+=i>>7?2:1);return e}static getClassName(t){if(t&&t.constructor)return t.constructor.name||function(t){let e=t.toString();return e=e.substring("function ".length),e=e.substring(0,e.indexOf("(")),e}(t.constructor)}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isEmpty(t){if(t)for(let e in t)return!1;return!0}static isNotEmpty(t){if(t)for(let e in t)return!0;return!1}static capitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)}static uncapitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="a"&&e<="z"?t:e.toLowerCase()+t.slice(1)}static labelize(t){if("string"!=typeof t)return"";const e=t.charAt(0);let s=(t=e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)).charAt(0);for(let e=1;e<t.length;e++){const i=t.charAt(e);i>="A"&&i<="Z"&&(s+=" "),s+=i}return s}static deepClone(t){if(null===t||"object"!=typeof t)return t;const e=Array.isArray(t)?[]:{};for(let s of Object.keys(t))e[s]=w.deepClone(t[s]);return e}static getArray(t,e){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static getNumArray(t,e=0){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static hasSetter(t,e){for(;t;){const s=Reflect.getOwnPropertyDescriptor(t,e);if(s)return s.writable||!!s.set;t=Object.getPrototypeOf(t)}return!1}static dataUriToBinary(t){const e=t.indexOf(";base64,")+";base64,".length,s=t.substring(e),i=window.atob(s),r=i.length,n=new Uint8Array(new ArrayBuffer(r));for(let t=0;t<r;t++)n[t]=i.charCodeAt(t);return n}static assignProps(t,e){let s=!1;if(e)for(let i in e)e[i]!==t[i]&&(t[i]=e[i],s=!0);return s}static assignStyleAndProps(t,e){let s=!1;if(e)for(let i in e)("style"===i||t.hasOwnProperty(i))&&(t[i]=e[i],s=!0);return s}static dedupe(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)t[s]===t[s-1]&&t.splice(s,1);return t}static isUnique(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)if(t[s]===t[s-1])return!1;return!0}static sortNum(t){return t.sort((t,e)=>t-e)}static logElapsed(t,e){const s=+new Date;e(),console.log(t,+new Date-s+"ms")}static clamp(t,e,s){return isNaN(s)||(t=Math.min(t,s)),isNaN(e)||(t=Math.max(t,e)),t}static splice(t,e,s,i){const r=[e,s].concat(i);Array.prototype.splice.apply(t,r)}static makeIntArray(t,e){const s=new Array(Math.max(0,e-t));for(let i=t;i<e;i++)s[i-t]=i;return s}static setInterval(t,e){return setInterval(t,e)}static clearInterval(t){clearInterval(t)}static isStringArray(t){return Array.isArray(t)&&t.every(t=>"string"==typeof t)}static isNumberArray(t){return Array.isArray(t)&&t.every(t=>"number"==typeof t)}static makeLineSeparator(t){if(Array.isArray(t)){if(t.length>0){let e=t[0];for(let s=1,i=t.length;s<i;s++)e+="|"+t[s];return new RegExp(e,"g")}}else if(t)return new RegExp(t,"g")}static stripQuotes(t){const e=t.charCodeAt(0);return e===p?t=t.replace(u,"$1"):e===f&&(t=t.replace(g,"$1")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isValidDate(t){return t.getTime()==t.getTime()}static asFunction(t){return"function"==typeof t?t:void 0}static getFieldProp(t){const e=t.indexOf(".");if(e>=0)return{field:t.substring(0,e),props:t.substring(e+1).split(".")}}static watch(){return new m}}w.week_days=["일","월","화","수","목","금","토"],w.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];class m{constructor(){this._started=+new Date}elapsed(t=!1){const e=+new Date-this._started;return t&&(this._started=+new Date),e}elapsedText(t=!1,e="ms."){return this.elapsed(t)+e}}const y={ko:{dateFormat:"yyyy.MM.dd",am:"오전",pm:"오후",notExistsDataField:"존재하지 않는 필드입니다: %1",notSpecifiedDataField:"하나 이상의 데이터필드가 설정돼야 합니다.",invalidFieldName:"잘못된 데이터필드 이름입니다: %1",invalidFieldIndex:"잘못된 데이터필드 index입니다: %1",invalidRowIndex:"잘못된 데이터행 index입니다: %1",canNotModifyData:"읽기 전용 데이터를 변경할 수 없습니다.",canNotModifyDeleted:"삭제 상태 행을 변경할 수 없습니다: %1",requiredField:"반드시 값을 지정해야 하는 필드입니다: %1",invalidValueInDomain:"값이 필드 값 도메인에 포함되지 않습니다: %1",invalidValueInRange:"값이 필드 값 범위에 포함되지 않습니다: %1",invalidToIndex:"잘못된 'to' index입니다.: %1",requireSourceData:"원본 data가 반드시 지정돼야 합니다.",requireFilterName:"필터 이름이 반드시 지정돼야 합니다.",invalidDateFormat:"잘못된 시간 날짜 형식입니다: %1",invalidSizeValue:"잘못된 Size 값입니다: %1",invalidOuterDiv:"잘못된 외부 div 입니다: %1",canNotHorzGrouping:"수평 모드일 때 그룹핑할 수 없습니다.",dataMustSet:"데이터가 먼저 설정돼야 합니다.",requireGroupingInfos:"하나 이상의 행 그룹핑 정보가 설정돼야 합니다.",canNotRowGrouping:"데이터링크 view에 대해 행그룹핑 할 수 없습니다. dataGroupBy()를 사용하세요.",canNotDataGrouping:"데이터링크 view가 아니면 데이터그룹핑할 수 없습니다. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"그룹핑 상태일 때 수평모드로 변경할 수 없습니다.",unknownLayoutType:"잘못된 layout 종류입니다: %1",layoutMustSet:"레이아웃 모델이 반드시 설정돼야 합니다.",unknownItemViewType:"잘못된 item view 종류입니다: %1",requireCommandName:"Command 이름이 지정돼야 합니다.",commandNameDuplicated:"이미 존재하는 command 이름입니다: %1",requireDataOrGroup:"데이터소스나 그룹 모델이 반드시 지정돼야 합니다.",requireTableName:"테이블모델의 이름이 지정돼야 합니다.",alreadyTableExists:"이미 존해하는 테이블모델입니다: %1"},en:{dateFormat:"M/d/yyyy",am:"AM",pm:"PM",notExistsDataField:"A data field is not exists: %1",notSpecifiedDataField:"At least one datafield must be set.",invalidFieldName:"Invalid field name: %1",invalidFieldIndex:"Invalid field index: %1",invalidRowIndex:"Invalid row index: %1",canNotModifyData:"Can not modify a readonly data.",canNotModifyDeleted:"Can not modify a deleted row: %1",requiredField:"Required field: %1",invalidValueInDomain:"The value is not int the domain: %1",invalidValueInRange:"The value is not int the range: %1",invalidToIndex:"Invalid 'to' index: %1",requireSourceData:"A source data must be set.",requireFilterName:"A filter name must be set.",invalidDateFormat:"Invalid datetime format: %1",invalidSizeValue:"Invalid size value: %1",invalidOuterDiv:"Invalid outer div element: %1",canNotHorzGrouping:"Can not row grouping in horz mode.",dataMustSet:"A data must be set first.",requireGroupingInfos:"At least one grouping info must be set.",canNotRowGrouping:"Can not row grouping by data link view. use dataGroupBy().",canNotDataGrouping:"Can not data grouping without data link view. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"Can not change to horz mode while grouping",unknownLayoutType:"Invalid layout: %1",layoutMustSet:"A layout model must be set.",unknownItemViewType:"Unknow item view type: %1",requireCommandName:"Command name must be supplied.",commandNameDuplicated:"Command name is already exists: %1",requireDataOrGroup:"A data or group view must be set.",requireTableName:"The name of table model is required.",alreadyTableExists:"A table model is already exists: %1"}};let v="ko",b=y[v];const S=(t,e)=>{if(t&&w.isObject(e)&&(b=y[t]=e,"en"!==t)){const t=y.en;for(const e in t)b[e]=b[e]||t[e]}},C=(t,e)=>t.replace("%1",e);class x{static setLogging(t=!0){this._logging=t}static log(...t){this._logging&&console.log.apply(console,t)}}x._logging=!1;const R=new Error("Not Implemented."),E="*".charCodeAt(0),V="%".charCodeAt(0);function $(t,e){let s,i;if(null==t||Number.isNaN(t)){if(e)return null;i=0,s=!0}else if(!(s=!isNaN(i=+t))){const s=t.trim();if(s.charCodeAt(s.length-1)===V&&(i=1===s.length?NaN:parseFloat(s)),isNaN(i)){if(e)return null;N(b.invalidSizeValue,t)}}return{size:i,fixed:s}}function A(t){return t&&!t.fixed?t.size:NaN}function D(t,e){return t?t.fixed?t.size:t.size*e/100:NaN}function k(t){if(t){if(t.rated)return{size:t.size,rated:!0};if(!t.fixed)return{size:t.size,rated:!1}}return null}class L extends Error{}const T=function(t,e){if(!t)throw new L(e)};class M extends e{constructor(){super(...arguments),this._items={}}_doDestory(){this.clear()}get(t){return this._items[t]}clear(){for(let t in this._items)this._items[t].destroy();this._items={}}add(t,e){t&&e&&(this._items[t]=e)}remove(t){delete this._items[t]}removeAll(t){if(Array.isArray(t)){const e=this._items;t.forEach(t=>{const s=e[t];s&&(s.destroy(),delete e[t])})}}}var P;!function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right"}(P||(P={}));const I=t=>{throw new Error(t)},N=(t,e)=>{throw new Error(C(t,e))},O=/[;\:]/;class B{static getFormatter(t){let e=B.Formatters[t];return e||(B.Formatters[t]=e=new B(t)),e}constructor(t){this.$_parse(this._format=t)}get format(){return this._format}toStr(t){return!0===t?this._trueText:this._falseText}$_parse(t){if(this._falseText=this._trueText=null,t){const e=t.split(O);this._falseText=e[0],e.length>0&&(this._trueText=e[1])}}}B.Formatters={};const F=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],z=[".","/","-",":"],H="Z".charCodeAt(0),W="z".charCodeAt(0),G="A".charCodeAt(0),U="a".charCodeAt(0),q="y".charCodeAt(0),j="M".charCodeAt(0),Y="m".charCodeAt(0),Q="d".charCodeAt(0),Z="H".charCodeAt(0),X="h".charCodeAt(0),K="S".charCodeAt(0),J="s".charCodeAt(0),tt=function(t){return t<10?"0"+t:String(t)},et=function(t){return t<10?"00"+t:t<100?"0":String(t)};class st{static getFormatter(t){let e=st.Formatters[t];return e||(st.Formatters[t]=e=new st(t)),e}static get Default(){return st.getFormatter(b.dateFormat)}constructor(t){this._baseYear=2e3,this._preserveTime=!1,this._hasAmPm=!1,this._formatString="",this.formatString=t}get format(){return this._format}get formatString(){return this._formatString}set formatString(t){(t=t||b.dateFormat)!=this._formatString&&(this._tokens=[],this.parse(t),this._formatString=t)}toStr(t){if(!this._tokens)return"";const e=this._tokens;let s="";for(var i=0,r=e.length;i<r;i++){var n=e[i],o=n.length;switch(n.charCodeAt(0)){case q:s+=o>2?t.getFullYear():tt(t.getFullYear()%100);break;case j:s+=o>1?tt(t.getMonth()+1):t.getMonth()+1;break;case Q:s+=o>1?tt(t.getDate()):t.getDate();break;case Z:s+=o>1?tt(t.getHours()):t.getHours();break;case X:if(this._hasAmPm){let e=t.getHours();0==e?e=12:e>12&&(e-=12),s+=o>1?tt(e):e}else s+=o>1?tt(t.getHours()):t.getHours();break;case Y:s+=o>1?tt(t.getMinutes()):t.getMinutes();break;case J:s+=o>1?tt(t.getSeconds()):t.getSeconds();break;case U:case G:t.getHours()<12?s+=b.am:s+=b.pm;break;case K:let e=t.getMilliseconds();s+=3==o?et(e):2==o?tt(e):e.toString().substr(0,o);break;default:s+=n}}return s}parseDateFormatTokens(t){var e=[];if(t){const s=t.trim(),i=s.length;let r=0;for(;r<i;){let n=s.charAt(r);if(z.indexOf(n)>=0)e.push(n),r++;else{let o=r++;for(;r<i&&s.charAt(r)==n;)r++;if(n=s.substring(o,r),F.indexOf(n)<0){let e=n.charCodeAt(0);(e>=G&&e<=H||e>=U&&e<=W)&&N(b.invalidDateFormat,t)}e.push(n)}if(r<i&&w.isWhiteSpace(n=s.charAt(r)))for(e.push(n);r<i&&w.isWhiteSpace(s.charAt(r));)r++}}return e}parse(t){t&&(this._format=t||b.dateFormat,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0)}}st.Formatters={};const it="0".charCodeAt(0),rt="#".charCodeAt(0),nt=",".charCodeAt(0),ot="s".charCodeAt(0),at="a".charCodeAt(0);class ht{static getFormatter(t){let e=ht.Formatters[t];return e||(ht.Formatters[t]=e=new ht(t)),e}static get Default(){return ht.getFormatter(ht.DEFAULT_FORMAT)}constructor(t){t=t.trim(),this._options=t?this.$_parse(this._format=t):{useGrouping:!1}}get format(){return this._format}toStr(t){return t.toLocaleString(void 0,this._options)}$_parse(t){const e=t.length;if(e>0){const s={useGrouping:!1,minimumIntegerDigits:0,minimumFractionDigits:0,maximumFractionDigits:0};let i=t.indexOf(".");if(i>=0){let r=i+1;for(;r<e&&t.charCodeAt(r)===it;)s.minimumFractionDigits++,r++;for(s.maximumFractionDigits=s.minimumFractionDigits;r<e&&t.charCodeAt(r)===rt;)s.maximumFractionDigits++,r++;i-=1}else i=e-1;let r=i;for(;r>=0&&t.charCodeAt(r)===it;)s.minimumIntegerDigits++,r--;for(;r>=0;){if(t.charCodeAt(r--)===nt){s.useGrouping=!0;break}}for(r=i;r>=0;){if(t.charCodeAt(r--)===ot){s.signDisplay="always";break}}if(!s.signDisplay)for(r=i;r>=0;){if(t.charCodeAt(r--)===at){s.signDisplay="never";break}}return s.minimumIntegerDigits=Math.max(1,s.minimumIntegerDigits),s}}}ht.DEFAULT_FORMAT="",ht.Formatters={};const lt=/(.*)/,dt=new RegExp(';(?=(?:[^"]*"[^"]*")*(?![^"]*"))');class _t{static getFormatter(t){let e=_t.Formatters[t];return e||(_t.Formatters[t]=e=new _t(t)),e}constructor(t){this._pattern=lt,this._replace="$1",this.$_parse(this._format=t)}get format(){return this._format}toStr(t){return t&&t.replace(this._pattern,this._replace)}$_parse(t){if(t){const e=t.trim().split(dt);if(e.length>1){let t=e[0].trim(),s=e[1].trim();t&&s&&('"'==t.charAt(0)&&(t=t.substr(1,t.length-2)),t&&('"'==s.charAt(0)&&(s=t.substr(1,s.length-2)),s&&(this._pattern=new RegExp(t,e[2]||""),this._replace=s)))}}}}_t.Formatters={};const ct="_span",ut="_img",gt="_box",pt="_group",ft="_bar",wt="_svg",mt=/(\$|%)\{[^(\$|%)\{\}\;\|]+[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*\}/g,yt="@".charCodeAt(0);class vt{static create(t,e,s){return new vt(void 0,t,e,s)}constructor(t,e,s,i){this.source=t,this.stock=e.charCodeAt(0)===yt,this.name=this.stock?e.substring(1):e,this.default=s,this.format=i}}class bt{static parse(t){if("string"==typeof t){const e=t.match(mt);if(e)return new bt(t,e)}return t}static load(t){const e={};for(const s in t){const i=t[s];e[s]="string"==typeof i?bt.parse(i):i}return e}constructor(t,e){function s(t,e){let s=t.indexOf("|",e),i=t.indexOf(";",e);return s>=0&&i>=0?Math.min(s,i):s>=0?s:i}this._params=[],this._args={context:void 0,field:void 0};const i=this._params;let r=0;for(let n of e){const e=t.indexOf(n,r),o=n.substring(2,n.length-1),a=s(o);let h;if(e>r&&(i.push(t.substring(r,e)),r=e),a>=0){const t=o.substring(0,a),e=s(o,a+1);let i,r;e>=0?(i=o.substring(a+1,e),r=o.substring(e+1)):i=o.substring(a+1),h=new vt(n,t,i,r)}else h=new vt(n,o,void 0,void 0);i.push(h),r+=n.length}r<t.length&&i.push(t.substring(r))}get count(){return this._params.length}get(t){return this._params[t]}inflate(t,e,s,i){const r=this._args,n=this._params;let o="";r.context=t,r.field=s;for(let t=0,a=n.length;t<a;t++){const h=n[t];if(h instanceof vt){let t;if(i.inflateParam)if(h.stock){if(t=i.inflateStock(e,s,h),h.format){const e=typeof t;if(("number"===e||"bigint"===e)&&!Number.isNaN(t)){const e=ht.getFormatter(h.format);e&&(t=e.toStr(t))}}}else t=i.inflateParam(e,s,h);else t=i[h.name];if("function"==typeof t&&(t=t(r)),1===a)return null!=t?t:h.default;o+=null!=t?t:h.default||""}else o+=h}return o}}var St,Ct,xt,Rt,Et,Vt,$t,At,Dt;!function(t){t.NORMAL="normal",t.TABLE="table"}(St||(St={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Ct||(Ct={})),function(t){t.PORTRAIT="portrait",t.LANDSCAPE="landscape"}(xt||(xt={})),function(t){t.START="start",t.CENTER="center",t.END="end"}(Rt||(Rt={})),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(Et||(Et={})),function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(Vt||(Vt={})),function(t){t.DEFAULT="default",t.ROW="row",t.PIXEL="pixel"}($t||($t={})),function(t){t.START="start",t.END="end",t.CENTER="center",t.SPACE_BETWEEN="spaceBetween",t.SPACE_AROUND="spaceAround"}(At||(At={}));class kt extends e{constructor(t){super(),this._icons={},w.isObject(t)&&(this._width=+t.width,this._height=+t.height,this._root=t.root,Object.assign(this._icons,t.icons))}get width(){return this._width}get height(){return this._height}getUrl(t){let e=this._icons[t];if(e)return this._root&&(e=this._root+e),e}get(t){return this._icons[t]}set(t,e){this._icons[t]=e}}!function(t){t.ASCENDING="ascending",t.DESCENDING="descending"}(Dt||(Dt={}));const Lt=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},Tt=function(t,e){return void 0===t?e:t},Mt=function(t,e,s){return void 0===t?void 0===e?s:e:t},Pt=function(t,e){return t=parseFloat(t),isNaN(t)?e:t},It=function(t,e){return t=parseFloat(t),isNaN(t)?parseFloat(e):t},Nt=function(t,e,s){return isNaN(t)?isNaN(e)?s:e:t},Ot=function(t){return t+"px"},Bt="가나다라마바사아자차카타파하힣";class Ft{}var zt,Ht;!function(t){t.DEFAULT="default",t.CARD="card"}(zt||(zt={})),function(t){t.DEFAULT="default",t.PRE="pre",t.FULL="full"}(Ht||(Ht={}));const Wt={},Gt={},Ut={},qt=function(t){let e=Wt[t];if(e)return e;if(t){const s=_t.getFormatter(t);return Wt[t]=e=t=>s.toStr(t),e}return null},jt=function(t){let e=Gt[t];if(e)return e;if(t){const s=B.getFormatter(t);return Gt[t]=e=t=>s.toStr(t),e}return null},Yt=function(t){let e=Ut[t];if(e)return e;if(t){const s=ht.getFormatter(t);return Ut[t]=e=t=>s.toStr(t),e}return null},Qt=function(t){let e=Ut[t];if(e)return e;if(t){const s=st.getFormatter(t);return e=t=>s.toStr(t),e}return null};var Zt,Xt,Kt,Jt,te,ee,se,ie,re,ne,oe;!function(t){t.NONE="none",t.CHECK="check",t.COMMAND="command",t.EXPAND="expand",t.DETAIL="detail",t.DETAILEX="detailex",t.INFO="info",t.EDIT="edit",t.LINK="link",t.MOVE="move",t.SELECT="select"}(Zt||(Zt={})),function(t){t.NONE="none",t.BALLOON="balloon",t.BOUNCE="bounce"}(Xt||(Xt={})),function(t){t.NONE="none",t.COMMAND="command",t.PAGE="page",t.TAP="tap",t.INFO="info",t.EDIT="edit",t.ROW_BAR="rowBar",t.EDIT_BAR="editBar"}(Kt||(Kt={})),function(t){t.DEFAULT="default",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.BOTH="both"}(Jt||(Jt={})),function(t){t.FORM="form",t.BUTTON="button",t.SEARCH="search"}(te||(te={})),function(t){t.NONE="none",t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(ee||(ee={})),function(t){t.AFTER="after",t.BEFORE="before"}(se||(se={}));class ae extends s{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,!e&&this._doInitDefaults()}owner(){return this._owner}_changed(){this._owner&&this._owner.optionItemChanged(this)}}!function(t){t.DEFAULT="default",t.RANDOM="random",t.LEFT="left",t.RIGHT="right",t.UP="up",t.DOWN="down"}(ie||(ie={})),function(t){t.GRID="grid",t.LIST="list",t.MENU="menu"}(re||(re={})),function(t){t.ROW="row",t.BODY="body"}(ne||(ne={})),function(t){t.NONE="none",t.PARENT="parent",t.INNER="inner"}(oe||(oe={}));let he=651212;const le={t:"borderTop",b:"borderBottom",l:"borderLeft",r:"borderRight"};class de{static getWin(t){return t.defaultView||t.parentWindow}static isVisible(t){return t&&"none"!==t.style.display}static setVisible(t,e,s=""){return t.style.display=e?s||"":"none",e}static hide(t){t.style.display="none"}static show(t,e=""){t.style.display=e}static addClass(t,e){e&&t.classList.add(e)}static getImageUrl(t){const e=t.backgroundImage;if(e&&e.startsWith('url("'))return e.substring(5,e.length-2)}static getFocused(){let t=document.getSelection().focusNode;for(;t;){if(t instanceof HTMLElement)return t;t=t.parentElement}}static isAncestorOf(t,e){let s=e;for(;s;){if(s==t)return!0;s=s.parentElement}return!1}static getOffset(t){const e=t.ownerDocument,s=e.defaultView,i=t.getBoundingClientRect(),r=e.body,n=e.documentElement,o=s.pageYOffset||n.scrollTop||r.scrollTop,a=s.pageXOffset||n.scrollLeft||r.scrollLeft,h=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,d=i.left+a-l,_=i.top+o-h;return{x:Math.round(d),y:Math.round(_)}}static getSize(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}static moveX(t,e){t.style.left=e+"px"}static moveY(t,e){t.style.top=e+"px"}static move(t,e,s){t.style.left=e+"px",t.style.top=s+"px"}static moveI(t,e,s){t.style.left=(e>>>0)+"px",t.style.top=(s>>>0)+"px"}static resize(t,e,s){t.style.width=e+"px",t.style.height=s+"px"}static resizeSVG(t,e,s){t.setAttribute("viewBox",`0 0 ${e} ${s}`)}static setWidth(t,e){t.style.width=e+"px"}static setHeight(t,e){t.style.height=e+"px"}static getBrowserSize(t){const e=t?t.ownerDocument:document,s=e.defaultView;return{width:s.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:s.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}}static setRect(t,e){const s=t.style;s.left=e.x+"px",s.top=e.y+"px",s.width=e.width+"px",s.height=e.height+"px"}static setBounds(t,e,s,i,r){const n=t.style;n.left=e+"px",n.top=s+"px",n.width=i+"px",n.height=r+"px"}static setBoundsEx(t,e,s,i,r){const n=t.style;!isNaN(e)&&(n.left=e+"px"),!isNaN(s)&&(n.top=s+"px"),!isNaN(e)&&(n.width=i+"px"),!isNaN(e)&&(n.height=r+"px")}static getClientRect(t){const e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e}static getChildIndex(t){if(t){const e=t.parentNode;if(e){const s=e.children;for(let e=s.length;e--;)if(s[e]===t)return e}}return-1}static clearChildren(t){let e;for(;e=t.lastChild;)t.removeChild(e)}static clearElements(t){let e;for(;e=t.lastChild;)de.clearElements(e),t.removeChild(e)}static append(t,e){e.parentNode!==t&&t.appendChild(e)}static addChild(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)}static removeChild(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)}static removeChildren(t,e){e.forEach(e=>{e instanceof Element?e.parentNode===t&&t.removeChild(e):e&&e.dom().parentNode==t&&t.removeChild(e.dom())})}static remove(t){const e=t&&t.parentElement;return e&&e.removeChild(t),null}static clearStyle(t){t.style.cssText=""}static setStyle(t,e){e&&Object.assign(t.style,e)}static resetClassList(t,e){const s=t.classList;for(;s.length>0;)s.remove(s.item(0));e&&s.add(e)}static createElement(t,e,s){const i=t.createElement(e);return s&&Object.assign(i.style,s),i}static htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}static setData(t,e,s){null==s||""===s?delete t.dataset[e]:t.dataset[e]=s}static getData(t,e){return t.dataset[e]}static hasData(t,e){return void 0!==t.dataset[e]}static animate(t,e,s,i,r=150,n="none"){const o={},a={};return o[e]=s,a[e]=i,t.animate([o,a],{duration:r,fill:n})}static setAttr(t,e,s){null!=s&&""!==s?t.setAttribute(e,s):t.removeAttribute(e)}static setAttrs(t,e){for(const s in e)t.setAttribute(s,e[s])}static getDomId(){return"-rtc-"+he++}static createBR(t,e){const s=t.createElement("br");return s.className=e,s}static createSpan(t,e){const s=t.createElement("span");return e&&Object.assign(s.style,e),s}static createCheckBox(t,e){const s=t.createElement("input");return s.type="checkbox",e&&Object.assign(s.style,e),s}static createRadio(t,e){const s=t.createElement("input");return s.type="radio",e&&Object.assign(s.style,e),s}static getPadding(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}}static getPadding2(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0,borderLeft:parseFloat(e.borderLeftWidth)||0,borderRight:parseFloat(e.borderRightWidth)||0,borderTop:parseFloat(e.borderTopWidth)||0,borderBottom:parseFloat(e.borderBottomWidth)||0}}static stopAnimation(t){if(t)try{t.finish()}catch(t){console.error(t)}return null}static childByPath(t,e){let s=t;if(e){let t=0;for(;t<e.length;)s=s.childNodes[e[t++]]}return s}static childByClass(t,e){return t.getElementsByClassName(e)[0]}static setDisabled(t,e){this.setAttr(t,"disabled",!!e||void 0)}static setImportantStyle(t,e,s){t.setProperty(e,s,"important")}}class _e extends s{constructor(t,e,s){super(),this._syncOrientation=!0,this._syncScreenOrientation=!1,this.longPressDelay=1e3,this._inited=!1,this._testing=!1,this._dirty=!0,this._invalidElements=[],this._toAnimation=0,this._invalidateLock=!1,this._lockDirty=!1,this._cssVars={},this._screenOrientationChangeHandler=t=>{this._screenOrientation=this.$_getScreenOrientation(),this.$_checkOrientation()},this._windowResizeHandler=t=>{this.$_checkOrientation(),this._windowResized(),this.doc().getElementById(_e.currentInput),_e.currentInput=null},this._clickHandler=t=>{this._doClick(t),this._tool.click(t)},this._touchStartHandler=t=>{(this._doTouchStart(t)||this._tool.touchStart(t))&&t.preventDefault()},this.m=0,this._touchMoveHandler=t=>{this._doTouchMove(t),this._tool.touchMove(t)},this._touchEndHandler=t=>{this._doTouchEnd(t),this._tool.touchEnd(t)},this._touchCancelHandler=t=>{this._doTouchCancel(t),this._tool.touchCancel(t)},this._touchLeaveHandler=t=>{this._doTouchLeave(t),this._tool.touchLeave(t)},this._keyPressHandler=t=>{this._doKeyPress(t),this._tool.keyPress(t)},this._wheelHandler=t=>{this._doWheel(t),this._tool.wheel(t)},!t&&e instanceof HTMLDivElement&&(t=e.ownerDocument),this.$_initControl(t||document,e,s),this._resigterEventHandlers(this._dom),this._inited=!0,this.invalidate(!0)}_doDestory(){this._unresigterEventHandlers(this._dom),de.remove(this._dom),this._dom=null,this._container=null}isInited(){return this._inited}isTesting(){return this._testing}doc(){return this._dom.ownerDocument}dom(){return this._dom}width(){return this._container.offsetWidth}height(){return this._container.offsetHeight}activeTool(){return this._activeTool||this._tool}setSctiveTool(t){t!==this._activeTool&&(this._activeTool=t,this._tool=t||this._defaultTool)}orientation(){return this._orientation}setOrientation(t){t!==this._orientation&&(this._orientation=t,this.$_orientationChanged(t))}isPortrait(){return this._orientation!==xt.LANDSCAPE}isLandscape(){return this._orientation===xt.LANDSCAPE}syncOrientation(){return this._syncOrientation}setSyncOrientation(t){this._syncOrientation=t}screenOrientation(){return this._screenOrientation}syncScreenOrientation(){return this._syncScreenOrientation}setScreenSyncOrientation(t){this._syncScreenOrientation=t}addElement(t){t&&this._root.addChild(t)}removeElement(t){this._root.removeChild(t)}invalidate(t=!1){t||!this._invalidateLock&&!this._dirty&&this._inited?(this._dirty=!0,this._requestTimer||this._testing||this.$_requestRender()):this._invalidateLock&&(this._lockDirty=!0)}invalidateLayout(t=!1){this.invalidate(t)}setLock(){this._invalidateLock=!0}releaseLock(t=!0){this._invalidateLock&&(this._invalidateLock=!1),this._lockDirty&&t&&this.invalidate(),this._lockDirty=!1}lock(t){this.setLock();try{t(this)}finally{this.releaseLock()}}elementOfDom(t){return this._root.childOfDom(t)}getBounds(){return this._dom.getBoundingClientRect()}toElement(t,e,s){const i=this.getBounds(),r=t.getClientRect();return{x:e-=r.left-i.left,y:s-=r.top-i.top}}setAnimation(t){this._toAnimation=t||0}fling(t,e){}getCssVar(t){let e=this._cssVars[t];return t in this._cssVars?this._cssVars[t]:(e=getComputedStyle(this._root.dom).getPropertyValue(t),this._cssVars[t]=e,e)}_setTesting(){this._testing=!0,ce.TESTING=!0}_setSize(t,e){isNaN(t)||(this._container.style.width=t+"px"),isNaN(e)||(this._container.style.height=e+"px")}$_getScreenOrientation(){return window.screen.orientation?window.screen.orientation.type.startsWith("landscape")?xt.LANDSCAPE:xt.PORTRAIT:"orientation"in window?90===Math.abs(+window.orientation)?xt.LANDSCAPE:xt.PORTRAIT:window.innerWidth>window.innerHeight?xt.LANDSCAPE:xt.PORTRAIT}$_getOrientation(){return this._dom.clientWidth>this._dom.clientHeight?xt.LANDSCAPE:xt.PORTRAIT}$_checkOrientation(){this._syncOrientation&&(this._syncScreenOrientation?this.setOrientation(this._screenOrientation):this.setOrientation(this.$_getOrientation()))}$_addListener(t,e,s){t.addEventListener(e,s)}_resigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",this._screenOrientationChangeHandler),window.addEventListener("resize",this._windowResizeHandler),this.$_addListener(t,"click",this._clickHandler),this.$_addListener(t,"touchstart",this._touchStartHandler),this.$_addListener(t,"touchmove",this._touchMoveHandler),this.$_addListener(t,"touchend",this._touchEndHandler),this.$_addListener(t,"touchcancel",this._touchCancelHandler),this.$_addListener(t,"touchleave",this._touchLeaveHandler),this.$_addListener(t,"keypress",this._keyPressHandler),this.$_addListener(t,"wheel",this._wheelHandler)}_unresigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",this._screenOrientationChangeHandler),window.removeEventListener("resize",this._windowResizeHandler),t.removeEventListener("click",this._clickHandler),t.removeEventListener("touchstart",this._touchStartHandler),t.removeEventListener("touchmove",this._touchMoveHandler),t.removeEventListener("touchend",this._touchEndHandler),t.removeEventListener("touchcancel",this._touchCancelHandler),t.removeEventListener("touchleave",this._touchLeaveHandler),t.removeEventListener("keypress",this._keyPressHandler)}$_orientationChanged(t){this._doOrientationChanged(t);const e=this.onOrientationChanged;e&&e(t)}_doOrientationChanged(t){}_prepareRenderers(t){}$_initControl(t,e,s){if(this._inited)return;e instanceof HTMLDivElement?this._container=e:this._container=t.getElementById(e),this._container instanceof HTMLDivElement||N(b.invalidOuterDiv,e);const i=this._container.getElementsByClassName("rtc-renderers")[0];i&&(this._prepareRenderers(i),i.remove());const r=this._dom=t.createElement("div");if(Object.assign(r.style,{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"}),r.className=s,this._container.appendChild(r),this._screenOrientation=this.$_getScreenOrientation(),this._orientation=this.$_getOrientation(),this._root=new ge(t,this),r.appendChild(this._root._dom),this._defaultTool=this._tool=this._creatDefaultTool(),this._doInitModel(),this._doInitView(t),void 0===ce.ANIMATABLE){const t=r.animate&&r.animate([{left:0},{left:0}],{duration:0,fill:"none"});ce.ANIMATABLE=!!t}}_render(){this.$_render()}$_invalidateElement(t){this._invalidElements.push(t),this.invalidate()}$_requestRender(){window.requestAnimationFrame?this._requestTimer=requestAnimationFrame(()=>this.$_render()):setTimeout(()=>{this.$_render()},0)}updateNow(){this.$_render()}$_render(){const t=+new Date;if(t<=this._toAnimation)this.$_requestRender();else{try{this._doBeforeRender();const t=this._dom.clientWidth,e=this._dom.clientHeight;this._doRender({x:0,y:0,width:t,height:e})}finally{this._dirty=!1,this._requestTimer=null,this._invalidElements.forEach(t=>t.validate()),this._invalidElements=[],this._doAfterRender()}x.log("render in "+(+new Date-t)+"ms.")}}_doBeforeRender(){}_doAfterRender(){}_doControlObjectChanged(t,e){}_doClick(t){}_doTouchStart(t){return!1}_doTouchMove(t){}_doTouchEnd(t){}_doTouchCancel(t){}_doTouchLeave(t){}_doKeyPress(t){}_doWheel(t){}_windowResized(){this.invalidateLayout()}}class ce extends e{constructor(t,e,s,i="div"){super(),this._visible=!0,this._dirty=!1;const r=this._dom=t.createElement(i);s&&(r.className=s),Object.assign(r.style,{display:this._getDisplayStyle(),position:this._getPositionStyle(),boxSizing:"border-box",overflow:this._getOverflow()}),e&&(r.appendChild(this._content=t.createElement("div")),this._content.className="rtc-view-content",this._content.style.position=this._getContentPosition()),this._doInitDom(t,r),this._content&&this._doInitContent(t,this._content)}_doDestory(){this._dom=null}get doc(){return this._dom.ownerDocument}get win(){const t=this._dom.ownerDocument;return t.defaultView||t.parentWindow}get dom(){return this._dom}get content(){return this._content}get parent(){return this._parent}get childCount(){return this._children?this._children.length:0}get control(){return this._parent&&this._parent.control}get x(){return this._x}right(){return this._x+this._width}get y(){return this._y}bottom(){return this._y+this._height}get width(){return this._width}get height(){return this._height}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed())}setVisible(t){return t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed()),this._visible}_internalVisible(t){return this._visible=t,this._dom.style.display=this._visible?this._getDisplayStyle():"none",t}canAnimate(){return ce.ANIMATABLE&&void 0!==Element.prototype.animate}setAnimating(t){this._dom.dataset.animating=t?"1":"0"}animating(){return"1"===this._dom.dataset.animating}get hidden(){return"hidden"===this._dom.style.visibility}set hidden(t){this._dom.style.visibility=t?"hidden":"visible"}setStyles(t){return Object.assign(this._dom.style,t),this}getClientSize(){return{width:this._dom.clientWidth,height:this._dom.clientHeight}}getOffsetSize(){return{width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getOffsetBounds(){return{x:this._dom.offsetLeft,y:this._dom.offsetTop,width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getClientRect(){return this._dom.getBoundingClientRect()}getBounds(){return{x:this._x,y:this._y,width:this._width,height:this._height}}validate(){this._dirty=!1}getLabel(){}getChildren(){return this._children&&this._children.slice(0)}getChild(t){return this._children&&this._children[t]}indexOf(t){return this._children?this._children.indexOf(t):-1}contains(t,e=!1){const s=this._children;if(s){if(s.indexOf(t)>=0)return!0;if(e)for(const e of s){if(e.contains(t,!0))return!0}}}insertChild(t,e){if(e&&!this.contains(e)){e._parent&&e._parent.removeChild(e),this._children||(this._children=[]);const s=this._children,i=this._content||this._dom,r=e.getLabel();t<0||t>=s.length?(r&&i.appendChild(r),i.appendChild(e._dom),s.push(e)):(i.insertBefore(e._dom,s[t]._dom),r&&i.insertBefore(r,e._dom),s.splice(t,0,e)),e._parent=this,e.$_attached(),this._changed()}}insertBefore(t,e){this.insertChild(this.indexOf(e),t)}addChild(t){this.insertChild(-1,t)}remove(){this._parent&&this._parent.removeChild(this)}removeChildAt(t){if(this._children&&t>=0&&t<this._children.length){const e=this._children[t],s=e.getLabel();return s&&(this._content||this._dom).removeChild(s),(this._content||this._dom).removeChild(e._dom),this._children.splice(t,1),this.$_removeChild(e),this._changed(),e}}removeChild(t){return this.removeChildAt(this.indexOf(t))}removeLast(){const t=this._children;return t&&this.removeChildAt(t.length-1)}clear(){const t=this._children;if(t&&t.length>0){for(let e of t)this.$_removeChild(e);this._children=[];const e=this._content||this._dom;let s;for(;s=e.lastChild;)e.removeChild(s);return this._changed(),!0}return!1}moveIndex(t,e){const s=this._children,i=s.indexOf(t);if(e=Math.max(0,Math.min(s.length-1)),i>=0&&i!==e){const r=s[i]._dom;return s.splice(i,1),s.splice(e,0,t),this._dom.insertBefore(r,t._dom),this._changed(),!0}}isDom(t){return this._dom===t||this._content&&this._content===t}containsDom(t){return(this._content||this._dom).contains(t)}isView(t){return this.isDom(t)||this.containsDom(t)}containsClass(t){return(this._content||this._dom).classList.contains(t)}domByClass(t,e){const s=this._dom.getElementsByClassName(t),i=s?s.length:0;if(i>0){if(!e)return s[0];for(let t=0;t<i;t++){const i=s[t];if(Array.isArray(e)){if(e.indexOf(i.textContent)>=0)return i}else if(i.textContent===e)return i}}}childOfDom(t){const e=this._children;if(e&&e.length>0)for(const s of e){if(s.isDom(t))return s;const e=s.childOfDom(t);if(e)return e}}hasData(t){return!!this._dom.dataset[t]}setData(t,e){null==e||""===e?delete this._dom.dataset[t]:this._dom.dataset[t]=e}setBounds(t,e,s,i){return this.move(t,e).resize(s,i)}setRect(t){return this.move(t.x,t.y).resize(t.width,t.height)}moveX(t){return isNaN(t)?(this._x=t,this._dom.style.left=""):t!=this._x&&(this._x=t,this._dom.style.left=t+"px"),this}moveY(t){return isNaN(t)?(this._y=t,this._dom.style.top=""):t!==this._y&&(this._y=t,this._dom.style.top=t+"px"),this}move(t,e){return this.moveX(t).moveY(e)}center(t,e){return this.moveX((t-this.width)/2).moveY((e-this.height)/2)}moveI(t,e){return this.moveX(t>>0).moveY(e>>0)}resetPosition(){isNaN(this._x)&&(this._dom.style.left=this._x+"px"),isNaN(this._y)&&(this._dom.style.top=this._y+"px")}setWidth(t,e="px"){return t!==this._width&&(this._width=t,this._dom.style.width=isNaN(t)?"":t+e),this}setHeight(t,e="px"){return t!==this._height&&(this._height=t,this._dom.style.height=isNaN(t)?"":t+e),this}clearSize(){this._width=this._height=NaN,this._dom.style.width="",this._dom.style.height=""}resize(t,e,s="px"){return this.setWidth(t,s).setHeight(e,s)}internalClearSize(){this._dom.style.width="",this._dom.style.height=""}internalResize(t,e){return this._dom.style.width=t+"px",this._dom.style.height=e+"px",this}syncSize(){this.resize(Math.ceil(this._dom.offsetWidth),Math.ceil(this._dom.offsetHeight))}resizeContent(t,e,s="px"){this._content.style.width=isNaN(t)?"":t+s,this._content.style.height=isNaN(e)?"":e+s}setContentBounds(t,e,s,i){const r=this._content.style;r.left=t+"px",r.top=e+"px",r.width=s+"px",r.height=i+"px"}saveSize(){return this._width=this._dom.offsetWidth,this._height=this._dom.offsetHeight,this}forEach(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++)t(e[s],s,i)}some(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i&&!0!==t(e[s],s,i);s++);}findChild(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++)if(1==t(e[s],s,i))return e[s]}findDescendant(t){const e=this._children;if(e)for(let s=0,i=e.length;s<i;s++){if(1==t(e[s]))return e[s];const i=e[s].findDescendant(t);if(i)return i}}findDescendants(t,e){const s=this._children;if(s)for(const i of s)1==t(i)&&e.push(i),i.findDescendants(t,e)}applyStyle(t){t&&Object.assign(this._dom.style,t)}setImportantStyle(t,e,s){return t.setProperty(e,s,"important"),this}getComputedStyle(){return getComputedStyle(this._dom)}getPadding(){return de.getPadding(this._dom)}getPadding2(){return de.getPadding2(this._dom)}setPressed(t){t?this._dom.dataset.pressed="1":delete this._dom.dataset.pressed}appendSpan(t,e){const s=(t||this.doc).createElement("span");return this._dom.appendChild(s),e&&(s.className=e),s}appendDom(t){return this._dom.appendChild(t),t}removeDom(t){this._dom.removeChild(t)}detachDom(){this._dom.remove()}createElement(t){return this._dom.ownerDocument.createElement(t)}setClassName(t){this._dom.className=t}_testing(){return ce.TESTING}_doInitDom(t,e){}_doInitContent(t,e){}_getPositionStyle(){return"absolute"}_getDisplayStyle(){return"block"}_getContentPosition(){return"relative"}_getOverflow(){return""}$_attached(){this._doAttached()}_doAttached(){}$_detached(t){this._doDetached(t)}_doDetached(t){}$_removeChild(t){t.validate(),t._parent=null,t.$_detached(this)}_changed(){var t;this._dirty||(this._dirty=!0,null===(t=this.control)||void 0===t||t.$_invalidateElement(this))}}ce.TESTING=!1,ce.BOUNDING=!1,ce.BOUNDING_BORDER="1px solid #ff000080",ce.BOUNDING_BORDER_2="1px solid #0000ff40";class ue extends ce{_doInitDom(t,e){e.style.pointerEvents="none"}}class ge extends ce{constructor(t,e){super(t,!1,"rtc-root"),this._control=e}get control(){return this._control}}class pe extends s{constructor(t){super(),this._control=t}control(){return this._control}_changed(t){var e;null===(e=this._control)||void 0===e||e._doControlObjectChanged(this,t)}}var fe;!function(t){t.NONE="none",t.EXPAND="expand",t.COMMAND="command"}(fe||(fe={}));class we extends e{constructor(){super(...arguments),this._expanded=!0}expanded(){return this._expanded}}class me{constructor(t){this.index=-1,this.vindex=-1,this.group=t}row(){return-1}getParamValue(t){return this.group.getParamValue(t)}}class ye extends me{constructor(t,e){super(t),this._row=e}isLeaf(){return!0}row(){return this._row}}class ve extends me{}class be extends ve{getStyle(){var t,e;return{itemDef:this.group.model().header().style,levelDef:null===(e=null===(t=this.group.info)||void 0===t?void 0:t.header)||void 0===e?void 0:e.style}}}class Se extends ve{getStyle(){var t,e;return{itemDef:this.group.model().footer().style,levelDef:null===(e=null===(t=this.group.info)||void 0===t?void 0:t.footer)||void 0===e?void 0:e.style}}}class Ce extends r{}class xe extends s{constructor(t,e){super(),this._owner=t,this._defs=e,e||(this._visible=!0,this._collapsedVisible=!1,this._template=this._defTemplate(),this._clickAction=fe.EXPAND)}_doDestory(){this._owner=this._defs=null}get visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}get collapsedVisible(){return Tt(this._collapsedVisible,this._defs&&this._defs._collapsedVisible)}setCollapsedVisible(t){t!==this._collapsedVisible&&(this._collapsedVisible=t,this._changed())}get template(){return Tt(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._changed())}clickAction(){return Tt(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}_defTemplate(){return"@it_group_header"}_changed(){var t;null===(t=this._owner)||void 0===t||t.groupSectionChanged(this)}}class Re extends xe{_defTemplate(){return"@it_group_footer"}}class Ee extends we{constructor(t,e,s,i,r,n){super(),this._checked=!1,this._summary={},this._parent=t,this.info=e,this._value=s,this._startRow=i,this._startId=r,this._endRow=n}_doDestory(){}level(){return this._parent.level()+1}parent(){return this._parent}model(){return this._parent.model()}field(){return this.info.field}headerInfo(){return this.info.header}footerInfo(){return this.info.footer}value(){return this._value}startRow(){return this._startRow}endRow(){return this._endRow}rowCount(){return this._endRow-this._startRow+1}children(){var t;return null===(t=this._children)||void 0===t?void 0:t.slice()}count(){return this._children?this._children.length:0}isLeaf(){return!this._children||0===this._children.length}header(){return this._header}footer(){return this._footer}visible(){return this._parent._expanded&&this._parent.visible()}checked(){return this._checked}setChecked(t){var e;(t=!!t)!=this._checked&&(this._checked=t,null===(e=this.model())||void 0===e||e.$_checkedChanged(this))}firstVis(){return this._firstVis}lastVis(){return this._lastVis}get(t){return this._children[t]}getItems(t=!1){const e=this.model();if(e)return t?e._items.slice(this._header.index,this._footer.index+1):e.getItemsOf(this)}getVisItems(t=!1){const e=this.model();if(e)return t?e._visItems.slice(this._firstVis.vindex,this._lastVis.vindex+1):e.getVisItemsOf(this)}isLast(t){return t===this._endRow}clear(){this._children=null,this.$_clearSummary()}visit(t,e){if(t&&this._children)for(let s of this._children){if(!0===t(s))return!0;if(e){if(!0===s.visit(t,!0))return!0}}}visitItems(t,e){var s;t&&(null===(s=this.model())||void 0===s||s.forEachVisItem(this._firstVis.index,this._lastVis.index,e))}visitVisItems(t,e){var s;t&&(null===(s=this.model())||void 0===s||s.forEachVisItem(this._firstVis.vindex,this._lastVis.vindex,e))}getSummary(t){let e=this._summary[t];return e||(this._summary[t]=e=this.model().data().getSummary(t,this._startRow,this._endRow)),e}getParamValue(t){switch(t){case"group_field":return this.field();case"group_value":return this.value();case"group_level":return this.level();case"row_count":return this.rowCount();case"group_sum":return this.value()}}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}$_clearSummary(){this._summary={}}}class Ve extends Ee{constructor(t){super(null,null,null,0,0,0),this._model=t}level(){return-1}model(){return this._model}headerInfo(){return Ve.INFO}footerInfo(){return Ve.INFO}isLeaf(){return!1}expanded(){return!0}visible(){return!0}firstVis(){return this._model.firstVisItem()}lastVis(){return this._model.lastVisItem()}}Ve.INFO={visible:!1,collapsedVisible:!1};class $e extends Ce{constructor(){super(),this._leafs=[],this._header={visible:!0,collapsedVisible:!0,template:$e.HEADER_TEMPLATE,style:null},this._footer={visible:!0,collapsedVisible:!1,template:$e.FOOTER_TEMPLATE,style:null},this._levels=0,this._descendants=0,this._items=[],this._vitems=[],this._root=new Ve(this)}_doDestory(){}inflateParam(t,e,s){s.name}inflateStock(t,e,s){const i=t,r=s.name;let n;return n=i.getParamValue(r),n}onDataReset(t){this.$_refresh(!0)}onDataValueUpdated(t,e,s,i,r){this.$_refresh(!0)}onDataRowUpdated(t,e,s){this.$_refresh(!0)}onDataRowsUpdated(t,e){this.$_refresh(!0)}onDataRangeUpdated(t,e,s){this.$_refresh(!0)}onDataRowAdded(t,e){this.$_refresh(!0)}onDataRowsAdded(t,e,s){this.$_refresh(!0)}onDataCleared(t,e){this.$_refresh(!0)}onDataRowDeleted(t,e){this.$_refresh(!0)}onDataRowsDeleted(t,e){this.$_refresh(!0)}onDataRangeDeleted(t,e,s){this.$_refresh(!0)}onDataViewFilterChanged(t){this.$_refresh(!0)}onDataViewSortChanged(t){this.$_refresh(!0)}data(){return this._data}root(){return this._root}header(){return Object.assign({},this._header)}setHeader(t){if(w.isObject(t)){const e=this._header;w.assignProps(e,t)&&this.$_resetVisibles()}}footer(){return Object.assign({},this._footer)}setFooter(t){w.isObject(t)&&(this._footer,w.assignProps(this._footer,t)&&this.$_resetVisibles())}levels(){return this._levels}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(let t of this._vitems)if(t instanceof ye)return t}lastVisRow(){for(let t=this._vitems.length-1;t>=0;t--)if(this._vitems[t]instanceof ye)return this._vitems[t]}getGroup(t){return this._root.get(t)}getLevelGroupCount(t){let e=0;return 0===t?e=this._root.count():t>0&&t<this._levels&&this._root.visit(s=>(s.level()===t&&e++,!1),!0),e}getLevelGroups(t){if(0===t)return this._root.children();if(t>0&&t<this._levels){const e=[];return this._root.visit(s=>(s.level()===t&&e.push(s),!1),!0),e}return[]}getLevelGroup(t,e){let s;return 0===t?this._root.get(e):(t>=0&&t<this._levels&&e>=0&&this._root.visit(i=>{if(i.level()===t){if(0===e)return s=i,!0;e--}},!0),s)}getGroupRows(t){return w.getIntArray(t.endRow()-t.startRow()+1,t.startRow())}indexOfRow(t){const e=this.itemOfRow(t,!1);return e?e.index:-1}visIndexOfRow(t){const e=this.itemOfRow(t,!0);return e?e.index:-1}itemOfRow(t,e){if(t>=0&&t<this._data.rowCount()){const s=e?this._vitems:this._items,i=s.length;let r=t;for(;r<i;){const e=s[r++];if(e instanceof ye&&e.row()===t)return e}}}groupOfRow(t){const e=this.itemOfRow(t,!1);return e&&e.group}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}getItems(t,e){return this._items.slice(t,e)}getVisItems(t,e){return this._vitems.slice(t,e)}getItemsOf(t){const e=[],s=t?t.header().index:0,i=t?t.footer().index:this._items.length-1;for(let r=s;r<=i;r++){const s=this._items[r];s.group===t&&e.push(s)}return e}getVisItemsOf(t){const e=[],s=t?t._firstVis.vindex:0,i=t?t._lastVis.vindex:this._vitems.length-1;for(let r=s;r<=i;r++){const s=this._vitems[r];s.group===t&&e.push(s)}return e}forEachItem(t,e,s){if(s&&e>t){const i=this._items;for(let r=t;r<e&&!1!==s(i[r]);r++);}}forEachVisItem(t,e,s){if(s&&e>t){const i=this._vitems;for(let r=t;r<e&&!1!==s(i[r]);r++);}}clear(){this._root.clear(),this._items=[],this._vitems=[]}build(t,e,s){return s.length<1&&I(b.requireGroupingInfos),this._infos=s.map(t=>{return{field:(e=t).field,ranges:e.ranges&&e.ranges.length>0?e.ranges.slice(0):null,comparer:e.comparer,header:Object.assign({},e.header),footer:Object.assign({},e.footer)};var e}),this._data=t,this._options=e,this.$_refresh(!1),this}refresh(t){this._data=t,this.$_refresh(!1),x.log("Group items refreshed.")}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;t>=0;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return this._header.template||$e.HEADER_TEMPLATE}getFooterTemplate(t){return this._footer.template||$e.FOOTER_TEMPLATE}isLastDataRow(t){return t===this._lastRow}$_save(t){const e=this._root;this._leafs.forEach(s=>{const i=[s.expanded()];let r=s.parent();for(;r!==e;)i.unshift(r.expanded()),r=r.parent();t[s._startId]=i})}$_restore(t){!function e(s){s.children().forEach(s=>{const i=t[s._startId];i&&s.$_setExpanded(i[s.level()]),!s.isLeaf()&&e(s)})}(this._root)}$_refresh(t){const e=this._data,s=t&&{};if(s&&this._data&&this.$_save(s),this.clear(),this._data){const t=e.rowCount();if(t>0){const s=this._infos;s&&(this._descendants=this.$_buildGroups(this._root,s,e,0,t-1),this._levels=s.length+1,this._leafs=[],this.$_buildItems(this._root,this._items=[]),this.$_resetIndices())}this._root._endRow=t-1,s&&this.$_restore(s)}else this._root._endRow=-1;this.$_resetVisibles()}$_buildGroups(t,e,s,i,r){function n(i,r,n,a,h){const l=new Ee(t,r,h,n,o.getRowId(n),a);t.$_add(l),e.length>l.level()+1&&(d+=i.$_buildGroups(l,e,s,l._startRow,l._endRow)),d++}const o=this._data,a=e[t.level()+1],h=a.field,l=a.ranges;let d=0;if(l){const t=l.length>1&&l[0]>l[1];let e=i,o=s.getValue(e,h,!0),d=o,_=0,c=l[_++],u=!1;for(;e<=r;)if(u&&(o=s.getValue(e,h,!0),u=!1),t&&o<c||!t&&o>=c){if(e>i){if(n(this,a,i,e-1,d),i=e,_===l.length)break}else e++,u=!0;d=c,c=l[_++]}else e++,u=!0;i<=r&&n(this,a,i,r,c)}else{const t=a.comparer,e=s.rowCount();let o=s.getValue(i,h,!0);for(let l=i+1;l<=r;l++){const r=s.getValue(l,h,!0);(t?t(r,o,l,e):r===o)||(n(this,a,i,l-1,o),o=r,i=l)}n(this,a,i,r,o)}return d}getHeaderVisible(t,e){var s,i;return e?w.pick(null===(s=t.headerInfo())||void 0===s?void 0:s.visible,this._header.visible,!0):w.pick(null===(i=t.headerInfo())||void 0===i?void 0:i.collapsedVisible,this._header.collapsedVisible,!0)}getFooterVisible(t,e){var s,i;return e?w.pick(null===(s=t.footerInfo())||void 0===s?void 0:s.visible,this._footer.visible,!0):w.pick(null===(i=t.footerInfo())||void 0===i?void 0:i.collapsedVisible,this._footer.collapsedVisible,!1)}$_buildItems(t,e){const s=t.count();if(s>0)for(let i=0;i<s;i++){const s=t.get(i);e.push(s._header=new be(s)),this.$_buildItems(s,e),e.push(s._footer=new Se(s))}else{this._leafs.push(t);for(let s=t.startRow();s<=t.endRow();s++)e.push(new ye(t,s))}}$_collectVisibles(t,e){const s=t===this._root,i=this._items,r=t.expanded(),n=this.getHeaderVisible(t,r),o=this.getFooterVisible(t,r);let a=e.length;const h=t.count();if(!s){const s=t.header();n||!o?(e.push(s),t._firstVis=s):t._firstVis=null}if(r){if(h>0)for(let s=0;s<h;s++){const i=t.get(s);this.$_collectVisibles(i,e)}else if(i.length>0){let s=0;for(let r=t.header().index+1;r<t.footer().index;r++)i[r].no=s++,e.push(i[r])}t._firstVis||(t._firstVis=e[a])}const l=t.footer();o&&e.push(l),t._lastVis=e[e.length-1],s||t._firstVis||(t._firstVis=t._lastVis)}$_expand(t,e,s){let i=!1;if(e&&t.visit(t=>(t.$_setExpanded(!0)&&(i=!0),!1),!0),s||i||!t.expanded()){const e=this._vitems,s=t===this._root,r=s?0:t._firstVis.vindex,n=s?e.length-1:t._lastVis.vindex,o=[],a=t.visible();a&&(s?e.length=0:e.splice(r,n-r+1)),i=t.$_setExpanded(!0)||i,this.$_collectVisibles(t,o),a&&w.splice(e,r,0,o)}return i}$_collapse(t,e){const s=t===this._root,i=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||s)&&t.visit(t=>(t.$_setExpanded(!1)&&(n=!0),!1),e),n||t.expanded()){const e=this._vitems;let o=s?0:t._firstVis.vindex;const a=s?e.length-1:t._lastVis.vindex,h=[],l=t.visible();n=t.$_setExpanded(!1)||n,l&&e.splice(o,a-o+1),this.$_collectVisibles(t,h),!s&&l&&(t.lastVis().vindex<0||t.firstVis().vindex),l&&w.splice(e,o,0,h),e.length>r&&console.log(i),!s&&l&&(t.lastVis().vindex<0||t.firstVis().vindex)}return n}$_resetVisibles(){const t=this._vitems=[],e=this._root;if(this._lastRow=null,e.count()>0){this.$_collectVisibles(e,t),this.$_resetVisIndices();for(let e=t.length-1;e>=0;e--)if(t[e]instanceof ye){this._lastRow=t[e];break}}}$_resetIndices(){const t=this._items;for(let e=0,s=t.length;e<s;e++)t[e].index=e}$_resetVisIndices(){let t=this._items;for(let e=t.length-1;e>=0;e--)t[e].vindex=-1;t=this._vitems;for(let e=0,s=t.length;e<s;e++)t[e].vindex=e}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}$_checkedChanged(t){this._fireEvent("onGroupChecked",t,t.checked())}}$e.HEADER_TEMPLATE="@it_group_header",$e.FOOTER_TEMPLATE="@it_group_footer";class Ae{constructor(t){const e=this._vars={};for(let s in t)e["--"+s]=t[s]}out(t){return t in this._vars?this._vars[t]:t}assign(t){const e=this._vars,s={};for(let i in t){const r=t[i];s[i]=r in e?e[r]:r}return s}}let De=1;class ke{constructor(t,e,s){this.tid=De++,this._parent=t,e&&(this.tag=null!=e.tag?String(e.tag):void 0,this._doLoad(e,s))}_loadProps(t,e){return bt.load(e?e.assign(t):t)}_loadStyle(t,e){return w.isObject(t)?bt.load(e?e.assign(t):t):t?(e&&(t=e.out(t)),bt.parse(t)):void 0}_loadRenderer(t,e,s){if(w.isObject(t)){const i=bt.load(s?s.assign(t):t);for(let t in i){const r=i[t];t.endsWith("Style")&&(e[t]=i[t]=this._loadStyle(r,s))}return t.style&&(e.style=this._loadStyle(t.style,s)),i.type=t.type,i}if("string"==typeof t)return t}}class Le extends ke{_doLoad(t,e){if("string"==typeof t)this.field=bt.parse(t);else{const s=Object.assign({},t);this.id=t.id,delete s.id,Array.isArray(t.fields)&&(this.fields=bt.parse(t.fields),delete s.fields),t.field&&(this.field=bt.parse(t.field),delete s.field),t.value&&(this.value=bt.parse(t.value),delete s.value),this.renderer=this._loadRenderer(t.renderer,this.rendererStyles={},e),delete s.renderer,t.style&&(this.style=this._loadStyle(t.style,e),delete s.style),t.classCallback&&(this.classCallback=t.classCallback,delete s.classCallback),t.styleCallback&&(this.styleCallback=t.styleCallback,delete s.styleCallback),this.props=this._loadProps(s,e)}}}class Te extends ke{count(){return this.children.length}get(t){return this.children[t]}tagBy(t){return this.children.find(e=>e.tag===t)}fieldBy(t){return this.children.find(e=>e.tag===t&&e instanceof Le)}_doLoad(t,e){const s=Object.assign({},t);if(this.layout=s.layout,delete s.layout,this.id=s.id,delete s.id,s.style&&(this.style=this._loadStyle(s.style,e),delete s.style),Array.isArray(t.children)){const i=this.children=[];for(let s of t.children){let t;null!=s&&(t="layout"===s.type||s.layout?new Te(this,s,e):void 0!==s.space?"*"===s.space?new Le(this,Object.assign({width:0,height:0,grow:1,renderer:{type:"spacer",space:0}},s),e):new Le(this,Object.assign({width:s.space,height:s.space,renderer:{type:"spacer",space:0}},s),e):new Le(this,s,e)),t&&(t.tag=s.tag,i.push(t))}delete s.children}else this.children=[];this.props=this._loadProps(s,e)}_getFields(t){this.children.forEach(e=>{e instanceof Te?e._getFields(t):"string"==typeof e.field&&t.push(e.field)})}}class Me extends ke{constructor(t,e){super(null,null,null),this.tokens=[],this.$_parseParams(this.dom=t,[])}_doLoad(t,e){}$_parseParams(t,e){let s;const i=t.getAttributeNames();i&&i.forEach(i=>{s=bt.parse(t.getAttribute(i)),s instanceof bt&&this.tokens.push({node:e,attr:i,param:s})});const r=t.childNodes;for(let t=0;t<r.length;t++){const i=r[t],n=e.concat(t);if(i.nodeType===Node.TEXT_NODE){const t=i.nodeValue;s=bt.parse(t),s instanceof bt&&this.tokens.push({node:n,param:s})}i instanceof HTMLElement&&this.$_parseParams(i,n)}}}let Pe=1e6;class Ie extends e{constructor(t,e){if(super(),this.id=Pe++,this.detailId=Pe++,this.collapsedId=Pe++,e)if(e.template){const s=w.isValidObject(e.vars)?new Ae(e.vars):null;this.description=e.description,this.rowProps=w.copyObject(e.rowProps),this.rowStyle=function(t){const e=w.copyObject(t);let s;if(e){s=new Ft,e.alternate&&(s.alternate=Object.assign({},e.alternate),delete e.alternate),e.updated&&(s.updated=Object.assign({},e.updated),delete e.updated),e.deleted&&(s.deleted=Object.assign({},e.deleted),delete e.deleted),e.selected&&(s.selected=Object.assign({},e.selected),delete e.selected),e.checked&&(s.checked=Object.assign({},e.checked),delete e.checked),e.searched&&(s.searched=Object.assign({},e.searched),delete e.searched);const t=e.default;t&&delete e.default,s.default=e,t&&Object.assign(s.default,t)}return s}(e.rowStyle),this.layout=this.$_createLayout(t,e.template,s),this.detailed=e.detailed&&this.$_createLayout(t,e.detailed,s),this.extra=e.extra&&this.$_createLayout(t,e.extra,s),this.collapsed=e.collapsed&&this.$_createLayout(t,e.collapsed,s),this.brief=e.brief&&this.$_createLayout(t,e.brief,s),this.params=w.copyObject(e.params)}else e.layout&&(this.layout=this.$_createLayout(t,e,null))}_doDestory(){}getFields(){const t=[];return this.layout._getFields(t),t}$_createLayout(t,e,s){if("html"===e.type||"string"==typeof e.html){let i;return"string"==typeof e.html?(i=t.doc().createElement("div"),i.innerHTML=e.html,i=i.firstElementChild):e.domid&&(i=t.getTemplateHtml(e.domid)),i||(i=t.doc().createElement("div")),new Me(i,s)}return new Te(null,e,s)}}const Ne=new Ie(null,{template:{layout:"frame",children:[{value:"[ Dummy Template ]",style:{color:"#aaa",fontWeight:"bold"}}]}}),Oe=new Te(null,{layout:"frame",children:[{width:"35%",height:25,left:0},{width:"10%",height:18,right:"50%"},{width:"15%",height:18,right:"30%"},{width:"25%",height:21,right:"0"}]},null);class Be extends Le{}class Fe extends Te{}class ze extends e{constructor(t,e){if(super(),this.id=Pe++,e&&(this.tag=null!=e.tag?String(e.tag):void 0,Array.isArray(e.cells))){const t=w.isValidObject(e.vars)?new Ae(e.vars):null;this.cells=this.$_loadCells(e.cells,t)}}$_loadCells(t,e){const s=[];return t.forEach(t=>{let i;null!=t&&(i="layout"===t.type||t.layout?new Fe(null,t,e):new Be(null,t,e)),i&&(i.tag=t.tag,i.col=It(+t.col,0),i.row=It(+t.row,0),s.push(i))}),s}}class He extends ye{constructor(t,e){super(t,e)}dataLevel(){return this.group.dataLevel()}isLeaf(){return this.group instanceof Ue}}class We extends we{constructor(t){super(),this.parent=t}count(){return this._children?this._children.length:0}level(){return this.parent.level()+1}model(){return this.parent.model()}visible(){return this.parent._expanded&&this.parent.visible()}isLeaf(){return!this._children}rowCount(){if(this._children){let t=0;return this._children.forEach(e=>t+=e.rowCount()),t}return 0}get(t){return this._children[t]}isLast(t){return t===this.end}contains(t){let e=t;for(;e;){if(e===this)return!0;e=e.parent}return!1}visit(t,e){if(t&&this._children)for(let s of this._children){if(!0===t(s))return!0;if(e){if(!0===s.visit(t,!0))return!0}}}clear(){this._children=[]}getParamValue(t){switch(t){case"row_count":return this.rowCount()}}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}}class Ge extends We{dataLevel(){return this.parent.dataLevel()}rowCount(){return this.isLeaf()?1:super.rowCount()}}class Ue extends We{dataLevel(){return this.parent.dataLevel()+1}rowCount(){return this.isLeaf()?this.rows.length:super.rowCount()}}class qe extends Ue{constructor(t){super(null),this._model=t,this.start=0}level(){return-1}dataLevel(){return 0}model(){return this._model}expanded(){return!0}visible(){return!0}isLeaf(){return!1}}class je extends Ce{constructor(){super(),this._header={visible:!0,collapsedVisible:!0,template:je.HEADER_TEMPLATE,style:null},this._footer={visible:!0,collapsedVisible:!1,template:je.FOOTER_TEMPLATE,style:null},this._levels=0,this._rowLevels=0,this._descendants=0,this._items=[],this._vitems=[],this._leafCount=0,this._root=new qe(this)}_doDestory(){}inflateParam(t,e,s){s.name}inflateStock(t,e,s){const i=t,r=s.name;let n;return n=i.getParamValue(r),n}onDataValueUpdated(t,e,s,i,r){this.$_refresh()}onDataRowUpdated(t,e,s){this.$_refresh()}onDataRowsUpdated(t,e){this.$_refresh()}onDataRangeUpdated(t,e,s){this.$_refresh()}onDataRowAdded(t,e){this.$_refresh()}onDataRowsAdded(t,e,s){this.$_refresh()}onDataCleared(t,e){this.$_refresh()}onDataRowDeleted(t,e){this.$_refresh()}onDataRowsDeleted(t,e){this.$_refresh()}onDataRangeDeleted(t,e,s){this.$_refresh()}onDataViewFilterChanged(t){this.$_refresh()}onDataViewSortChanged(t){this.$_refresh()}data(){return this._data}header(){return this._header}footer(){return this._footer}root(){return this._root}levels(){return this._levels}rowLevels(){return this._data.levels()}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){return this._leafCount}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(let t of this._vitems)if(t instanceof He)return t}lastVisRow(){for(let t=this._vitems.length-1;t>=0;t--)if(this._vitems[t]instanceof He)return this._vitems[t]}clear(){this._root.clear(),this._items=[],this._vitems=[]}build(t,e,s){function i(t){if(t){const e=Object.assign({},t);return e.header=Object.assign({},t.header),e.footer=Object.assign({},t.footer),e}}const r=this._infoMap={};for(const t in s)r[t]=i(s[t]);return this._options=e,this._data=t,this.$_refresh(),this}refresh(t){this._data=t,this.$_refresh()}containsData(t){return t in this._infoMap}itemOfRow(t,e){const s=e?this._vitems:this._items;for(const e of s)if(e instanceof He&&e.row()===t)return e}indexOfRow(t){const e=this.itemOfRow(t,!1);return e?e.index:-1}visIndexOfRow(t){const e=this.itemOfRow(t,!0);return e?e.index:-1}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(0),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;t>=0;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(0),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}isLastDataRow(t){return t===this._lastRow}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return je.HEADER_TEMPLATE}getFooterTemplate(t){return je.FOOTER_TEMPLATE}getLevelGroupCount(t){let e=0;return 0===t?e=this._root.count():t>0&&t<this._levels&&this._root.visit(s=>(s.level()===t&&e++,!1),!0),e}getPageGroupCount(t){let e=0;return t>=0&&t<this._rowLevels-1&&this._root.visit(s=>(s instanceof Ge&&s.dataLevel()===t&&e++,!1),!0),e}getPageGroup(t,e){let s,i=0;return this._root.visit(r=>{if(r instanceof Ge&&r.dataLevel()===t){if(i===e)return s=r,!0;i++}return!1},!0),s}getPageRows(t){t.level();const e=this._items,s=e.length,i=[];let r=t.row.index;for(;r<s;){const s=e[r++];if(!(s instanceof He&&t.contains(s.group)))break;i.push(s)}return i}$_refresh(){const t=+new Date;this.clear();const e=this._data?this._data.rowCount():0;e>0&&(this._levels=0,this._rowLevels=this._data.levels(),this._descendants=this.$_buildGroups(this._root,0,e),this._root.end=e-1,this.$_buildItems(this._root,this._items=[]),this.$_resetIndices(),this.$_resetVisibles()),console.log("DATA GROUP BUILD: "+(+new Date-t)+"ms.")}$_buildGroups(t,e,s){function i(t,e,s){const i=new Ge(t);i.row=new He(i,e),i.start=e,i.end=s,t.$_add(i),l++,o._levels=Math.max(o._levels,i.level()+1),s>e&&function(t){let e=t.start+1,s=e,i=a.getSource(e),r=a.getLevel(e);for(;e<t.end;)a.getSource(e)!==i&&a.getLevel(e)===r&&(n(t,s,e-1),s=e),e++;n(t,s,e)}(i)}function r(t,e,s){const r=a.getSource(e);for(let n=e+1;n<=s;n++)a.getSource(n)===r&&(i(t,e,n-1),e=n);i(t,e,s)}function n(t,e,s){const i=new Ue(t);if(i.start=e,i.end=s,t.$_add(i),l++,o._levels=Math.max(o._levels,i.level()+1),a.getLevel(i.start)<h-1)r(i,e,s);else{i.rows=[];for(let t=i.start;t<=i.end;t++)i.rows.push(new He(i,t))}}const o=this,a=this._data,h=a.levels();let l=0;return e<s&&r(t,e,s-1),l}$_buildItems(t,e){const s=this._options,i=t._children,r=i?i.length:0;if(t instanceof Ge){if(s.addMasterHeader()&&(r>0||s.addEmptyMasterHeader())&&e.push(t.header=new be(t)),e.push(t.row),r>0)for(let t=0;t<r;t++){const n=i[t];s.addDetailHeader()&&(r>1||s.addSingleDetailHeader()),n.rows?n.rows.forEach((t,s)=>{t.no=s,e.push(t)}):this.$_buildItems(i[t],e),s.addDetailFooter()&&(r>1||s.addSingleDetailFooter())}s.addMasterFooter()&&(r>0||s.addEmptyMasterFooter())&&e.push(t.footer=new Se(t))}else for(let t=0;t<r;t++)this.$_buildItems(i[t],e)}$_collectVisibles(t,e){const s=t===this._root,i=this._items,r=t.expanded();let n=e.length;const o=t.count();if(!s)if(t instanceof Ue){const s=t.header;s&&(s.index>=0?(e.push(s),t._firstVis=s):t._firstVis=null)}else e.push(t.row);if(r){if(o>0)for(let s=0;s<o;s++){const i=t.get(s);this.$_collectVisibles(i,e)}else if(i.length>0&&t instanceof Ue){const s=t.rows;for(let t=s[0].index;t<=s[s.length-1].index;t++)e.push(i[t])}t._firstVis||(t._firstVis=e[n])}if(!s){const s=t.footer;s&&s.index>=0&&e.push(s),t._lastVis=e[e.length-1],t._firstVis||(t._firstVis=t._lastVis)}}$_resetVisibles(){const t=this._vitems=[],e=this._root;if(this._lastRow=null,e.count()>0){this.$_collectVisibles(e,t),this.$_resetVisIndices(0);for(let e=t.length-1;e>=0;e--)if(t[e]instanceof He){this._lastRow=t[e];break}}}$_resetIndices(){const t=this._items;for(let e=0,s=t.length;e<s;e++)t[e].index=e}$_resetVisIndices(t){let e=this._items;for(let t=0,s=e.length;t<s;t++)e[t].vindex=-1;e=this._vitems;for(let s=e.length-1;s>=t;s--)e[s].vindex=s}$_expand(t,e,s){let i=!1;if(e&&t.visit(t=>(t.$_setExpanded(!0)&&(i=!0),!1),!0),s||i||!t.expanded()){const e=this._vitems,s=t===this._root,r=s?0:t._firstVis.vindex,n=s?e.length-1:t._lastVis.vindex,o=[],a=t.visible();a&&(s?e.length=0:e.splice(r,n-r+1)),i=t.$_setExpanded(!0)||i,this.$_collectVisibles(t,o),a&&w.splice(e,r,0,o)}return i}$_collapse(t,e){const s=t===this._root,i=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||s)&&t.visit(t=>(t.$_setExpanded(!1)&&(n=!0),!1),e),n||t.expanded()){const e=this._vitems;let o=s?0:t._firstVis.vindex;const a=s?e.length-1:t._lastVis.vindex,h=[],l=t.visible();n=t.$_setExpanded(!1)||n,l&&e.splice(o,a-o+1),this.$_collectVisibles(t,h),!s&&l&&(t._lastVis.vindex<0||t._firstVis.vindex),l&&w.splice(e,o,0,h),e.length>r&&console.log(i),!s&&l&&(t._lastVis.vindex<0||t._firstVis.vindex)}return n}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}}je.HEADER_TEMPLATE="@it_datagroup_header",je.FOOTER_TEMPLATE="@it_datagroup_footer";class Ye extends r{constructor(t,e){let s;super(),this._page=0,this._level=0,this._size=1,this._headerLevel=0,this._footerLevel=0,t||I(b.requireDataOrGroup),t instanceof Ce?(this._data=t.data(),s=this._group=t):this._data=t,e&&(this._size=It(+e.size,this._size),this._level=It(+e.level,this._level),this._headerLevel=It(+e.headerLevel,this._headerLevel),this._footerLevel=It(+e.footerLevel,this._footerLevel)),s instanceof $e?(this._groupLevel=Math.max(0,s.levels()-2+It(this._level,0)),this._getRows=this.$_getRowGroupPageRows.bind(this)):s instanceof je?(this._groupLevel=Math.max(0,s.rowLevels()-2+It(this._level,0)),this._getRows=this.$_getDataGroupPageRows.bind(this)):this._getRows=this.$_getPageRows.bind(this)}isGrouped(){return!!this._group}size(){return this._size}level(){return this._level}page(){return this._page}setPage(t){if((t=Math.floor(w.toNumber(t)))!==this._page){const e=this._page;this._page=t,this.$_reset(),this._fireEvent("onPageChanged",t,e)}}pageCount(){if(isNaN(this._pageCount)){let t=0;this._data&&(t=this._group instanceof $e||this._group instanceof je?this._group.getLevelGroupCount(this._groupLevel):(this._data.rowCount()+this._size-1)/this.size()>>>0),this._pageCount=t}return this._pageCount}rows(){return!this._rows&&this._data&&(this._rows=this._getRows(this._page)),this._rows=this._rows||[],this._rows}rowCount(){return this.rows().length}startRow(){return this.rows()[0]}endRow(){const t=this.rows();return t[t.length-1]}getRow(t){return this.rows()[t]}getPageRows(t){return this._getRows(t)}incPage(t){this.setPage(this._page+t)}getGroupItems(){return this._group instanceof $e?this.$_getRowGroupItems(this._group):this.$_getDataGroupItems(this._group)}$_reset(){this._pageCount=NaN,this._page=Math.max(0,Math.min(this.pageCount()-1,this._page)),this._rows=null}$_getPageRows(t){const e=this._data.rowCount(),s=[];for(let i=this._size*t,r=0;i<e&&r<this._size;i++,r++)s.push(i);return s}$_getRowGroupPageRows(t){const e=this._group,s=e.getLevelGroup(this._groupLevel,t);return e.getGroupRows(s)}$_getDataGroupPageRows(t){const e=this._group,s=e.getPageGroup(this._groupLevel,t);return e.getPageRows(s).map(t=>t.row())}$_getRowGroupItems(t){if(t){const e=t.getLevelGroup(this._groupLevel,this._page),s=e.level(),i=s+this._headerLevel,r=s+this._footerLevel,n=[];let o=e.header().index,a=e.footer().index;if(this._headerLevel<0){let s=-this._headerLevel,i=e.parent();for(;s>0&&i!==t.root();)n.push(i.header()),i=i.parent(),s--}else if(this._headerLevel>0){let e=0;for(;e<this._headerLevel&&t.getItem(o+1)instanceof be;)o++,e++}if(this._footerLevel>0){let e=0;for(;e<this._footerLevel&&t.getItem(a-1)instanceof Se;)a--,e++}for(let e=o;e<=a;e++){let s=t.getItem(e);s.vindex>=0&&((s instanceof be&&s.group.level()<i||s instanceof Se&&s.group.level()<r)&&(s=null),s&&n.push(s))}if(this._footerLevel<0){let s=-this._footerLevel,i=e.parent();for(;s>0&&i!==t.root();)n.push(i.footer()),i=i.parent(),s--}return n}return[]}$_getDataGroupItems(t){if(t){const e=t.getPageGroup(this._groupLevel,this._page),s=e._children[0].rows,i=e.level(),r=i+this._headerLevel,n=i+this._footerLevel;let o=s[0].index,a=s[s.length-1].index,h=[];if(r<0);else if(r>0);else{h.push(e.row);let s=e.row.index+1;for(;s<o;){const e=t.getItem(s++);e.vindex>=0&&h.push(e)}}for(let e=o;e<=a;e++){const s=t.getItem(e);s.vindex>=0&&s&&h.push(s)}if(n>0);else if(n<0);else if(e.footer){const s=e.footer.index;let i=h[h.length-1].index+1;for(;i<=s;){const e=t.getItem(i++);e.vindex>=0&&h.push(e)}}return h}return[]}}let Qe=0;class Ze extends e{constructor(){super(),this._clickable=!1,this._id=this.type()+Qe++}get id(){return this._id}set id(t){this._id=t}get hint(){return this._hint}set hint(t){this._hint=t}get style(){return this._style}set style(t){this._style=t}get styleCallback(){return this._styleCallback}set styleCallback(t){this._styleCallback=t}get clickable(){return this._clickable}set clickable(t){this._clickable=t}get onClick(){return this._onClick}set onClick(t){this._onClick=t}getProxy(){return{type:this.type(),id:this._id}}clicked(t,e,s){return this._doClicked(t,e,s)}longPressed(t,e,s){return this._doLongPressed(t,e,s)}_doClicked(t,e,s){if(this.clickable&&this._onClick)return this._clickArgs||(this._clickArgs={control:t.wrapperOrThis(),renderer:this.getProxy()}),this._clickArgs.row=e,this._clickArgs.field=s,this._onClick(this._clickArgs)}_doLongPressed(t,e,s){return!1}}class Xe extends Ze{get value(){return this._value}set value(t){this._value=t}}class Ke extends Xe{constructor(){super(...arguments),this._fitWidth=1,this._fitHeight=1}get fitWidth(){return this._fitWidth}set fitWidth(t){this._fitWidth=t}get fitHeight(){return this._fitHeight}set fitHeight(t){this._fitHeight=t}getFitWidth(){return isNaN(this._fitWidth)?1:this._fitWidth}getFitHeight(){return isNaN(this._fitHeight)?1:this._fitHeight}}class Je extends Xe{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get trueValues(){return this._trueValues&&this._trueValues.slice(0)}set trueValues(t){this._trueValues=t&&t.slice(0)}get trueValue(){return this._trueValue}set trueValue(t){this._trueValue=t}get falseValue(){return this._falseValue}set falseValue(t){this._falseValue=t}isTrue(t){return!0===t||!!this._trueValues&&this._trueValues.indexOf(t)>=0}getValueOf(t){return t?Tt(this._trueValue,!(this._trueValues&&this._trueValues.length>0)||this._trueValues[0]):Tt(this._falseValue,!1)}}class ts extends Ze{constructor(){super(),this._disabled=!1,this._borderless=!1,this._labelPosition=ee.BOTTOM,this.clickable=!0}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get buttonWidth(){return this._buttonWidth}set buttonWidth(t){this._buttonWidth=+t}get buttonHeight(){return this._buttonHeight}set buttonHeight(t){this._buttonHeight=+t}get borderless(){return this._borderless}set borderless(t){this._borderless=!0}get label(){return this._label}set label(t){this._label=t}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=t}getShapeSize(){let t=Math.max(0,this._shapeHeight);const e=Math.max(0,this._shapeWidth)||t||ts.SHAPE_SIZE;return t=t||e,{width:e,height:t}}type(){return ts.TYPE}getProxy(){const t=super.getProxy();return t.label=this._label,t}}ts.TYPE="button",ts.SHAPE_SIZE=20;class es extends Je{constructor(){super(...arguments),this._labelWrap=!0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get label(){return this._label}set label(t){this._label=t}get checkedLabel(){return this._checkedLabel}set checkedLabel(t){this._checkedLabel=t}get uncheckedLabel(){return this._uncheckedLabel}set uncheckedLabel(t){this._uncheckedLabel=t}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}get checkedStyle(){return this._checkedStyle}set checkedStyle(t){this._checkedStyle=t}get uncheckedStyle(){return this._uncheckedStyle}set uncheckedStyle(t){this._uncheckedStyle=t}getBoxWidth(){return It(this._boxWidth,this._boxSize)}getBoxHeight(){return It(this._boxHeight,this._boxSize)}getLabel(t){return t?this._checkedLabel||this._label:this._uncheckedLabel||this._label}type(){return es.TYPE}_doClicked(t,e,s){if(super._doClicked(t,e,s)||!s)return!0;{const i=t.data();if(!i.readOnly()){let t=i.getValue(e,s,!0);return t=this.isTrue(t)?this.getValueOf(!1):this.getValueOf(!0),i.updateValue(e,s,t),!0}}}}es.TYPE="check";class ss extends Xe{get gaugeSize(){return this._gaugeSize}set gaugeSize(t){this._gaugeSize=+t}get gaugeWidth(){return this._gaugeWidth}set gaugeWidth(t){this._gaugeWidth=+t}get gaugeHeight(){return this._gaugeHeight}set gaugeHeight(t){this._gaugeHeight=+t}getGaugeWidth(){return Nt(this._gaugeWidth,this._gaugeSize,ss.SIZE)}getGaugeHeight(){return Nt(this._gaugeHeight,this._gaugeSize,ss.SIZE)}}ss.SIZE=200;class is extends ss{constructor(){super(...arguments),this._startAngle=0,this._endAngle=360,this._clockwise=!0,this._minValue=0,this._maxValue=100}get centerX(){return this._centerX}set centerX(t){this._centerX=w.toNumber(t)}get centerY(){return this._centerY}set centerY(t){this._centerY=w.toNumber(t)}get radiusX(){return this._radiusX}set radiusX(t){this._radiusX=w.toNumber(t)}get radiusY(){return this._radiusY}set radiusY(t){this._radiusY=w.toNumber(t)}get startAngle(){return this._startAngle}set startAngle(t){this._startAngle=w.toNumber(t)}get endAngle(){return this._endAngle}set endAngle(t){this._endAngle=w.toNumber(t)}get clockwise(){return!1!==this._clockwise}set clockwise(t){this._clockwise=t}get minValue(){return this._minValue}set minValue(t){this._minValue=t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(t)}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getExtents(t,e){const s=It(this._centerX,t/2),i=It(this._centerY,e/2);return{cx:s,cy:i,rx:It(this._radiusX,s),ry:It(this._radiusY,i)}}getStyle(){return this._gaugeStyle||(this._gaugeStyle=Object.assign(Object.assign({},is.STYLE),this.style),this._gaugeStyle.fill="none"),this._gaugeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},is.VALUE_STYLE),this.valueStyle),this._activeStyle.fill="none"),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return is.TYPE}}is.TYPE="gauge",is.STYLE={stroke:"#eee",strokeWidth:"10px"},is.VALUE_STYLE={stroke:"#00c",strokeWidth:"10px"};class rs extends Ze{get iconSet(){return this._iconSet}set iconSet(t){this._iconSet=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}type(){return rs.TYPE}}rs.TYPE="icon";class ns extends Xe{constructor(){super(...arguments),this._decorative=!1,this._nullWidth=100}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get root(){return this._root}set root(t){this._root=t||""}get url(){return this._url}set url(t){this._url=t}get urlCallback(){return this._urlCallback}set urlCallback(t){this._urlCallback=t}get alt(){return this._alt}set alt(t){this._alt=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}get nullUrl(){return this._nullUrl}set nullUrl(t){this._nullUrl=t}get nullWidth(){return this._nullWidth}set nullWidth(t){this._nullWidth=t}get nullHeight(){return this._nullHeight}set nullHeight(t){this._nullHeight=t}getUrl(t){const e=this._root||"",s=this._urlCallback;let i,r=!1;if(s){const e=s({value:t});void 0!==e&&(i=e)}return i||(i=this._url||t),i||(i=this._nullUrl||"",r=!0),i&&(i=e+i),{url:i,isNull:r}}type(){return ns.TYPE}$_inflateUrl(t){}}ns.TYPE="image";class os extends Ke{constructor(){super(...arguments),this._autoHide=!1}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t}}class as extends os{get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t}type(){return as.TYPE}}as.TYPE="input";class hs extends os{type(){return hs.TYPE}}hs.TYPE="number";class ls extends Xe{constructor(){super(...arguments),this._hiddenChar="*"}get textFormatter(){return this._textFormatter}set textFormatter(t){this._textFormatter=t}get boolFormatter(){return this._boolFormatter}set boolFormatter(t){this._boolFormatter=t}get numberFormatter(){return this._numberFormatter}set numberFormatter(t){this._numberFormatter=t}get dateFormatter(){return this._dateFormatter}set dateFormatter(t){this._dateFormatter=t}get textFormat(){return this._textFormat}set textFormat(t){this._textFormat=t}get boolFormat(){return this._boolFormat}set boolFormat(t){this._boolFormat=t}get numberFormat(){return this._numberFormat}set numberFormat(t){this._numberFormat=t}get dateFormat(){return this._dateFormat}set dateFormat(t){this._dateFormat=t}get prefix(){return this._prefix}set prefix(t){this._prefix=t}get suffix(){return this._suffix}set suffix(t){this._suffix=t}get maxLength(){return this._maxLength}set maxLength(t){t=+t,this._maxLength=t}getText(t,e,s){const i=void 0!==this._text?this._text:e;if(null==i)return this._getAltText(t)||"";const r=typeof i;let n;if("string"===r){if(i){const e=this._textFormatter||qt(this._textFormat)||t.textFormatter();e&&(n=e(i))}}else if("number"===r||"bigint"===r)if(Number.isNaN(i))"string"==typeof this._nanText&&(n=this._nanText);else{const e=this._numberFormatter||Yt(this._numberFormat)||t.numberFormatter();e&&(n=e(i))}else if(i instanceof Date){const e=this._dateFormatter||Qt(this._dateFormat)||t.dateFormatter();n=e?e(i):i.toLocaleDateString()}else if("boolean"===r){const e=this._boolFormatter||jt(this._boolFormat)||t.boolFormatter();e&&(n=e(i))}if(void 0===n&&(n=String(i)||""),n){if(this._hiddenRange&&this._hiddenChar){const t=this._hiddenRange[0];if(t>=0){const e=n.length;let s=It(this._hiddenRange[1],e);s<0&&(s=n.length+s),s>t&&(s=Math.min(s,e),n=n.substring(0,t)+this._hiddenChar.repeat(s-t)+n.substring(s))}}const t=this._sepReg||s;t&&(n=n.replace(t,"\n")),this._maxLength>=0&&(n=n.substring(0,this._maxLength))}return this._prefix&&(n=this._prefix+n),this._suffix&&(n+=this._suffix),n}_getAltText(t){return""}}class ds extends ls{constructor(){super(...arguments),this._wrap=!1,this._singleLine=!1}get wrap(){return this._wrap}set wrap(t){t=this.toBool(t),this._wrap=t}get lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}set lineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._sepReg=w.makeLineSeparator(this._lineSeparator))}get singleLine(){return this._singleLine}set singleLine(t){this._singleLine=t}get text(){return this._text}set text(t){this._text=t}get hiddenChar(){return this._hiddenChar}set hiddenChar(t){this._hiddenChar=t}get hiddenRange(){return this._hiddenRange?this._hiddenRange.slice(0):void 0}set hiddenRange(t){this._hiddenRange=t?t.slice(0):void 0}get nanText(){return this._nanText}set nanText(t){this._nanText=t}type(){return ds.TYPE}}ds.TYPE="text";class _s extends ds{get root(){return this._root}set root(t){this._root=t||""}get linkField(){return this._linkField}set linkField(t){this._linkField=t}get link(){return this._link}set link(t){this._link=t}getLink(t){let e=this._link;return!e&&this._linkField&&(e=t.getValue(this._linkField)),this._root&&(e=this._root+e),e||""}type(){return _s.TYPE}_getAltText(t){return this.getLink(t)}}_s.TYPE="link";class cs extends Ke{constructor(){super(...arguments),this._minValue=0,this._maxValue=100}get barWidth(){return this._barWidth}set barWidth(t){this._barWidth=this.toNum(t)}get barHeight(){return this._barHeight}set barHeight(t){this._barHeight=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}type(){return cs.TYPE}}cs.TYPE="progress";class us extends cs{get lowValue(){return this._lowValue}set lowValue(t){this._lowValue=+t}get highValue(){return this._highValue}set highValue(t){this._highValue=+t}get optimumValue(){return this._optimumValue}set optimumValue(t){this._optimumValue=+t}type(){return us.TYPE}_checkMax(t){}}var gs,ps,fs;us.TYPE="meter",function(t){t.CANVAS="canvas",t.SVG="svg"}(gs||(gs={})),function(t){t.L="L",t.M="M",t.Q="Q",t.H="H"}(ps||(ps={}));class ws extends Xe{constructor(){super(...arguments),this._qrcodeSize=ws.DEF_SIZE,this._correctionLevel=ps.Q}get output(){return this._output}set output(t){this._output=t}get qrcodeWidth(){return this._qrcodeWidth}set qrcodeWidth(t){this._qrcodeWidth=Math.max(+t,ws.MIN_SIZE)}get qrcodeHeight(){return this._qrcodeHeight}set qrcodeHeight(t){this._qrcodeHeight=Math.max(+t,ws.MIN_SIZE)}get qrcodeSize(){return this._qrcodeSize}set qrcodeSize(t){this._qrcodeSize=Math.max(+t,ws.MIN_SIZE)}get correctionLevel(){return this._correctionLevel}set correctionLevel(t){this._correctionLevel=t}getQrcodeSize(){return{w:Nt(this._qrcodeWidth,this._qrcodeSize,ws.DEF_SIZE),h:Nt(this._qrcodeHeight,this._qrcodeSize,ws.DEF_SIZE)}}type(){return ws.TYPE}}ws.TYPE="qrcode",ws.DEF_SIZE=100,ws.MIN_SIZE=76;class ms extends Ze{constructor(){super(...arguments),this._boxGap=5,this._itemGap=10,this._labelWrap=!0}get labels(){return this._labels&&this._labels.slice(0)}set labels(t){w.equalArrays(t,this._labels)||(this._labels=t&&t.slice(0))}get values(){return this._values&&this._values.slice(0)}set values(t){w.equalArrays(t,this._values)||(this._values=t&&t.slice(0))}get valueCount(){return this._values?this._values.length:0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get boxGap(){return this._boxGap}set boxGap(t){this._boxGap=this.toNum(t,0)}get itemGap(){return this._itemGap}set itemGap(t){this._itemGap=this.toNum(t,0)}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}type(){return ms.TYPE}_doClicked(t,e,s){return super._doClicked(t,e,s)}}ms.TYPE="radiogroup";class ys extends es{get group(){return this._group}set group(t){this._group=t}type(){return ys.TYPE}}ys.TYPE="radio";class vs extends Ze{constructor(){super(...arguments),this._shape=vs.DEF_SHAPE,this._shapeSize=vs.DEF_SIZE,this._decorative=!1}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=+t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=+t}get shapeSize(){return this._shapeSize}set shapeSize(t){this._shapeSize=+t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getShapeName(){return this._shape||vs.DEF_SHAPE}getShapeWidth(){return Nt(this._shapeWidth,this._shapeSize,this._shapeHeight)}getShapeHeight(){return Nt(this._shapeHeight,this._shapeSize,this._shapeWidth)}type(){return vs.TYPE}}vs.TYPE="shape",vs.DEF_SHAPE="@star",vs.DEF_SIZE=20;class bs extends vs{constructor(){super(...arguments),this._shapeCount=bs.SHAPE_COUNT,this._minValue=0,this._maxValue=bs.SHAPE_COUNT,this._integral=!0,this._editable=!1}get shapeCount(){return this._shapeCount}set shapeCount(t){this._shapeCount=Math.max(this.toNum(+t,0))}get minValue(){return this._minValue}set minValue(t){this._minValue=this.toNum(+t,0)}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(+t,0)}get integral(){return this._integral}set integral(t){this._integral=t}get editable(){return this._editable}set editable(t){this._editable=t}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getStyle(){return this._shapeStyle||(this._shapeStyle=Object.assign(Object.assign({},bs.STYLE),this.style)),this._shapeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},bs.VALUE_STYLE),this.valueStyle)),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return bs.TYPE}}bs.TYPE="rating",bs.SHAPE_COUNT=3,bs.STYLE={stroke:"#0088ff",strokeWidth:"2px"},bs.VALUE_STYLE={fill:"#0088ff",strokeWidth:"0px"},function(t){t.NONE="none",t.GROUP="group",t.LABEL="label",t.ALL="all"}(fs||(fs={}));class Ss extends Ke{constructor(){super(...arguments),this._sortMode=fs.NONE,this._sortDirection=Dt.ASCENDING,this._itemsChanged=!0}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get labels(){return this._labels?this._labels.slice(0):null}set labels(t){w.equalArrays(t,this._labels)||(this._labels=t?t.slice(0):null,this._itemsChanged=!0)}get values(){return this._values?this._values.slice(0):null}set values(t){w.equalArrays(t,this._values)||(this._values=t?t.slice(0):null,this._itemsChanged=!0)}get groups(){return this._groups?this._groups.slice(0):null}set groups(t){if(!w.equalArrays(t,this._groups)){if(this._groups=t?t.slice(0):null,this._groupValues=[],this._groupLabels=[],t)for(let e of t){const t=e.values,s=e.labels;if(t)for(let e=0;e<t.length;e++)this._groupValues.push(t[e]),this._groupLabels.push(s[e])}this._itemsChanged=!0}}get isGrouped(){return this._groups&&this._groups.length>0}get itemsChanged(){return this._itemsChanged}get sortMode(){return this._sortMode}set sortMode(t){this._sortMode=t}get sortDirection(){return this._sortDirection}set sortDirection(t){t!==this._sortDirection&&(this._sortDirection=t,this._itemsChanged=!0)}type(){return Ss.TYPE}}Ss.TYPE="select";class Cs extends Ze{constructor(){super(...arguments),this._space=Cs.SPACE}get space(){return this._space}set space(t){this._space=+t||0}type(){return Cs.TYPE}}Cs.TYPE="spacer",Cs.SPACE=10;class xs extends Xe{constructor(){super(...arguments),this._pointWidth=10,this._minPadding=.1}get chartWidth(){return this._chartWidth}set chartWidth(t){this._chartWidth=t}get chartHeight(){return this._chartHeight}set chartHeight(t){this._chartHeight=t}get pointWidth(){return this._pointWidth}set pointWidth(t){this._pointWidth=Math.max(1,+t,0)}get baseValue(){return this._baseValue}set baseValue(t){this._baseValue=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}get minPadding(){return this._minPadding}set minPadding(t){this._minPadding=this.toNum(t)}get firstStyle(){return this._firstStyle}set firstStyle(t){this._firstStyle=t}get lastStyle(){return this._lastStyle}set lastStyle(t){this._lastStyle=t}get minStyle(){return this._minStyle}set minStyle(t){this._minStyle=t}get maxStyle(){return this._maxStyle}set maxStyle(t){this._maxStyle=t}get pointStyle(){return this._pointStyle}set pointStyle(t){this._pointStyle=t}}class Rs extends xs{type(){return Rs.TYPE}}Rs.TYPE="sparkline";class Es extends xs{constructor(){super(...arguments),this._pointSize=.7,this._belowSize=.4}get pointSize(){return this._pointSize}set pointSize(t){this._pointSize=+t||.1}get belowSize(){return this._belowSize}set belowSize(t){this._belowSize=this.toNum(t)}get belowStyle(){return this._belowStyle}set belowStyle(t){this._belowStyle=t}type(){return Es.TYPE}}Es.TYPE="sparkbar";class Vs extends Xe{constructor(){super(...arguments),this._svgWidth=Vs.DEF_SIZE,this._svgHeight=Vs.DEF_SIZE,this._vboxWidth=NaN,this._vboxHeight=NaN,this._decorative=!1}get shapes(){return Array.isArray(this._shapes)?this._shapes.slice(0):this._shapes}set shapes(t){this._shapes=t}get svgWidth(){return this._svgWidth}set svgWidth(t){this._svgWidth=t}get svgHeight(){return this._svgHeight}set svgHeight(t){this._svgHeight=t}get vboxWidth(){return this._vboxWidth}set vboxWidth(t){this._vboxWidth=t}get vboxHeight(){return this._vboxHeight}set vboxHeight(t){this._vboxHeight=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getVboxWidth(){return It(this._vboxWidth,this._vboxHeight)}getVboxHeight(){return It(this._vboxHeight,this._vboxWidth)}getSvgWidth(){return It(this._svgWidth,this._svgHeight)}getSvgHeight(){return It(this._svgHeight,this._svgWidth)}type(){return Vs.TYPE}}Vs.TYPE="svg",Vs.DEF_SIZE=24;class $s extends Je{get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}type(){return $s.TYPE}_doClicked(t,e,s){return super._doClicked(t,e,s)}}$s.TYPE="switch";class As extends ds{get target(){return this._target}set target(t){this._target=t}type(){return As.TYPE}}As.TYPE="label";class Ds extends Ze{constructor(){super(...arguments),this._letter=Ds.DEF_LETTER,this._offsetX=0,this._offsetY=.1,this._decorative=!1}get letter(){return this._letter}set letter(t){this._letter=t?t.charAt(0):""}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=this.toNum(t,0)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=this.toNum(t,0)}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getChar(){return this._letter||Ds.DEF_LETTER}type(){return Ds.TYPE}}Ds.TYPE="letter",Ds.DEF_LETTER="♥";class ks extends Ze{constructor(){super(...arguments),this._thickness=1}get dir(){return this._dir}set dir(t){this._dir=t}get thickness(){return this._thickness}set thickness(t){this._thickness=this.toNum(t,0)}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}get lineStyle(){return this._lineStyle}set lineStyle(t){this._lineStyle=t}type(){return ks.TYPE}}ks.TYPE="line";const Ls="http://www.w3.org/2000/svg";class Ts extends e{static create(t){return t.createElementNS(Ls,"svg")}constructor(t,e){super(),t instanceof Document?this.svg=t.createElementNS(Ls,"svg"):this.svg=t,e&&this.svg.classList.add(e)}_doDestory(){this.svg=null}attach(t){return t.appendChild(this.svg),this}detach(){this.svg.parentElement&&this.svg.remove()}setClass(t){this.svg.setAttribute("class",""),t&&this.svg.classList.add(t)}addClass(t){t&&this.svg.classList.add(t)}setStyle(t){t&&Object.assign(this.svg.style,t)}setViewSize(t,e){isNaN(t)||(e=e||t,de.resizeSVG(this.svg,t,e))}clearViewSize(){this.svg.removeAttribute("viewBox")}setSize(t,e){this.svg.style.width=isNaN(t)?"":t+"px",this.svg.style.height=isNaN(e)?"":e+"px"}fillSize(){this.svg.style.width="100%",this.svg.style.height="100%"}makeBackground(t,e){return this.svg.style.pointerEvents="none",this.svg.style.verticalAlign="middle",!isNaN(t)&&de.resize(this.svg,t,e||t),this}clear(){de.clearChildren(this.svg)}rect(t,e,s,i,r){const n=this.svg.ownerDocument.createElementNS(Ls,"rect");return n.x.baseVal.value=t,n.y.baseVal.value=e,n.width.baseVal.value=s,n.height.baseVal.value=i,r&&Object.assign(n.style,r),this.svg.appendChild(n),n}circle(t,e,s,i){const r=this.svg,n=r.ownerDocument.createElementNS(Ls,"circle");return n.cx.baseVal.value=t,n.cy.baseVal.value=e,n.r.baseVal.value=s,i&&Object.assign(n.style,i),r.appendChild(n),n}line(t,e,s,i,r){let n=`M ${t} ${e} L ${s} ${i}`;const o=this._createPath(n);return r&&Object.assign(o.style,r),o}polyline(t,e){let s=`M ${t[0]} ${t[1]} L`;for(let e=1,i=t.length/2>>0;e<i;e++)s+=` ${t[2*e]} ${t[2*e+1]}`;const i=this._createPath(s);return e&&Object.assign(i.style,e),i.style.fill="none",i}polylgon(t,e){let s=`M ${t[0]} ${t[1]} L`;for(let e=1,i=t.length/2>>0;e<i;e++)s+=` ${t[2*e]} ${t[2*e+1]}`;s+="z";const i=this._createPath(s);return e&&Object.assign(i.style,e),i}quadratic(t,e,s,i,r,n,o){const a=`M ${t} ${e} Q ${s} ${i} ${r} ${n} z`,h=this._createPath(a);return o&&Object.assign(h.style,o),h}arc(t,e,s,i,r,n,o,a){n=Math.min(359.99999,n);const h=o?r+n:r-n,l=this.$_angleToPos(t,e,s,i,r,o),d=this.$_angleToPos(t,e,s,i,h,o),_=o?h-r>=180?1:0:h-r<=180?1:0,c=o?1:0,u=`M${l.x},${l.y} A${s},${i},0,${_},${c},${d.x},${d.y}`,g=this._createPath(u);return a&&Object.assign(g.style,a),g}path(t){return this._createPath(t)}setShape(t,e=!1){return e&&this.clear(),this.setViewSize(t.width,t.height),this._createPath(t.path),this}_createPath(t){const e=this.svg.ownerDocument.createElementNS(Ls,"path");return e.setAttribute("d",t),this.svg.appendChild(e),e}$_angleToPos(t,e,s,i,r,n){return r=r*Math.PI/180,{x:t+s*Math.cos(r),y:e+i*Math.sin(r)}}_animateRevert(t,e,s,i){const r=this.svg.ownerDocument.createElementNS(Ls,"animate");r.setAttribute("attributeName","d"),r.setAttribute("dur",i+"ms"),r.setAttribute("values",e+";"+s+";"+e),t.appendChild(r)}}var Ms,Ps;!function(t){t.DEFAULT="default",t.SPOKES="spokes"}(Ms||(Ms={}));class Is{static render(t,e,s){switch(s.type){case Ms.SPOKES:Is.spoke(t,e,s);break;case Ms.DEFAULT:default:Is.default(t,e,s)}}static default(t,e,s){const i=getComputedStyle(e),r=s.width/2,n=s.height/2,o=2*Math.min(r,n)/3,a=s.width<=30,h=a?2:5,l="#f0f0f0",d=[l,l,i.fill||"#404040",l,l].join(";"),_=It(s.itemCount,12),c=It(s.duration,1e3)+"ms";for(let s=0;s<_;s++){const i=t.createElementNS(Ls,"circle"),l=s/_*Math.PI*2;i.cx.baseVal.value=r+o*Math.cos(l),i.cy.baseVal.value=n+o*Math.sin(l),i.r.baseVal.value=h;let u=t.createElementNS(Ls,"animate");de.setAttrs(u,Object.assign({},a?this.DEFAULT_SMALL:this.DEFAULT_ANI,{dur:c,begin:-(_-1-s)/_+"s"})),i.appendChild(u),u=t.createElementNS(Ls,"animate"),de.setAttrs(u,Object.assign({},this.DEFAULT_FILL,{values:d,dur:c,begin:-(_-1-s)/_+"s"})),i.appendChild(u),e.appendChild(i)}}static spoke(t,e,s){const i=getComputedStyle(e),r=s.width/2,n=s.height/2,o=2*Math.min(r,n)/5,a=2*Math.min(r,n)/3,h="#f0f0f0",l=[h,h,i.stroke||"#404040",h,h].join(";"),d=It(s.itemCount,10),_=It(s.duration,1e3)+"ms";for(let s=0;s<d;s++){const i=s/d*Math.PI*2,n=r+o*Math.cos(i),c=r+o*Math.sin(i),u=r+a*Math.cos(i),g=r+a*Math.sin(i),p=t.createElementNS(Ls,"path"),f=t.createElementNS(Ls,"animate");p.setAttribute("d",`M ${n} ${c} L ${u} ${g}`),p.style.stroke=h,de.setAttrs(f,Object.assign({},this.SPOKE_ANI,{values:l,begin:-(d-1-s)/d+"s",dur:_})),p.appendChild(f),e.appendChild(p)}}static arc(t,e,s){}}Is.DEFAULT_ANI={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"2;3;5;3;2"},Is.DEFAULT_SMALL={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"0.5;1;2;1;0.5"},Is.DEFAULT_FILL={attributeName:"fill",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"},Is.SPOKE_ANI={attributeName:"stroke",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"};class Ns extends Ze{constructor(){super(...arguments),this._spinnerType=Ms.DEFAULT,this._spinnerSize=Ns.SPINNER_SIZE,this._duration=1e3}get spinnerType(){return this._spinnerType}set spinnerType(t){this._spinnerType=t}get spinnerWidth(){return this._spinnerWidth}set spinnerWidth(t){this._spinnerWidth=+t}get spinnerHeight(){return this._spinnerHeight}set spinnerHeight(t){this._spinnerHeight=+t}get spinnerSize(){return this._spinnerSize}set spinnerSize(t){this._spinnerSize=+t}get itemCount(){return this._wheelCount}set itemCount(t){this._wheelCount=t}get duration(){return this._duration}set duration(t){this._duration=t}getSpinnerWidth(){return It(this._spinnerWidth,this._spinnerSize)}getSpinnerHeight(){return It(this._spinnerHeight,this._spinnerSize)}type(){return Ns.TYPE}}Ns.TYPE="spinner",Ns.SPINNER_SIZE=120,function(t){t.DEFAULT="default",t.VISIBLE="visible",t.HIDDEN="hidden"}(Ps||(Ps={}));class Os extends Xe{constructor(){super(...arguments),this._orderVisibility=Ps.DEFAULT}get field(){return this._field}set field(t){this._field=t}get label(){return this._label}set label(t){this._label=t}get orderVisibility(){return this._orderVisibility}set orderVisibility(t){this._orderVisibility=t}type(){return Os.TYPE}}Os.TYPE="field";class Bs extends Ze{get placeholders(){return this._placeholders&&this._placeholders.slice(0)}set placeholders(t){this._placeholders=t&&t.slice(0)}type(){return Bs.TYPE}}Bs.TYPE="dummy";class Fs extends ls{constructor(){super(...arguments),this._useInner=!1}get domid(){return this._domid}set domid(t){this._domid=t}get useInner(){return this._useInner}set useInner(t){this._useInner=t}get html(){return this._html}set html(t){this._html=t}type(){return Fs.TYPE}}Fs.TYPE="html";class zs extends os{type(){return zs.TYPE}}zs.TYPE="date";class Hs extends os{type(){return Hs.TYPE}}Hs.TYPE="time";class Ws extends os{type(){return Ws.TYPE}}Ws.TYPE="datetime";class Gs extends Xe{get chartSize(){return this._chartSize}set chartSize(t){this._chartSize=+t}get chartWidth(){return this._chartWidth}set chartWidth(t){this._chartWidth=+t}get chartHeight(){return this._chartHeight}set chartHeight(t){this._chartHeight=+t}get chartConfig(){return this._chartConfig}set chartConfig(t){this._chartConfig=t}getChartWidth(){return Nt(this._chartWidth,this._chartSize,Gs.SIZE)}getChartHeight(){return Nt(this._chartHeight,this._chartSize,Gs.SIZE)}}Gs.SIZE=200;const Us={button:ts,check:es,date:zs,datetime:Ws,dummy:Bs,field:Os,gauge:is,html:Fs,icon:rs,image:ns,input:as,label:As,letter:Ds,line:ks,link:_s,meter:us,number:hs,progress:cs,qrcode:ws,radio:ys,radiogroup:ms,rating:bs,select:Ss,shape:vs,spacer:Cs,sparkbar:Es,sparkline:Rs,spinner:Ns,svg:Vs,switch:$s,text:ds,time:Hs,hichart:Gs};class qs{static getRenderer(t,e){if(w.isObject(t)){let s=("string"==typeof t.type?t.type:null)||e;if(s in Us)return(new Us[s]).assignProps(t)}else{if("string"!=typeof t){const t=Us[e];return t?new t:void 0}if((t=t.toLowerCase())in Us)return new Us[t]}}static createRenderer(t){return new Us[t]}}class js{constructor(t){w.isObject(t)&&Object.assign(this,t)}}class Ys extends e{constructor(t,e){super(),this._visible=!0,this._id=t,this._childProps=e||{}}loadProps(t){return w.isObject(t)&&this._doLoadProps(t),this}id(){return this._id}getChildProp(t){return this._childProps[t]}get visible(){return this._visible}set visible(t){this._visible=this.toBool(t)}get width(){return this._width}set width(t){"string"==typeof t&&t.endsWith("*")?(this.width=0,this._childProps.hgrow=It(t,1)):t!=this._width&&(this._width=t,this._widthDim=$(t,!0))}get height(){return this._height}set height(t){"string"==typeof t&&t.endsWith("*")?(this.height=0,this._childProps.vgrow=It(t,1)):t!=this._height&&(this._height=t,this._heightDim=$(t,!0))}getLeft(){return this._leftDim&&this._leftDim.fixed?this._leftDim.size:NaN}getRight(){return this._rightDim&&this._rightDim.fixed?this._rightDim.size:NaN}getTop(){return this._topDim&&this._topDim.fixed?this._topDim.size:NaN}getBottom(){return this._bottomDim&&this._bottomDim.fixed?this._bottomDim.size:NaN}getRelativeLeft(){return this._leftDim&&!this._leftDim.fixed?this._leftDim.size:NaN}getRelativeRight(){return this._rightDim&&!this._rightDim.fixed?this._rightDim.size:NaN}getRelativeTop(){return this._topDim&&!this._topDim.fixed?this._topDim.size:NaN}getRelativeBottom(){return this._bottomDim&&!this._bottomDim.fixed?this._bottomDim.size:NaN}getLeftIn(t){return D(this._leftDim,t)}getRightIn(t){return D(this._rightDim,t)}getTopIn(t){return D(this._topDim,t)}getBottomIn(t){return D(this._bottomDim,t)}_doLoadProps(t){this.assignProps(t);const e=this._childProps;for(let s in this._childProps)t.hasOwnProperty(s)&&void 0!==t[s]&&(e[s]=t[s]);this._leftDim=$(e.left,!0),this._rightDim=$(e.right,!0),this._topDim=$(e.top,!0),this._bottomDim=$(e.bottom,!0)}}class Qs extends Ys{constructor(t,e,s,i,r){super(t,r),this._valign=Vt.MIDDLE,this._style=s,this.renderer=i,t&&i&&(i.id=t),this.value=e}get align(){return this._align}set align(t){t===Et.RIGHT||Et.CENTER?this._align=t:t=Et.LEFT}get valign(){return this._valign}set valign(t){t===Vt.TOP||t===Vt.BOTTOM?this._valign=t:this._valign=Vt.MIDDLE}get class(){return this._class}set class(t){this._class=t}get style(){return this._style}get styleObj(){return"string"!=typeof this._style&&this._style}setRow(t,e,s){this.dv=t,this.row=e,this.gindex=s}getField(){}getValue(){return this.value}}class Zs extends Qs{constructor(t,e,s,i,r,n,o){if(super(t,i,r,n,o),e){const t=w.getFieldProp(e);t?(this.field=t.field,this.fprop=t.props):this.field=e}this.fields=s}getField(){return this.field}getValue(){if(void 0===this.value&&this.row>=0)return this.fprop?this.dv.getProp(this.row,this.field,this.fprop,!0):this.dv.getValue(this.row,this.field,!0)}}class Xs extends Qs{constructor(t,e,s,i,r){super(t,e,s,i,r)}}var Ks,Js;!function(t){t.SHRINK="shrink",t.WRAP="wrap",t.OVERFLOW="overflow"}(Ks||(Ks={}));class ti extends Ys{constructor(t,e,s,i){super(t,i),this._noShrink=!1,this._style=s,this._children=e,e&&e.forEach(t=>t._parent=this)}get style(){return this._style}childCount(){return this._children?this._children.length:0}children(){return this._children?this._children.slice(0):[]}scrollable(){return!1}getChild(t){return this._children[t]}tagBy(t){return function e(s){for(const i of s._children){if(i.tag===t)return i;if(i instanceof ti){const t=e(i);if(t)return t}}}(this)}literalBy(t){const e=this.tagBy(t);return e instanceof Xs&&e}fieldBy(t){return function e(s){for(const i of s._children){if(i instanceof Zs&&i.field===t)return i;if(i instanceof ti){const t=e(i);if(t)return t}}}(this)}setNoShrink(t){this._noShrink=t}canShrink(){return!this._noShrink}canGrow(){return!0}canContainHspace(){return!1}canContainVspace(){return!1}setRow(t,e,s){this.row=e,this._children.forEach(i=>i.setRow(t,e,s))}getOrderedChildren(){return this._children}getSimples(){let t=[];return this.getOrderedChildren().forEach(e=>{e instanceof Qs?t.push(e):e instanceof ti&&(t=t.concat(e.getSimples()))}),t}}ti.CHILD_PROPS=js;class ei extends e{constructor(t){super(),this._dom=t.dom,this._tokens=t.tokens,this.tid=t.tid}clone(){return this._dom.cloneNode(!0)}setRow(t,e,s){}inflate(t){this._tokens.forEach(e=>{e.value=e.param.inflate(null,null,null,t)})}apply(t){this._tokens.forEach(e=>{const s=de.childByPath(t,e.node);e.attr?s.setAttribute(e.attr,e.value):s.nodeValue=e.value})}}class si extends js{constructor(){super(...arguments),this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0}}class ii extends ti{}ii.CHILD_PROPS=si;class ri extends ii{get type(){return ri.TYPE}}ri.TYPE="frame",ri.CHILD_PROPS=class extends si{};class ni extends js{constructor(){super(...arguments),this.shrink=void 0,this.grow=void 0}}class oi extends ti{constructor(){super(...arguments),this._itemsArrange=At.START,this._itemGap=oi.DEF_ITEM_GAP,this._reversed=!1}get itemsArrange(){return this._itemsArrange}set itemsArrange(t){this._itemsArrange=t}get itemGap(){return this._itemGap}set itemGap(t){isNaN(t)||(this._itemGap=t)}get reversed(){return this._reversed}set reversed(t){this._reversed=t}}oi.DEF_ITEM_GAP=4;class ai extends oi{constructor(){super(...arguments),this._itemsAlign=Et.CENTER}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){this._itemsAlign=t}get type(){return ai.TYPE}canContainVspace(){return!0}}ai.TYPE="vlinear",ai.CHILD_PROPS=class extends ni{constructor(){super(...arguments),this.left=void 0,this.right=void 0}};class hi extends oi{constructor(){super(...arguments),this._itemsAlign=Vt.MIDDLE}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){this._itemsAlign=t}get type(){return hi.TYPE}canContainHspace(){return!0}}hi.TYPE="hlinear",hi.CHILD_PROPS=class extends ni{constructor(){super(...arguments),this.top=void 0,this.bottom=void 0}};class li extends ii{get activeChild(){return this._activeChild}set activeChild(t){this._activeChild=t}get activeField(){return this._activeField}set activeField(t){this._activeField=t}get activeCallback(){return this._activeCallback}set activeCallback(t){this._activeCallback=t}getActiveChild(t,e){return Mt(this._activeCallback&&this._activeCallback({ctx:t,row:e}),this._activeChild,this._idValue)}get type(){return li.TYPE}setRow(t,e,s){super.setRow(t,e,s),this._activeField&&(this._idValue=t.getValue(e,this._activeField,!0))}}li.TYPE="stack",li.CHILD_PROPS=class extends si{},function(t){t.NONE="none",t.HEAD="head",t.LEFT="left",t.TOP="top"}(Js||(Js={}));class di extends ti{constructor(){super(...arguments),this._labelPosition=Js.LEFT,this._syncLabelWidth=!0,this._labelGap=10,this._itemGap=12}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t}get labelWidth(){return this._labelWidth}set labelWidth(t){t!==this._labelWidth&&(this._labelWidth=t,this._labelWidthDim=$(t,!0))}get minLabelWidth(){return this._minLabelWidth}set minLabelWidth(t){t!==this._minLabelWidth&&(this._minLabelWidth=t,this._minLabelWidthDim=$(t,!0))}get maxLabelWidth(){return this._maxLabelWidth}set maxLabelWidth(t){t!==this._maxLabelWidth&&(this._maxLabelWidth=t,this._maxLabelWidthDim=$(t,!0))}get syncLabelWidth(){return this._syncLabelWidth}set syncLabelWidth(t){this._syncLabelWidth=t}get labelGap(){return this._labelGap}set labelGap(t){this._labelGap=It(t,0)}get labelStyle(){return this._labelStyle}set labelStyle(t){this._labelStyle=t}get itemGap(){return this._itemGap}set itemGap(t){this._itemGap=It(t,0)}getLabelWidth(t){const e=D(this._minLabelWidthDim,t),s=D(this._maxLabelWidthDim,t);return{szLabel:D(this._labelWidthDim,t),szMin:e,szMax:s}}get type(){return di.TYPE}canContainVspace(){return!0}}di.TYPE="form",di.CHILD_PROPS=class extends js{constructor(){super(...arguments),this.label=void 0,this.labelWidth=void 0,this.imageUrl=void 0,this.imageWidth=void 0,this.imageHeight=void 0}};class _i extends ti{constructor(){super(...arguments),this._cols=1,this._rows=1}get cols(){return this._cols}set cols(t){(t=w.toNumber(t,1)>>>0)>0&&(this._cols=t)}get rows(){return this._rows}set rows(t){(t=w.toNumber(t,1)>>>0)>0&&(this._rows=t)}get type(){return _i.TYPE}loadProps(t){return super.loadProps(t)}}_i.TYPE="Grid",_i.CHILD_PROPS=class extends js{constructor(){super(...arguments),this.col=0,this.row=0,this.colspan=1,this.rowspan=1}};class ci extends ti{constructor(t,e,s,i){super(t,e,s,i),this._children.length>1&&(this._children.length=1)}get type(){return ci.TYPE}}ci.TYPE="scroll",ci.CHILD_PROPS=class extends js{};const ui={vlinear:ai,hlinear:hi,frame:ri,stack:li,scroll:ci,form:di,grid:_i},gi={defRender:"dummy"};class pi{constructor(){}layoutFromTemplate(t,e,s,i,r,n){this._target=e,this._inflater=n,this._inflater.templateParams=r.params,r.target=e;try{let n,o;if(t===gi)n=this.$_loadLayout(r.id,t,r.skeleton||Oe,null,gi.defRender);else{const a=e.defRenderer||"text",h=s&&r.collapsed,l=r.detailed,d=r.extra,_=h||i&&l||r.layout;if(o=h?r.collapsedId:i&&l?r.detailId:r.id,n=this.$_loadLayout(o,t,_,null,a),i){const e=!l&&d&&this.$_loadLayout(d.id,t,d,null,a);e&&(n._extra=e)}}return n.tid=o,n}finally{this._inflater=void 0,this._target=void 0}}$_inflate(t,e,s){return s instanceof bt?s.inflate(t,this._target,e,this._inflater):s}$_loadLayout(t,e,s,i,r){if(s instanceof Te){const n=ui[s.layout],o=this.$_loadParams(e,null,s.style);let a;if(n||N(b.unknownLayoutType,s.layout),s.children){a=[];for(let t of s.children){const s=t.props,i=new n.CHILD_PROPS;let o;if(t instanceof Le){const n=t.fields&&w.checkArray(this.$_inflate(e,null,t.fields)),a=t.field?this.$_inflate(e,null,t.field):null,h=this.$_loadParams(e,a,t.style),l=t.renderer?qs.getRenderer(this.$_loadParams(e,a,t.renderer),r):qs.createRenderer(r);if(l){for(const s in t.rendererStyles)l[s]=this.$_loadParams(e,a,t.rendererStyles[s]);l.tid=t.tid}const d=this.$_inflate(e,a,t.value);o=a||n?new Zs(t.id,a,n,d,h,l,i):new Xs(t.id,d,h,l,i),o&&(o.classCallback=t.classCallback,o.styleCallback=t.styleCallback,s&&o.loadProps(this.$_loadParams(e,a,s)))}else t instanceof Te&&(o=this.$_loadLayout(t.id,e,t,i,r).loadProps(s));o&&(o.tid=t.tid,o.tag=t.tag,a.push(o))}}const h=this.$_loadParams(e,null,s.props);return new n(t,a,o,i).loadProps(h)}if(s instanceof Me){const t=new ei(s);return t.inflate(this._inflater),t}}$_loadParams(t,e,s){if(s instanceof bt)return s.inflate(t,this._target,e,this._inflater);if(w.isObject(s)){const i={};for(let r in s)i[r]=this.$_inflate(t,e,s[r]);return i}return s}}pi.Instance=new pi;let fi=0;const wi=new M,mi=new M,yi=function(t,e,s,i){if(s=s||i.name){if(i){let r;return i instanceof Ie||i instanceof ze?r=i:w.isObject(i.template)?r=new Ie(t,i):Array.isArray(i.cells)&&(r=new ze(t,i)),e.add(s,r),r}e.remove(s)}},vi=function(){return"template_"+fi++};[{name:"@it_list_header",description:"List header template",props:{},template:{layout:"hlinear",style:"${@style}",children:[{value:"${@caption;Header}",tag:"caption",width:"*",style:{textAlign:"${@caption-align}",fontWeight:"bold",color:"${@caption-color;#333}"}}]}},{name:"@it_list_footer",description:"List footer template",props:{},template:{layout:"hlinear",children:[{value:"Σ",style:{fontSize:"19px"},tag:"sigma"},{width:"*",renderer:"spacer",tag:"spacer"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_name_value",description:"왼쪽 끝에 이름, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},rowStyle:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",left:0,width:"${name_width}",height:"${name_height}",style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",right:0,width:"${value_width}",height:"${value_height}",style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_detail_value",description:"왼쪽 끝에 이름과 그 아래 설명, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",width:"${name_width}",height:"${name_height}",left:0,style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",width:"${value_width}",height:"${value_height}",right:0,style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_group_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]},collapsed:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"},{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_group_footer",description:"Group footer template",props:{},template:{layout:"hlinear",children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_datagroup_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]}},{name:"@it_datagroup_footer",description:"Group footer template",props:{},template:{layout:"hlinear",style:{fontSize:"14px "},children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:"${rows_suffix;rows.}",tag:"rows"}]}},{name:"@it_loading_page",description:"Loading page template",template:{layout:"vlinear",itemsArrange:"center",children:[{value:"${message;Data Loading...}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#777"}},{space:"30"},{renderer:{type:"spinner"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}},{name:"@it_empty_page",description:"Empty page template",template:{layout:"vlinear",itemsArrange:"center",itemGap:20,children:[{visible:"${@message_visible;true}",value:"${@message;표시할 데이터가 없습니다.}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#555"}},{visible:"${@load_visible;true}",renderer:{type:"button",label:"${@load_label;Load Data}",onClick:"${@load_callback}"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}}].forEach(t=>wi.add(t.name,new Ie(null,t)));class bi extends pe{constructor(t,e){super(t),this._defs=e||void 0,!e&&this._doInitDefaults()}_doInitDefaults(){this._visible=!0}initLandscape(){}rowCellObjectChanged(t){this._changed()}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed("visible"))}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed("style"))}prepareRender(){this._doPrepareRender()}unprepareRender(){this._doUnprepareRender()}_doUnprepareRender(){}}var Si;!function(t){t.DEFAULT="default",t.NEAR="near",t.FAR="far",t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(Si||(Si={}));const Ci=Si;class xi extends bi{_doInitDefaults(){super._doInitDefaults(),this._position=Si.NEAR}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}getPosition(t){const e=this.position();if(e===Ci.TOP||e===Ci.BOTTOM||e===Ci.LEFT||e===Ci.RIGHT)return e;switch(e){case Ci.NEAR:return t?Ci.LEFT:Ci.TOP;case Ci.FAR:return t?Ci.RIGHT:Ci.BOTTOM;default:return Ci.BOTTOM}}}var Ri,Ei;!function(t){t.NEAR="near",t.FAR="far"}(Ri||(Ri={})),function(t){t.BAR="bar",t.BAR_PUSH="barPush",t.ROW="row",t.ROW_PUSH="rowPush"}(Ei||(Ei={}));class Vi extends bi{_doInitDefaults(){super._doInitDefaults(),this._mode=Vi.MODE,this._position=Ri.NEAR,this._gapLeft=4,this._gapRight=8,this._gapTop=0,this._gapBottom=8}_doDestory(){this._rowInfos=null}mode(){return Tt(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}gapLeft(){return Tt(this._gapLeft,this._defs&&this._defs._gapLeft)}setGapLeft(t){(t=Pt(t))!==this._gapLeft&&(this._gapLeft=t,this._changed())}size(){return Tt(this._size,this._defs&&this._defs._size)}setSize(t){(t=Pt(t))!==this._size&&(this._size=t,this._changed())}gapRight(){return Tt(this._gapRight,this._defs&&this._defs._gapRight)}setGapRight(t){(t=Pt(t))!==this._gapRight&&(this._gapRight=t,this._changed())}gapTop(){return Tt(this._gapTop,this._defs&&this._defs._gapTop)}setGapTop(t){(t=Pt(t))!==this._gapTop&&(this._gapTop=t,this._changed())}gapBottom(){return Tt(this._gapBottom,this._defs&&this._defs._gapBottom)}setGapBottom(t){(t=Pt(t))!==this._gapBottom&&(this._gapBottom=t,this._changed())}gapHorz(){return this._gapHorz}gapVert(){return this._gapVert}_doPrepareRender(){this._gapHorz=this.gapLeft()+this.gapRight(),this._gapVert=this.gapTop()+this.gapBottom()}_doUnprepareRender(){}}Vi.MODE=Ei.BAR;const $i={margin:0,whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle"};class Ai extends e{static clone(t,e){return new e(t)}constructor(t,e,s){if(super(),t instanceof Document){const i=this._svg=new Ts(t,e);i.setStyle(s),this._doInit(i)}else t instanceof Ai?(this._svg=new Ts(t._svg.svg.cloneNode(!0),e),this._doClone(t)):this._svg=new Ts(t,e);de.setAttr(this._svg.svg,"role","image")}_doDestory(){de.remove(this._svg.svg),this._svg=null}name(){return this.constructor.NAME}dom(){return this._svg.svg}attached(){return!!this._svg.svg.parentElement}isDom(t){return this._svg.svg===t}containsDom(t){return this._svg.svg.contains(t)}setVisible(t){de.setVisible(this._svg.svg,t)}styleTarget(){return this._svg.svg.style}resize(t,e=NaN){if(t=t||e,e=e||t,t!==this._width||e!==this._height)return this._width=t,this._height=e,this._svg.setSize(t,e),!0}setClass(t){this._svg.setClass(t)}setStyle(t){this._svg.setStyle(t)}appendTo(t){t instanceof ce&&(t=t.dom),t.appendChild(this._svg.svg)}remove(){de.remove(this._svg.svg)}makeBackground(t,e){return this._svg.makeBackground(t,e),this}_doClone(t){this._width=t._width,this._height=t._height}_doInit(t){}}class Di extends M{createShape(t,e){return this.createStock(t,e)||this.createCustom(e,void 0,void 0)}}class ki extends Ai{constructor(t,e,s){super(t,e,s)}setShape(t){return t&&(this._svg.setViewSize(t.w,t.h),this._path?this._path.setAttribute("d",t.d):this._path=this._svg._createPath(t.d),this._path.style.cssText=""),this}_doClone(t){super._doClone(t),t._path&&(this._path=this._svg.svg.firstElementChild)}}ki.NAME="@custom";class Li extends Ai{constructor(t,e,s){super(t,e,s)}_doInit(t){t.setViewSize(Li.SIZE),t.polyline([5.9,12.5,9.7,16.3,18.5,7.5])}}Li.NAME="@checkmark",Li.SIZE=24;class Ti extends Ai{constructor(t,e,s){super(t,e,s)}_doInit(t){t.setViewSize(Ti.SIZE)}}Ti.NAME="@delete",Ti.SIZE=26;class Mi extends Ai{_doInit(t){t.setViewSize(Mi.SIZE);const e=Mi.SIZE/2,s=Mi.SIZE/2,i=Math.min(e,s);this._svg.circle(e,s,i,null)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);const t=this._svg.svg.firstElementChild,e=this._width/2,s=this._height/2,i=Math.min(e,s),r=getComputedStyle(this._svg.svg);let n=(parseFloat(r.strokeWidth)||0)/2;return t.setAttribute("cx",e),t.setAttribute("cy",s),t.setAttribute("r",i-n),!0}}}Mi.NAME="@circle",Mi.SIZE=20;class Pi extends Ai{_doInit(t){const e=this._svg._createPath("M 0 0");e.style.pointerEvents="none",this._svg.svg.appendChild(e)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);const t=this.$_getPath(this._width,this._height);return this._svg.svg.firstElementChild.setAttribute("d",t),!0}}$_getPath(t,e){const s=this._getPoints();for(let i=0,r=s.length/2>>0;i<r;i++)s[2*i]*=t,s[2*i+1]*=e;let i=`M ${s[0]} ${s[1]} L`;return i+=s.slice(2).join(" ")+" z",i}}Pi.SIZE=1;class Ii extends Pi{_getPoints(){return[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]}}Ii.NAME="@star";class Ni extends Ai{constructor(t,e,s,i,r){super(t,r),this._svg.setViewSize(e,s),!this._svg.svg.firstElementChild&&this._svg.path(i)}}class Oi extends ce{clickable(){return!1}click(t,e,s){}measure(t,e,s,i){const r=this.dom.style;this.mw=this.mh=NaN,this._doPrepareRender(t,e),this._doApplyStyles(r),this._doApplyImportantStyles(r);const n=this._doMeasure(t,s,i);return this.mw=n.width,this.mh=n.height,n}render(t){const{width:e,height:s}=this.getOffsetSize();this._doRender(t,e,s),this._doAfterRender()}resizeByMeasure(){return this.resize(this.mw,this.mh),this}applyMeasuredBounds(){return this.move(this.mx,this.my),this.resize(this.mw,this.mh),this}_doPrepareRender(t,e){}_doApplyStyles(t){}_doApplyImportantStyles(t){}_doAfterRender(){}}Oi.PANEL_ORDER="100";class Bi extends Oi{constructor(t,e,s,i){super(t,s,i),this._model=e}model(){return this._model}setModel(t){this._model=t}listOwner(){return this.control}}class Fi extends Bi{setPosition(t){const e=this._model.getPosition(this.landscape=t);this.position=e||Si.BOTTOM,this.vertical=this.position===Si.LEFT||this.position===Si.RIGHT}}class zi extends ce{constructor(t,e){super(t,!1,e,"button")}enabled(){return!this.dom.disabled}setEnabled(t){de.setDisabled(this.dom,!t)}_doInitDom(t,e){if(Object.assign(e.style,$i),h){const s=t.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.boxSizing="border-box",s.style.pointerEvents="none",e.appendChild(s)}ce.BOUNDING&&(e.style.border=ce.BOUNDING_BORDER)}_setModel(t,e){const s=t.doc(),i=this.dom,r=h?i.firstElementChild:i,n=e.className,o=e.style;if(de.setData(i,"image",1),n!==this._prevClass&&(this._prevClass&&i.classList.remove(this._prevClass),this._prevClass=n,n&&i.classList.add(n)),o!=this._prevStyles){const t=i.style;if(this._prevStyles)for(let e in this._prevStyles)t[e]="";o&&Object.assign(t,o),this._prevStyles=o}let a;if(this.resize(NaN,NaN),e.imageUrl?(this._shape&&(this._shape=this._shape.destroy()),a=this.$_setImage(t,r,e)):e.shape&&(this._img=de.remove(this._img),a=this.$_setShape(t,r,e)),a)h?this.$_arrangeSafari(s,r,a,e):this.$_arrange(s,r,a,e);else{this._shape&&(this._shape=this._shape.destroy()),this._img=de.remove(this._img),this._br=de.remove(this._br);let t=this._span;t||(t=this._span=this.$_createSpan(s),r.appendChild(t)),this._span.textContent=e.label||e.name,de.setData(r,"image",void 0)}this.setEnabled(!e.disabled)}$_createSpan(t){const e=t.createElement("span");return e.className=zi.LABEL_CLASS,e.style.pointerEvents="none",e.style.verticalAlign="middle",e}$_arrangeSafari(t,e,s,i){const r=i.label;let n=this._span;if(r&&i.labelPosition!==ee.NONE)switch(n||(n=this._span=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case ee.LEFT:e.style.flexDirection="row",s.style.paddingLeft="4px",e.insertBefore(n,s);break;case ee.RIGHT:e.style.flexDirection="row",s.style.paddingRight="4px",e.appendChild(n);break;case ee.TOP:e.style.flexDirection="column",e.insertBefore(n,s),s.style.paddingTop="4px";break;default:e.style.flexDirection="column",s.style.paddingBottom="4px",e.appendChild(n)}else this._span=de.remove(n)}$_arrange(t,e,s,i){const r=i.label;let n=this._span;if(r&&i.labelPosition!==ee.NONE)switch(n||(n=this._span=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case ee.LEFT:this._br=de.remove(this._br),s.style.paddingLeft="4px",e.insertBefore(n,s);break;case ee.RIGHT:this._br=de.remove(this._br),s.style.paddingRight="4px",e.appendChild(n);break;case ee.TOP:this._br=this._br||de.createBR(t,zi.BR_CLASS),e.insertBefore(n,s),e.insertBefore(this._br,s),s.style.paddingTop="4px";break;default:this._br=this._br||de.createBR(t,zi.BR_CLASS),s.style.paddingBottom="4px",e.appendChild(n),e.insertBefore(this._br,n)}else n||(n=this._span=this.$_createSpan(t)),e.insertBefore(n,s),n.textContent=""}$_setImage(t,e,s){const i=t.doc(),r=s.imageUrl;let n=this._img,o=s.imageWidth,a=s.imageHeight;if(s.style&&Object.assign(e.style,s.style),e.style.overflow="",e.textContent="",e.dataset.type="image",n?n.parentElement||e.appendChild(n):(n=this._img=i.createElement("img"),n.className=zi.IMAGE_CLASS,n.style.pointerEvents="none",n.style.verticalAlign="middle",de.setAttr(n,"aria-hidden",!0),e.appendChild(n)),n.src=r,!n.complete&&t.useImage(r),isNaN(o)&&isNaN(a)){const e=h&&t.getImageSize(r);e?(o=e.width,a=e.height):(o=n.naturalWidth,a=n.naturalHeight)}return isNaN(o)||(n.width=o,isNaN(a)&&(n.height=o)),isNaN(a)||(n.height=a,isNaN(o)&&(n.width=a)),n}$_setShape(t,e,s){const i=s.shape;let r=this._shape,n=Math.max(0,s.shapeHeight);const o=Math.max(0,s.shapeWidth)||n||zi.SHAPE_SIZE;return n=n||o,r&&i===r._url_?(r instanceof ki&&r.setShape(this.control.shapes().getCustom(i)),r.attached()||r.appendTo(e)):(r=this._shape=this.control.shapes().createStock(e.ownerDocument,i)||this.control.shapes().createCustom(i,null,null),r.setClass(zi.SHAPE_CLASS),r.dom().style.pointerEvents="none",r.dom().style.verticalAlign="middle",r.appendTo(e)),r.resize(o,n),r._url_=i,r._svg.svg}}zi.LABEL_CLASS="rtc-button-label",zi.BR_CLASS="rtc-button-br",zi.IMAGE_CLASS="rtc-button-image",zi.SHAPE_CLASS="rtc-button-shape",zi.SHAPE_SIZE=20;class Hi extends ce{static createButton(t,e,s,i){const r=t.createElement("button");i&&(r.className=i);const n=new Ts(t).setShape(e).makeBackground(s);return r.appendChild(n.svg),r}constructor(t,e){super(t,!1,Hi.BUTTON_CLASS,"button"),this.dom.classList.add(e)}size(){return this._size}enabled(){return!this.dom.disabled}setSize(t){t!==this._size&&(this._size=t,this.resize(t,t))}setDisabled(t){de.setDisabled(this.dom,t)}measure(){if(isNaN(this._size)){const t=this.getPadding();this.mw=Hi.DEF_SVG_SIZE+t.left+t.right,this.mh=Hi.DEF_SVG_SIZE+t.top+t.bottom}else this.mw=this._size,this.mh=this._size;return{width:this.mw,height:this.mh}}click(){this._doClick()}isDom(t){return super.isDom(t)||t===this._svg.svg}_doInitDom(t,e){const s=this._svg=new Ts(t);Object.assign(e.style,{position:"absolute",border:"none"}),this._svg.svg.style.pointerEvents="none",this._svg.fillSize(),this._doInitSvg(s),e.appendChild(s.svg)}}Hi.BUTTON_CLASS="rtc-svg-button",Hi.DEF_SVG_SIZE=16;class Wi extends ce{}var Gi;!function(t){t.TEXT="text",t.NUMBER="number",t.BOOL="bool",t.DATE="date",t.BIGINT="bigint",t.ANY="any"}(Gi||(Gi={}));const Ui={text:t=>null==t?t:String(t),number:t=>Number(t),bool:t=>null==t?t:Boolean(t),date:t=>t instanceof Date?t:new Date(t),bigint:t=>BigInt(t),any:t=>t},qi=(t,e)=>isNaN(t)?isNaN(e)?0:-1:isNaN(e)||t>e?1:t<e?-1:0;class ji{static create(t,e=Gi.TEXT){if("string"==typeof t)return new ji(t,e);if(w.isObject(t)&&t.name){const e=new ji(t.name,t.type);return e.label=t.label,e.default=t.default,e.sortable=!!t.sortable,e.required=!!t.required,e.minimum=t.minimum,e.maximum=t.maximum,e.domain=Array.isArray(t.domain)?t.domain.slice(0):void 0,e}}static createFields(t){return t.map(t=>this.create(t))}constructor(t,e=Gi.TEXT){t||Ki.throw(null,"Data field name must be exist."),this._name=t,this._type=e||Gi.TEXT,this.readValue=Ui[e]||Ui.any,this.comparer=ji.comparers[e]}get name(){return this._name}get type(){return this._type}get label(){return this._label}set label(t){t!==this._label&&(this._label=t,this._changed())}displayText(){return this._label||this._name}proxy(){return{name:this._name,label:this._label,type:this._type,default:this.default,sortable:this.sortable}}_changed(){var t;null===(t=this._owner)||void 0===t||t.$_fieldChanged(this)}}ji.comparers={text:(t,e)=>null==t?null==e?0:-1:null==e||t>e?1:t<e?-1:0,number:qi,bool:(t,e)=>(t=t?1:0)-(e=e?1:0),date:(t,e)=>t-e,bigint:qi};class Yi extends ji{static createDerived(t,e,s=Gi.TEXT){return new Yi(t,e,s)}constructor(t,e,s=Gi.TEXT){if(super(t,s),"function"!=typeof e)throw new Ki(null,"Derive field's value extracter must be exists.");this._extracter=e}extract(t){return this._extracter(t)}}var Qi;!function(t){t.UPDATED="u",t.DELETED="d"}(Qi||(Qi={}));let Zi=0;class Xi{constructor(){this.id=Zi++,this.row=-1,this.values={}}static createRow(t,e,s,i){const r=new Xi;if(w.isObject(s)){const n=r.values;for(const e in t)n[e]=t[e].default;for(const e in s){const r=t[e];r&&(n[r.name]=r.readValue(i?i(e,s[e]):s[e]))}for(const t in e)n[t]=e[t].extract(n)}return r}static createRow2(t,e,s){const i=new Xi;if(w.isObject(s)){const r=i.values;for(const e in t)r[e]=t[e].default;for(let e in s){const i=t[e];i&&(r[i.name]=i.readValue(s[e]))}for(const t in e)r[t]=e[t].extract(r)}return i}static findRow(t,e,s,i){if(w.isObject(e)){i<0&&(i=t.length);for(let r=s,n=Math.min(i,t.length);r<n;r++)if(t[r].match(e))return r}return-1}static findRows(t,e,s,i){const r=[];if(w.isObject(e)){i<0&&(i=t.length);for(let n=s,o=Math.min(i,t.length);n<o;n++)t[n].match(e)&&r.push(t[n].row)}return r}static findDistinctRows(t,e,s,i){function r(t,s){for(let i of e)if(t[i]!==s[i])return!1;return!0}function n(t,e){for(let s of e)if(r(s,t))return!0;return!1}const o=[];if(Array.isArray(e)&&e.length>0){const r=[];i<0&&(i=t.length);for(let a=s,h=Math.min(i,t.length);a<h;a++){const s=t[a].getValues(e);n(s,r)||(o.push(t[a].row),r.push(s))}}return o}getValues(t){const e=this.values,s={};return t.forEach(t=>{t in e&&(s[t]=e[t])}),s}match(t){const e=this.values;for(const s in t){const i=t[s];if(!(s in e))return!1;if(i instanceof RegExp){if(!i.test(e[s]))return!1}else if(i!==e[s])return!1}return!0}getProp(t,e){let s=this.values[t],i=0;for(;null!=s&&i<e.length;)s=s[e[i++]];return s}}class Ki extends Error{static throw(t,e){throw new Ki(t,e)}static throwFormat(t,e,s){throw new Ki(t,C(e,s))}static throwFormat2(t,e,s,i){throw new Ki(t,((t,e,s)=>t.replace("%1",e).replace("%2",s))(e,s,i))}constructor(t,e){super(e),this.data=t}}class Ji extends Ki{constructor(t,e,s){super(t,s),this.field=e}}class tr extends Ki{constructor(t,e){super(t,e.message||e),this.error=e}}class er extends e{static isCheckedFlag(t){return 1===t}static isCheckableFlag(t){return 2===t}static isDetailedFlag(t){return 8===t}static isUserFlag(t){return t>>16}constructor(t){if(super(),this._checkedCount=0,this._data=t){const e=t.rowCount(),s=this._rows=new Array(e);for(let t=0;t<e;t++)s[t]=0}else this._rows=[]}_doDestory(){this._data=null}get count(){return this._rows.length}checkedCount(){return this._checkedCount}isChecked(t){return 0!=(1&this._rows[t])}setChecked(t,e){return this.$_changeFlag(t,1,e)}checkRows(t,e){return this.$_changeRows(t,1,e)}checkRange(t,e,s){return this.$_changeRange(t,e,1,s)}checkAll(t){return this.$_changeAll(1,t)}getCheckedRows(t){return this.$_getFlagged(1,t)}isCheckable(t){return 0==(2&this._rows[t])}setCheckable(t,e){return this.$_changeFlag(t,2,!e)}setCheckables(t,e){return this.$_changeRows(t,2,!e)}setCheckableRange(t,e,s){return this.$_changeRange(t,e,2,!s)}setCheckaleAll(t){return this.$_changeAll(2,t)}getCheckableRows(t){return this.$_getFlagged(2,!t)}getSearchedRows(){return this.$_getFlagged(4,!0)}isSearched(t){return 0!=(4&this._rows[t])}setSearched(t,e){return this.$_changeFlag(t,4,e)}clearSearched(){return this.$_changeAll(4,!1)}isDetailed(t){return 0!=(8&this._rows[t])}setDetailed(t,e,s){return s&&this.detailAll(!1),this.$_changeFlag(t,8,e)}detailRows(t,e){return this.$_changeRows(t,8,e)}detailRange(t,e,s){return this.$_changeRange(t,e,8,s)}detailAll(t){return this.$_changeAll(8,t)}getDetailedRows(t){return this.$_getFlagged(8,t)}hasUserFlag(t,e){return e=1<<16+e,0!=(this._rows[t]&e)}getUserFlaggedRows(t,e){return this.$_getFlagged(1<<16+t,e)}setUserFlag(t,e,s){return s!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<16+e,s),!0)}setUserFlags(t,e,s){return this.$_changeRows(t,1<<16+e,s)}setUserFlagRange(t,e,s,i){return this.$_changeRange(t,e,1<<16+s,i)}setUserFlagAll(t,e){return this.$_changeAll(1<<16+t,e)}hasUiFlag(t,e){return e=1<<15+e,0!=(this._rows[t]&e)}getUiFlaggedRows(t,e){return this.$_getFlagged(1<<15+t,e)}setUiFlag(t,e,s){return s!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<15+e,s),!0)}setUiFlags(t,e,s){return this.$_changeRows(t,1<<15+e,s)}setUiFlagRange(t,e,s,i){return this.$_changeRange(t,e,1<<15+s,i)}setUiFlagAll(t,e){return this.$_changeAll(1<<15+t,e)}$_setFlag(t,e,s){s?this._rows[t]|=e:this._rows[t]&=~e}$_changeFlag(t,e,s){if(t>=0&&t<this._rows.length){if(0!=(this._rows[t]&e)!==s)return this.$_setFlag(t,e,s),1===e&&(this._checkedCount+=s?1:-1),this._data&&this._data._fireEvent("onDataFlagChanged",this,t,e),!0}return!1}$_changeRows(t,e,s){const i=[];if(Array.isArray(t)&&t.length>0){const r=this._rows;t.forEach(t=>{const n=0!=(r[t]&e);s!==n&&(this.$_setFlag(t,e,s),i.push(t))})}return this._data&&i.length>0&&(1===e&&(this._checkedCount+=s?i.length:-i.length),this._data._fireEvent("onDataFlagsChanged",this,i,e)),i}$_changeRange(t,e,s,i){const r=this._rows,n=[];if(e>0&&t>=0&&t<r.length)for(let o=t,a=Math.min(r.length,t+e);o<a;o++){i!==(0!=(r[o]&s))&&(this.$_setFlag(o,s,i),n.push(o))}return this._data&&n.length>0&&(1===s&&(this._checkedCount+=i?n.length:-n.length),this._data._fireEvent("onDataFlagsChanged",this,n,s)),n}$_changeAll(t,e){const s=this._rows;let i=!1;for(let r=s.length-1;r>=0;r--){e!==(0!=(s[r]&t))&&(this.$_setFlag(r,t,e),i=!0)}return this._data&&i&&(1===t&&(this._checkedCount=e?s.length:0),this._data._fireEvent("onDataFlagAllChanged",this,t)),i}$_getFlagged(t,e){const s=this._rows,i=[];for(let r=0,n=s.length;r<n;r++){e===(0!=(s[r]&t))&&i.push(r)}return i}}er.MAX_UI_FLAG=15,er.MAX_USER_FLAG=16;class sr extends er{checkedCount(){return 0}isChecked(t){return!1}setChecked(t,e){return!1}checkRows(t,e){return[]}checkRange(t,e,s){return[]}checkAll(t){return!1}getCheckedRows(t){return[]}isCheckable(t){return!1}setCheckable(t,e){return!1}setCheckables(t,e){return[]}setCheckableRange(t,e,s){return[]}setCheckaleAll(t){return!1}getCheckableRows(t){return[]}getSearchedRows(){return[]}isSearched(t){return!1}setSearched(t,e){return!1}clearSearched(){return!1}isDetailed(t){return!1}setDetailed(t,e,s){return!1}detailRows(t,e){return[]}detailRange(t,e,s){return[]}detailAll(t){return!1}getDetailedRows(t){return[]}hasUserFlag(t,e){return!1}getUserFlaggedRows(t,e){return[]}setUserFlag(t,e,s){return!1}setUserFlags(t,e,s){return[]}setUserFlagRange(t,e,s,i){return[]}setUserFlagAll(t,e){return!1}hasUiFlag(t,e){return!1}getUiFlaggedRows(t,e){return[]}setUiFlag(t,e,s){return!1}setUiFlags(t,e,s){return[]}setUiFlagRange(t,e,s,i){return[]}setUiFlagAll(t,e){return!1}}sr.Instance=new sr(null);class ir extends e{constructor(t){super(),this._flags={},this._data=t}_doDestory(){for(let t in this._flags)this._flags[t].destroy();this._data=null}isEmpty(){let t=!0;for(const e in this._flags){t=!1;break}return t}_rowAdded(t){const e=this._flags;for(let s in e)e[s]._rows.splice(t,0,0)}_rowsAdded(t){const e=this._flags;for(let s in e){const i=e[s]._rows;t.forEach(t=>{i.splice(t,0,0)})}}_rowRangeAdded(t,e){const s=this._flags;for(let i in s){const r=s[i]._rows;for(let s=0;s<e;s++)r.splice(t+s,0,0)}}_cleared(t){const e=this._flags;for(let t in e){const s=e[t];s._rows.length=0,s._checkedCount=0}}_rowDeleted(t){const e=this._flags;for(let s in e){const i=e[s],r=i._rows;0!=(1&r[t])&&i._checkedCount--,r.splice(t,1)}}_rowsDeleted(t){const e=this._flags;for(let s in e){const i=e[s],r=i._rows;for(let e=t.length-1;e>=0;e--)0!=(1&r[t[e]])&&i._checkedCount--,r.splice(t[e],1)}}_rangeDeleted(t,e){const s=this._flags;for(let i in s){const r=s[i],n=r._rows;for(let s=0;s<e;s++)0!=(1&n[t+s])&&r._checkedCount--;n.splice(t,e)}}_rowMoved(t,e){const s=this._flags;for(let i in s){const r=s[i]._rows,n=r.splice(t,1)[0];r.splice(e,0,n)}}_rowsMoved(t,e,s){const i=this._flags;for(let r in i){const n=i[r]._rows,o=n.splice(t,e)[0];n.splice.apply(n,[s,0].concat(o))}}_reset(t,e){const s=this._flags;for(let i in s){const r=s[i],n=r._rows,o=new Array(e);t.forEach((t,e)=>o[t.newIdx]=n[e]),r._rows=o}}get(t){return this._flags[t.hash]}add(t){const e=t.hash;let s=this._flags[e];return s||(s=this._flags[e]=new er(this._data)),s}remove(t){this._flags[t.hash].destroy(),delete this._flags[t.hash]}}let rr=1e7*Math.random()>>0;class nr extends r{static checkRow(t,e){(e<0||e>=t.rowCount())&&Ki.throwFormat(t.wrapperOrThis(),b.invalidRowIndex,e)}constructor(t){super(),this._name=t||"@_dlist_dv_"+rr++,this._flags=new ir(this)}name(){return this._name}addFlags(t){return this._flags.add(t)}removeFlags(t){this._flags.remove(t)}getFlags(t){return this._flags.get(t)}flagChanged(t,e,s){this._fireEvent("onDataFlagChanged",t,e,s)}flagsChanged(t,e,s){this._fireEvent("onDataFlagsChanged",t,e,s)}flagAllChanged(t,e){this._fireEvent("onDataFlagAllChanged",t,e)}}class or extends s{constructor(t,e){super(),this._styleArgs={context:void 0,row:-1},this._owner=t,this._defs=e,!e&&this._doInitDefaults()}_doInitDefaults(){}hint(){return Tt(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}cellStyle(){return Tt(this._cellStyle,this._defs&&this._defs._cellStyle)}setCellStyle(t){t!==this._cellStyle&&(this._cellStyle=t,this._cellStyleChanged=!0,this._changed())}cellStyleCallback(){return Tt(this._cellStyleCallback,this._defs&&this._defs._cellStyleCallback)}setCellStyleCallback(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._styleChanged=!0,this._changed())}styleCallback(){return Tt(this._styleCallback,this._defs&&this._defs._styleCallback)}setStyleCallback(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}runCellStyle(t){return(t||this._cellStyleChanged)&&this._runCellStyle}runStyle(t){return(t||this._styleChanged)&&this._runStyle}getCellStyle(t){const e=this._runCellStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runCellStyle):this._runCellStyle}getStyle(t){const e=this._runStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runStyle):this._runStyle}prepareRender(){this._cellStyleChanged=this._cellStyleChanged||this._defs&&this._defs._cellStyleChanged,this._runCellStyle=this.cellStyle(),this._runCellStyleCallback=this.cellStyleCallback(),this._styleChanged=this._styleChanged||this._defs&&this._defs._styleChanged,this._runStyle=this.style(),this._runStyleCallback=this.styleCallback(),this._styleArgs.context=this.wrapperOrThis(),this._doPrepareRender()}unprepareRender(){this._styleChanged=!1,this._cellStyleChanged=!1,this._doUnprepareRender()}_changed(){this._owner&&this._owner.rowCellObjectChanged(this)}_doPrepareRender(){}_doUnprepareRender(){}}class ar extends or{_doInitDefaults(){super._doInitDefaults(),this._size=ar.SIZE}size(){return Tt(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}}var hr,lr,dr,_r,cr;ar.SIZE=24,function(t){t.ROW="row",t.LEVEL_ROW="levelRow"}(hr||(hr={}));class ur extends or{_doInitDefaults(){super._doInitDefaults(),this._display=hr.ROW,this._minWidth=ur.MIN_WIDTH,this._fitWidth=!0,this._rowOffset=1}display(){return Tt(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}minWidth(){return Tt(this._minWidth,this._defs&&this._defs._minWidth)}setMinWidth(t){(t=It(t,NaN))!==this._minWidth&&(this._minWidth=t,this._changed())}fitWidth(){return Tt(this._fitWidth,this._defs&&this._defs._fitWidth)}setFitWidth(t){t!==this._fitWidth&&(this._fitWidth=t,this._changed())}rowOffset(){return Tt(this._rowOffset,this._defs&&this._defs._rowOffset)}setRowOffset(t){(t=It(t,0))!==this._rowOffset&&(this._rowOffset=t,this._changed())}prefix(){return Tt(this._prefix,this._defs&&this._defs._prefix)}setPrefix(t){t!==this._prefix&&(this._prefix=t,this._changed())}suffix(){return Tt(this._suffix,this._defs&&this._defs._suffix)}setSuffix(t){t!==this._suffix&&(this._suffix=t,this._changed())}getText(t,e){return this.runDisplay===hr.LEVEL_ROW&&(e=t.levelRowOfRow(e)),this.runPrefix+(e+this.runOffset)+this.runSuffix}_doPrepareRender(){this.runDisplay=this.display(),this.runOffset=this.rowOffset(),this.runPrefix=this.prefix()||"",this.runSuffix=this.suffix()||""}}ur.MIN_WIDTH=20,function(t){t.NONE="none",t.TOGGLE="toggle",t.CHECK="check",t.UNCHECK="uncheck"}(lr||(lr={}));class gr extends or{_doInitDefaults(){super._doInitDefaults(),this._size=gr.SIZE,this._masterVisible=!1,this._dragMode=lr.CHECK}size(){return Tt(this._size,this._defs&&this._defs._size)}setSize(t){t!=this._size&&(this._size=t,this._changed())}masterVisible(){return Tt(this._masterVisible,this._defs&&this._defs._masterVisible)}setMasterVisible(t){t!==this._masterVisible&&(this._masterVisible=t,this._changed())}dragMode(){return Tt(this._dragMode,this._defs&&this._defs._dragMode)}setDragMode(t){this._dragMode=t}canDrag(){const t=this.dragMode();return t&&t!==lr.NONE}}gr.SIZE=22;class pr extends or{constructor(t,e,s){super(t,s),s||(this._label=this._label||e,this._doInitButton(t))}label(){return Tt(this._label,this._defs&&this._defs._label)}setLabel(t){t!==this._label&&(this._label=t,this._changed())}imageUrl(){return Tt(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return Tt(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return Tt(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._heightD=$(t,!1),this._changed())}isRelativeHeight(){return void 0!==this._height?this._heightD&&!this._heightD.fixed:this._defs?this._defs.isRelativeHeight():void 0}className(){return Tt(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}letter(){return Tt(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=w.copyObject(t),this._changed())}onClick(){return Tt(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}click(t,e){const s=this.onClick();s&&s(this._getArgs(e))||this._doClick(t,e)}_doInitButton(t){}_getArgs(t){return{button:this.wrapperOrThis(),row:t}}_doClick(t,e){return!1}}class fr extends or{_doInitDefaults(){super._doInitDefaults(),this._width=fr.DEF_SIZE,this._height=fr.DEF_SIZE,this._clickable=!1}imageUrl(){return Tt(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return Tt(this._width,this._defs&&this._defs._width)}setWidth(t){(t=It(t,0))!==this._width&&(this._width=t,this._changed())}height(){return Tt(this._height,this._defs&&this._defs._height)}setHeight(t){(t=It(t,0))!==this._height&&(this._height=t,this._changed())}clickable(){return Tt(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}urlCallback(){return Tt(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}onClick(){return Tt(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getImageUrl(t){const e=this.urlCallback();return Tt(e&&e({model:this.wrapperOrThis(),row:t}),this.imageUrl())}click(t,e){if(this._clickable){const s=this.onClick();s&&s({model:this.wrapperOrThis(),row:t,imageUrl:e})}}}fr.DEF_SIZE=24;class wr extends or{constructor(){super(...arguments),this._shapeArgs={model:void 0,row:-1},this._clickArgs={model:void 0,row:-1,shape:void 0}}_doInitDefaults(){super._doInitDefaults(),this._size=wr.SIZE,this._shape=wr.SHAPE,this._clickable=!1}size(){return Tt(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}shape(){return Tt(this._shape,this._defs&&this._defs._shape)}setShape(t){t!==this._shape&&(this._shape=t,this._changed())}clickable(){return Tt(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}shapeCallback(){return Tt(this._shapeCallback,this._defs&&this._defs._shapeCallback)}setShapeCallback(t){this._shapeCallback=t}onClick(){return Tt(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getShape(t){const e=this.shapeCallback();if(e){const s=this._shapeArgs;s.model=this.wrapperOrThis(),s.row=t;const i=e(s);return void 0!==i?i:this.shape()}return this.shape()}click(t,e){const s=this.clickable()&&this.onClick();if(s){const i=this._clickArgs;i.model=this.wrapperOrThis(),i.row=t,i.shape=e,s(i)}}}wr.SIZE=20,wr.SHAPE="@star";class mr extends or{_doInitDefaults(){super._doInitDefaults(),this._letter="Σ"}letter(){return Tt(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=t,this._changed())}}!function(t){t.NONE="none",t.HEAD="head",t.FOOT="foot"}(dr||(dr={}));class yr extends pr{constructor(t,e){super(t,">",e)}_doInitDefaults(){this._position=dr.FOOT}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}}!function(t){t.NONE="none",t.MOVE="move",t.INFO="info",t.DELETE="delete",t.ADD="add",t.EDIT="edit",t.LINK="link",t.CUSTOM="custom"}(_r||(_r={}));class vr extends pr{confirmMessage(){return Tt(this._confirmMessage,this._defs&&this._defs._confirmMessage)}setConfirmMessage(t){this._confirmMessage=t}_doClick(t,e){const s=this.confirmMessage();return s&&!confirm(s)||t.owner().data().deleteRow(e,!1),!0}}class br extends pr{editHeader(){return Tt(this._editHeader,this._defs&&this._defs._editHeader)}setEditHeader(t){t!==this._editHeader&&(this._editHeader=t,this._changed())}editTemplate(){return Tt(this._editTemplate,this._defs&&this._defs._editTemplate)}setEditTemplate(t){t!==this._editTemplate&&(this._editTemplate=t,this._changed())}_doClick(t,e){const s={header:this.editHeader(),template:this.editTemplate()};return t.control().showEditPage(e,s,!0),!0}}class Sr extends br{_doInitButton(t){this.appending=!1,this.setLetter({letter:"+",size:25})}_doClick(t,e){return super._doClick(t,-1)}}class Cr extends pr{infoHeader(){return Tt(this._infoHeader,this._defs&&this._defs._infoHeader)}setInfoHeader(t){t!==this._infoHeader&&(this._infoHeader=t,this._changed())}infoTemplate(){return Tt(this._infoTemplate,this._defs&&this._defs._infoTemplate)}setInfoTemplate(t){t!==this._infoTemplate&&(this._infoTemplate=t,this._changed())}_doInitButton(t){this.setLetter({letter:"ⓘ",transparent:!0}),this.setStyle({fontSize:"28px"})}_doClick(t,e){const s={header:this.infoHeader(),template:this.infoTemplate()};return t.control().showInfoPage(e,s,!0),!0}}class xr extends pr{_doInitDefaults(){this._target="_self",this.setLetter({letter:"→",transparent:!0})}target(){return Tt(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}url(){return Tt(this._url,this._defs&&this._defs._url)}setUrl(t){this._url=t}urlCallback(){return Tt(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}getUrl(t){const e=this.urlCallback();return Tt(e&&e(this._getArgs(t)),this.url())}_doClick(t,e){const s=this.getUrl(e);return s&&window.open(s,this._target),!0}}class Rr extends Vi{constructor(t,e,s){super(t,s),this._buttons={},this._handles={},this._owner=e,this._delete=new vr(this,Rr.DELETE_LABEL,s&&s._delete),this._add=new Sr(this,Rr.ADD_LABEL,s&&s._add),this._edit=new br(this,Rr.EDIT_LABEL,s&&s._edit),this._info=new Cr(this,Rr.INFO_LABEL,s&&s._info),this._link=new xr(this,Rr.LINK_LABEL,s&&s._link),this._custom=new pr(this,Rr.CUSTOM_LABEL,s&&s._custom),this._move=new ar(this,s&&s._move),this._buttons[_r.DELETE]=this._delete,this._buttons[_r.ADD]=this._add,this._buttons[_r.EDIT]=this._edit,this._buttons[_r.INFO]=this._info,this._buttons[_r.LINK]=this._link,this._buttons[_r.CUSTOM]=this._custom,this._handles[_r.MOVE]=this._move}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setPosition(Ri.FAR),this._action=_r.CUSTOM}owner(){return this._owner}action(){return Tt(this._action,this._defs&&this._defs._action)}setAction(t){t!==this._action&&(this._action=t,this._changed())}delete(){return this._delete}add(){return this._add}edit(){return this._edit}info(){return this._info}link(){return this._link}custom(){return this._custom}move(){return this._move}getAction(t){return this._runAction}getButton(t){return this._buttons[t]}getHandle(t){return this._handles[t]}_doPrepareRender(){switch(super._doPrepareRender(),this._runAction=this.action()){case _r.INFO:this._info.prepareRender();break;case _r.DELETE:this._delete.prepareRender();break;case _r.ADD:this._add.prepareRender();break;case _r.EDIT:this._edit.prepareRender();break;case _r.LINK:this._link.prepareRender();break;case _r.CUSTOM:this._custom.prepareRender();break;case _r.MOVE:this._move.prepareRender()}}}Rr.DELETE_LABEL="Delete",Rr.DETAIL_LABEL="More",Rr.LINK_LABEL=">",Rr.ADD_LABEL="Add",Rr.EDIT_LABEL="Edit",Rr.INFO_LABEL="Info",Rr.CUSTOM_LABEL="?",function(t){t.NONE="none",t.ORDER="order",t.CHECK="check",t.SHAPE="shape",t.LETTER="letter",t.IMAGE="image",t.BUTTON="button",t.MOVE="move"}(cr||(cr={}));class Er extends pr{_doInitDefaults(){this.setLabel("...")}}class Vr extends Vi{constructor(t,e,s){super(t,s),this.minOrderWidth=0,this.needOrderWidth=!1,this.orderWidth=NaN,this._owner=e,this._order=new ur(this,s&&s._order),this._check=new gr(this,s&&s._check),this._shape=new wr(this,s&&s._shape),this._letter=new mr(this,s&&s._letter),this._image=new fr(this,s&&s._image),this._button=new Er(this,void 0,s&&s._button),this._move=new ar(this,s&&s._move)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._display=Vr.DISPLAY}owner(){return this._owner}display(){return Tt(this._display,this._defs&&this._defs._display)}setDisplay(t){t!==this._display&&(this._display=t,this._displayChanged=!0,this.needOrderWidth=!0,this._changed())}order(){return this._order}check(){return this._check}shape(){return this._shape}letter(){return this._letter}image(){return this._image}button(){return this._button}move(){return this._move}getDisplay(t){return this.disp}isMaster(t){return this._owner.isMaster(t)}_doPrepareRender(){switch(super._doPrepareRender(),this.disp=this.display()){case cr.ORDER:this.minOrderWidth=It(this._order.minWidth(),0),this.needOrderWidth=this._order.fitWidth(),this.orderWidth=0,this._order.prepareRender();break;case cr.CHECK:this._check.prepareRender();break;case cr.SHAPE:this._shape.prepareRender();break;case cr.LETTER:this._letter.prepareRender();break;case cr.IMAGE:this._image.prepareRender();break;case cr.BUTTON:this._button.prepareRender();break;case cr.MOVE:this._move.prepareRender()}this._displayChanged=this._displayChanged||this._defs&&this._defs._displayChanged}_doUnprepareRender(){switch(super._doUnprepareRender(),this.disp=this.display()){case cr.ORDER:this._order.unprepareRender();break;case cr.CHECK:this._check.unprepareRender();break;case cr.SHAPE:this._shape.unprepareRender();break;case cr.LETTER:this._letter.unprepareRender();break;case cr.IMAGE:this._image.unprepareRender();break;case cr.BUTTON:this._button.unprepareRender();break;case cr.MOVE:this._move.unprepareRender()}this._displayChanged=!1,this._defs&&this._defs.unprepareRender()}}Vr.DISPLAY=cr.ORDER,Vr.TAG="rowBar";var $r="function"==typeof Float32Array;function Ar(t,e){return 1-3*e+3*t}function Dr(t,e){return 3*e-6*t}function kr(t){return 3*t}function Lr(t,e,s){return((Ar(e,s)*t+Dr(e,s))*t+kr(e))*t}function Tr(t,e,s){return 3*Ar(e,s)*t*t+2*Dr(e,s)*t+kr(e)}function Mr(t){return t}const Pr=Math.pow,Ir=Math.sqrt,Nr=Math.sin,Or=Math.cos,Br=Math.PI,Fr=1.70158,zr=1.525*Fr,Hr=2*Br/3,Wr=2*Br/4.5,Gr=function(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375},Ur=function(t,e,s,i){if(!(0<=t&&t<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&s===i)return Mr;for(var r=$r?new Float32Array(11):new Array(11),n=0;n<11;++n)r[n]=Lr(.1*n,t,s);function o(e){for(var i=0,n=1;10!==n&&r[n]<=e;++n)i+=.1;--n;var o=i+.1*((e-r[n])/(r[n+1]-r[n])),a=Tr(o,t,s);return a>=.001?function(t,e,s,i){for(var r=0;r<4;++r){var n=Tr(e,s,i);if(0===n)return e;e-=(Lr(e,s,i)-t)/n}return e}(e,o,t,s):0===a?o:function(t,e,s,i,r){var n,o,a=0;do{(n=Lr(o=e+(s-e)/2,i,r)-t)>0?s=o:e=o}while(Math.abs(n)>1e-7&&++a<10);return o}(e,i,i+.1,t,s)}return function(t){return 0===t?0:1===t?1:Lr(o(t),e,i)}}(.01,.99,.01,.99),qr={linear:t=>t,inQuad:t=>t*t,outQuad:t=>1-(1-t)*(1-t),inOutQuad:t=>t<.5?2*t*t:1-Pr(-2*t+2,2)/2,inCubic:t=>t*t*t,outCubic:t=>1-Pr(1-t,3),outCubic2:t=>1-Pr(1-t,4),inOutCubic:t=>t<.5?4*t*t*t:1-Pr(-2*t+2,3)/2,inQuart:t=>t*t*t*t,outQuart:t=>1-Pr(1-t,4),inOutQuart:t=>t<.5?8*t*t*t*t:1-Pr(-2*t+2,4)/2,inQuint:t=>t*t*t*t*t,outQuint:t=>1-Pr(1-t,5),inOutQuint:t=>t<.5?16*t*t*t*t*t:1-Pr(-2*t+2,5)/2,inSine:t=>1-Or(t*Br/2),outSine:t=>Nr(t*Br/2),inOutSine:t=>-(Or(Br*t)-1)/2,inExpo:t=>0===t?0:Pr(2,10*t-10),outExpo:t=>1===t?1:1-Pr(2,-10*t),outExpo2:t=>1===t?1:1-Pr(2,-12*t),inOutExpo:t=>0===t?0:1===t?1:t<.5?Pr(2,20*t-10)/2:(2-Pr(2,-20*t+10))/2,inCirc:t=>1-Ir(1-Pr(t,2)),outCirc:t=>Ir(1-Pr(t-1,2)),inOutCirc:t=>t<.5?(1-Ir(1-Pr(2*t,2)))/2:(Ir(1-Pr(-2*t+2,2))+1)/2,inBack:t=>2.70158*t*t*t-Fr*t*t,outBack:t=>1+2.70158*Pr(t-1,3)+Fr*Pr(t-1,2),inOutBack:t=>t<.5?Pr(2*t,2)*(7.189819*t-zr)/2:(Pr(2*t-2,2)*((zr+1)*(2*t-2)+zr)+2)/2,inElastic:t=>0===t?0:1===t?1:-Pr(2,10*t-10)*Nr((10*t-10.75)*Hr),outElastic:t=>0===t?0:1===t?1:Pr(2,-10*t)*Nr((10*t-.75)*Hr)+1,inOutElastic:t=>0===t?0:1===t?1:t<.5?-Pr(2,20*t-10)*Nr((20*t-11.125)*Wr)/2:Pr(2,-20*t+10)*Nr((20*t-11.125)*Wr)/2+1,inBounce:t=>1-Gr(1-t),outBounce:Gr,inOutBounce:t=>t<.5?(1-Gr(1-2*t))/2:(1+Gr(2*t-1))/2,cubicBezier:t=>function(t,e,s,i,r){const n=3*(s-e),o=3*(i-s)-n;return(r-e-n-o)*Math.pow(t,3)+o*Math.pow(t,2)+n*t+e}(t,.01,.99,.01,.99),cubicBezier2:t=>Ur(t)};class jr extends e{static create(t,e,s=1e3,i="linear"){return new Yr(t,e,s,i).start()}constructor(t,e){super(),this._duration=t,this._easing=e&&qr[e]||qr.linear}_doDestory(){this.stop()}isFinished(){return!this._timer}start(){return this.stop(),this._started=+new Date,this._timer=w.setInterval(()=>{const t=this.$_getStep();if(t>=1)this._doStep(1),this.$_stop(t);else try{this._doStep(t)}catch(e){throw this.$_stop(t),e}},20),this._doStep(0),this._timer.runner&&this._timer.runner(),this}stop(){this._timer&&this.$_stop(this.$_getStep())}$_getStep(){const t=isNaN(this._timer.step)?(+new Date-this._started)/this._duration:this._timer.step;return this._easing(t)}$_stop(t){w.clearInterval(this._timer),this._timer=void 0,this._doStop(t,t<1)}}class Yr extends jr{constructor(t,e,s,i){super(s,i),this.onstep=t,this.onfinish=e}_doStep(t){this.onstep(t)}_doStop(t,e){var s;null===(s=this.onfinish)||void 0===s||s.call(this,t,e)}}class Qr extends e{}class Zr extends e{constructor(t){super(),this._dragging=!1,this._control=t}get control(){return this._control}get dragging(){return this._dragging}get startWhenCreated(){return!1}get cursor(){}canSwipe(){return!1}start(t,e,s,i,r){return this.cancel(),!!this._doStart(t,e,s,i,r)&&(this._dragging=!0,this._showFeedback(i,r),!0)}drag(t,e,s,i,r){return!(!this._dragging||!this._doDrag(t,e,s,i,r))&&(this._moveFeedback(i,r),!0)}cancel(){if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this.end()}}drop(t,e,s){if(this._dragging)try{this._dragging=!1,this._canAccept(t,e,s)?this._doCompleted(t,e,s):this._doCanceled()}finally{this.end()}}swipe(t){if(this._doSwipe(t))return this.end(),!0}end(){try{this._dragging=!1,this._hideFeedback()}finally{this._doEnded()}}_doSwipe(t){return!1}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,s,i,r){return!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}}class Xr extends e{constructor(t,e,s,i,r,n){super(),this.distance=t,this.duration=e,this.threshold=s,this.handler=i,this.endHandler=r,this.startHandler=n,this._easing=qr.outExpo}_doDestory(){this.stop()}run(){var t;return this.stop(),this._started=+new Date,this._prev=0,this._timer=setInterval(()=>{try{const t=+new Date-this._started;if(t>this.duration)this.stop();else{const e=+new Date,s=this._easing((e-this._started)/this.duration),i=this.distance*(s-this._prev);i<this.threshold||!0===this.handler(i,t/this.duration)?this.stop():this._prev=s}}catch(t){throw this.stop(),t}},20),null===(t=this.startHandler)||void 0===t||t.call(this),this}stop(){var t;this._timer&&(clearInterval(this._timer),this._timer=void 0,null===(t=this.endHandler)||void 0===t||t.call(this))}}const Kr=function(t,e,s){const i=t.style;let r=t._sts_;if(t instanceof HTMLElement?t.className=e:de.resetClassList(t,e),r)for(const t in r)i[t]="";r={},"string"==typeof s?t.classList.add(s):s&&(Object.assign(r,s),Object.assign(i,s)),t._sts_=r};class Jr extends ce{constructor(){super(...arguments),this._prevStyle={}}static measureButton(t,e,s){const i=t.dom,r=e.letter();let n=+e.width(),o=+e.height();return r?(n=r.size||n,o=r.size||o,s.dataset.type=r.transparent?"letter-transparent":"letter",s.textContent=r.letter):(delete s.dataset.type,s.textContent=e.label()),de.setAttr(s,"aria-label",e.hint()),isNaN(n)?s.style.width="":s.style.width=n+"px",(t.hRelative=e.isRelativeHeight())?(s.style.height="100%",i.style.height=String(o)):(s.style.height=isNaN(o)?"":o+"px",i.style.height=""),{width:s.offsetWidth+1,height:i.offsetHeight}}getDragRequest(t,e){if(this._move&&this._move.dom().contains(t))return new en(this.row)}_getOverflow(){return"hidden"}_doInitDom(t,e){const s=e.style;ce.BOUNDING&&(s.border=ce.BOUNDING_BORDER),s.display="flex",s.alignItems="center",s.justifyContent="center"}isDom(t){return this._move&&this._move.dom().contains(t)}$_prepareMove(t,e,s,i){const r=this.dom;let n=this._move;return n?n.attached()||n.appendTo(r):(n&&n.destroy(),n=this._move=this.control.shapes().createStock(r.ownerDocument,"@drag"),n.appendTo(r)),n.resize(t.size()),Kr(r,rn.CLASS_NAME,s),Kr(n.dom(),rn.MOVE_CLASS,i),n.dom()}}Jr.MOVE_CLASS="rtc-rowbar-move";const tn={fill:"none",stroke:"white",strokeWidth:"1px",width:"100%",height:"100%",display:"block",position:"relative",boxSizing:"border-box",border:"1px solid #00000040",borderRadius:"50%"};class en extends Qr{constructor(t){super(),this.row=t}}class sn extends Qr{constructor(t){super(),this.row=t}}class rn extends Jr{static none_measure(t,e,s,i,r){return t.$_prepareNone(),{width:0,height:0}}static order_measure(t,e,s,i,r){const n=s.order(),o=t.$_prepareOrder(n.getCellStyle(r),n.getStyle(r));if(s.needOrderWidth){const t=Math.log10(i.rowCount()+n.rowOffset());o.textContent=(n.prefix()||"")+"8".repeat(t)+(n.suffix()||""),s.orderWidth=e.offsetWidth,s.needOrderWidth=!1}return o.textContent=n.getText(i,r),{width:Math.max(s.minOrderWidth,s.orderWidth,e.offsetWidth),height:e.offsetHeight}}static check_measure(t,e,s,i,r){const n=s.check();if(!s.isMaster(r)||n.masterVisible()){const s=n.size();return t.$_prepareCheck(s,n.getCellStyle(r),n.getStyle(r),!0),{width:e.offsetWidth,height:e.offsetHeight}}return t.$_prepareCheck(0,n.runStyle(s._displayChanged),n.getStyle(r),!1),{width:0,height:0}}static letter_measure(t,e,s,i,r){const n=s.letter();return t.$_prepareLetter(n.getCellStyle(r),n.getStyle(r)).textContent=s.letter().letter(),{width:e.offsetWidth,height:e.offsetHeight}}static shape_measure(t,e,s,i,r){const n=s.shape(),o=n.size();return t.$_prepareShape(n,r,n.getCellStyle(r),n.getStyle(r)),{width:o,height:o}}static image_measure(t,e,s,i,r){const n=s.image(),o=n.width(),a=n.height();return t.$_prepareImage(n,r,n.getCellStyle(r),n.getStyle(r),o,a),{width:o,height:a}}static button_measure(t,e,s,i,r){const n=s.button();return Jr.measureButton(t,n,t.$_prepareButton(n.getCellStyle(r),n.getStyle(r)))}static move_measure(t,e,s,i,r){const n=s.move(),o=n.size();return t.$_prepareMove(n,r,n.getCellStyle(r),n.getStyle(r)),{width:o,height:o}}static none_render(t,e,s){}static order_render(t,e,s){}static check_render(t,e,s){if(t.visible){const e=t.dom;e.firstElementChild.lastElementChild.checked=t.checked,de.setAttr(e.firstElementChild.lastElementChild,"aria-checked",t.checked),e.firstElementChild.firstElementChild.style.background=t.checked?"rgb(56, 128, 255)":"white"}}static letter_render(t,e,s){}static shape_render(t,e,s){}static image_render(t,e,s){}static button_render(t,e,s){}static move_render(t,e,s){}constructor(t){super(t,null,rn.CLASS_NAME)}measure(t,e,s,i,r){const n=rn.Measurers[this._display=t.getDisplay(s)],o=this.dom;this.dv=e,this.row=s,o.dataset.row=String(s),this.checked=t.owner().isRowChecked(s),this.hRelative=!1,this.internalClearSize();const a=n?n(this,o,t,e,s):{width:0,height:0};return this.wMeasure=a.width,this.hMeasure=a.height,{width:a.width,height:a.height}}render(t,e,s){this.internalResize(e,s);const i=rn.Renderrs[this._display];i&&i(this,this.wMeasure,this.hMeasure)}click(t,e){const s=this.row;this._check&&this._check.contains(e)?t.owner().toggleChecked(s):e===this._button?t.button().click(this,s):this._shape&&this._shape.containsDom(e)?t.shape().click(s,this._shape._url_):e===this._image&&t.image().click(s,this._image._url_)}getCheck(){return this._check.lastElementChild}displayOfDom(t){if(this._check&&this._check.contains(t))return cr.CHECK}isDom(t){return super.isDom(t)||this._check&&this._check.contains(t)||this._shape&&this._shape.dom().contains(t)||t===this._image||t===this._button||super.isDom(t)}getDragRequest(t,e){return this._check&&this._check.contains(t)&&e._rowBar.check().canDrag()?new sn(this.row):super.getDragRequest(t,e)}$_prepareNone(){de.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._shape,this._button,this._move])}$_prepareOrder(t,e){const s=this.dom;let i=this._order;return de.removeChildren(s,[this._check,this._image,this._letter,this._shape,this._button,this._move]),i?i.parentElement||s.appendChild(i):(i=this._order=s.ownerDocument.createElement("span"),i.style.whiteSpace="pre",s.appendChild(i)),Kr(s,rn.CLASS_NAME,t),Kr(i,rn.ORDER_CLASS,e),this._order}$_prepareCheck(t,e,s,i){if(this.visible=i){const i=this.dom,r=i.ownerDocument;let n,o,a=this._check;return de.removeChildren(i,[this._order,this._image,this._letter,this._shape,this._button,this._move]),a?a.parentElement||i.appendChild(a):(a=this._check=r.createElement("div"),i.appendChild(a),o=this.control.shapes().create(Li,null),o.setStyle(tn),o.resize(t),o.appendTo(a),n=r.createElement("input"),n.type="checkbox",Object.assign(n.style,{position:"absolute",left:"0",top:"0",opacity:"0",clipPath:"circle(0)",appearance:"none"}),a.appendChild(n)),Kr(i,rn.CLASS_NAME,e),Kr(a,rn.CHECK_CLASS,s),a}}$_prepareImage(t,e,s,i,r,n){const o=this.dom;let a=this._image;return de.removeChildren(o,[this._order,this._check,this._letter,this._shape,this._button,this._move]),a?a.parentElement||o.appendChild(a):(a=this._image=o.ownerDocument.createElement("img"),o.appendChild(a)),Kr(o,rn.CLASS_NAME,s),Kr(a,rn.IMAGE_CLASS,i),a.width=r,a.height=n,a._url_=a.src=t.getImageUrl(e),a}$_prepareLetter(t,e){const s=this.dom;let i=this._letter;return de.removeChildren(s,[this._order,this._check,this._image,this._shape,this._button,this._move]),i?i.parentElement||s.appendChild(i):(i=this._letter=s.ownerDocument.createElement("span"),i.style.whiteSpace="pre",s.appendChild(i)),Kr(s,rn.CLASS_NAME,t),Kr(i,rn.LETTER_CLASS,e),i}$_prepareShape(t,e,s,i){const r=this.dom,n=t.getShape(e);let o=this._shape;return de.removeChildren(r,[this._order,this._check,this._image,this._letter,this._button,this._move]),o&&n===o._url_?(o instanceof ki&&o.setShape(this.control.shapes().getCustom(n)),o.attached()||o.appendTo(r)):(o&&o.destroy(),o=this._shape=this.control.shapes().createStock(r.ownerDocument,n)||this.control.shapes().createCustom(n,null,null),o.appendTo(r)),o.resize(t.size()),o._url_=n,Kr(r,rn.CLASS_NAME,s),Kr(o.dom(),rn.SHAPE_CLASS,i),o.dom()}$_prepareButton(t,e){const s=this.dom;let i=this._button;return de.removeChildren(s,[this._order,this._image,this._letter,this._check,this._shape,this._move]),i?i.parentElement||s.appendChild(i):(i=this._button=s.ownerDocument.createElement("button"),Object.assign(i.style,rn.BUTTON_STYLE),s.appendChild(i)),Kr(s,rn.CLASS_NAME,t),Kr(i,rn.BUTTON_CLASS,e),i}$_prepareMove(t,e,s,i){return de.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._button,this._shape]),super.$_prepareMove(t,e,s,i)}}rn.CLASS_NAME="rtc-rowbar-cell",rn.ORDER_CLASS="rtc-rowbar-order",rn.IMAGE_CLASS="rtc-rowbar-image",rn.CHECK_CLASS="rtc-rowbar-check",rn.SHAPE_CLASS="rtc-rowbar-shape",rn.LETTER_CLASS="rtc-rowbar-letter",rn.BUTTON_CLASS="rtc-row-button",rn.BUTTON_STYLE={margin:0,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},rn.Measurers={none:rn.none_measure,order:rn.order_measure,check:rn.check_measure,letter:rn.letter_measure,shape:rn.shape_measure,image:rn.image_measure,button:rn.button_measure,move:rn.move_measure},rn.Renderrs={none:rn.none_render,order:rn.order_render,check:rn.check_render,letter:rn.letter_render,shape:rn.shape_render,image:rn.image_render,button:rn.button_render,move:rn.move_render};class nn extends Jr{static none_measure(t,e,s,i){return t.$_prepareNone(),{width:0,height:0}}static button_measure(t,e,s,i){return Jr.measureButton(t,e,t.$_prepareButton(e.getCellStyle(i),e.getStyle(i)))}static move_measure(t,e,s,i){const r=e.size();return t.$_prepareMove(e,i,e.getCellStyle(i),e.getStyle(i)),{width:r,height:r}}static handle_measure(t,e,s,i){return{width:0,height:0}}static button_render(t,e,s){}static move_render(t,e,s){}static handle_render(t,e,s){}constructor(t){super(t,null,nn.CLASS_NAME)}_doDestory(){this._handle=this._handle.destroy()}measure(t,e,s,i,r){const n=this._action=t.getAction(s),o=t.getButton(n);let a;if(this.dv=e,this.row=s,this.dom.dataset.row=String(s),this.hRelative=!1,this.dom.style.width="",o)a=nn.ButtonMeasurers[n](this,o,e,s);else if(n===_r.MOVE)a=nn.move_measure(this,t.move(),e,s);else{const i=t.getHandle(n);a=i?nn.HandleMeasurers[n](this,i,e,s):nn.none_measure(this,o,e,s)}return this.wMeasure=a.width,this.hMeasure=a.height,{width:a.width,height:a.height}}render(t,e,s){this.internalResize(e,s);const i=this._action,r=t.getButton(i);if(r)nn.ButtonRenderers[i](r,this.wMeasure,this.hMeasure);else if(i===_r.MOVE)nn.move_render(t.move(),this.wMeasure,this.hMeasure);else{const e=t.getHandle(i);e&&nn.HandleRenderers[i](e,this.wMeasure,this.hMeasure)}}click(t,e){if(e===this._button){const e=this.row,s=t.getButton(t.getAction(e));s&&s.click(t,e)}}isDom(t){return t===this._button||super.isDom(t)}$_prepareNone(){this._button&&this._button.remove()}$_prepareButton(t,e){const s=this.dom;let i=this._button;return de.removeChildren(s,[this._move]),i?i.parentElement||s.appendChild(i):(i=this._button=s.ownerDocument.createElement("button"),Object.assign(i.style,rn.BUTTON_STYLE),s.appendChild(i)),Kr(s,nn.CLASS_NAME,t),Kr(i,rn.BUTTON_CLASS,e),this._button}$_prepareMove(t,e,s,i){return de.removeChildren(this.dom,[this._button]),super.$_prepareMove(t,e,s,i)}}nn.CLASS_NAME="rtc-editbar-cell",nn.ButtonMeasurers={delete:nn.button_measure,add:nn.button_measure,edit:nn.button_measure,info:nn.button_measure,detail:nn.button_measure,link:nn.button_measure,custom:nn.button_measure},nn.HandleMeasurers={move:nn.handle_measure},nn.ButtonRenderers={delete:nn.button_render,add:nn.button_render,edit:nn.button_render,info:nn.button_render,detail:nn.button_render,link:nn.button_render,custom:nn.button_render},nn.HandleRenderers={move:nn.handle_render};class on extends e{static getDomId(t,e,s){return isNaN(e)?`-rtc-${t}-${s}`:`-rtc-g-${e}-${s}`}constructor(t){super(),this._styleArgs={row:-1,value:void 0},this._model=t}_doDestory(){}model(){return this._model}setModel(t){t!==this._model&&(this._model=t)}prepare(t,e){e._rnd_!==this._model.type&&(e._rnd_&&this.$_clearContent(t,e),e._rnd_=this._model.type),this._value=this._getValue(t),this._doPrepare(t,e)}_setClass(t,e){const s=this._model._classCallback;let i;if(s){this._styleArgs.row=e,this._styleArgs.value=this._value;const t=s(this._styleArgs);t&&(i=t)}i=i||this._model._class,i?t.classList.add(i):t.classList.remove(i)}_getStyleTarget(t){return t.style}getStyle(t){let e=this._model._style;const s=this._model._styleCallback;if(s){this._styleArgs.row=t,this._styleArgs.value=this._value;const i=s(this._styleArgs);if(i){if(!e)return i;Object.assign(e,i)}}return e}applyStyle(t,e){const s=this._getStyleTarget(t);if(s){if(this._prevStyle)for(let t in this._prevStyle)s[t]="";e?(Object.assign(s,e),this._prevStyle=Object.assign({},e)):this._prevStyle=void 0}}measureLayout(t,e,s,i){return this._doMeasure(t,e,s,i)}renderLayout(t,e,s,i){this._doRender(t,e,s,i)}unprepare(t,e){this._doUnprepare(t,e)}needBounds(){return!1}$_clearContent(t,e){this._doDisposeContent(e),de.clearChildren(e),e.style.display="block"}_doDisposeContent(t){}_setContext(t,e,s){e.id=on.getDomId(t.row,t.gindex,s.id),t.layout instanceof Zs&&t.layout.field&&(e._fld_=t.layout.field),e._row_=t.row}_getValue(t){}_getValues(t,e){const s=this._getValue(t);let i;if(Array.isArray(s)&&(i=s.length)){const t=new Array(i);let r=s[0],n=s[0],o=!1,a=0;for(;isNaN(r)&&a<i;)r=n=+s[++a];for(;a<i;a++){const i=+s[a];t[a]=i,isNaN(i)||(i<r&&(r=i),i>n&&(n=i),i<e&&(o=!0))}return{min:r,max:n,values:t,hasBelow:o}}return{values:[]}}}class an extends on{_getValue(t){const e=this._model._value;return void 0!==e?e:t.value()}}class hn extends an{}class ln extends an{_getStyleTarget(t){return this._svg.svg.style}_doPrepare(t,e){e[wt]=(this._svg=this.$_getSvg(t,e)).svg}_doUnprepare(t,e){this._svg=this._svg&&this._svg.destroy(),e[wt]=null}$_getSvg(t,e){const s=this._getSvgClass();let i=e.getElementsByClassName(s)[0];return i?new Ts(i,null):(i=Ts.create(t.doc),e.appendChild(i),new Ts(i,s))}}class dn extends on{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const r=t.layout._parent;return{width:r.canContainHspace()?this.model().space:1,height:r.canContainVspace()?this.model().space:1}}_doRender(t,e,s,i){}_doUnprepare(t,e){}setValue(t,e){}}dn.SPAN_CLASS="rtc-spacer-span";class _n extends Oi{constructor(t,e,s,i){super(t,s,i),this._model=e,this._relWidth=k(e._widthDim),this._relHeight=k(e._heightDim)}model(){return this._model}manager(){return this._manager}isSpacer(){return!1}setRelativePositions(){const t=this._model;this._relLeft=A(t._leftDim),this._relRight=A(t._rightDim),this._relTop=A(t._topDim),this._relBottom=A(t._bottomDim)}setRelativeHorz(){this._relLeft=A(this._model._leftDim),this._relRight=A(this._model._rightDim)}setRelativeVert(){this._relTop=A(this._model._topDim),this._relBottom=A(this._model._bottomDim)}prepareLayout(t,e){const s=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(s),this._doApplyImportantStyles(s),this._prevMax={width:NaN,height:NaN},this.mw=this.mh=NaN;const i=this._padding=this.getPadding2();i.horz=i.left+i.right+i.borderLeft+i.borderRight,i.vert=i.top+i.bottom+i.borderTop+i.borderBottom}measureLayout(t,e,s,i){const r=this._padding;s-=r.horz,i-=r.vert;const n=this._doMeasureLayout(t,e,s,i);return this.mw=n.width+=r.horz,this.mh=n.height+=r.vert,n}getLabel(){return this._label}}class cn extends _n{static isView(t){return t.classList.contains(this.CLASS_NAME)}constructor(t,e){super(t,e,!0,cn.CLASS_NAME),e||I(b.layoutMustSet),this._model=e}tag(){return this._model.tag}isRoot(){return!(this.parent instanceof cn)}scrollable(){return!1}build(t,e){for(const s of this._model.children())if(this._canContain(s))if(s instanceof Zs)this.addChild(new gn(t,s));else if(s instanceof Xs)this.addChild(new pn(t,s));else if(s instanceof ti){const i=e.createLayoutView(t,s);i.build(t,e),this.addChild(i)}}refreshModels(t){this._model=t;for(let e=0,s=this.childCount;e<s;e++){const s=this.getChild(e),i=t.getChild(e);s instanceof un?s._model=i:s instanceof cn&&s.refreshModels(i)}}saveEditValues(t){for(let e=0,s=this.childCount;e<s;e++){const s=this.getChild(e);s instanceof un?s.saveEditValue(t):s instanceof cn&&s.saveEditValues(t)}}fieldBy(t,e){return e?this.findDescendant(e=>e instanceof gn&&e.model().field===t):this.findChild(e=>e instanceof gn&&e.model().field===t)}childByTag(t,e=!1){return e&&this.findDescendant(e=>e.tag()===t),this.findChild(e=>e.tag()===t)}simpleById(t,e){return e?this.findDescendant(e=>e instanceof un&&e.model().id()===t):this.findChild(e=>e instanceof un&&e.model().id()===t)}simpleByModel(t,e){return e?this.findDescendant(e=>e instanceof un&&e.model().tid===t.tid):this.findChild(e=>e instanceof un&&e.model().id===t.id())}simpleByDom(t,e){return e?this.findDescendant(e=>e instanceof un&&e.containsDom(t)):this.findChild(e=>e instanceof un&&e.containsDom(t))}getRenderer(t){const e=this.simpleByDom(t,!0);return e&&e.renderer()}simpleBy(t,e){return e&&this.findDescendant(e=>e instanceof un&&e.layout.tag===t),this.findChild(e=>e instanceof un&&e.tag()===t)}literalBy(t,e){return e?this.findDescendant(e=>e instanceof pn&&e.tag()===t):this.findChild(e=>e instanceof pn&&e.tag()===t)}simplesByRenderer(t){const e=[];return this.findDescendants(e=>e instanceof un&&e.renderer().type()===t,e),e}getValues(t){const e={};return this._getValues(t,e),e}_getValues(t,e){this._visibles.forEach(s=>{if(s instanceof un){const i=s.getEditValue(t);i&&(e[i.field]=i.value)}else s instanceof cn&&s._getValues(t,e)})}_doInitContent(t,e){ce.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=ce.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e,this._visibles=[],this.forEach(t=>{t._internalVisible(t.model().visible)&&(this._visibles.push(t),t._explicitWidth=t._explicitHeight=t.mw=t.mh=NaN)})}_doApplyStyles(t){const e=this.model().style;e&&Object.assign(t,e)}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute")}_doMeasure(t,e,s){throw new Error("Not used override.")}prepareLayout(t,e){super.prepareLayout(t,e),this._visibles.forEach(s=>s.prepareLayout(t,e))}_doRender(t,e,s){const i=this._visibles,r=this._padding;e-=r.horz,s-=r.vert,this.resizeContent(e,s),this._doLayoutContent(t,e,s),i.forEach(e=>{e.render(t)});for(let t=i.length-1;t>=0;t--)i[t]instanceof un&&i[t].freeRenderer()}_doAfterRender(){super._doAfterRender(),this._manager=null}_canContain(t){return!0}_getChildMaxWidth(t,e){return t._leftDim&&(e-=D(t._leftDim,e)),t._rightDim&&(e-=D(t._rightDim,e)),e}_getChildMaxHeight(t,e){return t._topDim&&(e-=D(t._leftDim,e)),t._bottomDim&&(e-=D(t._rightDim,e)),e}_defaultExplicitWidth(t){return NaN}_defaultExplicitHeight(t){return NaN}_measureChildren(t,e,s,i,r,n){let o,a;for(const h of t){const t=h.model(),l=t._widthDim,d=t._heightDim;h._explicitWidth=this._defaultExplicitWidth(i),h._explicitHeight=this._defaultExplicitHeight(r),l?l.fixed?h._explicitWidth=a=l.size:isNaN(this._explicitWidth)?a=i:h._explicitWidth=a=i*l.size/100:a=i,d?d.fixed?h._explicitHeight=o=d.size:isNaN(this._explicitHeight)?o=r:h._explicitHeight=o=r*d.size/100:o=r,h.measureLayout(e,s,a,o),isNaN(h._explicitHeight)||(h.mh=h._explicitHeight),isNaN(h._explicitWidth)||(h.mw=h._explicitWidth),n&&n(h)}}}cn.CLASS_NAME="-rtc-layout-";class un extends _n{constructor(t,e){super(t,e,!1,null),this._selected=!1,this._focused=!1,this._ctx={row:-1,value:void 0}}get layout(){return this._model}model(){return this._model}value(){return this._value}renderer(){return this._model.renderer}rendererImpl(){return this._renderer}tag(){return this._model.tag}get selected(){return this._selected}get focused(){return this._focused}get row(){return this._model.row}get gindex(){return this._model.gindex}field(){return this._model.getField()}align(){return this._model.align}getValue(t){return this.layout.dv.getValue(this.layout.row,t,!0)}useImage(t){this._manager.useImage(t)}getImageSize(t){return this._manager.getImageSize(t)}getIcon(t,e){return this._manager.getIcon(t,e)}inflate(t){return this._manager.owner().inflateField(t,this.field())}textFormatter(){return this._manager.textFormatter}boolFormatter(){return this._manager.boolFormatter}numberFormatter(){return this._manager.numberFormatter}dateFormatter(){return this._manager.dateFormatter}getEditValue(t){const e=this.field();if(e){const s=t.borrowRenderer(this._model.renderer);try{if(s instanceof hn){return{field:e,value:s.getValue(this.dom)}}}finally{s&&t.freeRenderer(s)}}}setEditValue(t,e){if(this.field()){const s=t.borrowRenderer(this._model.renderer);try{s instanceof hn&&s.setValue(this.dom,e)}finally{s&&t.freeRenderer(s)}}}saveEditValue(t){const e=this.getEditValue(t);this._editValue=e&&e.value}isSpacer(){return this._spacer}_doInitDom(t,e){ce.BOUNDING&&(e.style.border=ce.BOUNDING_BORDER),e.style.overflow="hidden",this._table=t.createElement("div"),Object.assign(this._table.style,{display:"table",width:"100%",height:"100%"}),e.appendChild(this._table)}isDom(t){return super.isDom(t)||this.containsDom(t)}prepareView(t){this._renderer=t.borrowRenderer(this._model.renderer),this._spacer=this._renderer instanceof dn}_doPrepareRender(t,e){const s=this._table;this._manager=e,this._renderer.prepare(this,s);const i=s.firstElementChild,r=this._model;i&&(i.style.display="table-cell",i.style.verticalAlign=r.valign),r.align&&(s.style.textAlign=r.align);const n=r.classCallback;let o;o=n?n(this):r.class,o?this.dom.className=o:delete this.dom.className}_doApplyStyles(t){const e=this._model.styleCallback;for(let e in this._prevStyles)t[e]="";const s=this._prevStyles={};let i=this._model.style;if(i&&Object.assign(s,i),e){this._ctx.row=this._model.row,this._ctx.value=this._value;let t=e(this._ctx);t&&Object.assign(s,t)}Object.assign(t,s);const r=this._renderer.getStyle(this._model.row);this._renderer.applyStyle(this._table,r)}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute")}_doMeasure(t,e,s){const i=this._table;this.setWidth(this._renderer.needBounds()?e:NaN),this.setHeight(NaN);const r=this._renderer.measureLayout(this,i,e,s);this._renderer.needBounds()&&this.setWidth(NaN);let n=this._explicitWidth,o=this._explicitHeight;return isNaN(n)?n=r?r.width:i.offsetWidth:n-=this._padding.horz,isNaN(o)?o=r?r.height:i.offsetHeight:o-=this._padding.vert,{width:n,height:o}}_doRender(t,e,s){const i=this._padding,r=this._table;e-=i.horz,s-=i.vert,this._renderer.renderLayout(this,r,e,s)}freeRenderer(){this._renderer.unprepare(this,this._table),this._manager.freeRenderer(this._renderer),this._manager=null,this._testing()||(this._renderer=null)}_doMeasureLayout(t,e,s,i){return this._doMeasure(t,s,i)}}class gn extends un{field(){return this.layout.field}_doPrepareRender(t,e){this._value=void 0!==this._editValue?this._editValue:this.layout.getValue(),super._doPrepareRender(t,e)}}class pn extends un{_doPrepareRender(t,e){this._value=void 0!==this._editValue?this._editValue:this.layout.value,super._doPrepareRender(t,e)}}class fn extends cn{_doMeasureLayout(t,e,s,i){const r=this._visibles;let n=this._explicitWidth,o=this._explicitHeight;if(this._measureChildren(this._visibles,t,e,s,i,null),isNaN(n)||this.model().canGrow()){let t=0;r.forEach(e=>{let s=e.mw,i=e.model()._leftDim||e.model()._rightDim;i&&(i.fixed?s+=i.size:s/=(100-i.size)/100),t=Math.max(t,s)}),n=isNaN(this.mw)?t:Math.max(this.mw,t)}if(isNaN(o)||this.model().canGrow()){let t=0;r.forEach(e=>{let s=e.mh,i=e.model()._topDim||e.model()._bottomDim;i&&(i.fixed?s+=i.size:s/=(100-i.size)/100),t=Math.max(s,t)}),o=isNaN(this.mh)?t:Math.max(this.mh,t)}return{width:n,height:o}}_doLayoutContent(t,e,s){for(let t of this._visibles){const i=t.model(),r=It(t._explicitLeft,i.getLeftIn(e)),n=It(t._explicitTop,i.getTopIn(s));let o=0,a=0;if(isNaN(r)){const s=isNaN(r)?It(t._explicitRight,i.getRightIn(e)):0;o=isNaN(s)?(e-t.mw)/2:e-t.mw-s}else o=r;if(isNaN(n)){const e=isNaN(n)?It(t._explicitBottom,i.getBottomIn(s)):0;a=isNaN(e)?(s-t.mh)/2:s-t.mh-e}else a=n;t.mx=o,t.my=a,t.applyMeasuredBounds()}}}var wn,mn,yn,vn,bn,Sn,Cn,xn;!function(t){t.DEFAULT="default",t.REPEAT="repeat",t.LOOP="loop",t.RANDOM="random"}(wn||(wn={}));class Rn extends ae{_doInitDefaults(){this._enabled=!1,this._mode=wn.DEFAULT,this._backward=!1,this._duration=Rn.DURATION,this._changeDuration=Rn.CHANGE_DURATION}enabled(){return Tt(this._enabled,this._defs&&this._defs._enabled)}setEnabled(t){t!==this._enabled&&(this._enabled=t,this.owner().autoScrollChanged(this))}mode(){return Tt(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}backward(){return Tt(this._backward,this._defs&&this._defs._backward)}setBackward(t){this._backward=t}duration(){return Nt(this._duration,this._defs&&this._defs._duration,Rn.DURATION)}setDuration(t){this._duration=t}changeDuration(){return Nt(this._changeDuration,this._defs&&this._defs._changeDuration,Rn.CHANGE_DURATION)}setChangeDuration(t){this._changeDuration=t}}Rn.DURATION=5e3,Rn.CHANGE_DURATION=300;class En extends ae{_doInitDefaults(){this._target="_blank"}rootUrl(){return Tt(this._rootUrl,this._defs&&this._defs._rootUrl)}setRootUrl(t){this._rootUrl=t}linkField(){return Tt(this._linkField,this._defs&&this._defs._linkField)}setLinkField(t){this._linkField=t}linkCallback(){return Tt(this._linkCallback,this._defs&&this._defs._linkCallback)}setLinkCallback(t){this._linkCallback=t}target(){return Tt(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}getLink(t,e,s){const i=this.linkCallback();let r;return i&&(r=i({control:t,row:s})),void 0!==r&&this.linkField&&(r=e.getValue(s,this.linkField(),!0)),(this.rootUrl()||"")+(r||"")}}!function(t){t.NONE="none",t.PADDING="padding",t.BAR="bar"}(mn||(mn={}));class Vn extends ae{_doInitDefaults(){this._visible=!0,this._nearIndent=mn.BAR,this._farIndent=mn.NONE,this._skipLast=!1,this._skipGroupLast=!1,this._leafOnly=!1}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}masterStyle(){return Tt(this._masterStyle,this._defs&&this._defs._masterStyle)}setMasterStyle(t){t!==this._masterStyle&&(this._masterStyle=t,this._changed())}nearIndent(){return Tt(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return Tt(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}skipLast(){return Tt(this._skipLast,this._defs&&this._defs._skipLast)}setSkipLast(t){t!==this._skipLast&&(this._skipLast=t,this._changed())}skipGroupLast(){return Tt(this._skipGroupLast,this._defs&&this._defs._skipGroupLast)}setSkipGroupLast(t){t!==this._skipGroupLast&&(this._skipGroupLast=t,this._changed())}leafOnly(){return Tt(this._leafOnly,this._defs&&this._defs._leafOnly)}setLeafOnly(t){t!==this._leafOnly&&(this._leafOnly=t,this._changed())}}class $n extends ae{_doInitDefaults(){this._visible=!0,this._nearIndent=mn.NONE,this._farIndent=mn.NONE}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}nearIndent(){return Tt(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return Tt(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}}class An extends Rn{_doInitDefaults(){super._doInitDefaults(),this._rowsPerScroll=1}rowsPerScroll(){return It(this._rowsPerScroll,this._defs&&this._defs._rowsPerScroll)}setRowsPerScroll(t){this._rowsPerScroll=t}}class Dn extends ae{constructor(t,e){super(t,e),this._link=new En(t,e&&e._link),this._focusMask=new $n(t,e&&e._focusMask),this._autoScroll=new An(t,e&&e._autoScroll)}_doInitDefaults(){this._tempalte="row",this._clickAction=Zt.NONE,this._masterClickAction=Zt.EXPAND,this._pressAction=Zt.NONE,this._swipeAction=Kt.COMMAND,this._focusable=!1,this._touchEffect=!0,this._deleteAnimation=!0}link(){return this._link}focusMask(){return this._focusMask}autoScroll(){return this._autoScroll}template(){return Tt(this._tempalte,this._defs&&this._defs._tempalte)}setTemplate(t){t!==this._tempalte&&(this._tempalte=t,this._changed())}largeTemplate(){return Tt(this._largeTemplate,this._defs&&this._defs._largeTemplate)}setLargeTemplate(t){t!==this._largeTemplate&&(this._largeTemplate=t,this._changed())}templateCallback(){return Tt(this._templateCallback,this._defs&&this._defs._templateCallback)}setTemplateCallback(t){t!==this._templateCallback&&(this._templateCallback=t,this._changed())}templateParams(){return Object.assign({},this.$_internalParams())}setTemplateParams(t){let e=!1;t?w.equalObjects(t,this._templateParams)||(this._templateParams=Object.assign({},t),e=!0):this._templateParams&&(this._templateParams=void 0,e=!0),e&&this._changed()}$_internalParams(){return Tt(this._templateParams,this._defs&&this._defs._templateParams)}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){const e=w.copyObject(t);e!==this._style&&(this._style=e,this._changed())}height(){return It(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._changed())}minHeight(){return It(this._minHeight,this._defs&&this._defs._minHeight)}setMinHeight(t){t!==this._minHeight&&(this._minHeight=t,this._changed())}maxHeight(){return It(this._maxHeight,this._defs&&this._defs._maxHeight)}setRowHeight(t){t!==this._maxHeight&&(this._maxHeight=t,this._changed())}clickAction(){return Tt(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}masterClickAction(){return Tt(this._masterClickAction,this._defs&&this._defs._masterClickAction)}setMasterClickAction(t){t!==this._masterClickAction&&(this._masterClickAction=t,this._changed())}pressAction(){return Tt(this._pressAction,this._defs&&this._defs._pressAction)}setPressAction(t){t!==this._pressAction&&(this._pressAction=t,this._changed())}masterPressAction(){return Tt(this._masterPressAction,this._defs&&this._defs._masterPressAction)}setMasterPressAction(t){t!==this._masterPressAction&&(this._masterPressAction=t,this._changed())}swipeAction(){return Tt(this._swipeAction,this._defs&&this._defs._swipeAction)}setSwipeAction(t){return this._swipeAction=t}commands(){const t=Tt(this._commands,this._defs&&this._defs._commands);return t?t.slice(0):void 0}setCommands(t){w.equalArrays(t,this._commands)||(this._commands=t?t.slice(0):void 0,this._changed())}focusable(){return Tt(this._focusable,this._defs&&this._defs._focusable)}setFocusable(t){return this._focusable=t}touchEffect(){return Tt(this._touchEffect,this._defs&&this._defs._touchEffect)}setTouchEffect(t){this._touchEffect=t}deleteAnimation(){return Tt(this._deleteAnimation,this._defs&&this._defs._deleteAnimation)}setDeleteAnimation(t){this._deleteAnimation=t}}class kn extends Dn{constructor(t,e){super(t,e),this._borderLine=new Vn(t,e&&e._borderLine)}_doInitDefaults(){super._doInitDefaults()}borderLine(){return this._borderLine}}class Ln extends Dn{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults()}table(){return Tt(this._table,this._defs&&this._defs._table)}setTable(t){t!==this._table&&(this._table=t,this._changed())}largeTable(){return Tt(this._largeTable,this._defs&&this._defs._largeTable)}setLargeTable(t){t!==this._largeTable&&(this._largeTable=t,this._changed())}}class Tn extends ae{inflateParam(t,e,s){const i=this.templateParams2();if(i){const t=s.name,e=i[t];if("function"==typeof e)return e({context:this,control:this.owner().wrapperOrThis(),param:t});if(void 0!==e)return e}}template(){return Tt(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}templateParams2(){return Tt(this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}}class Mn extends Tn{_doInitDefaults(){}inflateParam(t,e,s){}inflateStock(t,e,s){switch(s.name){case"message_visible":return this.messageVisible();case"message":return this.message();case"load_visible":return this.loadVisible();case"load_label":return this.loadLabel();case"load_callback":return()=>this.onLoadClick()}}messageVisible(){return Tt(this._messageVisible,this._defs&&this._defs._messageVisible)}setMessageVisible(t){this._messageVisible=t}message(){return Tt(this._message,this._defs&&this._defs._message)}setMessage(t){t!==this._message&&(this._message=t,this._changed())}loadVisible(){return Tt(this._loadVisible,this._defs&&this._defs._loadVisible)}setLoadVisible(t){this._loadVisible=t}loadLabel(){return Tt(this._loadLabel,this._defs&&this._defs._loadLabel)}setLoadLabel(t){t!==this._loadLabel&&(this._loadLabel=t,this._changed())}onLoadClick(){return Tt(this._onLoadClick,this._defs&&this._defs._onLoadClick)}setOnLoadClick(t){this._onLoadClick=t}}class Pn extends Tn{_doInitDefaults(){}inflateStock(t,e,s){}}class In extends Hi{constructor(t){super(t,In.CLASS_NAME),this._expanded=!0}reset(t,e){this.setSize(t),e!==this._expanded&&(this._expanded=e,this._svg.clear(),this._svg.path(e?In.EXPANDED_PATH:In.COLLAPSED_PATH))}_doInitSvg(t){t.setViewSize(512),t.path(In.EXPANDED_PATH),t.setStyle({fill:"none",strokeWidth:48,strokeLinecap:"round",strokeLinejoin:"round"}),this.reset(18,!0)}_doClick(){}}In.CLASS_NAME="rtc-item-expander",In.EXPANDED_PATH="M 184 112 l 144 144 -144 144",In.COLLAPSED_PATH="M 112 184 l 144 144 144 -144";class Nn extends Oi{constructor(t){super(t,!0,"rtc-item-view"),this._prevStyles={},this._layoutChanged=!1,this.indent=0,this.bodyIndent=0,this.bodyMargin=0,this.detailed=!1,this.alternate=!1,this.checked=!1,this.selected=!1,this.searched=!1}layout(){return this._layout}layoutView(){return this._layoutView}isFixedHeight(){return!1}isFixedWidth(){return!1}setLayout(t){const e=t.layout,s=e._extra;this._layoutChanged=!this._layout||e.tid!==this._layout.tid||this._extra!=s||s&&s.tid!==this._extra.tid,this._layout=e,this._extra=s,this._rowStyle=t.rowStyle,this._rowProps=t.rowProps}simpleViewByModel(t,e){return this._layoutView instanceof cn&&this._layoutView.simpleByModel(t,e)||this._extraView instanceof cn&&this._extraView.simpleByModel(t,e)}simpleViewByDom(t,e){return this._layoutView instanceof cn&&this._layoutView.simpleByDom(t,e)||this._extraView instanceof cn&&this._extraView.simpleByDom(t,e)}simpleViewByTag(t,e){return this._layoutView instanceof cn&&this._layoutView.simpleBy(t,e)||this._extraView instanceof cn&&this._extraView.simpleBy(t,e)}fieldViewByField(t,e){return this._layoutView instanceof cn&&this._layoutView.fieldBy(t,e)||this._extraView instanceof cn&&this._extraView.fieldBy(t,e)}valueViewByTag(t,e){const s=this._layoutView instanceof cn&&this._layoutView.simpleBy(t,e)||this._extraView instanceof cn&&this._extraView.simpleBy(t,e);return s instanceof pn?s:void 0}setTheme(t){de.setData(this.dom,"theme",t)}setItemData(t,e){de.setData(this.dom,t,e)}_getOverflow(){return"hidden"}_getContentPosition(){return"absolute"}_doPrepareExpander(t){const e=this._getExpander();e?(this._expanderPos=e.pos,this._expanderSize=e.size,this._expander?this._expander.setVisible(!0):(this._expander=new In(t),this.addChild(this._expander))):this._expander&&this._expander.setVisible(!1)}_doPrepareRender(t,e){const s=this._layout;this._owner=e,this._vertical=e.isVertical(),this._fullMode=e.owner().fullMode(),this.dom.dataset.dir=this._vertical?"v":"h",s.setRow(this.dv(),this.row(),this.gindex()),this._extra&&this._extra.setRow(this.dv(),this.row(),this.gindex()),this._doPrepareExpander(t),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null,this._extraView&&(this.removeChild(this._extraView),this._extraView=null)),this._layoutView?(this._layoutView.refreshModels(s),this._extraView&&this._extraView.refreshModels(this._extra)):(this.addChild(this._layoutView=e.createLayoutView(t,s)),this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,e),this._extra&&(this.addChild(this._extraView=e.createLayoutView(t,this._extra)),this._extraView.dom.style.overflow="hidden",this._extraView.build(t,e))),this._layoutView.prepareLayout(t,this._owner),this._extraView&&this._extraView.prepareLayout(t,this._owner)}_doApplyStyles(t){function e(t){"string"==typeof t?s.classList.add(t):Object.assign(i,t)}const s=this.dom;t=s.style;for(let e in this._prevStyles)t[e]="";s.className=this.getItemClass();const i=this._prevStyles={},r=this.getItemStyle(this._owner),n=this._rowStyle;r.itemDef&&e(r.itemDef),r.levelDef&&e(r.levelDef),n&&function(t,s){Object.assign(t,s.default),this.alternate&&s.alternate&&e(s.alternate),this.rowState===Qi.UPDATED?s.updated&&e(s.updated):this.rowState===Qi.DELETED&&s.deleted&&e(s.deleted),this.checked&&s.checked&&e(s.checked),this.selected&&s.selected&&e(s.selected),this.searched&&s.searched&&e(s.searched)}.call(this,i,n),r.dynamic&&e(r.dynamic);for(let e in i)Nn.MANDATORY_STYLES.hasOwnProperty(e)||(t[e]=i[e])}_doMeasure(t,e,s){const i=this._layoutView,r=this._vertical,n=e,o=s,a=this._padding=de.getPadding(this.dom),h=a.left+a.right,l=a.top+a.bottom;e-=h,s-=l,this._szNear=this._doMeasureSide(Ri.NEAR,r,e,s),this._szFar=this._doMeasureSide(Ri.FAR,r,e,s),r?(e-=this.indent+this._szNear.width+this._szFar.width+this._owner.rightMargin,i._explicitWidth=e,i._explicitHeight=NaN,this.isFixedHeight()&&(i._explicitHeight=s)):(s-=this._szNear.height+this._szFar.height,i._explicitHeight=s,i._explicitWidth=NaN,this.isFixedWidth()&&(i._explicitWidth=e));const d=i.measureLayout(t,this._owner,e,s);if(r?d.height=Math.max(d.height,this._szNear.height,this._szFar.height):d.width=Math.max(d.width,this._szNear.width,this._szFar.width),this._extraView){const i=this._extraView.measureLayout(t,this._owner,e,s);d.width=Math.max(d.width,i.width),d.height+=i.height}return r?(d.width=n,d.height+=l):(d.width+=h,d.height=o),d}_doRender(t,e,s){const i=this._layoutView,r=this._extraView,n=this._padding;let o=this.indent,a=0;e-=this._owner.rightMargin+n.left+n.right,s-=n.top+n.bottom,this.setContentBounds(n.left,n.top,e,s),this._expander&&this._expander.visible&&(this._expanderPos===Ri.NEAR?this._expander.move(this.indent,0):this._expander.move(e-this._expander.size()-2,0)),this._vertical?(this._szNear.width>0&&this._doRenderNear(!0,o,a,this._szNear.width,s),this._szFar.width>0&&this._doRenderFar(!0,e-this._szFar.width,a,this._szFar.width,s),o+=this._szNear.width,e-=this._szNear.width+this._szFar.width):(this._szNear.height>0&&this._doRenderNear(!1,o,a,e,this._szNear.height),this._szFar.height>0&&this._doRenderFar(!1,o,s-this._szFar.height,e,this._szFar.height),a+=this._szNear.height,s-=this._szNear.height+this._szFar.height);let h=s;r&&(h-=r.mh),i.resize(e,h).move(o,a),i.render(t),r&&(r.resize(e,r.mh).move(o,a+i.mh),r.render(t))}_doAfterRender(){this._layoutChanged=!1,this._owner=null}_getExpander(){}_isExpanded(){return!1}_doMeasureSide(t,e,s,i){return this._expander&&this._expander.visible&&t===this._expanderPos?(this._expander.reset(this._expanderSize,this._isExpanded()),{width:this._expander.size()+2,height:this._expander.size()+2}):{width:0,height:0}}_doRenderNear(t,e,s,i,r){}_doRenderFar(t,e,s,i,r){}$_borrowed(){if(!this._fullMode)for(let t=0;t<20;t++){const t=this.dom.getElementsByTagName("img");for(let e=0;e<t.length;e++)t[e].src=""}}}Nn.MANDATORY_STYLES={display:"block",position:"absolute",boxSizing:"content-box"};class On extends Nn{dv(){return this._dv}row(){return this._row}model(){return this._model}group(){return this._model.group}gindex(){return this._gindex}vindex(){return isNaN(this._gindex)?this._row:this._gindex}isRow(t){return t===this._row}setRow(t,e,s,i){return this._dv=t,this.dom._row_=this._row=e,this._rowid=s,this._last=t.isLast(e),i?(this._model=i,this._groupLast=i.group.isLast(e),this._master=!i.isLeaf()):(this._model=void 0,this._groupLast=this._master=!1),this}setTouched(t){de.setData(this.dom,"touched",t?"1":void 0)}_isExpanded(){return this._model instanceof He&&this._model.group.expanded()}}class Bn extends On{static isRowView(t){return t.classList.contains(Bn.ROW_CLASS)}get rowCell(){return this._rowCell}get editCell(){return this._editCell}getItemClass(){return Bn.CLASS_NAME}getItemStyle(t){return t.owner().getRowStyle(this._row)}_getExpander(){if(this._model instanceof He&&!this._model.isLeaf()){this.row();const t=this._owner.getExpander(this.row());if(t){const e=t.position(),s=e===dr.HEAD?Ri.NEAR:e===dr.FOOT?Ri.FAR:void 0;if(e)return{pos:s,size:18}}}}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=e.rowBar,i=e.editBar,r=e.borderLine;let n,o=this._rowCell,a=this._editCell,h=this._line;if(this.searched&&(n=e.isVertical()?"vs":"hs"),n&&de.setData(this.dom,"state",n),s?(o||(o=this._rowCell=new rn(t)),!o.parent&&this.addChild(o)):o&&o.parent&&this.removeChild(o),i?(a||(a=this._editCell=new nn(t)),!a.parent&&this.addChild(a)):a&&a.parent&&this.removeChild(a),r&&e.rowBorderVisible(this)){h||(h=this._line=t.createElement("span"),h.className="rtc-row-border",Object.assign(h.style,Bn.LINE_STYLES));const s=this._master?e.owner().rowBorder.masterStyle:e.owner().rowBorder.style;Object.assign(h.style,{width:"",height:"",borderBottom:this._vertical?s:"",borderRight:this._vertical?"":s}),!h.parentElement&&this.dom.appendChild(h)}else h&&h.parentNode&&h.remove()}_doMeasureSide(t,e,s,i){const r=this._owner.rowBar,n=this._owner.editBar;let{width:o,height:a}=super._doMeasureSide(t,e,s,i);if(e){if(r&&r.position()===t){const t=this._rowCell,e=t.measure(r,this._dv,this._row,s,i),n=It(r.size(),e.width);t.wCell=n,t.wMeasure=Math.min(e.width,n),o+=n+r.gapHorz(),a=e.height}if(n&&n.position()===t){const t=this._editCell,e=t.measure(n,this._dv,this._row,s,i),r=It(n.size(),e.width);t.wCell=r,t.wMeasure=Math.min(e.width,r),o+=r+n.gapHorz(),a=Math.max(a,e.height)}}else{if(r&&r.position()===t){const t=this._rowCell,e=t.measure(r,this._dv,this._row,s,i),n=It(r.size(),e.height);t.hCell=n,t.hMeasure=Math.min(e.height,n),a+=n+r.gapVert(),o=e.width}if(n&&n.position()===t){const t=this._editCell,e=t.measure(n,this._dv,this._row,s,i),r=It(n.size(),e.height);t.wCell=r,t.wMeasure=Math.min(e.height,r),a+=r+n.gapVert(),o=Math.max(o,e.width)}}return{width:o,height:a}}_doMeasure(t,e,s){const i=super._doMeasure(t,e,s);return this._line&&this._line.parentNode?this._vertical?i.height+=this._szLine=this._line.offsetHeight:i.width+=this._szLine=this._line.offsetWidth:this._szLine=0,i}_doRenderNear(t,e,s,i,r){const n=this._owner,o=n.rowBar,a=n.editBar;if(t){if(o&&o.position()===Ri.NEAR){const t=this._rowCell;t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(o,t.width,t.height),e+=t.wCell+o.gapRight()}if(a&&a.position()===Ri.NEAR){const t=this._editCell;t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(a,t.width,t.height)}}else{if(o&&o.position()===Ri.NEAR){const t=this._rowCell;t.resize(i,t.wCell),t.move(0,s),t.render(o,t.width,t.height),s+=t.hCell+o.gapBottom()}if(a&&a.position()===Ri.NEAR){const t=this._editCell;t.resize(i,t.wCell),t.move(0,s),t.render(a,t.width,t.height)}}}_doRenderFar(t,e,s,i,r){const n=this._owner,o=n.rowBar,a=n.editBar;if(t){if(a&&a.position()===Ri.FAR){const t=this._editCell;e+=a.gapRight(),t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(a,t.width,t.height),e+=t.wCell+a.gapLeft()}if(o&&o.position()===Ri.FAR){const t=this._rowCell;e+=o.gapRight(),t.hRelative&&(t.hMeasure=t.dom.offsetHeight),t.resize(t.wCell,r),t.move(e,0),t.render(o,t.width,t.height)}}else{if(a&&a.position()===Ri.FAR){const t=this._editCell;s+=a.gapBottom(),t.resize(i,t.wCell),t.move(0,s),t.render(a,t.width,t.height),s+=t.hCell+a.gapTop()}if(o&&o.position()===Ri.FAR){const t=this._rowCell;s+=o.gapBottom(),t.resize(i,t.wCell),t.move(0,s),t.render(o,t.width,t.height)}}}getNearIndent(t){switch(t){case mn.BAR:return(this._szNear.width>0?this._padding.left:0)+this._szNear.width;case mn.PADDING:return this._padding.left}return 0}getFarIndent(t){switch(t){case mn.BAR:return(this._szFar.width>0?this._padding.right:0)+this._szFar.width;case mn.PADDING:return this._padding.right}return 0}_doRender(t,e,s){if(super._doRender(t,e,s),this._line&&this._line.parentNode){const t=this._szLine;if(this._vertical){const i=this.getNearIndent(this._owner.borderLine.nearIndent());e-=i+this.getFarIndent(this._owner.borderLine.farIndent()),de.setBounds(this._line,i,s-t,e,t)}else de.setBounds(this._line,e-t,0,t,s)}}}Bn.ROW_CLASS="rtc-row",Bn.CLASS_NAME="rtc-item "+Bn.ROW_CLASS,Bn.LINE_STYLES={position:"absolute",boxSizing:"border-box",margin:"0",padding:"0"},function(t){t.SUBMIT="submit",t.CANCEL="cancel"}(yn||(yn={}));class Fn extends e{constructor(t){super(),this.visible=!0,this._setDefaults(),"string"==typeof t?this.name=t:t&&Object.assign(this,t)}get style(){return this._style&&Object.assign({},this._style)}set style(t){this._style=t&&Object.assign({},t)}isEnabled(t){return"function"==typeof this.enabled?this.enabled({control:t,button:this.getProxy()}):this.enabled}getStyle(){return this._style}update(t){t&&Object.assign(this,t)}click(t){var e;null===(e=this.onClick)||void 0===e||e.call(this,{control:t.wrapperOrThis(),button:this.getProxy()})}getProxy(){return{name:this.name,label:this.label,state:this.state}}_setDefaults(){this.enabled=!0}}!function(t){t.AUTO="auto",t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(vn||(vn={})),function(t){t.POPUP="popup",t.PUSH="push"}(bn||(bn={}));class zn extends pe{constructor(t,e){super(t),(this._defs=e)||this._doInitDefaults()}_doInitDefaults(){this._position=vn.AUTO,this._showMode=bn.POPUP}owner(){return this.control()}isFullWidth(){const t=this.getPosition();return t===vn.TOP||t===vn.BOTTOM}isFullHeight(){const t=this.getPosition();return t===vn.LEFT||t===vn.RIGHT}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}showMode(){return Tt(this._showMode,this._defs&&this._defs._showMode)}setShowMode(t){this._showMode=t}size(){return Tt(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._szSize=$(t,!1))}minSize(){return Tt(this._minSize,this._defs&&this._defs._minSize)}setMinSize(t){t!==this._minSize&&(this._minSize=t,this._szMin=$(t,!1))}maxSize(){return Tt(this._maxSize,this._defs&&this._defs._maxSize)}setMaxSize(t){t!==this._maxSize&&(this._maxSize=t,this._szMax=$(t,!1))}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}getPosition(){let t=this.position();return t&&t!==vn.AUTO||(t=this._getAutoPosition()),t}getSize(t,e){const s=this._szSize||this._defs&&this._defs._szSize,i=this._szMin||this._defs&&this._defs._szMin,r=this._szMax||this._defs&&this._defs._szMax;let n=D(s,t);const o=D(i,t),a=D(r,t);return isNaN(n)?isNaN(e)?o:w.clamp(e,o,a):w.clamp(n,o,a)}_getAutoPosition(){return vn.TOP}}class Hn extends zn{constructor(){super(...arguments),this._buttonGap=16}buttons(){return Tt(this._buttons,this._defs&&this._defs._buttons)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._buttonImpls=[],t&&t.forEach(t=>this._buttonImpls.push(new Fn(t))),this._changed())}buttonGap(){return Tt(this._buttonGap,this._defs&&this._defs._buttonGap)}setButtonGap(t){(t=w.toNumber(t,0))!==this._buttonGap&&(this._buttonGap=t,this._changed())}getButtons(){return void 0!==this._buttonImpls?this._buttonImpls:this._defs&&this._defs._buttonImpls}getButton(t){return this.getButtons().find(e=>e.name===t)}}!function(t){t.AUTO="auto",t.HIDDEN="hidden",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(Sn||(Sn={}));class Wn extends Hn{_doInitDefaults(){super._doInitDefaults(),this._buttonPosition=Sn.AUTO,this._cancelLabel="Cancel",this._okLabel="OK"}buttonPosition(){return Tt(this._buttonPosition,this._defs&&this._defs._buttonPosition)}setButtonPosition(t){this._buttonPosition=t}cancelLabel(){return Tt(this._cancelLabel,this._defs&&this._defs._cancelLabel)}setCancelLabel(t){this._cancelLabel=t}okLabel(){return Tt(this._okLabel,this._defs&&this._defs._okLabel)}setOkLabel(t){this._okLabel=t}getButtons(){let t=super.getButtons();return(!t||t.length<1)&&(t=this._defButtons,t?(t[0].label=this.okLabel(),t[1].label=this.cancelLabel()):t=this._defButtons=[{name:Wn.OK,type:yn.SUBMIT,label:this.okLabel()},{name:Wn.CANCEL,type:yn.CANCEL,label:this.cancelLabel()}].map(t=>new Fn(t))),t}okButton(){return this.getButton(Wn.OK)}cancelButton(){return this.getButton(Wn.CANCEL)}}Wn.OK="ok",Wn.CANCEL="cancel",function(t){t.AUTO="auto",t.DEFAULT="default",t.VERTICAL="vertical"}(Cn||(Cn={}));class Gn extends Hn{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this._arrange=Cn.AUTO,this.setMinSize(Gn.MIN_SIZE)}arrange(){return Tt(this._arrange,this._defs&&this._defs._arrange)}setArrange(t){this._arrange=t}align(){return Tt(this._align,this._defs&&this._defs._align)}setAlign(t){this._align=t}getDisplay(t){const e=this.arrange()||Cn.AUTO,s=this.getPosition();switch(e){case Cn.AUTO:return t?Cn.DEFAULT:s===vn.LEFT||s===vn.RIGHT?Cn.VERTICAL:Cn.DEFAULT;default:return e}}}Gn.TYPE="button",Gn.MIN_SIZE=30;class Un extends Wn{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this.setMinSize(Un.MIN_SIZE)}inflateParam(t,e,s){}inflateStock(t,e,s){}template(){return Tt(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}getTemplate(){return this.owner().getTemplate(this._actionTemplate||this.template())}getLayout(){const t=this.getTemplate();return this._actionTemplate=null,pi.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this)}_doPrepareRender(){}_setActionTemplate(t){this._actionTemplate=t}}Un.TYPE="form",Un.MIN_SIZE=20,function(t){t.AUTO="auto",t.DEFAULT="default",t.LONG="long",t.VERTICAL="vertical"}(xn||(xn={}));class qn extends Wn{_doInitDefaults(){super._doInitDefaults(),this._display=xn.AUTO,this._matchCaseLabel="대소문자 구분",this._wholeWordLabel="전체 단어 일치",this._regExpLabel="정규식 사용",this._searchNextLabel="다음 찾기",this._searchAllLabel="모두 찾기",this._lineGap=12,this.setOkLabel("검 색"),this.setCancelLabel("취 소")}display(){return Tt(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}matchCaseLabel(){return Tt(this._matchCaseLabel,this._defs&&this._defs._matchCaseLabel)}setMatchCaseLabel(t){this._matchCaseLabel=t}wholeWordLabel(){return Tt(this._wholeWordLabel,this._defs&&this._defs._wholeWordLabel)}setWholeWordLabel(t){this._wholeWordLabel=t}regExpLabel(){return Tt(this._regExpLabel,this._defs&&this._defs._regExpLabel)}setRegExpLabel(t){this._regExpLabel=t}searchNextLabel(){return Tt(this._searchNextLabel,this._defs&&this._defs._searchNextLabel)}setSearchNextLabel(t){this._searchNextLabel=t}searchAllLabel(){return Tt(this._searchAllLabel,this._defs&&this._defs._searchAllLabel)}setSearchAllLabel(t){this._searchAllLabel=t}lineGap(){return Tt(this._lineGap,this._defs&&this._defs._lineGap)}setLineGap(t){this._lineGap=Pt(t,void 0)}alwaysResult(){return Tt(this._alwaysResult,this._defs&&this._defs._alwaysResult)}setAlwaysResult(t){this._alwaysResult=t}getDisplay(t){const e=this.display()||xn.AUTO,s=this.getPosition();switch(e){case xn.AUTO:return t?xn.LONG:s===vn.LEFT||s===vn.RIGHT?xn.VERTICAL:xn.DEFAULT;default:return e}}search(t,e){this.owner().search(e,t)}}qn.TYPE="search";const jn={string:Gi.TEXT,number:Gi.NUMBER,boolean:Gi.BOOL,bigint:Gi.BIGINT};function Yn(t,e){const s=[];for(let i of e){const e=t.fieldByName(i);e||Ki.throwFormat(t.wrapperOrThis(),b.notExistsDataField,i),s.push(e)}return s}var Qn;function Zn(t,e,s,i){const r={count:0,sum:0,min:NaN,max:NaN,avg:NaN,std:NaN,stdp:NaN,var:NaN,varp:NaN,ncount:0,nmin:NaN,nmax:NaN,navg:NaN,nstd:NaN,nstdp:NaN,nvar:NaN,nvarp:NaN};s=isNaN(s)?0:Math.max(0,s),i=isNaN(i)?e.length:Math.min(e.length,i)+1;const n=r.count=i-s;if(r.count<1)return r;const o=t.name;let a=0,h=0,l=NaN,d=NaN,_=s;for(;_<i;){const t=e[_++].values[o];if(!isNaN(t)){a++,h=l=d=t;break}}for(;_<i;){const t=e[_++].values[o];isNaN(t)||(a++,h+=t,t<l&&(l=t),t>d&&(d=t))}if(a>0){r.sum=h,r.min=l,r.max=d,r.avg=h/n,r.ncount=a,r.navg=h/a;const t=r.avg,_=r.navg;let c=0,u=0,g=s;for(;g<i;){const s=e[g++].values[o];isNaN(s)||(c+=Math.pow(s-t,2),u+=Math.pow(s-_,2))}r.varp=c/n,r.var=c/(n-1),r.stdp=Math.sqrt(r.varp),r.std=Math.sqrt(r.var),r.nvarp=u/a,r.nvar=u/(a-1),r.nstdp=Math.sqrt(r.nvarp),r.nstd=Math.sqrt(r.nvar)}return r}!function(t){t.JSON="json",t.FIELD="field",t.CSV="csv",t.TSV="tsv"}(Qn||(Qn={}));class Xn extends nr{constructor(t,e,s,i){super(t),this._readOnly=!1,this._softDeleting=!1,this._restorable=!1,this._wrapper=i,Object.freeze(this._args={data:this}),e="string"==typeof e?{name:e}:e||{},this._title=e.title,this._readOnly=!!e.readOnly,this._restorable=!!e.restorable,this._softDeleting=!!e.softDeleting,this._validator=w.asFunction(e.validator),this._fields=this.$_buildFields(e,s),Array.isArray(this._fields)&&0!==this._fields.length||Ki.throw(this.wrapperOrThis(),b.notSpecifiedDataField),this._derivedFields=this.$_buildDerivedFields(e.derivedFields),this._fieldNames=this._fields.map(t=>t.name).concat(this._derivedFields.map(t=>t.name)),this._fieldMap={};for(let t of this._fields)this._fieldMap[t.name]=t;this._derivedMap={};for(let t of this._derivedFields)this._fieldMap[t.name]=t,this._derivedMap[t.name]=t;this.$_loadRows(s)}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}title(){return this._title}readOnly(){return this._readOnly}softDeleting(){return this._softDeleting}restorable(){return this._restorable}validator(){return this._validator}fieldCount(){return this._fields.length}rowCount(){return this._rows.length}setRowCount(t){if(!isNaN(t)&&t!==this._rows.length){const e=this.wrapperOrThis(),s=this._rows.length;!function(t,e,s){if(t.length=e,e>s)for(let i=s;i<e;i++)t[i]=void 0}(this._rows,t,s),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:t,oldCount:s}),this.$_triggerDataChange(e)}}visRowCount(){return this._rows.length}fields(){return this._fields.slice(0)}derivedFields(){return this._derivedFields.slice(0)}source(){return this}canSort(){return!1}canMove(){return!1}getRowId(t){return this._rows[t].id}levelRowOfRow(t){return t}getDataRow(t){return this._rows[t]}rowOfDataRow(t){return this._rows.indexOf(t)}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}containsField(t){return t in this._fieldMap}getField(t){return(t<0||t>=this._fields.length)&&Ki.throwFormat(this.wrapperOrThis(),b.invalidFieldIndex,t),this._fields[t]}fieldByName(t){return this._fieldMap[t]}getFieldNames(){return this._fieldNames.slice(0)}isSortable(t){const e=this._fieldMap[t];return e&&e.sortable}setSortable(t,e){if(Array.isArray(t))for(const s of t){const t=this._fieldMap[s];t&&(t.sortable=e)}else{const s=this._fieldMap[t];s&&(s.sortable=e)}}isEmpty(t){return!this._rows[t]}getRowValues(t){return nr.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}getValue(t,e,s){nr.checkRow(this,t),s&&this.checkField(e);const i=this._rows[t];return i?i.values[e]:void 0}getProp(t,e,s,i){return nr.checkRow(this,t),i&&this.checkField(e),this._rows[t].getProp(e,s)}getValueAt(t,e){nr.checkRow(this,t),(e<0||e>=this._fields.length)&&Ki.throwFormat(this.wrapperOrThis(),b.invalidFieldIndex,e);const s=this._rows[t];return s?s.values[this._fields[e].name]:void 0}getValues(t,e,s){if(Array.isArray(e)){nr.checkRow(this,t);const i={},r=this._rows[t];if(r){const t=r.values;e.forEach(e=>{s&&this.checkField(e),i[e]=t[e]})}return i}return this.getRowValues(t)}getFieldValues(t,e,s){this.checkField(t);const i=this._rows;isNaN(e)?e=0:this.$_checkRow(e,!1),isNaN(s)||s<0?s=i.length:this.$_checkRow(s,!0);const r=[];for(;e<s;){const s=i[e++];s&&r.push(s.values[t])}return r}$_loadRows(t){t?(this._rows=this.$_buildRows(t),this.$_resetIndices(0)):this._rows=[]}loadData(t){const e=this.wrapperOrThis(),s=this._rows.length;this.$_loadRows(t);const i=this._rows.length;return this._fireEvent("onDataLoaded",s),i!==s?(this._fireEvent("onDataCountChanged",i,s),this._fireEvent("onDataChanged"),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:i,oldCount:s}),this.$_triggerDataChange(e)):i>0&&(this._fireEvent("onDataChanged"),this.$_triggerDataChange(e)),this}updateValue(t,e,s){this.$_checkReadOnly(),this.$_checkRow(t,!1),this.checkField(e);const i=this._fieldMap;let r=this._rows[t];r||(r=this._rows[t]=Xi.createRow2(this._fieldMap,this._derivedMap,void 0));const n=r.values,o=n[e];if(s!==o){const a=this.wrapperOrThis();return this.$_validate(i[e],s),n[e]=s,this.$_clearDerived(n),r.state=Qi.UPDATED,this._fireEvent("onDataValueUpdated",t,e,s,o),this._fireEvent("onDataChanged"),this.onValueUpdate&&this.onValueUpdate({data:a,row:t,field:e,value:s,oldValue:o}),this.$_triggerDataChange(a),!0}return!1}$_updateRow(t,e,s,i){const r=this._fieldMap,n=t.values;let o=n?Object.assign({},n):void 0,a=!1;if(w.isObject(e))if(o)for(let t of this._fieldNames)(s||t in e)&&o[t]!==e[t]&&(this.$_validate(r[t],e[t]),o[t]=e[t],a=!0);else o=Object.assign({},e),a=!0;else o&&s&&(o={},a=!0);return a&&(this.$_validateRow(t.row,o),t.values=o,this.$_clearDerived(n),t.state!==Qi.UPDATED&&(this._restorable&&(t.save=n),t.state=Qi.UPDATED,i?i.push(t):this._fireEvent("onDataStateChanged",t.row))),a}updateRow(t,e,s){this.$_checkReadOnly(),this.$_checkRow(t,!1),this._rows[t]||(this._rows[t]=Xi.createRow2(this._fieldMap,this._derivedMap,void 0));const i=this.$_checkUpdate(this._rows[t]),r=i.values,n=this.$_updateRow(i,e,s,null);if(n){this._fireEvent("onDataRowUpdated",t,r),this._fireEvent("onDataChanged");const e=this.wrapperOrThis();this.onRowUpdate&&this.onRowUpdate({data:e,row:t,oldValues:r}),this.$_triggerDataChange(e)}return n}updateRows(t,e,s){if(!Array.isArray(t))return[];if(1===t.length){if(this.updateRow(t[0],e[0],s))return[t[0]]}else{this.$_checkReadOnly(),this.$_checkRows(t,!1);const i=Math.min(t.length,e.length),r=[];for(let n=0;n<i;n++){const i=t[n];this._rows[i]||(this._rows[i]=Xi.createRow2(this._fieldMap,this._derivedMap,void 0));const o=this.$_checkUpdate(this._rows[i]);this.$_updateRow(o,e[n],s,r)}if(r.length>0){t=r.map(t=>t.row),this._fireEvent("onDataRowsUpdated",t),this._fireEvent("onDataChanged");const e=this.wrapperOrThis();return this.onRowsUpdate&&this.onRowsUpdate({data:e,rows:t}),this.$_triggerDataChange(e),t}}return[]}updateRange(t,e,s,i){if(e<1||!Array.isArray(s)||s.length<1)return!1;if(1===e)return this.updateRow(t,s[0],i);this.$_checkReadOnly(),this.$_checkRow(t,!1);const r=this._rows,n=[];let o=!1;e=Math.min(e,s.length);for(let o=0;o<e;o++){const e=t+o;r[e]||(r[e]=Xi.createRow2(this._fieldMap,this._derivedMap,void 0));const a=this.$_checkUpdate(r[e]);this.$_updateRow(a,s[o],i,n)}if(o=n.length>0){const t=n.map(t=>t.row);this._fireEvent("onDataRowsUpdated",t),this._fireEvent("onDataChanged");const e=this.wrapperOrThis();this.onRowsUpdate&&this.onRowsUpdate({data:e,rows:t}),this.$_triggerDataChange(e)}return o}deleteAll(t){const e=this._rows.length;if(e>0){this.$_checkReadOnly();const s=this.wrapperOrThis();if(this._softDeleting&&!t){const t=[],i=this._rows;for(let s=0;s<e;s++)i[s].state!==Qi.DELETED&&(i[s].state=Qi.DELETED,t.push(s));t.length>0&&(this._fireEvent("onDataStatesChanged",t),this.onRowStatesChange&&this.onRowStatesChange({data:s,rows:t}))}else this._rows=[],this._flags._cleared(e),this._fireEvent("onDataCleared",e),this._fireEvent("onDataCountChanged",0,e),this._fireEvent("onDataChanged"),this.onRowsClear&&this.onRowsClear({data:s,oldCount:e}),this.onRowCountChange&&this.onRowCountChange({data:s,newCount:0,oldCount:e});return this.$_triggerDataChange(s),!0}return!1}deleteRow(t,e){this.$_checkReadOnly(),this.$_checkRow(t,!1);const s=this.wrapperOrThis(),i=this._rows,r=i[t],n=r.id;if(this._softDeleting&&!e)r.state!==Qi.DELETED&&(r.state=Qi.DELETED,this._fireEvent("onDataStateChanged",t),this.onRowStateChange&&this.onRowStateChange({data:s,row:t}));else{i.splice(t,1),this.$_resetIndices(t),this._flags._rowDeleted(t),this._fireEvent("onDataRowDeleted",t,n),this._fireEvent("onDataCountChanged",i.length,i.length+1),this._fireEvent("onDataChanged");const e=i.length;this.onRowDelete&&this.onRowDelete({data:s,row:t,values:r.values}),this.onRowCountChange&&this.onRowCountChange({data:s,newCount:e,oldCount:e+1})}this.$_triggerDataChange(s)}deleteRows(t,e){if(Array.isArray(t)&&t.length>0){this.$_checkReadOnly(),this.$_checkRows(t,!1);const s=this._rows.length;if((t=w.dedupe(t.filter(t=>t>=0&&t<s))).length>1){const i=this.wrapperOrThis(),r=[];let n,o=0;if(t=t.sort((t,e)=>t-e),this._softDeleting&&!e){n=[];for(let e=0,s=t.length;e<s;e++){const s=this._rows[t[e]];s.state!==Qi.DELETED&&(s.state=Qi.DELETED,n.push(t[e]))}n.length>0&&(o=n.length,this._fireEvent("onDataStatesChanged",n))}else{for(let e=t.length-1;e>=0;e--)r.push(this._rows[t[e]].id),this._rows.splice(t[e],1);this.$_resetIndices(0),this._flags._rowsDeleted(t),this._fireEvent("onDataRowsDeleted",t,r),this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged"),o=t.length,this.onRowsDelete&&this.onRowsDelete({data:i,rows:t}),this.onRowCountChange&&this.onRowCountChange({data:i,newCount:s-o,oldCount:s}),n=t}return this.$_triggerDataChange(i),n}return this.deleteRow(t[0],e),[t[0]]}return[]}deleteRange(t,e,s){if(this.$_checkReadOnly(),this.$_checkRow(t,!1),isNaN(e)||e<=0)return 0;const i=this._rows,r=i.length;if((e=Math.min(r-t,e))>0){const n=this.wrapperOrThis();if(this._softDeleting&&!s){const s=[];for(let r=t,n=t+e;r<n;r++){const t=i[r];t.state!==Qi.DELETED&&(t.state=Qi.DELETED,s.push(r))}s.length>0&&this._fireEvent("onDataStatesChanged",s)}else i.splice(t,e),this.$_resetIndices(t),this._flags._rangeDeleted(t,e),this._fireEvent("onDataRangeDeleted",t,e),this._fireEvent("onDataCountChanged",this._rows.length,r),this._fireEvent("onDataChanged"),this.onRowRangeDelete&&this.onRowRangeDelete({data:n,row:t,count:e}),this.onRowCountChange&&this.onRowCountChange({data:n,newCount:r-e,oldCount:r});this.$_triggerDataChange(n)}return e}$_checkInsert(t,e){const s=this._fieldMap,i={};for(let t in this._fieldMap)t in e?void 0===e[t]?void 0!==s[t].default&&(i[t]=s[t].default):i[t]=e[t]:void 0!==s[t].default&&(i[t]=s[t].default),this.$_validate(s[t],i[t]);return this.$_validateRow(t,i),i}insertRow(t,e){if(this.$_checkReadOnly(),this.$_checkRow(t,!0),w.isObject(e)){const s=this._rows,i=s.length,r=Xi.createRow2(this._fieldMap,this._derivedMap,e=this.$_checkInsert(-1,e));s.splice(t,0,r),this.$_resetIndices(t),this._flags._rowAdded(t),this._fireEvent("onDataRowAdded",t),this._fireEvent("onDataCountChanged",i,i-1),this._fireEvent("onDataChanged");const n=this.wrapperOrThis();return this.onRowAdd&&this.onRowAdd({data:n,row:t}),this.onRowCountChange&&this.onRowCountChange({data:n,newCount:i-1,oldCount:i}),this.$_triggerDataChange(n),!0}return!1}appendRow(t){return this.insertRow(this._rows.length,t)}insertRows(t,e){let s;if(this.$_checkReadOnly(),this.$_checkRow(t,!0),w.isObject(e))s=this.$_buildRows(e);else if(Array.isArray(e)&&e.length>0){const t=this._fieldMap,i=this._derivedMap;s=[];for(let r=0;r<e.length;r++){let n=e[r];w.isObject(n)&&s.push(Xi.createRow2(t,i,n=this.$_checkInsert(-1,n)))}}const i=this._rows,r=s?s.length:0;if(r>0){const e=i.length;if(t>=i.length)for(let t=0;t<r;t++)i.push(s[t]);else for(let e=0;e<r;e++)i.splice(t+e,0,s[e]);this.$_resetIndices(t),this._flags._rowRangeAdded(t,r),this._fireEvent("onDataRowsAdded",t,r),this._fireEvent("onDataCountChanged",e+r,e),this._fireEvent("onDataChanged");const n=this.wrapperOrThis();this.onRowsAdd&&this.onRowsAdd({data:n,row:t,count:r}),this.onRowCountChange&&this.onRowCountChange({data:n,newCount:e+r,oldCount:e}),this.$_triggerDataChange(n)}return i.length}appendRows(t){return this.insertRows(this._rows.length,t)}findRow(t,e=0,s=-1){return Xi.findRow(this._rows,t,e,s)}findRows(t,e=0,s=-1){return Xi.findRows(this._rows,t,e,s)}findDistinctRows(t,e=0,s=-1){return Xi.findDistinctRows(this._rows,t,e,s)}getSummary(t,e,s){const i=this.fieldByName(t);return i&&Zn(i,this._rows,e,s)}getRowState(t){return this.$_checkRow(t,!1),this._rows[t].state}internalRowState(t){return this._rows[t].state}$_restore(t){return t.state===Qi.UPDATED&&this._restorable?(t.values=t.save,delete t.save,delete t.state,!0):t.state===Qi.DELETED&&(delete t.state,!0)}restoreRow(t){if(this.$_checkReadOnly(),this.$_checkRow(t,!1),this.$_restore(this._rows[t])){this._fireEvent("onDataStateChanged",t),this._fireEvent("onDataChanged");const e=this.wrapperOrThis();return this.onRowStateChange&&this.onRowStateChange({data:e,row:t}),this.$_triggerDataChange(e),!0}return!1}restoreRows(t){if(!Array.isArray(t))return[];this.$_checkReadOnly(),this.$_checkRows(t,!1);const e=this._rows,s=[];return t.forEach(t=>{this.$_restore(e[t])&&s.push(t)}),s.length,s}restoreAllRows(){let t=0;return this._rows.forEach(e=>{this.$_restore(e)&&t++}),t}restoreUpdatedRows(){let t=0;return this._rows.forEach(e=>{e.state===Qi.UPDATED&&this.$_restore(e)&&t++}),t}restoreDeletedRows(){let t=0;return this._rows.forEach(e=>{e.state===Qi.DELETED&&this.$_restore(e)&&t++}),t}moveRow(t,e){if(this.$_checkRow(t,!1),this.$_checkRow(e,!1),t!==e){const s=this.wrapperOrThis(),i=this._rows,r=i.splice(t,1)[0];return i.splice(e,0,r),this.$_resetIndices(Math.min(t,e)),this._flags._rowMoved(t,e),this._fireEvent("onDataRowMoved",t,e),this._fireEvent("onDataChanged"),this.onRowMove&&this.onRowMove({data:s,from:t,to:e}),this.$_triggerDataChange(s),!0}return!1}moveRows(t,e,s){const i=this._rows;if(e=Math.min(e,i.length-t),s>i.length-e&&Ki.throwFormat(this.wrapperOrThis(),b.invalidToIndex,s),1===e){if(this.moveRow(t,s))return 1}else if(t!==s&&e>1){this.$_checkRow(t,!1),this.$_checkRow(s,!0);const r=this.wrapperOrThis(),n=i.splice(t,e);return i.splice.apply(i,[s,0].concat(n)),this.$_resetIndices(Math.min(t,s)),this._flags._rowsMoved(t,e,s),this._fireEvent("onDataRowsMoved",t,e,s),this._fireEvent("onDataChanged"),this.onRowsMove&&this.onRowsMove({data:r,from:t,count:e,to:s}),this.$_triggerDataChange(r),e}return 0}$_triggerDataChange(t){this.onDataChange&&(this._args.data=t,this.onDataChange(this._args))}$_checkReadOnly(){this._readOnly&&Ki.throw(this.wrapperOrThis(),b.canNotModifyData)}$_checkRow(t,e){(t<0||t>=this._rows.length+(e?1:0))&&Ki.throwFormat(this.wrapperOrThis(),b.invalidRowIndex,t)}$_checkRows(t,e){const s=this._rows.length+(e?1:0);t.forEach(t=>{(t<0||t>=s)&&Ki.throwFormat(this.wrapperOrThis(),b.invalidRowIndex,t)})}$_checkUpdate(t){return t.state===Qi.DELETED&&Ki.throwFormat(this.wrapperOrThis(),b.canNotModifyDeleted,t.row),t}checkField(t){t in this._fieldMap||t in this._derivedMap||Ki.throwFormat(this.wrapperOrThis(),b.invalidFieldName,t)}$_validate(t,e){const s=this.wrapperOrThis();if((null==e||""===e)&&t.required)throw new Ji(s,t,C(b.requiredField,t.displayText()));if(t.domain&&t.domain.indexOf(e)<0)throw new Ji(s,t,C(b.invalidValueInDomain,t.displayText()));if(void 0!==t.minimum&&e<t.minimum||void 0!==t.maximum&&e>t.maximum)throw new Ji(s,t,C(b.invalidValueInRange,t.displayText()))}$_validateRow(t,e){if(this._validator){const s=this._validator(this.wrapperOrThis(),t,e);if(s)throw new tr(this.wrapperOrThis(),s)}}$_buildFields(t,e){return Array.isArray(t.fields)?t.fields.map(t=>{let e;return e="string"==typeof t?ji.create(t,Gi.TEXT):ji.create(t),e&&(e._owner=this),e}).filter(t=>null!=t):e?this.$_extractFields(e):void 0}$_buildDerivedFields(t,e){const s=[];if(Array.isArray(t)){for(let e of t)if(w.isObject(e)&&e.name&&e.extractor){const t=Yi.createDerived(e.name,e.extractor,e.type||Gi.TEXT);t._owner=this,s.push(t)}return s}return s}$_resetIndices(t){const e=this._rows;if(e)for(let s=t,i=e.length;s<i;s++)e[s].row=s}$_extractFields(t){const e=[];if(Array.isArray(t)){const s=t[0];for(let t in s){const i=s[t],r=i instanceof Date?Gi.DATE:jn[typeof i]||Gi.ANY,n=ji.create(t,r);e.push(n)}}else if(w.isObject(t)&&t.values){const s=t.values;let i,r=!1;switch(t.type){case Qn.FIELD:if(w.isObject(s)){i={};for(const t in s)i[t]=s[t][0]}break;case Qn.CSV:r=!0;case Qn.TSV:if("string"==typeof s&&s.length>0){const e=t["sv:lines"]=s.split(l),n=t.fieldHeader;if(n>=0&&e.length>n){const s=t.startRow||0;t.reader;const o=t.quoted;if(e.length>s&&s>n){let a,h;if(r){if(a=e[n].split(t.quoted?d:","),o)for(let t=a.length-1;t>=0;t--)a[t]=w.stripQuotes(a[t]);if(h=e[s].split(t.quoted?d:","),o)for(let t=h.length-1;t>=0;t--)h[t]=w.stripQuotes(h[t])}else a=e[n].split(t.multiTabs?c:_),h=e[s].split(t.multiTabs?c:_);const l=Math.min(a.length,It(t.fieldCount,a.length));i={};for(let t=0;t<l;t++)i[a[t]]=h[t]}}}break;default:Array.isArray(s)&&s.length>0&&(i=s[0])}i&&function(t,s,i){for(let r in t){const n=s?s(r,t[r]):t[r],o=n instanceof Date?Gi.DATE:jn[typeof n]||Gi.ANY,a=i&&i[r]||r,h=ji.create(a,o);h.sourceProp=r,e.push(h)}}(i,t.reader,t.fieldMap)}return e}$_buildRows(t){const e=this._fieldMap,s=this._derivedMap;if(Array.isArray(t)){const i=new Array;return t.forEach((t,r)=>i.push(Xi.createRow2(e,s,t))),i}if(w.isObject(t)&&t.values){const s=t.values,i=t.reader;let r=e;if(w.isObject(t.fieldMap)){const t={};for(let e in r){const s=r[e];s.sourceProp?t[s.sourceProp]=s:t[e]=s}r=t}let n=+t.rowCount;switch(n=isNaN(n)||n<0?Number.MAX_SAFE_INTEGER:n>>0,t.type){case Qn.FIELD:return this.$_loadFieldArray(s,t,r,i,n);case Qn.CSV:return this.$_loadCsv(s,t,r,i,n);case Qn.TSV:return this.$_loadTsv(s,t,r,i,n);default:return this.$_loadJson(s,t,r,i,n)}}else if(w.isObject(t))return[Xi.createRow2(e,s,t)]}$_loadJson(t,e,s,i,r){const n=this._derivedMap;if(Array.isArray(t)){const e=[];for(let o=0,a=Math.min(r,t.length);o<a;o++)e.push(Xi.createRow(s,n,t[o],i));return e}if(w.isObject(t))return[Xi.createRow(s,n,t,i)]}$_loadFieldArray(t,e,s,i,r){const n=this._derivedMap,o=[],a={};for(const e in t)a[e]=Array.isArray(t[e])?t[e].length:0;let h=e.lengthField&&a[e.lengthField];if(isNaN(h)||h<1){h=0;for(const t in a)h=Math.max(a[t],h)}h=Math.min(r,h);for(let e=0;e<h;e++){const r={};for(const s in a)a[s]>e&&(r[s]=t[s][e]);o.push(Xi.createRow(s,n,r,i))}return o}$_trimLines(t,e){if(t.skipBlank)for(let t=e.length-1;t>=0;t--)e[t].trim()||e.splice(t,1);else if(!1!==t.trimLast)for(;e.length>0&&""===e[e.length-1].trim();)e.pop();return e}$_loadCsv(t,e,s,i,r){if("string"==typeof t&&t.length>0){const n=this._derivedMap,o=this.$_trimLines(e,e["sv:lines"]||t.split(l)),a=o.length,h=e.fieldHeader,_=this._fieldNames.slice(0),c=[],u=_.length,g=e.startRow||0,p=e.quoted;if(h>=0&&a>h){const t=o[h].split(d);for(let e=0,s=Math.min(u,t.length);e<s;e++)_[e]=t[e]||_[e]}for(let t=g,e=Math.min(r+g,a);t<e;t++){const e=p?o[t].split(d):o[t].split(","),r={};for(let t=0;t<u;t++)r[_[t]]=p?w.stripQuotes(e[t]):e[t];c.push(Xi.createRow(s,n,r,i))}return delete e["sv:lines"],c}}$_loadTsv(t,e,s,i,r){if("string"==typeof t&&t.length>0){const n=this._derivedMap,o=this.$_trimLines(e,e["sv:lines"]||t.split(l)),a=o.length,h=e.fieldHeader,d=this._fieldNames.slice(0),u=[],g=d.length,p=e.startRow||0,f=e.multiTabs?c:_;if(h>=0&&a>h){const t=o[h].split(f);for(let e=0,s=Math.min(g,t.length);e<s;e++)d[e]=t[e]||d[e]}for(let t=p,e=Math.min(r+p,a);t<e;t++){const e=o[t].split(f),r={};for(let t=0;t<g;t++)r[d[t]]=e[t];u.push(Xi.createRow(s,n,r,i))}return delete e["sv:lines"],u}}$_clearDerived(t){for(let e of this._derivedFields)delete t[e.name]}getRows(){return this._rows.slice(0)}internalValue(t,e){return this._rows[t]&&this._rows[t].values[e]}}var Kn,Jn,to,eo;!function(t){t.OR="or",t.AND="and"}(Kn||(Kn={}));class so{static saveOrders(t){t.forEach((t,e)=>t.newIdx=e)}static restoreOrders(t){return t.sort((t,e)=>t.newIdx-e.newIdx)}constructor(t,e){this.name=t,this.label=e,this.enabled=!0}}class io extends so{constructor(t,e,s,i,r){super(t,e),this._filterMap={},s=Array.isArray(s)?s.slice(0):[],this.op=i||Kn.OR;const n=[];for(const t of s){let e;t.filters?e=new io(t.name,t.label,t.op,t.filters,r):t.filter&&(e=this.$_createFilter(t.name,t.label,t.filter,r)),e&&(e.parent=this,e.enabled=Tt(t.enabled,!0),this._filterMap[t.name]=e,n.push(e))}this.children=n}isNotEmpty(){return this.children.length>0}add(t,e,s,i,r){if(e instanceof so&&this.children.indexOf(e)>=0)return e;const n=e instanceof so?e:this.$_createFilter(t,s,e,r);return n&&(n.enabled=i,n.parent=this,this.children.push(n),this._filterMap[t]=n),n}addSet(t,e,s,i,r,n){const o=new io(t,i,e,s,n);return o&&this.add(t,o,i,r,n),o}remove(t){if(t instanceof so){const e=this.children.indexOf(t);if(e>=0)return this.children.splice(e,1),delete this._filterMap[t.name],!0}else{const e=this.getFilter(t);if(e&&e.parent)return e.parent.remove(e)}}getFilter(t){let e=this._filterMap[t];if(!e)for(let s of this.children)if(s instanceof io&&(e=s.getFilter(t),e))break;return e}getAll(){const t=[];return function(e){for(let s of e.children)t.push(s)}(this),t}clear(){if(this.children.length>0)return this.children=[],this._filterMap={},!0}enabledAll(t){let e=!1;return this.enabled!=t&&(this.enabled=t,e=!0),this.children.forEach(s=>{s instanceof io?e=e||s.enabledAll(t):s.enabled!=t&&(s.enabled=t,e=!0)}),e}select(t){if(t.length>0){let e=this.children.filter(t=>t.enabled);const s=e.length;if(s>0){let i;if(this.op===Kn.AND){i=e[0].select(t);for(let t=1;t<s;t++)i=e[t].select(i)}else{so.saveOrders(t),i=[];for(let r=0;r<s;r++)i=i.concat(e[r].select(t));i=w.dedupe(i,(t,e)=>t.row-e.row),i=so.restoreOrders(i)}return i}return t}return[]}$_createFilter(t,e,s,i){if(t||Ki.throw(null,b.requireFilterName),t){let r;return w.isNumberArray(s)?r=new oo(t,void 0,s):"number"==typeof s?isNaN(s)||(r=new oo(t,void 0,[0,s])):w.isStringArray(s)?r=new no(t,void 0,s,i):"function"==typeof s&&(r=new ro(t,void 0,s)),r.label=e,r}}}class ro extends so{constructor(t,e,s){super(t,e),this.selector=s}selectRow(t,e){return this.selector(t,e)}select(t){const e=this.selector;return t.filter((t,s)=>e(s,t.values))}}class no extends so{constructor(t,e,s,i){super(t,e),this.keyFields=[],this.comparers=[];for(let t of s){const e=i.fieldByName(t);e&&(this.keyFields.push(t),this.comparers.push(e.comparer))}this.keyFields=s.slice(0)}select(t){function e(t,e){for(let n=0;n<i;n++){const i=s[n],o=t[i],a=e[i],h=r[n](o,a);if(h)return h}return 0}const s=this.keyFields,i=s.length,r=this.comparers;so.saveOrders(t);let n=(t=t.sort((t,s)=>e(t.values,s.values)))[0],o=[n],a=1;for(;a<t.length;){const s=t[a++];0!==e(n.values,s.values)&&o.push(n=s)}return o=so.restoreOrders(o),o}}class oo extends so{constructor(t,e,s){super(t,e),this._ranges=this.$_buildRanges(s)}select(t){if(this._ranges){let e=[];for(let s of this._ranges)e=e.concat(t.slice(s.from,s.to));return e}return t}$_buildRanges(t){const e=t.length,s=[];if(1===e&&t[0]>=0)s.push({from:0,to:t[0]});else if(e>1){let i=-1;for(let r=0,n=Math.floor(e/2);r<n;r++){const e=t[2*r],n=t[2*r+1];e>i&&n>=e&&(s.push({from:e,to:n}),i=n)}}return s.length>0?s:null}}class ao extends nr{constructor(t,e,s,i){super(t),this._dirty=!1,this._sortDirty=!1,this._defaultFilterOp=Kn.AND,this._filtered=!1,this._nextSorter=1,this._sortMap={},this._sorted=!1,this._autoSort=!0,this._wrapper=i,e instanceof Xn||Ki.throw(null,b.requireSourceData),this._data=e,e.addListener(this),this._fields=e.fields(),this.$_buildOptions(s),this._rows=this.$_buildRows()}_doDestory(){this._data&&(this._data.removeListener(this),this._data=this._fields=this._rows=null),this._wrapper=null}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._data.readOnly()}fields(){return this._fields.slice(0)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}canSort(){return!0}canMove(){return!1}containsField(t){return this._data.containsField(t)}checkField(t){this._data.checkField(t)}fieldByName(t){return this._data.fieldByName(t)}filter(){return this._filter}postFilter(){return this._postFilter}hasFilter(){return this._filter.isNotEmpty()||this._postFilter.isNotEmpty()}filtered(){return this._filtered}sorted(){return this._sorted}getDataRow(t){return this._rows[t]}rowOfDataRow(t){const e=this._rows;for(let s=e.length-1;s>=0;s--)if(e[s]===t)return s;return-1}getRowId(t){return this._rows[t].id}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}levelRowOfRow(t){return t}getRowValues(t){return nr.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}getValues(t,e,s){if(Array.isArray(e)){nr.checkRow(this,t);const i=this._data,r={};return e.forEach(e=>{s&&i.checkField(e),r[e]=this.internalValue(t,e)}),r}return this.getRowValues(t)}getValue(t,e,s){return nr.checkRow(this,t),s&&this._data.checkField(e),this._rows[t].values[e]}internalValue(t,e){return this._rows[t].values[e]}getProp(t,e,s,i){return nr.checkRow(this,t),i&&this._data.checkField(e),this._rows[t].getProp(e,s)}getSummary(t,e,s){const i=this._fields.find(e=>e.name===t);return i&&Zn(i,this._rows,e,s)}updateValue(t,e,s){return this._data.updateValue(this._rows[t].row,e,s)}findRow(t,e=0,s=-1){return Xi.findRow(this._rows,t,e,s)}findRows(t,e=0,s=-1){return Xi.findRows(this._rows,t,e,s)}findDistinctRows(t,e,s){return Xi.findDistinctRows(this._rows,t,e,s)}deleteRow(t,e){Xn.checkRow(this,t),this._data.deleteRow(this._rows[t].row,e)}deleteRows(t,e){Array.isArray(t)&&t.length>0&&(t.forEach(t=>nr.checkRow(this,t)),t=t.map(t=>this._rows[t].row),this._data.deleteRows(t,e))}updateRow(t,e,s=!1){return Xn.checkRow(this,t),this._data.updateRow(this._rows[t].row,e,s)}appendRow(t){return this._data.appendRow(t)}getRowState(t){return Xn.checkRow(this,t),this._data.internalRowState(this._rows[t].row)}internalRowState(t){return this._data.internalRowState(this._rows[t].row)}$_getRowsOfSourceIds(t){const e=[];return t.forEach(t=>{const s=this.rowOfSourceId(t);s>=0&&e.push(s)}),e}$_getRowsOfData(t){const e=[];return t.forEach(t=>{const s=this.rowOfSourceRow(t);s>=0&&e.push(s)}),e}$_getRowsOfDataRange(t,e){const s=[];for(let i=0;i<e;i++){const e=this.rowOfSourceRow(t+i);e>=0&&s.push(e)}return s}onDataValueUpdated(t,e,s,i,r){if(this._sorted||this.hasFilter()){const t=this._rows.length;this.$_reset(),this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}else{const t=this.rowOfSourceRow(e);t>=0&&(this._fireEvent("onDataValueUpdated",t,s,i,r),this._fireEvent("onDataChanged"))}}onDataRowUpdated(t,e,s){if(this._sorted||this.hasFilter()){const t=this._rows.length;this.$_reset(),this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}else{const t=this.rowOfSourceRow(e);t>=0&&(this._fireEvent("onDataRowUpdated",t,s),this._fireEvent("onDataChanged"))}}onDataRowsUpdated(t,e){if(0===(e=this.$_getRowsOfData(e)).length)return;const s=this._rows.length;this.$_reset(),this._rows.length!==s&&this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged")}onDataRangeUpdated(t,e,s){if(0===this.$_getRowsOfDataRange(e,s).length)return;const i=this._rows.length;this.$_reset(),this._rows.length!==i&&this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}onDataRowAdded(t,e){const s=this._rows.length;if(this.$_reset(),this._rows.length!==s){const t=this.rowOfSourceRow(e);this._flags._rowAdded(t),this._fireEvent("onDataCountChanged",this._rows.length,s)}this._fireEvent("onDataChanged")}onDataRowsAdded(t,e,s){const i=this._rows.length;if(this.$_reset(),this._rows.length!==i){const t=[];for(let i=0;i<s;i++){const s=this.rowOfSourceRow(e+i);s>=0&&t.push(s)}t.length>0&&this._flags._rowsAdded(w.sortNum(t)),this._fireEvent("onDataCountChanged",this._rows.length,i)}this._fireEvent("onDataChanged")}onDataCleared(t,e){const s=this._rows.length;s>0&&(this._rows=[],this._flags._cleared(s),this._fireEvent("onDataCleared"),this._fireEvent("onDataCountChanged",0,s),this._fireEvent("onDataChanged"))}onDataRowDeleted(t,e,s){const i=this.rowOfSourceId(s);if(i<0)return;const r=this._rows.length;this._rows.splice(i,1),this._fireEvent("onDataRowDeleted",i,s),this._flags._rowDeleted(i),this._fireEvent("onDataCountChanged",this._rows.length,r),this._fireEvent("onDataChanged")}onDataRowsDeleted(t,e,s){if(0===(e=this.$_getRowsOfSourceIds(s)).length)return;const i=this._rows.length;for(let t=(e=w.sortNum(e)).length-1;t>=0;t--)this._rows.splice(e[t],1);this._fireEvent("onDataRowsDeleted",e,s),this._flags._rowsDeleted(e),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}onDataRangeDeleted(t,e,s){let i=this.$_getRowsOfDataRange(e,s);if(0===i.length)return;const r=this._rows.length;this.$_reset(),this._rows.length!==r&&(this._flags._rowsDeleted(w.sortNum(i)),this._fireEvent("onDataCountChanged",this._rows.length,r)),this._fireEvent("onDataChanged")}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}source(){return this._data}autoSort(){return this._autoSort}setAutoSort(t){this._autoSort=t}snapshot(t,e){const s={};let i;t&&(s.name=t.name,i=s.fields=Array.isArray(t.fields)?this._fields.filter(e=>t.fields.indexOf(e.name)>=0).map(t=>t.proxy()):null),s.fields||(s.fields=this._fields.map(t=>t.proxy()));const r=this._rows,n=r.length,o=Math.max(0,It(t&&t.start,0)),a=Math.max(0,It(t&&t.count,n)),h=Math.min(n,o+a),l=!t||!t.skipEmpty;!t||t.skipBlank;const d=[];if(i)for(let t=o;t<h;t++){const e=r[t];if(e){const t=e.values,s={};for(const e in i)s[e]=t[e];d.push(s)}else l&&d.push(void 0)}else for(let t=o;t<h;t++){const e=r[t];e?d.push(Object.assign({},e.values)):l&&d.push(void 0)}return new Xn(t?t.name:void 0,s,d,e)}build(t){return(t||this._dirty)&&(this._sortDirty=!0,this.$_reset(),this._dirty=!1),this}isSorted(t){const e=this._sortMap[t.name];return e?{dir:e.dir,order:this._sorts.indexOf(e)}:null}getFilter(t,e){return(e?this._postFilter:this._filter).getFilter(t)}getFilters(){return this._filter.getAll().concat(this._postFilter.getAll())}addFilter(t,e,s){const i=Tt(t.enabled,!0),r=(e?this._postFilter:this._filter).add(t.name,t.filter,t.label,i,this);return r&&this.$_filterChanged(s),r}addFilterSet(t,e,s){const i=Tt(t.enabled,!0),r=(e?this._postFilter:this._filter).addSet(t.name,t.filters,t.op,t.label,i,this);return r&&this.$_filterChanged(s),r}removeFilter(t,e){(this._filter.remove(t)||this._postFilter.remove(t))&&this.$_filterChanged(e)}removeFilters(t,e){let s=!1;if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)s||(s=this._filter.remove(t[e])||this._postFilter.remove(t[e]));s&&this.$_filterChanged(e)}}clearFilters(t){(this._filter.clear()||this._postFilter.clear())&&this.$_filterChanged(t)}enableFilter(t,e,s){const i=t instanceof so?t:this.$_getFilter(t);i&&i.enabled!=e&&(i.enabled=e,this.$_filterChanged(s))}toggleFilter(t,e){const s=t instanceof so?t:this.$_getFilter(t);s&&(s.enabled=!s.enabled,this.$_filterChanged(!0))}enableFilters(t,e,s){let i=!1;Array.isArray(t)&&(t.forEach(t=>{const s=t instanceof so?t:this.$_getFilter(t);s&&s.enabled!=e&&(s.enabled=e,i=!0)}),i&&this.$_filterChanged(s))}toggleFilters(t,e){let s=!1;Array.isArray(t)&&(t.forEach(t=>{const e=t instanceof so?t:this.$_getFilter(t);e&&(e.enabled=!e.enabled,s=!0)}),s&&this.$_filterChanged(e))}enableAllFilters(t,e){(this._filter.enabledAll(t)||this._postFilter.enabledAll(t))&&this.$_filterChanged(e)}sort(t,e){let s;if("function"==typeof t)s=[{field:"_dl_sorter_"+this._nextSorter++,comparer:t}];else if(t){const e=Array.isArray(t)?t:[t];s=[];for(let t=0;t<e.length;t++){const i=e[t];"string"==typeof i?i&&s.push({field:i}):i.field&&s.push(i)}0===s.length&&(s=null)}const i=this._sortMap={};if(s==this._sorts)return;const r=s?s.length:0,n=this._sorts?this._sorts.length:0;if(r>0&&r===n){let t=!1;for(let e=0;e<s.length;e++)if(s[e].field!=this._sorts[e].field||s[e].dir!=this._sorts[e].dir||s[e].comparer!=this._sorts[e].comparer){t=!0;break}if(!t)return}return s.forEach(t=>i[t.field]=t),this._sorts=s,this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged(),this}addSort(t,e,s,i){if(this._sortMap[t])return this;if(t){this._fields.find(e=>e.name===t)||Ki.throwFormat(this,b.invalidFieldName,t);const r=this._sorts=this._sorts||[],n={field:t,dir:e};if(s&&r.length>0){const t=this.$_indexOfSort(s);t>=0?r.splice(t,0,n):r.push(n)}else r.push(n);this._sortMap[t]=n,this._dirty=this._sortDirty=!0,i&&this.build(!1),this.$_fireSortChanged()}return this}appendSort(t,e,s){return this.addSort(t,e,null,s)}addSorter(t,e,s,i){return this}appendSorter(t,e,s,i){return this.addSorter(t,e,null,i)}removeSort(t,e){let s=!1;if(Array.isArray(t))for(let e of t)e&&this.$_removeSort(e)&&(s=!0);else t&&this.$_removeSort(t)&&(s=!0);return s&&(this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged()),this}toggleSort(t,e){if("string"==typeof t&&(t=this.fieldByName(t)),t instanceof ji){const s=this.isSorted(t);s?(this.removeSort(t.name,!1),s.dir===Dt.ASCENDING&&this.appendSort(t.name,Dt.DESCENDING,!1)):this.appendSort(t.name,Dt.ASCENDING,!1),e&&this.build(!1)}}cleraSort(t){this.sort(null,t)}getSourceRow(t){return this._rows[t].row}rowOfSourceId(t){const e=this._rows;for(let s=0,i=e.length;s<i;s++)if(e[s].id===t)return s;return-1}rowOfSourceRow(t){const e=this._rows;for(let s=0,i=e.length;s<i;s++)if(e[s].row===t)return s;return-1}getSortOption(t){if(Array.isArray(this._sorts)){const e=this._sorts.find(e=>e.field==t);return e&&Object.assign({},e)}}setDataTags(t,e){for(const t of this._rows)t.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getRows(){return this._rows.slice(0)}getFieldValues(t,e,s){}$_buildOptions(t){if(t){t.filterOp&&(this._defaultFilterOp=t.filterOp);let e=t.filter;w.isObject(e)&&(this._filter=new io(e.name||"main_filter",e.label,Array.isArray(e.filters)?e.filters:[e],e.op||this._defaultFilterOp,this)),e=t.postFilter,w.isObject(e)&&(this._postFilter=new io(e.name||"main_post_filter",e.label,Array.isArray(e.filters)?e.filters:[e],e.op||this._defaultFilterOp,this))}this._filter||(this._filter=new io("main_filter",null,null,this._defaultFilterOp,this)),this._postFilter||(this._postFilter=new io("main_post_filter",null,null,this._defaultFilterOp,this)),t&&t.sort&&this.sort(t.sort,!1)}$_sort(t,e){let s=this._sorts;if(this._sorted=Array.isArray(s))if(s=s.filter(e=>e.comparer||(e._f_=t.find(t=>t.name===e.field))),1===s.length&&s[0].comparer){const t=s[0].comparer;e=e.sort((e,s)=>{let i=t(e.row,e.values,s.row,s.values);return i||(i=e.row-s.row),i})}else s.length>0&&(e=e.sort((t,e)=>{let i=0;for(let r of s){if(r.comparer)i=r.comparer(t.row,t.values,e.row,e.values);else{const s=t.values[r.field],n=e.values[r.field];i=r._f_.comparer(s,n),i&&r.dir===Dt.DESCENDING&&(i*=-1)}if(i)break}return i||(i=t.row-e.row),i}),s.forEach(t=>delete t._f_));return e}$_buildRows(){const t=this._fields;let e=this._rows=this._data.getRows();const s=e.length;if(this._filter.isNotEmpty()&&(e=this._filter.select(e)),(this._sortDirty||this._autoSort)&&(e=this.$_sort(t,e),this._sortDirty=!1),this._postFilter.isNotEmpty()&&(e=this._postFilter.select(e)),this._filtered=e.length<s,!this._flags.isEmpty()){for(const t of this._rows)t.newIdx=-1;for(let t=e.length-1;t>=0;t--)e[t].newIdx=t;this._flags._reset(this._rows,e.length)}return e}$_isRowSelected(t,e,s){}$_indexOfSort(t){const e=this._sorts;if(e)for(let s=0;s<e.length;s++)if(e[s].field===t)return s;return-1}$_removeSort(t){const e=this.$_indexOfSort(t);if(e>=0)return this._sorts.splice(e,1),delete this._sortMap[t],!0}$_reset(){this._rows=this.$_buildRows(),this._fireEvent("onDataReset")}$_getFilter(t){return this._filter.getFilter(t)||this._postFilter.getFilter(t)}$_filterChanged(t){this._dirty=!0,Tt(t,!0)&&this.build(!1),this.$_fireFilterChanged()}$_fireFilterChanged(){this._fireEvent("onDataViewFilterChanged"),this.onFilterChange&&this.onFilterChange({dv:this.wrapperOrThis()})}$_fireSortChanged(){this._fireEvent("onDataViewSortChanged"),this.onSortChange&&this.onSortChange({dv:this.wrapperOrThis()})}}class ho extends Wn{_doInitDefaults(){super._doInitDefaults(),this._autoApply=!1,this.setOkLabel("Apply")}autoApply(){return Tt(this._autoApply,this._defs&&this._defs._autoApply)}setAutoApply(t){this._autoApply=t}model(){return this._model}getItems(){return this._model&&this._model.filters||this.$_getFilters()}setModel(t){this._model=t}prepare(t){this._data=t}unprepare(){this._data=null}$_getFilters(){if(this._data instanceof ao){const t=this._data.filter().children,e=[];return t.forEach(t=>{e.push({filter:t,label:t.label||t.name})}),e}return[]}}ho.TYPE="filter";class lo{constructor(t){this._owner=t}inflateStock(t){const e=t.name,s=this._owner,i=s.data();switch(e){case"row_count":return i?i.rowCount():0;case"leaf_count":return s.leafRowCount();case"check_count":return s.checkedRowCount();case"no":return isNaN(this.topRow)?"":this.topRow+1;case"is_landscape":return s.isLandscape();case"is_portrait":return s.isPortrait();default:if(e.endsWith("_sum")){if(i){const t=e.slice(0,-4);return i.getSummary(t).sum}}else if(e.endsWith("_avg")&&i){const t=e.slice(0,-4);return i.getSummary(t).avg}}}}class _o extends s{constructor(t,e){super(),this._owner=t,this._defs=e,!e&&this._doInitDefaults()}_doInitDefaults(){this._visible=!0}owner(){return this._owner}data(){return this._owner.data()}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._layoutChanged())}_changed(){this._owner&&this._owner.sectionChanged(this)}_layoutChanged(){this._owner&&this._owner.sectionLayoutChanged(this)}}_o.BUTTON_CLASS="rtc-section-button";class co extends _o{constructor(t,e){super(t,e),this._inflater=new lo(t)}inflateParam(t,e,s){const i=s.name;if(this.templateParams){const t=this.templateParams[i];if(void 0!==t)return t}const r=this.layoutParams();return r&&r[i]}inflateStock(t,e,s){return this._inflater.inflateStock(s)}setTopRow(t){this._inflater.topRow=t}template(){return Tt(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._layoutChanged())}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}layoutStyle(){return Tt(this._layoutStyle,this._defs&&this._defs._layoutStyle)}setLayoutStyle(t){t!==this._layoutStyle&&(this._layoutStyle=t,this._changed())}layoutParams(){return Tt(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?w.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){const t=this.getTemplate();return{layout:pi.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:this.style()||t.rowStyle&&t.rowStyle.default}}getTemplate(){return this.owner().getTemplate(this.template())||wi.get(this.defTemplate())||Ne}setLayoutItemProp(t,e,s){}setLayoutItemsProp(t,e,s){}click(){}}!function(t){t.HEAD="head",t.FOOT="foot"}(Jn||(Jn={}));class uo extends Fn{constructor(t){super(t)}getProxy(){const t=super.getProxy();return t.position=this.position,t.action=this.action,t}_setDefaults(){super._setDefaults(),this.position=Jn.FOOT}click(t){const e=this.action;e&&e!==to.NONE?go.perform(t,e):super.click(t)}}!function(t){t.NONE="none",t.FORM="form",t.BUTTON="button",t.SEARCH="search",t.SORT="sort",t.FILTER="filter",t.FIELD="field",t.MENU="menu"}(to||(to={}));class go extends co{static perform(t,e){switch(e){case to.FORM:t.togglePanel(Un.TYPE,!0);break;case to.BUTTON:t.togglePanel(Gn.TYPE,!0);break;case to.SEARCH:t.togglePanel(qn.TYPE,!0);break;case to.FILTER:t.togglePanel(ho.TYPE,!0);break;case to.FIELD:t.options().fieldBar().setVisible(!t.options().fieldBar().visible());break;case to.MENU:t.showMenu(null,!0)}}_doInitDefaults(){super._doInitDefaults(),this._buttonGap=5,this._headButtons=[],this._footButtons=[]}buttons(){const t=Tt(this._buttons,this._defs&&this._defs._buttons);return t&&t.slice(0)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._listButtons=[],t&&t.forEach(t=>this._listButtons.push(new uo(t))),this.$_resetButtons(),this._changed())}buttonGap(){return Tt(this._buttonGap,this._defs._buttonGap)}setButtonGap(t){t!==this._buttonGap&&(this._buttonGap=t,this._changed())}clickAction(){return Tt(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}getButtonAt(t,e){const s=void 0!==this._buttons?this:this._defs;if(s)return t===Jn.HEAD?s._headButtons[e]:s._footButtons[e]}getButton(t){const e=void 0!==this._buttons?this:this._defs;if(e){const s=e.$_indexOfButton(t);return s>=0?e._listButtons[s]:null}}getButtons(t){const e=void 0!==this._buttons?this:this._defs;if(e)return t===Jn.HEAD?e._headButtons:e._footButtons}setButton(t){if(t&&t.name){const e=this.$_indexOfButton(t.name);if(e>=0)this._listButtons[e].update(t);else{const e=new uo(t);this._listButtons.push(e)}this.$_resetButtons()}}removeButton(t){const e=this.$_indexOfButton(t);e>=0&&(this._listButtons.splice(e,1),this.$_resetButtons())}setButtonVisible(t,e){const s=this.$_getButton(t);s&&s.visible!==e&&(s.visible=e,this.$_resetButtons())}setButtonEnabled(t,e){const s=this.$_getButton(t);s&&s.enabled!==e&&(s.enabled=e,this.$_resetButtons())}getButtonState(t){const e=void 0!==this._buttons?this:this._defs;if(e){const s=e.$_getButton(t);return s?s.state:void 0}}setButtonState(t,e){const s=this.$_getButton(t);s&&(s.state=e)}click(){go.perform(this.owner(),this.clickAction())}$_indexOfButton(t){return this._listButtons?this._listButtons.findIndex(e=>e.name===t):-1}$_getButton(t){return this._listButtons&&this._listButtons.find(e=>e.name===t)}$_resetButtons(){const t=this._listButtons;this._headButtons=[],this._footButtons=[],t&&(t.forEach(t=>{t.position===Jn.HEAD?this._headButtons.push(t):this._footButtons.push(t)}),this._layoutChanged())}}class po extends go{constructor(){super(...arguments),this._checked=!1}_doInitDefaults(){super._doInitDefaults(),this._caption=po.CAPTION,this._showCheck=!1,this._autoCheck=!1,this.setVisible(!1)}caption(){return Tt(this._caption,this._defs&&this._defs._caption)}setCaption(t){t!==this._caption&&(this._caption=t,this._changed())}captionAlign(){return Tt(this._captionAlign,this._defs&&this._defs._captionAlign)}setCaptionAlign(t){t!==this._captionAlign&&(this._captionAlign=t,this._changed())}captionColor(){return Tt(this._captionColor,this._defs&&this._defs._captionColor)}setCaptionColor(t){t!==this._captionColor&&(this._captionColor=t,this._changed())}showCheck(){return Tt(this._showCheck,this._defs._showCheck)}setShowCheck(t){t!==this._showCheck&&(this._showCheck=t,this._changed())}autoCheck(){return Tt(this._autoCheck,this._defs._autoCheck)}setAutoCheck(t){t!=this._autoCheck&&(this._autoCheck=t,this._changed())}isChecked(){return this._checked}setChecked(t=!0){t!==this._checked&&(this._checked=t,this._changed())}defTemplate(){return po.TEMPLATE}getStyle(){return this.style()}inflateStock(t,e,s){switch(s.name){case"caption":return this.caption();case"caption-align":return this.captionAlign();case"caption-color":return this.captionColor();case"style":return this.layoutStyle();default:return super.inflateStock(t,e,s)}}}po.CAPTION="Header",po.TEMPLATE="@it_list_header",po.ROW=-1;class fo extends go{_doInitDefaults(){super._doInitDefaults()}defTemplate(){return fo.TEMPLATE}}fo.TEMPLATE="@it_list_footer",fo.ROW=-2;class wo extends Oi{constructor(t,e){super(t,!0,e)}dv(){return null}row(){return-1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}getRenderer(t){return this._layoutView instanceof cn&&this._layoutView.getRenderer(t)}simpleViewByDom(t,e){return this._layoutView instanceof cn&&this._layoutView.simpleByDom(t,e)}_doPrepareRender(t,e){this._layout.setRow(this.dv(),this.row(),-1),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._owner=e}_doMeasure(t,e,s){this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._owner);return this._layoutView.measureLayout(t,this._owner,e,s)}_doRender(t,e,s){this.resizeContent(e,s),this._layoutView.resize(e,s),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._owner=null}}class mo extends Oi{constructor(t,e,s){super(t,!0,s),this._model=e}model(){return this._model}setModel(t){this._model=t}_doMeasure(t,e,s){const i=this._padding=this.getPadding();e-=i.left+i.right,s-=i.top+i.bottom;const r=this._doMeasureContent(t,e,s);return r.width+=i.left+i.right,r.height+=i.top+i.bottom,r}_doRender(t,e,s){const i=this._padding;e-=i.left+i.right,s-=i.top+i.bottom,this._doRenderContent(t,e,s)}}class yo extends mo{constructor(t,e,s){super(t,e,s),this._layoutChanged=!1}layoutView(){return this._layoutView}setLayout(t){this._layoutChanged=!this._layout||t.layout.tid!==this._layout.tid,this._layout=t.layout,this._rowStyle=t.rowStyle}click(t,e,s){this.model().click()}clickable(){return!0}_doInitContent(t,e){Object.assign(e.style,{overflow:"hidden"}),super._doInitContent(t,e)}_doPrepareRender(t,e){e.layoutContainer=this._model,this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._layoutManager=e}_doApplyStyles(t){"string"==typeof this._rowStyle||this._rowStyle&&Object.assign(t,this._rowStyle)}_doMeasureContent(t,e,s){return this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,e,s)}_doRenderContent(t,e,s){this.resizeContent(e,s),this._layoutView.resize(e,s),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._layoutManager=null}}class vo extends zi{constructor(t){super(t,_o.BUTTON_CLASS)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}click(t){this.model.click(t)}}class bo extends yo{constructor(){super(...arguments),this._headButtons=[],this._footButtons=[],this._visHeadButtons=[],this._visTailButtons=[],this._gap=0}_doInitContent(t,e){this.addChild(this._headView=new ce(t,!1,bo.HEAD_CLASS)),this.addChild(this._tailView=new ce(t,!1,bo.TAIL_CLASS))}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this.model();this.$_prepareActions(t,s),this._gap=s.buttonGap()||0}_doMeasureContent(t,e,s){const i=this._doMeasureHead(t,e),r=this._doMeasureTail(t,e);e-=this._wHead=i.width,e-=this._wTail=r.width,this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,e,s);const n=this._layoutView.measureLayout(t,this._layoutManager,e,s);return n.width+=this._wHead+this._wTail,n.height=Math.max(n.height,this._hHead=i.height,this._hTail=r.height),n}_doMeasureHead(t,e){return this.$_measureButtons(this._headActions,this._headButtons,this._visHeadButtons=[])}_doMeasureTail(t,e){return this.$_measureButtons(this._tailActions,this._footButtons,this._visTailButtons=[])}_doRenderContent(t,e,s){let i=e,r=0;this.resizeContent(e,s),this._wHead>0&&(this._headView.move(r,(s-this._hHead)/2),this._doRenderHead(this._headView,this._wHead,this._hHead),i-=this._wHead,r+=this._wHead),this._wTail>0&&(this._tailView.move(e-this._wTail,(s-this._hTail)/2),this._doRenderTail(this._tailView,this._wTail,this._hTail),i-=this._wTail),this._layoutView.move(r,0),this._layoutView.resize(i,s),this._layoutView.render(t)}_doRenderHead(t,e,s){let i=0;this._visHeadButtons.forEach(t=>{t.move(i,0),i+=t.width+this._gap})}_doRenderTail(t,e,s){let i=this._gap;this._visTailButtons.forEach(t=>{t.move(i,0),i+=t.width+this._gap})}_doAfterRender(){super._doAfterRender(),this._headActions=this._tailActions=null}$_prepareActions(t,e){let s=this._headActions=e.getButtons(Jn.HEAD),i=this._headButtons;for(;i.length<s.length;){const e=new vo(t);this._headView.addChild(e),i.push(e)}for(;i.length>s.length;)this._headView.removeChild(i.pop());for(s=this._tailActions=e.getButtons(Jn.FOOT),i=this._footButtons;i.length<s.length;){const e=new vo(t);this._tailView.addChild(e),i.push(e)}for(;i.length>s.length;)this._tailView.removeChild(i.pop())}$_measureButtons(t,e,s){const i=this.control;let r=0,n=0;return e.forEach((e,o)=>{const a=t[o];a.visible?(e.visible=!0,e.setEnabled(a.isEnabled(i.wrapperOrThis())),s.push(e),e.setModel(i,a).syncSize(),r+=e.width+this._gap,n=Math.max(n,e.height)):e.visible=!1}),{width:r,height:n}}}bo.HEAD_CLASS="rtc-section-head",bo.TAIL_CLASS="rtc-section-foot";class So extends bo{constructor(t,e){super(t,e,So.CLASS_NAME)}}So.CLASS_NAME="rtc-footer";class Co extends bo{constructor(t,e){super(t,e,Co.CLASS_NAME)}}Co.CLASS_NAME="rtc-header";class xo extends cn{constructor(t,e){super(t,e)}}!function(t){t.AUTO="auto",t.ROW="row",t.PAGE="page"}(eo||(eo={}));class Ro extends xi{_doInitDefaults(){super._doInitDefaults(),this._mode=eo.AUTO,this._barWidth=Ro.DEF_BAR_WIDTH,this._showSelection=!0,this._tooltipVisible=!1,this._tooltipValue="top",this._firstTooltip="First",this._lastTooltip="Last"}mode(){return Tt(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}barWidth(){return Tt(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){(t=Pt(t))!==this._barWidth&&(this._barWidth=t,this._changed())}showSelection(){return Tt(this._showSelection,this._defs&&this._defs._showSelection)}setShowSelection(t){t!==this._showSelection&&(this._showSelection=t,this._changed())}clickable(){return Tt(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}tooltipVisible(){return Tt(this._tooltipVisible,this._defs&&this._defs._tooltipVisible)}setTooltipVisible(t){this._tooltipVisible=t}tooltipValue(){return Tt(this._tooltipValue,this._defs&&this._defs._tooltipValue)}setTooltipValue(t){return this._tooltipValue=t}firstTooltip(){return Tt(this._firstTooltip,this._defs&&this._defs._firstTooltip)}setFirstTooltip(t){this._firstTooltip=t}lastTooltip(){return Tt(this._lastTooltip,this._defs&&this._defs._lastTooltip)}setLastTooltip(t){this._lastTooltip=t}tooltipStyle(){return Tt(this._tooltipStyle,this._defs&&this._defs._tooltipStyle)}setTooltipStyle(t){t!==this._tooltipStyle&&(this._tooltipStyle=t,this._changed("style"))}_doPrepareRender(){}}Ro.DEF_BAR_WIDTH=4;class Eo extends Wi{constructor(t){super(t,!1,"rtc-scroll-indicator-tooltip")}setText(t){this.dom.textContent=t}_getDisplayStyle(){return"inline-block"}}class Vo extends Fi{constructor(t,e){super(t,e,!1,Vo.CLASS_NAME),this._rate=0,this._tipHandler=()=>{if(+new Date-this._tipped>=Vo.TIP_DELAY)if(this.$_clearTipTimers(),this.canAnimate()){this._tip.dom.animate([{opacity:1},{opacity:0}],{duration:700,fill:"none"}).addEventListener("finish",()=>{this.listOwner().removeTooltipView(this._tip)})}else this.listOwner().removeTooltipView(this._tip)}}rate(){return this._rate}setRate(t,e){t!==this._rate&&(this._rate=t,e&&this.$_render())}updateRate(t,e,s,i,r){if(this.visible){const n=t.data();let o=this._tip;if(n){let a;if(t.isPaging()&&this._model.mode()!==eo.ROW)a=(t.page()+1)/t.pageCount();else{a=(e+1-(1-i/s))/(t.isGrouped()?t.groupModel().visItemCount():n.rowCount())}if(this.setRate(a,r),this._model.tooltipVisible()){if(o)if(o.dom.getAnimations){const t=o.dom.getAnimations();t&&t.forEach(t=>t.finish())}else t.removeTooltipView(o);else o=this._tip=new Eo(t.doc());if(o.parent||isNaN(this._tipped)||t.addTooltipView(o),o.parent){const e=t.scrollIndex(),s=0===e?"First":a>=1?"Last":`${e+1} / ${n.rowCount()}`;o.setText(s);const i=o.getOffsetSize().width,r=this.width*a-i/2;o.moveX(Math.max(0,Math.min(r,this.width-i))),o.moveY(this.height+2),this._tipTimer||(this._tipTimer=setInterval(this._tipHandler,100))}this._tipped=+new Date}else o&&(t.removeTooltipView(o),this.$_clearTipTimers())}else this.setRate(0,r),o&&t.removeTooltipView(o),this.$_clearTipTimers()}else this.$_clearTipTimers()}$_clearTipTimers(){this._tipTimer&&(clearInterval(this._tipTimer),this._tipTimer=void 0),this._tipped=NaN}_doInitDom(t,e){this._bar=this.appendSpan(t,Vo.BAR_CLASS),Object.assign(this._bar.style,{position:"absolute",height:"100%"})}_doMeasure(t,e,s){return this.vertical?{width:this._model.barWidth(),height:s}:{width:e,height:this._model.barWidth()}}_doRender(t,e,s){this.$_render()}clickable(){return this._model.clickable()}click(t,e,s){alert(e+", "+s)}$_render(){const t=100*(this._rate||0)+"%";this.vertical?(this._bar.style.width="100%",this._bar.style.height=t):(this._bar.style.width=t,this._bar.style.height="100%")}}Vo.CLASS_NAME="rtc-scroll-indicator",Vo.BAR_CLASS="rtc-scroll-indicator-bar",Vo.SELECTION_CLASS="rtc-scroll-indicator-selection",Vo.TIP_DELAY=2e3;const $o={"@help":{width:48,path:"M24.2 35.65q.8 0 1.35-.55t.55-1.35q0-.8-.55-1.35t-1.35-.55q-.8 0-1.35.55t-.55 1.35q0 .8.55 1.35t1.35.55Zm-1.75-7.3h2.95q0-1.3.325-2.375T27.75 23.5q1.55-1.3 2.2-2.55.65-1.25.65-2.75 0-2.65-1.725-4.25t-4.575-1.6q-2.45 0-4.325 1.225T17.25 16.95l2.65 1q.55-1.4 1.65-2.175 1.1-.775 2.6-.775 1.7 0 2.75.925t1.05 2.375q0 1.1-.65 2.075-.65.975-1.9 2.025-1.5 1.3-2.225 2.575-.725 1.275-.725 3.375ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z"},"@info":{width:48,path:"M22.65 34h3V22h-3ZM24 18.3q.7 0 1.175-.45.475-.45.475-1.15t-.475-1.2Q24.7 15 24 15q-.7 0-1.175.5-.475.5-.475 1.2t.475 1.15q.475.45 1.175.45ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 23.95q0-4.1 1.575-7.75 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24.05 4q4.1 0 7.75 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm.05-3q7.05 0 12-4.975T41 23.95q0-7.05-4.95-12T24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24.05 41ZM24 24Z"},"@search":{width:48,path:"M39.8 41.95 26.65 28.8Q25.15 30.1 23.15 30.825Q21.15 31.55 18.9 31.55Q13.5 31.55 9.75 27.8Q6 24.05 6 18.75Q6 13.45 9.75 9.7Q13.5 5.95 18.85 5.95Q24.15 5.95 27.875 9.7Q31.6 13.45 31.6 18.75Q31.6 20.9 30.9 22.9Q30.2 24.9 28.8 26.65L42 39.75ZM18.85 28.55Q22.9 28.55 25.75 25.675Q28.6 22.8 28.6 18.75Q28.6 14.7 25.75 11.825Q22.9 8.95 18.85 8.95Q14.75 8.95 11.875 11.825Q9 14.7 9 18.75Q9 22.8 11.875 25.675Q14.75 28.55 18.85 28.55Z"},"@home":{width:48,path:"M8 42V18L24.1 6 40 18v24H28.3V27.75h-8.65V42Zm3-3h5.65V24.75H31.3V39H37V19.5L24.1 9.75 11 19.5Zm13-14.65Z"},"@menu":{width:48,path:"M6 36V33H42V36ZM6 25.5V22.5H42V25.5ZM6 15V12H42V15Z"},"@settings":{width:48,path:"M19.4 44 18.4 37.7Q17.45 37.35 16.4 36.75Q15.35 36.15 14.55 35.5L8.65 38.2L4 30L9.4 26.05Q9.3 25.6 9.275 25.025Q9.25 24.45 9.25 24Q9.25 23.55 9.275 22.975Q9.3 22.4 9.4 21.95L4 18L8.65 9.8L14.55 12.5Q15.35 11.85 16.4 11.25Q17.45 10.65 18.4 10.35L19.4 4H28.6L29.6 10.3Q30.55 10.65 31.625 11.225Q32.7 11.8 33.45 12.5L39.35 9.8L44 18L38.6 21.85Q38.7 22.35 38.725 22.925Q38.75 23.5 38.75 24Q38.75 24.5 38.725 25.05Q38.7 25.6 38.6 26.1L44 30L39.35 38.2L33.45 35.5Q32.65 36.15 31.625 36.775Q30.6 37.4 29.6 37.7L28.6 44ZM24 30.5Q26.7 30.5 28.6 28.6Q30.5 26.7 30.5 24Q30.5 21.3 28.6 19.4Q26.7 17.5 24 17.5Q21.3 17.5 19.4 19.4Q17.5 21.3 17.5 24Q17.5 26.7 19.4 28.6Q21.3 30.5 24 30.5ZM24 27.5Q22.55 27.5 21.525 26.475Q20.5 25.45 20.5 24Q20.5 22.55 21.525 21.525Q22.55 20.5 24 20.5Q25.45 20.5 26.475 21.525Q27.5 22.55 27.5 24Q27.5 25.45 26.475 26.475Q25.45 27.5 24 27.5ZM24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24ZM21.8 41H26.2L26.9 35.4Q28.55 35 30.025 34.15Q31.5 33.3 32.7 32.1L38 34.4L40 30.8L35.3 27.35Q35.5 26.5 35.625 25.675Q35.75 24.85 35.75 24Q35.75 23.15 35.65 22.325Q35.55 21.5 35.3 20.65L40 17.2L38 13.6L32.7 15.9Q31.55 14.6 30.1 13.725Q28.65 12.85 26.9 12.6L26.2 7H21.8L21.1 12.6Q19.4 12.95 17.925 13.8Q16.45 14.65 15.3 15.9L10 13.6L8 17.2L12.7 20.65Q12.5 21.5 12.375 22.325Q12.25 23.15 12.25 24Q12.25 24.85 12.375 25.675Q12.5 26.5 12.7 27.35L8 30.8L10 34.4L15.3 32.1Q16.5 33.3 17.975 34.15Q19.45 35 21.1 35.4Z"},"@close":{width:48,path:"M12.45 37.65 10.35 35.55 21.9 24 10.35 12.45 12.45 10.35 24 21.9 35.55 10.35 37.65 12.45 26.1 24 37.65 35.55 35.55 37.65 24 26.1Z"},"@edit":{width:48,path:"M9 39h2.2l22.15-22.15-2.2-2.2L9 36.8Zm30.7-24.3-6.4-6.4 2.1-2.1q.85-.85 2.1-.85t2.1.85l2.2 2.2q.85.85.85 2.1t-.85 2.1Zm-2.1 2.1L12.4 42H6v-6.4l25.2-25.2Zm-5.35-1.05-1.1-1.1 2.2 2.2Z"},"@delete":{width:48,path:"M13.05 42q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2.05V39q0 1.2-.9 2.1-.9.9-2.1.9Zm21.9-31.5h-21.9V39h21.9Zm-16.6 24.2h3V14.75h-3Zm8.3 0h3V14.75h-3Zm-13.6-24.2V39Z"},"@check":{width:48,path:"M18.9 35.7 7.7 24.5l2.15-2.15 9.05 9.05 19.2-19.2 2.15 2.15Z"},"@refresh":{width:48,path:"M24 40q-6.65 0-11.325-4.675Q8 30.65 8 24q0-6.65 4.675-11.325Q17.35 8 24 8q4.25 0 7.45 1.725T37 14.45V8h3v12.7H27.3v-3h8.4q-1.9-3-4.85-4.85Q27.9 11 24 11q-5.45 0-9.225 3.775Q11 18.55 11 24q0 5.45 3.775 9.225Q18.55 37 24 37q4.15 0 7.6-2.375 3.45-2.375 4.8-6.275h3.1q-1.45 5.25-5.75 8.45Q29.45 40 24 40Z"},"@back":{width:48,path:"M24 40 8 24 24 8l2.1 2.1-12.4 12.4H40v3H13.7l12.4 12.4Z"},"@forward":{width:48,path:"m24 40-2.1-2.15L34.25 25.5H8v-3h26.25L21.9 10.15 24 8l16 16Z"},"@first":{width:48,path:"M0 4 0 44 5 44 5 4Z M32 44 12 24 32 4 34.8 6.85 17.65 24 36.8 41.15Z"},"@prev":{width:48,path:"M20 44 0 24 20 4 22.8 6.85 5.65 24 22.8 41.15Z"},"@last":{width:48,path:"M33 3.9 33 45 38 45 38 3.9Z M5.2 43.9 2.4 41.05 19.55 23.9 2.4 6.75 5.2 3.9 25.2 23.9Z"},"@next":{width:48,path:"M15.2 43.9 12.4 41.05 29.55 23.9 12.4 6.75 15.2 3.9 35.2 23.9Z"},"@left":{width:48,path:"M8 24 40 40 40 8 Z"},"@right":{width:48,path:"M40 24 8 40 8 8 Z"},"@up":{width:48,path:"M24 8 8 40 40 40 Z"},"@down":{width:48,path:"M24 40 8 8 40 8 Z"},"@drag":{width:48,path:"M17.5 40q-1.45 0-2.475-1.025Q14 37.95 14 36.5q0-1.45 1.025-2.475Q16.05 33 17.5 33q1.45 0 2.475 1.025Q21 35.05 21 36.5q0 1.45-1.025 2.475Q18.95 40 17.5 40Zm13 0q-1.45 0-2.475-1.025Q27 37.95 27 36.5q0-1.45 1.025-2.475Q29.05 33 30.5 33q1.45 0 2.475 1.025Q34 35.05 34 36.5q0 1.45-1.025 2.475Q31.95 40 30.5 40Zm-13-12.5q-1.45 0-2.475-1.025Q14 25.45 14 24q0-1.45 1.025-2.475Q16.05 20.5 17.5 20.5q1.45 0 2.475 1.025Q21 22.55 21 24q0 1.45-1.025 2.475Q18.95 27.5 17.5 27.5Zm13 0q-1.45 0-2.475-1.025Q27 25.45 27 24q0-1.45 1.025-2.475Q29.05 20.5 30.5 20.5q1.45 0 2.475 1.025Q34 22.55 34 24q0 1.45-1.025 2.475Q31.95 27.5 30.5 27.5ZM17.5 15q-1.45 0-2.475-1.025Q14 12.95 14 11.5q0-1.45 1.025-2.475Q16.05 8 17.5 8q1.45 0 2.475 1.025Q21 10.05 21 11.5q0 1.45-1.025 2.475Q18.95 15 17.5 15Zm13 0q-1.45 0-2.475-1.025Q27 12.95 27 11.5q0-1.45 1.025-2.475Q29.05 8 30.5 8q1.45 0 2.475 1.025Q34 10.05 34 11.5q0 1.45-1.025 2.475Q31.95 15 30.5 15Z"}};class Ao extends Di{constructor(t){super(),this._ctors={},this._customs={},this._owner=t,this.$_prepareStocks()}_doDestory(){super._doDestory(),this._owner=null}create(t,e){const s=t.NAME;let i=this.get(s);return!i&&this._ctors[s]&&this.add(s,i=this._ctors[s](e||this._owner.doc())),i&&Ai.clone(i,t)}createStock(t,e,s,i){const r=this._ctors[e];let n=this.get(e);if(!n&&r&&this.add(e,n=new r(t,s)),n){if(t instanceof Document)return new r(n,s,i);if(t)return new r(t,s,i)}}createCustom(t,e,s){const i=this._customs[t],r=this.create(ki,e);return s&&r.setClass(s),r.setShape(i),r}registerCustom(t,e,s,i){if(t&&e)if(t.startsWith("@")){const r=$o[t];r&&(r.path=e,s>0&&(r.width=s),i>0&&(r.height=i))}else this._customs[t]={w:s,h:i,d:e}}registerCustoms(t){for(let e in t){const s=t[e];if(s&&s.d)if(e.startsWith("@")){const t=$o[e];t&&(t.path=s.d,s.width>0&&(t.width=s.width),s.height>0&&(t.height=s.height))}else this._customs[e]={w:s.width,h:s.height,d:s.d}}}getCustom(t){return this._customs[t]}$_prepareStocks(){const t=this._ctors;t[ki.NAME]=function(t,e){return new ki(t,e,{width:"100%",height:"100%"})},t[Li.NAME]=function(t,e){return new Li(t,e)},t[Ti.NAME]=function(t,e){return new Ti(t,e)},t[Mi.NAME]=function(t,e){return new Mi(t,e)},t[Ii.NAME]=function(t,e){return new Ii(t,e)};for(let e in $o)t[e]=function(t,s){const i=$o[e];return new Ni(t,i.width,i.height,i.path,s)}}}class Do extends Hi{constructor(t,e){super(t,Do.CLASS_NAME),this.setModel(e)}setModel(t){if(t!==this.model){let e;switch(this.model=t,t.label()){case"<<":e=$o["@first"];break;case"<":e=$o["@prev"];break;case">>":e=$o["@last"];break;case">":e=$o["@next"]}this._svg.setShape(e,!0)}this.setSize(this.model.owner().buttonSize()),this.setDisabled(t.disabled())}setVertical(t){de.setData(this._svg.svg,"dir",t?"v":"")}_doInitSvg(t){}_doClick(){this.model.run()}}Do.CLASS_NAME="dlist-page-navigator-item";class ko extends Fi{constructor(t,e,s){super(t,s,!1,ko.CLASS_NAME),this._itemGap=0,this._owner=e,this.addChild(this._container=new ce(t))}_doDestory(){super._doDestory(),this._spans=null}_doInitDom(t,e){}_doPrepareRender(t,e){if(!this._slash){const e=this._container,s=this._model,i=this._buttons=[this._first=new Do(t,s.first()),this._prev=new Do(t,s.prev()),this._next=new Do(t,s.next()),this._last=new Do(t,s.last())],r=this._spans=[this._page=e.appendSpan(t,ko.INDEX_CLASS),this._total=e.appendSpan(t,ko.INDEX_CLASS)];i.forEach(t=>{e.addChild(t)}),this._spans.push(this._slash=e.appendSpan(t,ko.SLASH_CLASS)),r.forEach(t=>{t.style.position="absolute",t.style.whiteSpace="nowrap"})}}$_getItemGap(){let t=this._model.itemGap();if(this.landscape&&this.vertical){let e=this._model.itemGap2();return isNaN(e)&&!isNaN(t)&&(e=.5*t),e}return t}_doMeasure(t,e,s){const i=this._owner,r=i.page(),n=this.vertical,o=this._itemGap=this.$_getItemGap();let a=0,h=0,l={width:this._model.buttonSize(),height:this._model.buttonSize()};return de.setData(this.dom,"position",this.position),this._buttons.forEach(t=>{t.setDisabled(t.model.disabled()),t.setVertical(n),l=t.measure(),n?(h+=l.height,a=Math.max(a,l.width)):(a+=l.width,h=Math.max(h,l.height)),t.resize(l.width,l.height)}),this._page.textContent=""+(r+1),this._total.textContent=""+i.pageCount(),this._slash.textContent=n?"━":"/",n?this._spans.forEach(t=>{a=Math.max(a,t._width_=t.offsetWidth),h+=t._height_=t.offsetHeight}):this._spans.forEach(t=>{a+=t._width_=t.offsetWidth,h=Math.max(h,t._height_=t.offsetHeight)}),n?h+=4*o:a+=4*o,this._container.resize(a,h),n?{width:this._model.width()||this.dom.offsetWidth,height:s}:{width:e,height:this._model.height()||this.dom.offsetHeight}}_doRender(t,e,s){const i=this._container,r=this._itemGap;if(this.vertical){const t=i.width;let n=0;this._container.moveI((e-t)/2,(s-i.height)/2),this._first.moveI((t-this._first.mw)/2,n),n+=this._first.mh+r,this._prev.moveI((t-this._prev.mw)/2,n),n+=this._prev.mh+r,de.moveI(this._page,(t-this._page._width_)/2,n),n+=this._page._height_,de.moveI(this._slash,(t-this._slash._width_)/2,n),n+=this._slash._height_,de.moveI(this._total,(t-this._total._width_)/2,n),n+=this._total._height_,n+=r,this._next.moveI((t-this._next.mw)/2,n),n+=this._next.mh+r,this._last.moveI((t-this._last.mw)/2,n),n+=this._last.mh}else{const t=this._itemGap,r=i.height;let n=0;this._container.moveI((e-i.width)/2,(s-r)/2),this._first.moveI(n,(r-this._first.mh)/2),n+=this._first.mw+t,this._prev.moveI(n,(r-this._prev.mh)/2),n+=this._prev.mw+t,de.moveI(this._page,n,(r-this._page._height_)/2),n+=this._page._width_,de.moveI(this._slash,n,(r-this._slash._height_)/2),n+=this._slash._width_,de.moveI(this._total,n,(r-this._total._height_)/2),n+=this._total._width_,n+=t,this._next.moveI(n,(r-this._next.mh)/2),n+=this._next.mw+t,this._last.moveI(n,(r-this._last.mh)/2),n+=this._last.mw}}}ko.CLASS_NAME="dlist-page-navigator",ko.INDEX_CLASS="dlist-page-navigator-index",ko.SLASH_CLASS="dlist-page-navigator-slash";const Lo="$_page";class To extends Bi{static isPageIndex(t){return t.classList.contains(this.INDEX_CLASS)?t[Lo]:-1}constructor(t,e,s){super(t,s,!1,To.CLASS_NAME),this._pagePool=[],this._pageViews=[],this._pageMap={},this._scrollPos=0,this._scrollOff=0,this._indexClicked=t=>{const e=t.target[Lo];this._owner.pageIndexClick(e)},this._owner=e}get scrollPos(){return this._scrollPos}get scrollOff(){return this._scrollOff}scrollBy(t){const e=this.doc,s=this._model.itemGap();let i=this._scrollPos,r=this._scrollOff;if(t>0)if(r>=t)r-=t;else if(0===i)r=0;else{let n;for(t-=r,r=0;i>0&&t>0;){n||(n=this.$_getIndexView(e),this._pageContainer.appendChild(n)),this.$_measureIndexView(n,--i);const o=n.offsetWidth+s;o>t?(r=o-t,t=0):t-=o}n&&(this._pagePool.push(n),this._pageContainer.removeChild(n))}else if(t<0){const e=r>0?this._pageViews[0].offsetWidth+s-r:0;if(e>=(t*=-1))r+=t;else{const s=this._pageViews.slice(0);for(e>0&&(t-=e,i++,r=0,s.shift());t>0&&s.length>0;){const e=s.shift().offsetHeight;t>e?(t-=e,i++):(r=-(t-e),t=0)}}}this.$_refreshView(e,i,r)}scrollTo(t){const e=Math.max(0,Math.min(t,this._owner.pageCount()));this.$_refreshView(this.doc,e,0)}makeVisible(t,e=!1){if(e){const e=this._owner.pageCount(),s=this._pageViews;e>=s.length&&this.scrollTo(t-Math.floor(s.length/2))}else{const e=this._pageViews,s=e[e.length-1];if(t===this._scrollPos)this._scrollOff>0&&this.$_refreshView(this.doc,this._scrollPos,0);else if(t<this._scrollPos)this.scrollTo(t);else if(t>s[Lo])this.scrollTo(t-Math.floor(e.length/2));else if(t<s[Lo])this._scrollOff=0;else if(t===s[Lo]){let e=this._scrollPos,i=this._scrollOff,r=s.offsetLeft+s.offsetWidth-this._pageContainer.offsetWidth;if(r<=i)i-=r;else{const s=this._pagePool,n=this._pageMap,o=this._pageViews;for(;r>0&&e<=t;){const t=this._pageViews[0].offsetHeight;if(r>=t){let i=o.shift();delete n[e],s.push(i),r-=t,e++}else i=r,r=0}}this._scrollPos=e,this._scrollOff=i}}}_doPrepareRender(t){const e=this.dom,s=e.ownerDocument;if(!this._first){const t=this._tag="button";e.appendChild(this._firstContainer=s.createElement("div")),this._firstContainer.appendChild(this._first=s.createElement(t)),this._first.classList.add(To.INDEX_CLASS,To.END_CLASS),e.appendChild(this._pageContainer=s.createElement("div")),e.appendChild(this._lastContainer=s.createElement("div")),this._lastContainer.appendChild(this._last=s.createElement(t)),this._last.classList.add(To.INDEX_CLASS,To.END_CLASS)}}_doMeasure(t,e,s){const i=this._model,r=this._owner,n=i.itemGap();let o=0;return de.setVisible(this._firstContainer,i.first().visible())&&(this._first[Lo]=0,this._first.textContent="≪",o+=this._first.offsetWidth+n),de.setVisible(this._lastContainer,i.last().visible())&&(this._first[Lo]=r.pageCount()-1,this._last.textContent="≫",o+=this._last.offsetWidth+n),this.$_preparePages(t,this._pageContainer,e-o,n),{width:e,height:this._model.width()}}_doRender(t,e,s){const i=this._model.itemGap();let r=0;if(de.isVisible(this._lastContainer)){const t=this._last.offsetWidth;de.setBounds(this._firstContainer,e-t,0,t,s),e-=t}if(de.isVisible(this._firstContainer)){const t=this._first.offsetWidth;de.setBounds(this._firstContainer,r,0,t,s),e-=t,r+=t}de.setBounds(this._pageContainer,r,0,e,s),r=-this._scrollOff;for(let t of this._pageViews)de.move(t,r,0),r+=t.offsetWidth+i}$_getIndexView(t){let e=this._pagePool.pop();return e||(e=t.createElement(this._tag),e.classList.add(To.INDEX_CLASS),e.onclick=this._indexClicked),e}$_measureIndexView(t,e){t.classList.remove(To.CURRENT_CLASS),e===this._owner.page()&&t.classList.add(To.CURRENT_CLASS),t.textContent=e+1+""}$_preparePages(t,e,s,i){const r=this._owner.pageCount();let n=this._scrollPos,o=this._scrollOff;const a=this._pagePool,h=this._pageMap,l={},d=[];let _=s+o;for(;_>0&&n<r;){let e=h[n];e?delete h[n]:e=this.$_getIndexView(t),this.$_measureIndexView(e,n),_-=e.offsetWidth+i,d.push(e),l[n]=e,e[Lo]=n,n++}if(_>0){if(n=this._scrollOff,_<=o)o-=_;else for(_-=o;_>0&&n>0;){const e=this.$_getIndexView(t);this.$_measureIndexView(e,--n),d.unshift(e),l[n]=e,e[Lo]=n;const s=e.offsetWidth+i;_>s?_-=s:(o=s-_,_=0)}this._scrollPos=n,this._scrollOff=o}for(let t in h)a.push(h[t]);this._pageViews=d,this._pageMap=l}$_refreshView(t,e,s){this._scrollPos=e,this._scrollOff=s,this.$_preparePages(this.doc,this._pageContainer,this.width,this.height),this.render(t)}}To.CLASS_NAME="rtc-page-scroller",To.INDEX_CLASS="rtc-page-scroller-index",To.END_CLASS="rtc-page-scroller-end",To.CURRENT_CLASS="rtc-page-scroller-current";class Mo extends Oi{constructor(t,e){super(t,!1,Mo.CLASS_NAME),this._vertical=!0,this._rowViews=[],this._model=e}get model(){return this._model}get rowCount(){return this._rowViews.length}getRowView(t){return this._rowViews[t]}_doInitDom(t,e){}_doMeasure(t,e,s){return this._vertical?this.$_measureVert(t,e,s):this.$_measureHorz(t,e,s)}_doRender(t,e,s){return this._vertical?this.$_renderVert(t,e,s):this.$_renderHorz(t,e,s)}$_measureVert(t,e,s){const i=this._model,r=this.parent.parent,n=r.owner(),o=n.data(),a=this._rowViews,h=i.rowCount();let l=0,d=0;for(;a.length>h;){const t=a.pop();this.removeChild(t),t.destroy()}for(;a.length<h;){const e=i.getRow(a.length),s=n.getRowLayout(e),r=new Bn(t);r.setRow(o,e,o.getRowId(e),null),r.setLayout(s),this.addChild(r),a.push(r)}return a.forEach(i=>{const n=i.measure(t,r,e,s);l+=n.height,d=Math.max(d,n.width)}),{width:d,height:l}}$_measureHorz(t,e,s){}$_renderVert(t,e,s){let i=0;this._rowViews.forEach(s=>{const r=s.mh;s.move(0,i).resize(e,r),s.render(t),i+=r})}$_renderHorz(t,e,s){}}Mo.CLASS_NAME="rtc-head-rows";const Po={"가":"ㄱ","까":"ㄲ","나":"ㄴ","다":"ㄷ","따":"ㄸ","라":"ㄹ","마":"ㅁ","바":"ㅂ","빠":"ㅃ","사":"ㅅ","싸":"ㅆ","아":"ㅇ","자":"ㅈ","짜":"ㅉ","차":"ㅊ","카":"ㅋ","타":"ㅌ","파":"ㅍ","하":"ㅎ"};class Io extends zi{constructor(t){super(t,Io.CLASS_NAME)}setLetter(t){t!==this.letter&&(this.letter=t,this.dom.textContent=Po[t]||t)}isActive(){return"1"===de.getData(this.dom,"active")}setActive(t){de.setData(this.dom,"active",t?"1":void 0)}_getDisplayStyle(){return"inline-block"}click(){this.parent.clickLetter(this)}}Io.CLASS_NAME="rtc-index-bar-letter";class No extends Bi{constructor(t,e){super(t,e,!0,No.CLASS_NAME),this._letterViews=[]}letterCount(){return this._letterViews.length}getLetterView(t){return this._letterViews[t]}clickLetter(t){const e=t.letter;this._model.clickLetter(e)}_doMeasure(t,e,s){function i(e){const s=new Io(t);return e.addChild(s),n.push(s),s}const r=this._model,n=this._letterViews,o=this._hChar=Math.ceil((0===n.length?i(this):n[0]).dom.offsetHeight),a=r.getLength(s),h=a/o>>0,l=r.getLetters(h),d=l.length;for(;n.length>d;){const t=n.pop();this.removeChild(t)}for(;n.length<d;)i(this);for(let t=0;t<d;t++)n[t].setLetter(l[t]);return{width:this._model.minWidth(),height:a}}_doRender(t,e,s){const i=this._letterViews,r=i.length;if(r>0){let t=(s-r*this._hChar)/2>>0;i.forEach(s=>{s.move((e-s.dom.offsetWidth)/2>>0,t),t+=this._hChar})}}}No.CLASS_NAME="rtc-index-bar";class Oo extends Bi{constructor(t,e){super(t,e,!1,Oo.CLASS_NAME),this._len=0,this._page=0,this._pos=0,this._thumbSum=0,this._thumbed=0,this._vertical=!0}setVertical(t){this._vertical=t}setScroll(t,e,s,i){this._len=t,this._page=e,this._pos=s,de.setVisible(this._thumb,this._len>this._page),i&&this.$_setScrollBar(this.width,this.height)}calcPosition(t){let e=this.height;return e-=this.$_calcThumb(e),t=t*this._len/e>>0}reset(){this._thumbSum=this._thumbed=0}isView(t){return t===this._thumb}_doInitDom(t,e){this._thumb=this.appendSpan(t,Oo.THUMB_CLASS),this._thumb.style.position="absolute"}_doMeasure(t,e,s){return this._vertical?{width:this._model.barWidth(),height:s}:{width:e,height:this._model.barWidth()}}_doRender(t,e,s){this.$_setScrollBar(e,s)}$_calcThumb(t){let e=t*this._page/this._len;return this._thumbSum+=e,this._thumbed++,e=this._thumbSum/this._thumbed,Math.max(this._model.minThumbLength(),e)>>0}$_setScrollBar(t,e){if(de.isVisible(this._thumb)){const s=this._vertical?e:t,i=this.$_calcThumb(s),r=(s-i)*this._pos/(this._len-this._page)>>0,n=this._model.thumbWidth();if(this._vertical){const e=(t-n)/2>>0;de.setBounds(this._thumb,e,r,n,i)}else{const t=(e-n)/2>>0;de.setBounds(this._thumb,r,t,i,n)}}}}Oo.CLASS_NAME="rtc-scroll-bar",Oo.THUMB_CLASS="rtc-scroll-bar-thumb";class Bo extends ce{constructor(t){super(t,!1),this.pos="tail",this.vertical=!0}isEnd(){return"tail"===this.pos}_getDisplayStyle(){return"inline-block"}_doInitDom(t,e){Object.assign(e.style,{padding:Ot(Bo.PADDING)}),this._circle=t.createElement("div"),this._circle.className=Bo.CLASS_NAME,Object.assign(this._circle.style,{boxSizing:"border-box",width:"100%",height:"100%"}),e.appendChild(this._circle)}isDom(t){return this.containsDom(t)}}Bo.CLASS_NAME="rtc-selection-mask-handle",Bo.PADDING=10,Bo.SIZE=17;class Fo extends Oi{constructor(t){super(t,!1,Fo.CLASS_NAME),this.vertical=!0}_doInitDom(t,e){const s=this._handles=[];for(let e=0;e<2;e++){const e=new Bo(t);this.addChild(e),this._handles.push(e)}s[0].pos="head",s[1].pos="tail"}_doMeasure(t,e,s){return this.dom.dataset.dir=this.vertical?"v":"h",{width:e,height:s}}_doRender(t,e,s){const i=this._handles;let r=2*Bo.PADDING+Bo.SIZE;i.forEach(t=>{t.vertical=this.vertical,t.resize(r,r)}),this.vertical?(i[0].move((e-r)/2,-r/2-1),i[1].move((e-r)/2,s-r/2-3)):(i[0].move(-r/2,(s-r)/2),i[1].move(e-r/2-3,(s-r)/2))}}Fo.CLASS_NAME="rtc-selection-mask";class zo extends zi{constructor(t){super(t,zo.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){this._setModel(t,this.model=e)}_doInitDom(t,e){super._doInitDom(t,e)}click(t){this.parent.runCommand(t,this.model)}}zo.CLASS_NAME="rtc-command-cell";class Ho extends Oi{constructor(t,e){super(t,!1,Ho.CLASS_NAME),this._cellPool=[],this._cellViews=[],this._model=e}_doDestory(){this._data=null}setCommands(t,e,s){this._data=t,this._row=e,this._commands=s||[]}getCommand(t){for(let e of this._cellViews)if(e.isDom(t))return e.model}runCommand(t,e){e.run(t,this._data,this._row)}_doPrepareRender(t,e){const s=this._cellPool,i=this._cellViews,r=this._commands;for(;i.length<r.length;){let e=s.pop();e||(e=new zo(t),this.addChild(e),i.push(e))}for(;i.length>r.length;){const t=i.pop();this.removeChild(t),s.push(t)}}_doMeasure(t,e,s){const i=this.control,r=i.isVertical(),n=this._model,o=this._cellViews,a=this._commands,h=r?It(n.minCellWidth(),0):0,l=r?0:It(n.minCellHeight(),0);let d=0,_=0;const c=this._sizes=[];return o.forEach((t,e)=>{t.resize(NaN,NaN),t.setModel(i,a[e]);const s=t.getOffsetSize();r?(c.push(s.width=Math.max(h,Math.ceil(s.width))),d+=s.width,_=Math.max(_,Math.max(l||0,s.height))):(c.push(s.height=Math.max(l,Math.ceil(s.height))),_+=s.height,d=Math.max(d,Math.max(h||0,s.width)))}),{width:d,height:_}}_doRender(t,e,s){const i=this.control.isVertical(),r=this._cellViews;let n=0,o=0;r.forEach((t,r)=>{t.move(n,o),i?(t.resize(this._sizes[r],s),n+=t.width):(t.resize(e,this._sizes[r]),o+=t.height)})}}var Wo,Go,Uo,qo;Ho.CLASS_NAME="rtc-command-box",function(t){t.AUTO="auto",t.HORIZONTAL="horizontal",t.VERTICA="vertical"}(Wo||(Wo={})),function(t){t.SHIFT="shift",t.OVERLAP="overlap"}(Go||(Go={}));class jo extends bi{_doInitDefaults(){super._doInitDefaults(),this._minCellWidth=70,this._minCellHeight=24}orientation(){return Tt(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){this._orientation=t}mode(){return Tt(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}minCellWidth(){return Tt(this._minCellWidth,this._defs&&this._defs._minCellWidth)}setMinCellWidth(t){this._minCellWidth=t}minCellHeight(){return Tt(this._minCellHeight,this._defs&&this._defs._minCellHeight)}setMinCellHeight(t){this._minCellHeight=t}_doPrepareRender(){}}class Yo extends zi{constructor(t){super(t,Yo.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}_getPositionStyle(){return""}click(t){this.model.click(t)}}Yo.CLASS_NAME="rtc-row-button rtc-panel-button";class Qo extends Oi{constructor(t,e,s){super(t,!0,s+" rtc-panel"),this._model=e}model(){return this._model}refresh(t,e,s){const i=this.doc;e=It(e,this.width),s=It(s,this.height);const r=this.measure(i,t,e,s);this.resize(r.width,r.height),this.render(i),this.move(0,0),this._manager=null}click(t,e,s){return!1}clickButton(t,e){return t.enabled()&&t.click(e),!0}_doInitDom(t,e){Object.assign(e.style,{pointerEvents:"auto",overflow:"hidden"})}_doPrepareRender(t,e){this._manager=e}measure(t,e,s,i){const r=this._model,n=r.getPosition();let o;switch(r.getPosition()){case vn.CENTER:o="center";break;case vn.BOTTOM:o="top";break;case vn.LEFT:o="right";break;case vn.RIGHT:o="left";break;case vn.TOP:default:o="bottom"}this.dom.dataset.border=o;const a=super.measure(t,e,s,i);return r.isFullWidth()&&(a.width=s),r.isFullHeight()&&(a.height=i),n===vn.LEFT||n===vn.RIGHT||n===vn.CENTER?a.width=r.getSize(s,a.width):a.height=r.getSize(i,a.height),this.mw=a.width+=1,this.mh=a.height+=1,a}_doMeasure(t,e,s){const i=this._padding=this.getPadding(),r=e-i.left-i.right,n=s-i.top-i.bottom;let o=this._doMeasureContent(t,r,n);return o.width+=i.left+i.right,o.height+=i.top+i.bottom,o}_doAfterRender(){this._manager=null}_createButton(t,e){const s=new Yo(t);return s.setModel(this.control,e),s}}Qo.DURATION=500;class Zo extends Qo{constructor(t,e,s){super(t,e,s),this._buttonViews=[],this._hButton=0,this._wButton=0,this._hBody=0}getButton(t){return this._buttonViews.find(e=>e.model===t)}_getDefaultButtonPosition(){return Sn.BOTTOM}getButtonPosition(t){const e=t.buttonPosition();return e===Sn.LEFT||e===Sn.RIGHT||e===Sn.BOTTOM?e:this._getDefaultButtonPosition()}_doInitDom(t,e){e.style.boxSizing=""}_doInitContent(t,e){e.style.display="flex",e.style.flexDirection="column",e.style.height="100%",this.addChild(this._bodyContainer=new ce(t,!1,"rtc-dialog-panel-body")),this._bodyContainer.setStyles({position:"",flex:"1 1 auto",minHeight:"20px",overflow:"hidden scroll"}),this._initBody(t,this._bodyContainer),this.addChild(this._buttonContainer=new ce(t,!1,"rtc-dialog-panel-buttons")),this._buttonContainer.setStyles({position:"",flex:"0 0 auto",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"})}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this.model();this._layoutManager=e,this._prepareBody(t,this._bodyContainer,e,s),this.$_prepareButtons(t,s),this._prepareButtons(this._buttonViews)}_doMeasureContent(t,e,s){const i=this.model(),r=i.getPosition(),n=this.getButtonPosition(i),o=n===Sn.LEFT||n===Sn.RIGHT;let a=r===vn.LEFT||r===vn.RIGHT?i.getSize(e,e):e;o?(this.content.style.flexDirection=n===Sn.LEFT?"row-reverse":"row",this._buttonContainer.dom.style.flexDirection="column"):(this.content.style.flexDirection="column",this._buttonContainer.dom.style.flexDirection="row"),this._buttonViews.forEach(t=>{t.setEnabled(t.model.isEnabled(this.control.wrapperOrThis()))}),this._buttonContainer.dom.style.gap=i.buttonGap()+"px",this._measureButtons(this._buttonViews),this._hButton=o?0:this._buttonContainer.dom.offsetHeight,this._wButton=o?this._buttonContainer.dom.offsetWidth:0,a-=this._wButton;const h=this._measureBody(t,this._layoutManager,this._bodyContainer,i,a,s);this._hBody=h.height;const l=o?Math.max(this._hBody,this._hButton):this._hBody+this._hButton;return{width:this.content.offsetWidth,height:l}}_doRender(t,e,s){this._renderBody(t,this._bodyContainer,e-this._wButton,s-this._hButton)}_doAfterRender(){this._layoutManager=null}clickButton(t,e){super.clickButton(t,e);const s=t.model.type;return s===yn.SUBMIT?this._submit():s===yn.CANCEL||void 0}_initBody(t,e){}_prepareBody(t,e,s,i){}$_prepareButtons(t,e){const s=e.getButtons(),i=this._buttonViews;for(;i.length<s.length;){const e=this._createButton(t,s[i.length]);this._buttonContainer.addChild(e),this._buttonViews.push(e)}for(;i.length>s.length;)this._buttonContainer.removeLast(),this._buttonViews.pop()}_prepareButtons(t){}_measureButtons(t){}_renderBody(t,e,s,i){}_submit(){return!0}}class Xo extends Zo{constructor(t,e){super(t,e,Xo.CLASS_NAME),this._layoutChanged=!1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}_prepareBody(t,e,s,i){const r=i.getLayout();let n=this._layoutView;this.setLayout(r),this._layoutChanged&&n&&(e.removeChild(n),n=null),n?n.refreshModels(r):(e.addChild(n=this._layoutView=s.createLayoutView(t,r)),n.build(t,s)),n.prepareLayout(t,s)}_measureBody(t,e,s,i,r,n){return this._layoutView.measureLayout(t,e,r,Number.MIN_SAFE_INTEGER)}_renderBody(t,e,s,i){this._layoutView.move(0,0),this._layoutView.resize(s,i),this._layoutView.render(t),e.setHeight(i)}}Xo.CLASS_NAME="rtc-form-panel";class Ko extends Qo{static createView(t,e,s){switch(s){case Cn.VERTICAL:return new Jo(t,e);case Cn.DEFAULT:default:return new Ko(t,e)}}constructor(t,e){super(t,e,Ko.CLASS_NAME),this._buttonViews=[]}display(){return Cn.DEFAULT}_doInitContent(t,e){this.addChild(this._buttonContainer=new ce(t,!1,"rtc-button-panel-buttons").setStyles(this._containerStyle()))}_doPrepareRender(t,e){super._doPrepareRender(t,e),this.$_prepareButtons(t,this.model())}_doMeasureContent(t,e,s){if(this._buttonViews.length>0){const t=(this.model().buttonGap()||0)/2+"px";this._layoutButtons(this._buttonViews,t)}this.content.style.width="",this.content.style.height="",this._buttonContainer.clearSize();return{width:this._buttonContainer.dom.offsetWidth+this._buttonViews.length,height:this._buttonContainer.dom.offsetHeight}}_doRender(t,e,s){const i=this.model().position();this._buttonContainer.dom.style.justifyContent=this.model().align(),i===vn.LEFT||i===vn.RIGHT?(this.content.style.height="100%",this._buttonContainer.dom.style.height="100%"):i!==vn.TOP&&i!==vn.BOTTOM||(this.content.style.width="100%",this._buttonContainer.dom.style.width="100%")}$_prepareButtons(t,e){const s=e.getButtons()||[],i=this._buttonViews,r=this._buttonContainer;for(;i.length<s.length;){const e=this._createButton(t,s[i.length]);r.addChild(e),i.push(e)}for(;i.length>s.length;)r.removeLast(),i.pop()}_containerStyle(){return{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"}}_layoutButtons(t,e){for(let s=0,i=t.length;s<i;s++)t[s].dom.style.marginLeft=e,t[s].dom.style.marginRight=e}}Ko.CLASS_NAME="rtc-button-panel";class Jo extends Ko{display(){return Cn.VERTICAL}_containerStyle(){const t=super._containerStyle();return t.flexDirection="column",t}_layoutButtons(t,e){for(let s=0,i=t.length;s<i;s++)t[s].dom.style.marginTop=e,t[s].dom.style.marginBottom=e}}class ta extends Ai{constructor(t){super(t,ta.CLASS_NAME),this.dir=P.DOWN,this._svg.setStyle({position:"absolute",width:"100%",height:"100%"})}_doDestory(){this._svg.detach(),super._doDestory()}active(){return this._svg.svg.firstElementChild&&+new Date-this._started<=ta.DURATION}draw(){const t=this._svg,e=this.bounds;let s,i,r,n,o;switch(this.dir){case"up":i=e.x,r=e.y+e.height,n=e.width,s=t.quadratic(i,r,i+n/2,r,i+n,r),t._animateRevert(s,`M ${i} ${r} Q ${i+n/2} ${r} ${i+n} ${r} z`,`M ${i} ${r} Q ${i+n/2} ${r-ta.SIZE} ${i+n} ${r} z`,ta.DURATION);break;case"down":i=e.x,r=e.y,n=e.width,s=t.quadratic(i,r,i+n/2,e.y,i+n,r),t._animateRevert(s,`M ${i} ${r} Q ${i+n/2} ${r} ${i+n} ${r} z`,`M ${i} ${r} Q ${i+n/2} ${r+ta.SIZE} ${i+n} ${r} z`,ta.DURATION);break;case"left":i=e.x,r=e.y,o=e.height,s=t.quadratic(i,r,i,r+o/2,i,r+o),t._animateRevert(s,`M ${i} ${r} Q ${i} ${r+o/2} ${i} ${r+o} z`,`M ${i} ${r} Q ${i+ta.SIZE} ${r+o/2} ${i} ${r+o} z`,ta.DURATION);break;case"right":i=e.x+e.width,r=e.y,o=e.height,s=t.quadratic(i,r,i,r+o/2,i,r+o),t._animateRevert(s,`M ${i} ${r} Q ${i} ${r+o/2} ${i} ${r+o} z`,`M ${i} ${r} Q ${i-ta.SIZE} ${r+o/2} ${i} ${r+o} z`,ta.DURATION)}this._started=+new Date}}ta.CLASS_NAME="rtc-end-balloon",ta.SIZE=50,ta.DURATION=300;class ea extends ce{clearFeedbacks(){this._endBalloon&&!this._endBalloon.active()&&this.removeEndBalloon()}removeEndBalloon(){this._endBalloon&&(this._endBalloon=this._endBalloon.destroy(),this.setAnimating(!1))}showEndBalloon(t,e){if(this._clearTimer&&(clearTimeout(this._clearTimer),this._clearTimer=void 0),this._endBalloon){if(this._endBalloon.active())return;this.removeEndBalloon()}const s=this._endBalloon=new ta(this.doc);s.bounds=Object.assign({},t),s.dir=e,s.draw(),s.appendTo(this),this.setAnimating(!0),this._clearTimer=setTimeout(()=>this.clearFeedbacks(),1e3)}_doInitDom(t,e){Object.assign(e.style,{pointerEvents:"none"})}}class sa extends cn{constructor(t,e){super(t,e)}insertChild(t,e){if(!e._label){const t=e._label=this.doc.createElement("label");t.className=sa.SPAN_CLASS,t.style.position="absolute",t.style.overflow="hidden",t.style.textOverflow="ellipsis",ce.BOUNDING&&(t.style.border=ce.BOUNDING_BORDER)}super.insertChild(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.forEach((t,s)=>{t.prepareView(e)}),this._labelStyled=!1}_defaultExplicitWidth(t){return t}_doMeasureLayout(t,e,s,i){const r=this._visibles;return this.$_calcLabelSize(r,It(this._explicitWidth,s)),isNaN(this._szLabel)||(s=Math.max(0,s-this._szLabel-this.model().itemGap)),this._measureChildren(r,t,e,s,i,null),this.$_measureContent(t,s,i)}_doLayoutContent(t,e,s){const i=this._model,r=this._visibles,n=this._pts,o=this._heights,a=this._szLabel,h=this._wLabel;let l=h+i.labelGap;r.forEach((t,e)=>{const s=t._label;isNaN(a)&&de.setWidth(s,h),de.move(s,0,n[e]+(o[e]-s.offsetHeight)/2),t.mx=l,t.my=n[e],t.mh=o[e],t.applyMeasuredBounds()})}$_calcLabelSize(t,e){if(e>0){const s=this._model,i=s.syncLabelWidth;let{szLabel:r,szMin:n,szMax:o}=s.getLabelWidth(e);if(this._szLabel=r,isNaN(r)){const a=s.labelStyle;let h=0;t.forEach((t,s)=>{const r=t._label;a&&Object.assign(r.style,a),r.style.whiteSpace="pre",r.textContent=t.model().getChildProp("label");let l=r.offsetWidth+1;i?h=Math.max(h,l):(l=w.clamp(l,n,o),t._explicitWidth=Math.max(0,e-l))}),i&&(this._szLabel=r=h),this._labelStyled=!0}isNaN(r)||(this._szLabel=w.clamp(r,n,o))}}$_measureContent(t,e,s){const i=this._model,r=this._visibles,n=i.labelStyle,o=i.labelGap,a=i.itemGap,h=this._szLabel,l=this._pts=[0],d=this._heights=[];let _=0,c=0,u=0;return r.length>0&&(r.forEach((t,e)=>{const s=t._label;this._labelStyled?isNaN(h)||(de.setWidth(s,h),s.style.whiteSpace="pre-wrap"):(n&&Object.assign(s.style,n),isNaN(h)?s.style.whiteSpace="pre":(de.setWidth(s,h),s.style.whiteSpace="pre-wrap"),s.textContent=t.model().getChildProp("label"));const i=Math.max(s.offsetHeight,t.mh);t._explicitHeight=i,d.push(i),u+=i,isNaN(h)?(_=Math.max(_,s.offsetWidth),c=Math.max(c,_+o+t.dom.offsetWidth)):c=Math.max(c,h+o+t.dom.offsetWidth),u+=a,l.push(u)}),u-=a),this._wLabel=isNaN(h)?_+1:h,{width:c,height:u}}}sa.SPAN_CLASS="rtc-form-label";class ia extends Zo{static createView(t,e,s){switch(s){case xn.LONG:return new ra(t,e);case xn.VERTICAL:return new na(t,e);case xn.DEFAULT:default:return new ia(t,e)}}constructor(t,e){super(t,e,ia.CLASS_NAME)}display(){return xn.DEFAULT}search(){if(this._input.value)return this.model().search(this._input.value,this._options),!0}canShowResult(t){return this._chkAll.checked&&t&&(!t.isEmpty()||this.model().alwaysResult())}_initBody(t,e){this._createElements(t),this._initForm(t,e)}_prepareBody(t,e,s,i){const r=this._options=this._manager.owner().searchOptions();this._spanCase.textContent=i.matchCaseLabel(),this._chkCase.checked=r.matchCase,this._spanWhole.textContent=i.wholeWordLabel(),this._chkWhole.checked=r.matchWholeWord,this._spanExp.textContent=i.regExpLabel(),this._chkExp.checked=r.useRegExp,this._spanNext.textContent=i.searchNextLabel(),this._chkNext.checked=!r.searchAll,this._spanAll.textContent=i.searchAllLabel(),this._chkAll.checked=r.searchAll}_measureBody(t,e,s,i,r,n){let o=i.lineGap();return o!==this._lineGap&&(this._lineGap=o,o=(o||0)/2+"px",this._lines.forEach(t=>{t.style.marginTop=o,t.style.marginBottom=o})),{width:s.dom.scrollWidth,height:s.dom.scrollHeight}}_measureButtons(t){this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());t&&t.setEnabled(this._input.value.length>0)}_createElements(t){this._input=t.createElement("input"),this._input.type="search",this._input.tabIndex=0,this._input.style.width="100%",this._input.oninput=()=>{this.$_checkOk()},this._chkCase=de.createCheckBox(t,null),this._chkCase.onchange=()=>{this._options.matchCase=this._chkCase.checked},this._spanCase=t.createElement("label"),this._chkWhole=de.createCheckBox(t,null),this._chkWhole.onchange=()=>{this._options.matchWholeWord=this._chkWhole.checked},this._spanWhole=t.createElement("label"),this._chkExp=de.createCheckBox(t,null),this._chkExp.onchange=()=>{this._options.useRegExp=this._chkExp.checked},this._spanExp=t.createElement("label"),this._chkNext=de.createRadio(t,null),this._chkNext.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._spanNext=t.createElement("label"),this._chkAll=de.createRadio(t,null),this._chkAll.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._chkAll.style.marginLeft="10px",this._spanAll=t.createElement("label"),this._chkAll.name=this._chkNext.name="dl-search"}_addLine(t,e,s,i){return i||(i=de.createElement(t,"div",{display:"flex"})),i.appendChild(e),e.style.marginRight="4px",s.htmlFor=e.id=de.getDomId(),s.style.whiteSpace="pre",i.appendChild(s),i}_initForm(t,e){const s=this._lines=[this._input];let i;s.push(this._addLine(t,this._chkCase,this._spanCase)),s.push(this._addLine(t,this._chkWhole,this._spanWhole)),s.push(this._addLine(t,this._chkExp,this._spanExp)),i=this._addLine(t,this._chkNext,this._spanNext),s.push(this._addLine(t,this._chkAll,this._spanAll,i)),s.forEach(t=>e.appendDom(t))}_submit(){return this.search()}}ia.CLASS_NAME="rtc-search-panel";class ra extends ia{display(){return xn.LONG}_getDefaultButtonPosition(){return Sn.RIGHT}_measureBody(t,e,s,i,r,n){let o=i.lineGap();return this._input.style.marginBottom=o+"px",this._line.style.marginBottom=o+"px",s.getOffsetSize()}_initForm(t,e){e.appendDom(this._input);let s=this._line=this._addLine(t,this._chkCase,this._spanCase);this._spanCase.style.marginRight="10px",this._addLine(t,this._chkWhole,this._spanWhole,s),this._spanWhole.style.marginRight="10px",this._addLine(t,this._chkExp,this._spanExp,s),e.appendDom(s),s=this._addLine(t,this._chkNext,this._spanNext),this._addLine(t,this._chkAll,this._spanAll,s),e.appendDom(s)}}class na extends ia{display(){return xn.VERTICAL}_measureBody(t,e,s,i,r,n){const o=Ot(i.lineGap()||0);return this._input.style.marginBottom=o,this._lines.forEach(t=>t.style.marginBottom=o),s.getOffsetSize()}_initForm(t,e){const s=this._lines=[this._input];s.push(this._addLine(t,this._chkCase,this._spanCase)),s.push(this._addLine(t,this._chkWhole,this._spanWhole)),s.push(this._addLine(t,this._chkExp,this._spanExp)),s.push(this._addLine(t,this._chkNext,this._spanNext)),s.push(this._addLine(t,this._chkAll,this._spanAll)),s.forEach(t=>e.appendDom(t)),this._chkAll.style.marginLeft=""}}class oa extends mo{constructor(t,e){super(t,e,oa.CLASS_NAME)}canEnter(){return!this._search.disabled}search(){this.canEnter()&&this._model.search(this._input.value)}setResult(t){this._result=t,this._reset.disabled=!t||t.isEmpty(),this._search.disabled=!t&&!this._input.value}isDom(t){return this.dom.contains(t)||super.isDom(t)}clickable(){return!0}click(t,e,s){t===this._search?this.search():t===this._reset?(this._result.clear(),this.control.invalidateLayout()):t===this._menu&&this._model.clickMenu()}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._input=t.createElement("input")),this._input.type="search",this._input.placeholder="검색어를 입력하세요.",this._input.style.flex="1 1 auto",this._input.oninput=()=>{this._search.disabled=!this._result&&this._input.value.length<1},e.appendChild(this._search=Hi.createButton(t,$o["@search"],24,_o.BUTTON_CLASS)),this._search.disabled=!0,this._search.style.flex="0 0 auto",e.appendChild(this._reset=Hi.createButton(t,$o["@refresh"],24,_o.BUTTON_CLASS)),this._reset.disabled=!0,this._reset.style.flex="0 0 auto",e.appendChild(this._menu=Hi.createButton(t,$o["@menu"],24,_o.BUTTON_CLASS)),this._menu.style.flex="0 0 auto"}_doPrepareRender(t,e){const s=this._model;this.$_prepareButtons(t,s)}_doMeasureContent(t,e,s){const i=this._model;return this._reset.style.display=i.resetVisible()?"":"none",this._menu.style.display=i.optionsVisible()?"":"none",{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this._model}$_prepareButtons(t,e){}}oa.CLASS_NAME="rtc-search-bar";class aa extends mo{constructor(t,e){super(t,e,aa.CLASS_NAME),this._closed=!1}setResult(t){this._result=t,this._closed=!1,this.control.invalidateLayout(),this.refreshView()}refreshView(){const t=this._result;if(t){const e=this._buttons,s=t.isEmpty(),i=t.current();e[aa.PREV].disabled=e[aa.FIRST].disabled=s||0==i,e[aa.NEXT].disabled=e[aa.LAST].disabled=s||i===t.count()-1}}isDom(t){return this.dom.contains(t)||super.isDom(t)}setVisible(t){return super.setVisible(t&&!this._closed)}clickable(){return!0}click(t,e,s){if(t===this._close)this._model.clearWhenClose()&&this._result.clear(),this._closed=!0,this.control.invalidateLayout();else for(const e in this._buttons)if(t===this._buttons[e]){switch(this._buttons[e].value){case aa.FIRST:this._result.moveFirst();break;case aa.PREV:this._result.movePrev();break;case aa.NEXT:this._result.moveNext();break;case aa.LAST:this._result.moveLast()}break}}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._title=t.createElement("span")),Object.assign(this._title.style,{flex:"0 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}),this._title.textContent="검색 결과:",e.appendChild(this._counts=t.createElement("span")),Object.assign(this._counts.style,{flex:"0 0 auto",textAlign:"center",minWidth:"50px"}),this._counts.textContent="0 / 0",e.appendChild(this._container=t.createElement("div")),Object.assign(this._container.style,{display:"flex",justifyContent:"center",flex:"1 0 auto"}),this.$_prepareButtons(t,this._container,this._model),e.appendChild(this._close=Hi.createButton(t,$o["@close"],24,_o.BUTTON_CLASS)),this._close.style.flex="0 0 auto"}_doPrepareRender(t,e){}_doMeasureContent(t,e,s){this.model;const i=this._result;return i&&(this._counts.textContent=i.current()+1+" / "+i.count()),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this.model}$_prepareButton(t,e){const s=t.createElement("button"),i=$o[e],r=new Ts(t);return r.setViewSize(i.width),r.path(i.path),r.makeBackground().fillSize(),s.appendChild(r.svg),s.className=_o.BUTTON_CLASS,s}$_prepareButtons(t,e,s){const i=this._buttons={};[aa.FIRST,aa.PREV,aa.NEXT,aa.LAST].forEach(s=>{const r=this.$_prepareButton(t,s);r.value=s,de.resize(r,24,24),e.appendChild(r),i[s]=r})}}aa.CLASS_NAME="rtc-search-result",aa.FIRST="@first",aa.PREV="@prev",aa.NEXT="@next",aa.LAST="@last",function(t){t.NORMAL="norml",t.HEADER="header",t.SEPARATOR="separator",t.SUBMENU="submenu",t.CHECK="check",t.RADIO="radio"}(Uo||(Uo={}));class ha extends e{constructor(t,e){super(),this.type=Uo.NORMAL,this._checked=!1,this._parent=t,Object.assign(this,e)}parent(){return this._parent}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}get checked(){return this._checked}set checked(t){t!==this._checked&&(this._checked=t,t&&this._parent&&da.checkItem(this,this._parent.items))}checkable(){return this.type===Uo.CHECK||this.type===Uo.RADIO}click(t){switch(this.type){case Uo.HEADER:case Uo.SEPARATOR:break;case Uo.CHECK:case Uo.RADIO:default:return this.onClick&&!0===this.onClick(t,this)}}}class la extends e{constructor(t,e){super(),this.expanded=!0,this._parent=t,Object.assign(this,e),Array.isArray(e.items)&&e.items.length>0?this.items=e.items.map(t=>new ha(this,t)):this.items=null}click(t){return this.expanded=!this.expanded,!1}}!function(t){t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.HEADER="header",t.FOOTER="footer",t.CENTER="center"}(qo||(qo={}));class da extends pe{static checkItem(t,e){if(t.type===Uo.RADIO&&e){const s=t.group;for(const i of e)i===t||i.type!==Uo.RADIO||i.group!==s&&(i.group||s)||(i.checked=!1)}}constructor(t,e){super(t),this._checkSize=20,this.separator=!0,this.autoCheck=!0,this.autoHide=!0,this.fillWidth=!1,this.fillHeight=!0,this.origin=qo.RIGHT;const s=e.items;delete e.items;try{const t=this._itemMap={};if(Object.assign(this,e),s){this._items=s.map(t=>Array.isArray(t.items)?new la(this,t):new ha(this,t));for(let e=this._items.length-1;e>=0;e--){const s=this._items[e];if(s instanceof la);else if(s.id&&(t[s.id]=s),s.checked&&s.checkable()){this.checkItem(s);break}}}else this._items=[]}finally{s&&(e.items=s)}}get checkSize(){return this._checkSize}set checkSize(t){t!==this._checkSize&&(this._checkSize=t)}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}get visibleItems(){const t=[];return this._items.forEach(e=>{e instanceof la?(t.push(e),e.expanded&&e.items&&e.items.forEach(e=>t.push(e))):t.push(e)}),t}getItem(t){return this._itemMap[t]}show(t){this.onShow&&this.onShow(t,this),this._items.forEach(e=>{e instanceof la||e.onShow&&e.onShow(t,e)})}close(t){this.onClose&&this.onClose(t,this)}clickItem(t,e){if(e instanceof la)return e.click(t);const s=e.checkable();return this.autoCheck&&s&&(e.checked=!e.checked),e.click(t)||this.onClick&&this.onClick(t,this,e),this.alwaysHide||!s}checkItem(t){da.checkItem(t,this._items)}}const _a={position:"absolute",display:"flex",flexDirection:"column",backgroundColor:"#efefef"},ca={position:"relative",display:"flex",alignItems:"center",pointerEvents:"auto"},ua={flex:"0 0 24px"},ga={display:"flex",alignItems:"center",flex:"1 1 auto",boxSizing:"content-box"},pa={flex:"1 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"};class fa extends ce{constructor(t,e){super(t,!1,e)}model(){return this._model}setModel(t,e){this._model=t,this._spanLabel.textContent=t.label}refresh(){}touched(){this.dom.dataset.touched="1"}clearTouched(){delete this.dom.dataset.touched}isDom(t){return this.containsDom(t)}_doInitDom(t,e){Object.assign(e.style,ca),this._divImage=t.createElement("div"),Object.assign(this._divImage.style,ua),e.appendChild(this._divImage),this._divMenu=t.createElement("div"),this._divMenu.className="rtc-menu-item-label",Object.assign(this._divMenu.style,ga),this._spanLabel=t.createElement("span"),Object.assign(this._spanLabel.style,pa),this._divMenu.appendChild(this._spanLabel),e.appendChild(this._divMenu)}}class wa extends fa{constructor(t){super(t,"rtc-menu-item")}setModel(t,e){super.setModel(t,e),this._divMenu.style.marginLeft=t.parent()instanceof la?wa.INDENT_SIZE:"",t.type===Uo.CHECK||t.type===Uo.RADIO?this._shape&&"check"===this._shape.name()||(this._shape&&this._shape.remove(),this._shape=this.control.shapes().createShape(this.doc,"@check"),this._shape.appendTo(this._divMenu),this._shape.resize(wa.CHECK_SIZE),this.$_resetCheck(this._shape.dom(),t.checked)):this._shape&&this._shape.setVisible(!1)}refresh(){this._shape&&this.$_resetCheck(this._shape.dom(),this._model.checked)}$_resetCheck(t,e){t.style.stroke=e?"#333":"#ccc",t.style.fill=e?"#333":"#ccc"}}wa.CHECK_SIZE=24,wa.INDENT_SIZE="10px";class ma extends fa{constructor(t){super(t,"rtc-menu-item rtc-menu-group")}_doInitDom(t,e){super._doInitDom(t,e),this._expander=t.createElement("div"),this._expander.className="rtc-menu-group-expander",Object.assign(this._expander.style,{width:"16px",height:"16px"}),e.appendChild(this._expander)}setModel(t,e){super.setModel(t,e),this._expander.dataset.expand=t.expanded?"1":"0"}}class ya extends Oi{constructor(t){super(t,!0,"rtc-menu"),this._itemPool=[],this._groupPool=[],this._itemViews=[],this._lineGap=8}get model(){return this._model}show(t,e,s,i){if(!this.visible){const r=this._itemContainer;if(this.setVisible(!0),t.origin===qo.CENTER)this.$_refresh(this.doc,t,e,s,!1),r.center(e,s),this.dom.style.backgroundColor="#00000040",r.dom.style.border="1px solid #777";else if(this.$_refresh(this.doc,t,e,s),r.dom.style.border="",i){const s=r.dom;let i;switch(t.origin){case qo.LEFT:i=[{left:-r.width+"px"},{left:"0px"}];break;default:i=[{left:e+"px"},{left:e-r.width+"px"}]}if(i){s.animate(i,{delay:100,duration:150,fill:"both"}).addEventListener("finish",()=>{}),this.dom.animate([{backgroundColor:"#00000000"},{backgroundColor:"#00000040"}],{duration:500,fill:"both"})}}else switch(t.origin){case qo.LEFT:this.moveX(0);break;default:this.moveX(e-this._itemContainer.width)}}}hide(t){if(this.visible){if(t&&this._model.origin!==qo.CENTER){const t=this._itemContainer,e=t.dom;let s;switch(this._model.origin){case qo.LEFT:s=[{left:"0px"},{left:-t.width+"px"}];break;default:const i=e.offsetLeft;s=[{left:i+"px"},{left:i+t.width+"px"}]}e.animate(s,{duration:150,fill:"none"}).addEventListener("finish",()=>{this.setVisible(!1);const t=this.control.wrapperOrThis();this.remove(),this._model.close(t),this._model=null}),this.dom.animate([{backgroundColor:"#00000040"},{backgroundColor:"#00000000"}],{duration:500,fill:"both"})}else this.setVisible(!1),this.remove(),this._model=null;return!0}}$_refresh(t,e,s,i,r=!0){const n=this.measure(t,this._model=e,s,i),o=.7*s>>0;this.resize(s,i),this._itemContainer.resize(o,r?i:n.height),this.render(t)}$_resetRadios(){this._itemViews.forEach(t=>{t instanceof wa&&t.model().type===Uo.RADIO&&t.refresh()})}isMenuView(t){return this.containsDom(t)}setTouched(t){this._touched=t,t.touched()}clearTouched(){this._touched&&this._touched.clearTouched()}clickItem(t,e){const s=this._model;if(s.clickItem(t,e.model()))return!0;e.model().type===Uo.RADIO?this.$_resetRadios():e.refresh(),e instanceof ma&&this.$_refresh(this.doc,s,this.width,this.height)}_doInitDom(t,e){e.style.pointerEvents="all"}_doInitContent(t,e){this._itemContainer=new ce(t).setStyles(_a),this.addChild(this._itemContainer)}_doPrepareRender(t,e){const s=e.visibleItems,i=this._itemPool,r=this._groupPool,n=this._itemViews=[],o=this._itemContainer;n.forEach(t=>{t instanceof ma?r.push(t):i.push(t)}),o.clear(),s.forEach(e=>{let s;s=e instanceof la?r.pop()||new ma(t):i.pop()||new wa(t),n.push(s),o.addChild(s)}),this._model=e}_doMeasure(t,e,s){const i=this._model,r=this._itemViews;this._itemContainer.getPadding(),i.visibleItems.forEach((t,e,s)=>{r[e].setModel(t,i.separator&&e<s.length-1)});return this._itemContainer.getOffsetSize()}_doRender(t,e,s){}}class va extends ce{isDirty(){return this._item.filter.enabled!=this._check.checked}setItem(t,e,s){const i=va.CLASS_NAME+"-"+e;this._item=t,this._check.id=i,this._check.checked=t.filter.enabled,this._label.htmlFor=i,this._label.textContent=t.label}_doInitDom(t,e){e.className=va.CLASS_NAME,de.setStyle(e,{position:"relative",display:"flex",flexDirection:"row",padding:"4px 4px"}),e.appendChild(this._check=de.createCheckBox(t,{marginRight:"8px",flex:"0 0 auto"})),e.appendChild(this._label=de.createElement(t,"label",{flex:"1 1 auto",whiteSpace:"pre"}))}}va.CLASS_NAME="rtc-filter-panel-item";class ba extends Zo{constructor(t,e){super(t,e,ba.CLASS_NAME),this._itemViews=[]}_prepareBody(t,e,s,i){this._dv=s.data(),i.prepare(this._dv)}_prepareButtons(t){}_measureBody(t,e,s,i,r,n){return this.$_buildFilters(t,s,i),s.getOffsetSize()}_measureButtons(t){this.$_checkOk()}_doAfterRender(){this.model().unprepare(),super._doAfterRender()}click(t,e,s){for(let e of this._itemViews)if(e.isView(t)){if(this.model().autoApply())return this._dv.toggleFilter(e._item.filter,!0),!0;setTimeout(()=>{this.$_checkOk()},0)}return!1}_submit(){const t=this._itemViews.filter(t=>t.isDirty()).map(t=>t._item.filter);return this._dv.toggleFilters(t,!0),!0}$_buildFilters(t,e,s){const i=s.getItems(),r=this._itemViews;for(;r.length<i.length;){const s=new va(t);e.addChild(s),r.push(s)}for(;r.length>i.length;)r.pop().remove();r.forEach((t,e)=>t.setItem(i[e],e,!1)),this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());if(t){for(let e of this._itemViews)if(e.isDirty())return void t.setEnabled(!0);t.setEnabled(!1)}}}ba.CLASS_NAME="rtc-filter-panel";const Sa="①".charCodeAt(0);class Ca extends ce{setField(t,e){this._field=t,this._span.textContent=t.displayText(),e?(this._mark.style.display="",this._mark.textContent=e.dir===Dt.ASCENDING?"↓":"↑",this._order.style.display="",this._order.textContent=String.fromCharCode(Sa+e.order)):(this._mark.style.display="none",this._order.style.display="none")}_doInitDom(t,e){e.className=Ca.CLASS_NAME,e.style.display="inline-flex",e.style.alignItems="center",e.appendChild(this._span=de.createSpan(t,{whiteSpace:"pre"})),e.appendChild(this._mark=de.createSpan(t,{fontFamily:"Helvetica",fontWeight:"bold",color:"#111",marginLeft:"2px"})),e.appendChild(this._order=de.createSpan(t,{color:"#111",fontWeight:"bold",marginLeft:"2px"}))}_getPositionStyle(){return""}}Ca.CLASS_NAME="rtc-field-bar-item";class xa extends mo{constructor(t,e){super(t,e,xa.CLASS_NAME),this._itemViews=[]}_doInitContent(t,e){Object.assign(e.style,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"})}_doMeasureContent(t,e,s){return this.content.style.width=e+"px",this.$_buildItems(t,this._model),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,s){this.content.style.width="100%"}clickable(){return!0}isDom(t){for(let e of this._itemViews)if(e.isView(t))return!0}click(t,e,s){for(let e of this._itemViews)if(e.isView(t)){this._model.sortField(e._field);break}}$_buildItems(t,e){const s=e.getFields(),i=this._itemViews;for(;i.length<s.length;){const e=new Ca(t);this.addChild(e),i.push(e)}for(;i.length>s.length;)this.removeChild(i.pop());i.forEach((t,i)=>{const r=e.getSort(s[i]);t.setField(s[i],r)})}}xa.CLASS_NAME="rtc-field-bar";class Ra extends yo{constructor(t,e){super(t,e,Ra.CLASS_NAME)}click(t,e,s){const i=this._layoutView instanceof cn&&this._layoutView.simpleByDom(t,!0),r=i&&i.model().renderer;r instanceof Os&&this.model().sortField(r.field||i.model().field())}}Ra.CLASS_NAME="rtc-field-header";class Ea extends Oi{constructor(t,e){super(t,!1),e||I(b.layoutMustSet),this._model=e}build(t,e){const s=this._view=this._model.clone();this.appendDom(s)}refreshModels(t){}prepareLayout(t,e){const s=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(s),this._doApplyImportantStyles(s),this._prevMax={width:NaN,height:NaN},this.mw=this.mh=NaN;const i=this._padding=this.getPadding2();i.horz=i.left+i.right+i.borderLeft+i.borderRight,i.vert=i.top+i.bottom+i.borderTop+i.borderBottom}measureLayout(t,e,s,i){const r=this._padding;s-=r.horz,i-=r.vert;const n=this._doMeasure(t,s,i);return this.mw=n.width+=r.horz,this.mh=n.height+=r.vert,n}_doInitContent(t,e){ce.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=ce.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e}_doApplyStyles(t){}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute"),this.setImportantStyle(this._view.style,"position","absolute")}_doMeasure(t,e,s){this._manager;const i=!isNaN(this._explicitWidth),r=!isNaN(this._explicitHeight);i&&(e=this._explicitWidth),r&&this._explicitHeight,this._view.style.width=e+"px",this._model.apply(this._view);return{width:e,height:this._view.offsetHeight}}_doRender(t,e,s){de.resize(this.dom,e,s)}_doAfterRender(){super._doAfterRender(),this._manager=null}_doMeasureContent(t,e,s){}_doLayoutContent(t,e,s){}}var Va;!function(t){t.TOP="top",t.BOTTOM="bottom",t.CENTER="center"}(Va||(Va={}));class $a extends r{constructor(t){super(),this.duration=3e3,this.position=Va.BOTTOM,this.margin=50,t&&(this.message=t.message,this.html=t.html,t.duration>0&&(this.duration=t.duration),t.position&&(this.position=t.position),isNaN(t.margin)||(this.margin=t.margin),this.style=t.style)}}class Aa extends ce{constructor(t){super(t,!1,"rtc-toast")}show(t,e){const s=this.dom,i=t.width,r=t.height;this.$_hide(),"string"==typeof e.style?this.setClassName(e.style):e.style&&this.setStyles(e.style),t.addChild(this),this.setVisible(!0),e.html?s.innerHTML=e.html:s.textContent=e.message;const n=s.offsetHeight,o=e.margin;let a;switch(e.position){case Va.TOP:a=o;break;case Va.CENTER:a=(r-n)/2+o;break;default:a=r-n-o}a=Math.max(0,Math.min(r-n,a)),this.move((i-s.offsetWidth)/2,a),this.$_show(e)}$_hide(){this.setVisible(!1),this.remove()}$_show(t){this.dom.animate([{opacity:"0"},{opacity:"1"}],{duration:Aa.EFFECT_DURATION,fill:"forwards"});this.dom.animate([{opacity:"1"},{opacity:"0"}],{delay:t.duration,duration:2*Aa.EFFECT_DURATION,fill:"forwards"}).addEventListener("finish",()=>{this.$_hide()})}}Aa.EFFECT_DURATION=500;class Da extends bi{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setLength(Da.LENGTH),this._floating=!1,this._minWidth=Da.MIN_WIDTH,this._spaceCharacter="•",this._caseSensitive=!1,this._autoScroll=!0,this._groups=this._defGroups=this.$_buildGroups("가-하,A-Z")}onLetterClick(){return Tt(this._onLetterClick,this._defs&&this._defs._onLetterClick)}setOnLetterClick(t){this._onLetterClick=t}length(){return Tt(this._length,this._defs&&this._defs._length)}setLength(t){var e;e=t,!isNaN(e)||"string"==typeof e&&e.trimRight().endsWith("*")&&!isNaN(parseFloat(e))||(t=Da.LENGTH),t!==this._length&&(this._length=t,this._changed())}floating(){return Tt(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}width(){return Tt(this._width,this._defs&&this._defs._width)}setWidth(t){(t=It(t,NaN))!==this._width&&(this._width=t,this._changed())}minWidth(){return Tt(this._minWidth,this._defs&&this._defs._minWidth)}setMinWidth(t){(t=It(t,NaN))!==this._minWidth&&(this._minWidth=t,this._changed())}maxWidth(){return Tt(this._maxWidth,this._defs&&this._defs._maxWidth)}setMaxWidth(t){(t=It(t,NaN))!==this._maxWidth&&(this._maxWidth=t,this._changed())}spaceCharacter(){return Tt(this._spaceCharacter,this._defs&&this._defs._spaceCharacter)}setSpaceCharacter(t){t!==this._spaceCharacter&&(this._spaceCharacter=t,this._changed())}caseSensitive(){return Tt(this._caseSensitive,this._defs&&this._defs._caseSensitive)}setCaseSensitive(t){this._caseSensitive=t}letters(){return Tt(this._letters,this._defs&&this._defs._letters)}setLetters(t){(t=t?t.trim():t)!==this._letters&&(this._letters=t,this._groups=this.$_buildGroups(t),this._changed())}indexField(){return Tt(this._indexField,this._defs&&this._defs._indexField)}setIndexField(t){this._indexField=t}autoScroll(){return Tt(this._autoScroll,this._defs&&this._defs._autoScroll)}setAutoScroll(t){this._autoScroll=t}getLength(t){return D(this._len,t)}getLetters(t){function e(t,e){if(1===e)i.push(t[0]);else{const s=t.length/e;let r=0,n=1;for(i.push(t[0]);n<t.length;)n-r>=s&&i.push(t[n>>0]),r=n,n+=s}}let s=this._groups;s||(s=this._defs?this._defs._groups||this._defs._defGroups:this._defGroups);let i=[];for(let e=0,r=Math.min(t,s.length);e<r;e++)i.push(s[e][0]);let r=t-i.length;if(r>0){const n=s.slice(0).sort((t,e)=>e.length-t.length),o=n.length,a=r,h=[];let l=0;i=[];for(let t of n)l+=t.length-1;if(l<=t)for(let t of n)for(let e of t)i.push(e);else{r=t;for(let t=0;t<o&&r>0;t++){const e=Math.floor(n[t].length*a/l);h.push(e),r-=e}if(r>0)for(let t=0;t<o&&r>0;t++){const e=n[t].length*a/l;Math.round(e)>e&&(h[t]++,r--)}if(r>0)for(let t=0;t<o&&r>0;t++)h[t]++,r--;for(let t=0;t<o;t++){const i=s[t];e(i,h[n.indexOf(i)])}}}return i}clickLetter(t){const e=this.onLetterClick();if(e)return e(t)}_doPrepareRender(){this._len=$(this.length(),!1)}$_extractChars(t){const e=t.trim().split(""),s=[];if(e.length>0){for(let t=0;t<e.length;t++){const s=e[t];for(let i=0;i<Bt.length-1;i++)s>=Bt[i]&&s<Bt[i+1]&&(e[t]=Bt[i])}if(e.length>2&&"-"===e[1]){let t=e[0];const i=e[2];do{s.push(t),t=t>=Bt[0]&&t<=Bt[Bt.length-1]?Bt[Bt.indexOf(t)+1]:String.fromCharCode(t.charCodeAt(0)+1)}while(t<=i)}else for(let t=0;t<e.length;t++)s.push(e[t])}return s.length>0?s:null}$_buildGroups(t){const e=t.split(",").map(t=>this.$_extractChars(t)).filter(t=>!!t);return e.length>0?e:null}}var ka,La;Da.LENGTH="85%",Da.MIN_WIDTH=20,Da.LETTER_GAP=2,function(t){t.FIRST="first",t.PREV="prev",t.NEXT="next",t.LAST="last"}(ka||(ka={}));class Ta extends s{constructor(t,e,s,i){super(),this._disabled=!1,this._owner=t,this._action=e,this._label=s,this._defs=i}owner(){return this._owner}action(){return this._action}label(){return this._label}className(){return Tt(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}disabledClass(){return Tt(this._disabledClass,this._defs&&this._defs._disabledClass)}setDisabledClass(t){t!==this._disabledClass&&(this._disabledClass=t,this._changed())}hint(){return Tt(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}disabled(){return this._disabled}$_setDisabled(t){t!==this._disabled&&(this._disabled=t,this._changed())}run(){const t=this._owner.owner().pageModel();switch(this._action){case ka.FIRST:t.setPage(0);break;case ka.PREV:t.incPage(-1);break;case ka.NEXT:t.incPage(1);break;case ka.LAST:t.setPage(t.pageCount()-1)}}_changed(){var t;null===(t=this._owner)||void 0===t||t._itemChanged(this)}}class Ma extends s{constructor(t,e){super(),this._owner=t,this._defs=e}className(){return Tt(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}_changed(){var t;null===(t=this._owner)||void 0===t||t._itemChanged(this)}}class Pa extends xi{constructor(t,e,s){super(t,s),this._owner=e,this._first=new Ta(this,ka.FIRST,"<<",s&&s._first),this._prev=new Ta(this,ka.PREV,"<",s&&s._prev),this._next=new Ta(this,ka.NEXT,">",s&&s._next),this._last=new Ta(this,ka.LAST,">>",s&&s._last),this._page=new Ma(this,s&&s._page),this._total=new Ma(this,s&&s._total)}_doInitDefaults(){super._doInitDefaults(),this._width=60,this._height=60,this._itemGap=10,this._buttonSize=36}owner(){return this._owner}first(){return this._first}prev(){return this._prev}next(){return this._next}last(){return this._last}width(){return Tt(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return Tt(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._changed())}itemGap(){return Tt(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){t!==this._itemGap&&(this._itemGap=t,this._changed())}itemGap2(){return Tt(this._itemGap2,this._defs&&this._defs._itemGap2)}setItemGap2(t){t!==this._itemGap2&&(this._itemGap2=t,this._changed())}buttonSize(){return Tt(this._buttonSize,this._defs&&this._defs._buttonSize)}setButtonSize(t){(t=Pt(t))!==this._buttonSize&&(this._buttonSize=t,this._changed())}_doPrepareRender(){const t=this._owner.pageModel(),e=t.page(),s=t.pageCount();this._first.$_setDisabled(0===e),this._prev.$_setDisabled(this._first.disabled()),this._last.$_setDisabled(e>=s-1),this._next.$_setDisabled(this._last.disabled())}_itemChanged(t){this._changed()}}class Ia extends s{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,!e&&this._doInitDefaults()}_doInitDefaults(){}className(){return Tt(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}hint(){return Tt(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t)}_changed(){var t;null===(t=this._owner)||void 0===t||t._indexChanged(this)}}class Na extends Ia{_doInitDefaults(){super._doInitDefaults(),this._visible=!0}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}}!function(t){t.NEAR="near",t.FAR="far"}(La||(La={}));class Oa extends bi{constructor(t,e){super(t,e),this._first=new Na(this,e&&e._first),this._last=new Na(this,e&&e._last),this._index=new Ia(this,e&&e._index),this._current=new Ia(this,e&&e._current)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=La.FAR,this._itemGap=7,this._autoScroll=!0,this._width=50,this._height=50}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed("position"))}itemGap(){return Tt(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){(t=w.toNumber(t,0))!==this._itemGap&&(this._itemGap=t,this._changed("itemGap"))}autoScroll(){return this._autoScroll}setAutoScroll(t){this._autoScroll=t}first(){return this._first}last(){return this._last}index(){return this._index}current(){return this._current}width(){return Tt(this._width,this._defs&&this._defs._width)}setWidth(t){(t=Pt(t))!==this._width&&(this._width=t,this._changed())}height(){return Tt(this._height,this._defs&&this._defs._height)}setHeight(t){(t=Pt(t))!==this._height&&(this._height=t,this._changed())}_doPrepareRender(){}_indexChanged(t){this._changed()}}class Ba extends bi{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._floating=!0,this._barWidth=Ba.BAR_WIDTH,this._thumbWidth=Ba.THUMB_WIDTH,this._minThumbLength=Ba.MIN_THUMB_LENGTH}floating(){return Tt(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}barWidth(){return Tt(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){t=It(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._barWidth&&(this._barWidth=t,this._changed())}thumbWidth(){return Tt(this._thumbWidth,this._defs&&this._defs._thumbWidth)}setThumbWidth(t){t=It(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._thumbWidth&&(this._thumbWidth=t,this._changed())}minThumbLength(){return Tt(this._minThumbLength,this._defs&&this._defs._minThumbLength)}setMinThumbLength(t){t=It(t,void 0),isNaN(t)||(t=Math.max(0,t)),t!==this._minThumbLength&&(this._minThumbLength=t,this._changed())}_doPrepareRender(){}}Ba.BAR_WIDTH=6,Ba.THUMB_WIDTH=4,Ba.PIXELS_PER_ROW=1,Ba.MIN_THUMB_LENGTH=30;class Fa extends bi{_doInitDefaults(){super._doInitDefaults(),this._showHandle=!0}showHandle(){return Tt(this._showHandle,this._defs&&this._defs._showHandle)}setShowHandle(t){t!==this._showHandle&&(this._showHandle=t,this._changed())}_doPrepareRender(){}}class za extends e{constructor(t,e,s){super(),this._group=t instanceof Ce?t:null,this._data=t instanceof Ce?t.data():t,this._start=Math.min(e,s),this._end=Math.max(e,s)}_doDestory(){this._group=null}get start(){return this._start}get end(){return this._end}resize(t,e){return t>=0&&(t=Math.min(t,this.$_getMax()))!==this._end?(this._end=t,!0):e>=0&&(e=Math.min(e,this.$_getMax()))!==this._start?(this._start=e,!0):(this._start=Math.min(this._start,this._end),this._end=Math.max(this._start,this._end),!1)}contains(t){return t>=this.start&&t<=this.end}isRowSelected(t){if(this._group){const e=this._group.itemOfRow(t,!1);return e&&this.contains(e.index)}return this.contains(t)}getSelectedRows(){if(this._group){const t=[];for(let e=this.start,s=this.end;e<=s;e++){const s=this._group.getItem(e);s instanceof ye&&t.push(s.row())}return t}return w.makeIntArray(this.start,this.end+1)}getSelectedItems(){return w.makeIntArray(this.start,this.end+1)}$_getMax(){return this._group?this._group.itemCount()-1:this._data.rowCount()-1}}class Ha{constructor(){this.template=void 0,this.indent=void 0,this.rowBar=void 0,this.editBar=void 0,this.style=void 0}assign(t){return w.assignProps(this,t)}copy(){return Object.assign({},this)}}class Wa extends s{constructor(t,e){super(),this._infos={},this._owner=t,this._defs=e||void 0}master(){const t=this._master||this._defs&&this._defs._master;return t&&t.copy()}setMaster(t){t!==this._master&&(t?(this._master||(this._master=new Ha),this._master.assign(t)):this._master=void 0,this._owner.invalidateLayout())}prepareRender(){this.dv=this._owner.data()}getInfo(t){const e=this._infos[t];return e&&e.copy()}setInfo(t,e,s=!0){const i=this._infos[t]||new Ha,r=i.assign(e);return this._infos[t]=i,r}setInfos(t){for(const e in t)this.setInfo(e,t[e],!1)}getRowTemplate(t){const e=this._infos[t];return Tt(e&&e.template,this._defs&&this._defs.getRowTemplate(t))}getIndent(t){const e=this._infos[t];return Tt(e&&e.indent,this._defs&&this._defs.getIndent(t))}getRowBar(t){const e=this._infos[t];return Tt(e&&e.rowBar,this._defs&&this._defs.getRowBar(t))}getEditBar(t){const e=this._infos[t];return Tt(e&&e.editBar,this._defs&&this._defs.getEditBar(t))}getStyle(t){const e=this._infos[t];return Tt(e&&e.style,this._defs&&this._defs.getStyle(t))}}class Ga extends po{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!0)}caption(){return Tt(this._model&&this._model.caption,super.caption())}style(){return Tt(this._model&&this._model.style,super.style())}showCheck(){return Tt(this._model&&this._model.showCheck,super.showCheck())}autoCheck(){return Tt(this._model&&this._model.autoCheck,super.autoCheck())}setModel(t){this._model=t||void 0}}const Ua=function(t){const e={template:{layout:"vlinear",itemsAlign:"left",children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e},qa=function(t){const e={template:{layout:"form",maxLabelWidth:"40%",labelStyle:{fontWeight:"bold",textAlign:"right"},children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e};class ja extends ae{constructor(t,e){super(t,e),this._allFields=!0,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0},this._header=this._createHeader(t,e)}_doInitDefaults(){this._effectDuration=.2,this._showDirection=ie.UP,this._hideDirection=ie.DEFAULT}inflateParam(t,e,s){const i=this.templateParams2();if(i){const t=i[s.name];if("function"==typeof t){const s=this._args;return s.control=this.owner().wrapperOrThis(),s.row=this._row,s.field=e,s.values=this._rowValues,t(s)}if(void 0!==t)return t}}inflateStock(t,e,s){}data(){return this.owner().data()}header(){return this._header}fitSize(){return Tt(this._fitSize,this._defs&&this._defs._fitSize)}setFitSize(t){this._fitSize=t}style(){return Tt(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}effectDuration(){return Tt(this._effectDuration,this._defs&&this._defs._effectDuration)}setEffectDuration(t){this._effectDuration=t}template(){return Mt(this._model&&this._model.template,this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}showDirection(){return Tt(this._showDirection,this._defs&&this._defs._showDirection)}setShowDirection(t){this._showDirection=t}hideDirection(){return Tt(this._hideDirection,this._defs&&this._defs._hideDirection)}setHideDirection(t){this._hideDirection=t}allFields(){return Mt(this._model&&this._model.allFields,this._allFields,this._defs&&this._defs._allFields)}setAllFields(t){this._allFields=t}fields(){return Mt(this._model&&this._model.fields,this._fields,this._defs&&this._defs._fields)}setFields(t){this._fields=Object.assign({},t)}templateVars(){return Mt(this._model&&this._model.templateVars,this._templateVars,this._defs&&this._defs._templateVars)}setTemplateVars(t){this._templateVars=t}templateParams2(){return Mt(this._model&&this._model.templateParams,this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}setModel(t){this._model=t||void 0,this._header.setModel(t&&t.header)}getLayout(t,e){const s=this.owner().getTemplate(this.template())||this._getDefaultTemplate(t,this.templateVars(),e);return this._rowInflater=this.owner().getRowInflater(e),this._row=e,this._rowValues=this._getRowValues(),{layout:pi.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,s,this),rowStyle:s.rowStyle,rowProps:s.rowProps}}getShowDirection(){let t=this.showDirection();return t===ie.RANDOM&&(t=this.$_getRandomDir()),t}getHideDirection(t){let e=this.hideDirection();if(e===ie.RANDOM)e=this.$_getRandomDir();else if(e===ie.DEFAULT)switch(t){case ie.LEFT:e=ie.RIGHT;break;case ie.RIGHT:e=ie.LEFT;break;case ie.DOWN:e=ie.UP;break;default:e=ie.DOWN}return e}$_getRandomDir(){for(;;){const t=w.erandom(ie);if(t!==ie.RANDOM&&t!==ie.DOWN)return t}}_getLabelRenderer(t){return"text"}_getDefRenderer(t){return"text"}_prepareFields(t){const e={},s=this.fields()||{},i=[],r=this.allFields();return t.fields().forEach(t=>{const n=s[t.name]||e;(r||n!==e)&&i.push({field:t.name,label:Tt(n.label,t.displayText()),unit:n.unit,default:n.default,required:n.required,renderer:Tt(n.renderer,this._getDefRenderer(t)),style:n.style,labelRenderer:this._getLabelRenderer(t),validator:n.validator})}),i}_isImageRenderer(t){if(t){return"image"===("string"==typeof t?t:t.type)}}_extendStyle(t,e,s){const i=e.style;if(t&&s){if("string"==typeof i&&s&&s[i.substring(2)]){const e=s[i.substring(2)];e&&Object.assign(t,e)}else w.isObject(i)&&Object.assign(t,i);return t}return i}}class Ya extends Ga{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",label:"〈",position:Jn.HEAD,style:{fontSize:"20px",fontWeight:"bold"},onClick:t=>{t.control.closeEditPage()}},{name:"cancel",label:"취소",onClick:t=>{t.control.closeEditPage(!1)}},{name:"commit",label:"완료",onClick:t=>{t.control.closeEditPage(!0)}}])}}var Qa;!function(t){t.DEFAULT="default",t.FORM="form",t.A="A"}(Qa||(Qa={}));const Za={left:20,right:10,height:20,renderer:"line"},Xa=function(t){const e={layout:"hlinear",width:"100%",itemsArrange:"end",style:{paddingRight:"10px",paddingTop:"10px"},children:[{renderer:{type:"button",label:"취소",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!1)},style:{}}},{renderer:{type:"button",label:"완료",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!0)},style:{}}}]};return t&&t(e),e};class Ka extends ja{_getDefRendderer(t){switch(t.type){case Gi.NUMBER:return"number";case Gi.DATE:return"datetime";case Gi.BOOL:return"switch";default:return"input"}}constructor(t,e){super(t,e),this._defaultTemplate=(t,e,s)=>{const i=Ua(),r=i.template.children;return t.fields().forEach(t=>{const e=[{value:t.displayText()}];t.required&&e.push({value:"*",style:{color:"#a00",fontSize:"20px"}}),r.push({layout:"hlinear",children:e}),r.push({id:t.name,left:20,right:10,field:t.name,renderer:this._getDefRendderer(t)}),r.push({space:10})}),r.push(Za,Xa()),i.vars=e,new Ie(null,i)},this._formTemplate=(t,e,s)=>{const i=qa(),r=i.template.children;return t.fields().forEach(t=>{r.push({id:t.name,label:t.displayText(),field:t.name,renderer:this._getDefRendderer(t)})}),r.push(Za,Xa(t=>t.style.paddingRight="0px")),i.vars=e,new Ie(null,i)},this._ATemplate=(t,e,s)=>{},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate}}_doInitDefaults(){super._doInitDefaults(),this._viewType=Qa.DEFAULT}viewType(){return Tt(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}valueChanged(t,e,s,i){const r=this.owner().onEditFieldChange;r&&r({ctx:t,row:this._row,field:e,newValue:s,oldValue:i})}commit(t,e){const s=this.owner().onEditCommit;if(s){const i={ctx:t,row:this._row,values:e,cancel:!1,message:void 0};if(s(i),i.cancel){if(i.message)throw i.message;return!1}}return this._row>=0?this.data().updateRow(this._row,e,!1):this.data().appendRow(e),!0}_getRowValues(){return{}}_createHeader(t,e){return new Ya(t,e&&e.header())}_getDefaultTemplate(t,e,s){return(this._templates[this.viewType()]||this._defaultTemplate)(t,e,s)}}var Ja,th,eh;!function(t){t.SLIDE="slide",t.FLIP="flip"}(Ja||(Ja={}));class sh extends Rn{_doInitDefaults(){super._doInitDefaults(),this.setDuration(1e4),this.setChangeDuration(500),this._changeEffect=Ja.SLIDE}changeEffect(){return Tt(this._changeEffect,this._defs&&this._defs._changeEffect)}setChangeEffect(t){this._changeEffect=t}}class ih extends ae{constructor(t,e){super(t,e),this._autoScroll=new sh(t,e&&e._autoScroll)}_doInitDefaults(){this._visible=!1,this._noShrink=!0,this._maskEffect=!0,this._showPrev=!1,this._showNext=!1,this._rowChangeDir=Jt.DEFAULT,this._rowBorderVisible=!1}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}noShrink(){return Tt(this._noShrink,this._defs&&this._defs._noShrink)}setNoShrink(t){this._noShrink=t}maskEffect(){return Tt(this._maskEffect,this._defs&&this._defs._maskEffect)}setMaskEffect(t){this._maskEffect=t}showPrev(){return Tt(this._showPrev,this._defs&&this._defs._showPrev)}setShowPrev(t){t!==this._showPrev&&(this._showPrev=t,this._changed())}showNext(){return Tt(this._showNext,this._defs&&this._defs._showNext)}setShowNext(t){t!==this._showNext&&(this._showNext=t,this._changed())}rowChangeDir(){return Tt(this._rowChangeDir,this._defs&&this._defs._rowChangeDir)}setRowChangeDir(t){(t=t||Jt.DEFAULT)!==this._rowChangeDir&&(this._rowChangeDir=t,this._changed())}rowNavigator(){return Tt(this._rowNavigator,this._defs&&this._defs._rowNavigator)}setRowNavigator(t){t!==this._rowNavigator&&(this._rowNavigator=t,this._changed())}rowBorderVisible(){return Tt(this._rowBorderVisible,this._defs&&this._defs._rowBorderVisible)}setRowBorderVisible(t){t!==this._rowBorderVisible&&(this._rowBorderVisible=t,this._changed())}autoScroll(){return this._autoScroll}}class rh extends _o{constructor(){super(...arguments),this._menu={items:[{id:"case",type:Uo.CHECK,label:"대소문자 구분",onShow:(t,e)=>{e.checked=this._options.matchCase},onClick:(t,e)=>(this._options.matchCase=e.checked,!0)},{id:"whole",type:Uo.CHECK,label:"전체 단어 일치",onShow:(t,e)=>{e.checked=this._options.matchWholeWord},onClick:(t,e)=>(this._options.matchWholeWord=e.checked,!0)},{id:"regExp",type:Uo.CHECK,label:"정규식 사용",onShow:(t,e)=>{e.checked=this._options.useRegExp},onClick:(t,e)=>(this._options.useRegExp=e.checked,!0)}],onShow:(t,e)=>{}},this._options={matchCase:!1,matchWholeWord:!1,useRegExp:!1}}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=se.AFTER,this._resetVisible=!0,this._optionsVisible=!0}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}resetVisible(){return Tt(this._resetVisible,this._defs&&this._defs._resetVisible)}setResetVisible(t){this._resetVisible=t}optionsVisible(){return Tt(this._optionsVisible,this._defs&&this._defs._optionsVisible)}setOptionsVisible(t){this._optionsVisible=t}alwaysResult(){return this._alwaysResult}setAlwaysResult(t){this._alwaysResult=t}search(t){this.owner().search(this._options,t)}clickMenu(){this.owner().toggleMenu(this._menu,!0)}canShowResult(t){return this.visible()&&t&&(!t.isEmpty()||this.alwaysResult())}_doPrepareRender(){}}rh.TYPE="search",function(t){t.BEFORE="before",t.AFTER="after",t.REPLACE="replate"}(th||(th={}));class nh extends _o{_doInitDefaults(){super._doInitDefaults(),this._position=th.BEFORE,this._clearWhenClose=!0}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}clearWhenClose(){return Tt(this._clearWhenClose,this._defs&&this._defs._clearWhenClose)}setClearWhenClose(t){this._clearWhenClose=t}_doPrepareRender(){}}nh.TYPE="searchresult";class oh extends _o{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1)}fields(){const t=Tt(this._fields,this._defs&&this._defs._fields);return Array.isArray(t)?t.slice(0):t||null}setFields(t){t!==this._fields&&(this._fields=Array.isArray(t)?t.slice(0):t||null,this._changed())}_setRowTemplate(t){this._rowTemplate=t}getFields(){const t=this.data(),e=this.fields();if("template"===e){return(this._owner.getDefaultRowTemplate().getFields()||[]).map(e=>t.fieldByName(e)).filter(t=>!!t)}return"sortables"===e?t.fields().filter(t=>t.sortable):Array.isArray(e)?e.map(e=>t.fieldByName(e)).filter(t=>!!t):t.fields()}getSort(t){return this.data().isSorted(t)}sortField(t){const e=this.data();e instanceof ao&&e.toggleSort(t,!0)}}class ah extends co{constructor(){super(...arguments),this.defRenderer="field"}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._showOrder=!0}showOrder(){return Tt(this._showOrder,this._defs&&this._defs._showOrder)}setShowOrder(t){t!==this._showOrder&&(this._showOrder=t,this._changed())}isFieldOrderVisible(){return this.showOrder()}sortField(t){const e=this.data();e instanceof ao&&e.toggleSort(t,!0)}defTemplate(){}}class hh extends ae{constructor(t,e){super(t,e),this._inflater=new lo(t)}_doInitDefaults(){this._visible=!1,this._endSpace=0,this._indicatorVisible=!0,this._indicatorType=Ms.DEFAULT,this._indicatorSize=28,this._indicatorMargin=2}inflateParam(t,e,s){const i=s.name;if(this.templateParams){const t=this.templateParams[i];if(void 0!==t)return t}const r=this.layoutParams();return r&&r[i]}inflateStock(t,e,s){return this._inflater.inflateStock(s)}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}endSpace(){return Nt(this._endSpace,this._defs&&this._defs._endSpace,0)}setEndSpace(t){t!==this._endSpace&&(this._endSpace=t,this._changed())}rowTemplate(){return Tt(this._rowTemplate,this._defs&&this._defs._rowTemplate)}setRowTemplate(t){t!==this._rowTemplate&&(this._rowTemplate=t,this._changed())}indicatorVisible(){return Tt(this._indicatorVisible,this._defs&&this._defs._indicatorVisible)}setIndicatorVisible(t){t!==this._indicatorVisible&&(this._indicatorVisible=t,this._changed())}indicatorType(){return Tt(this._indicatorType,this._defs&&this._defs._indicatorType)}setIndicatorType(t){t!==this._indicatorType&&(this._indicatorType=t,this._changed())}indicatorSize(){return Nt(this._indicatorSize,this._defs&&this._defs._indicatorSize,24)}setIndicatorSize(t){t!==this._indicatorSize&&(this._indicatorSize=t,this._changed())}indicatorMargin(){return Nt(this._indicatorMargin,this._defs&&this._defs._indicatorMargin,0)}setIndicatorMargin(t){t!==this._indicatorMargin&&(this._indicatorMargin=t,this._changed())}layoutParams(){return Tt(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?w.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){const t=this.rowTemplate();if(t){const e=this.owner().getTemplate(t);return{layout:pi.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,e,this),rowStyle:e.rowStyle}}}}class lh extends Ga{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",position:Jn.HEAD,shape:"@prev",shapeWidth:16,style:{fill:"blue"},onClick:t=>{t.control.closeInfoPage()}},{name:"close",label:"닫기",onClick:t=>{t.control.closeInfoPage()}}])}}!function(t){t.DEFAULT="default",t.FORM="form"}(eh||(eh={}));const dh={left:10,right:5,height:10,renderer:"line"},_h={right:5,style:{paddingTop:"5px"},renderer:{type:"button",label:"닫기",buttonWidth:80,onClick:t=>{t.control.closeInfoPage()},style:{}}},ch={right:5,renderer:{type:"button",label:"닫기",onClick:t=>{t.control.closeInfoPage()},style:{fontSize:"17px",border:"none",backgroundColor:"transparent",color:"#0088ff",padding:"7px 0px"}}};class uh extends ja{constructor(){super(...arguments),this._defaultTemplate=(t,e,s)=>{const i=Ua(),r=i.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach(t=>{r.push({value:t.label,renderer:t.labelRenderer,style:{fontSize:"0.8em",fontWeight:"bold"}}),r.push({field:t.field,left:20,right:5,renderer:t.renderer||n,style:{color:"#555"}}),r.push({space:10})}),r.push({space:20}),r.push(dh),r.push(ch),i.vars=e,new Ie(null,i)},this._formTemplate=(t,e,s)=>{const i=qa(),r=i.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach(t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})}),r.push(dh),r.push(ch),i.vars=e,new Ie(null,i)},this._ATemplate=(t,e,s)=>{const i=Ua(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=i.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach(t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"0.8em"}}),r.push({field:t.field,left:10,right:5,renderer:t.renderer||n}),r.push({space:10})}),r.push(dh),r.push(_h),i.vars=e,new Ie(null,i)},this._BTemplate=(t,e,s)=>{const i=Ua(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=i.template.children,n={wrap:!0};return t.forEach(t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"16px"}}),r.push({field:t.field,left:10,right:this._isImageRenderer(t.renderer)?void 0:5,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"},renderer:t.renderer||n}),r.push({space:10})}),r.push(dh),r.push(_h),i.vars=e,new Ie(null,i)},this._CTemplate=(t,e,s)=>{},this._FTemplate=(t,e,s)=>{const i=qa(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=i.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach(t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})}),r.push(dh),r.push(_h),i.vars=e,new Ie(null,i)},this._GTemplate=(t,e,s)=>{const i=qa(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=i.template.children,n={wrap:!0};return t.forEach(t=>{const s=t.renderer||n,i=this._isImageRenderer(s)?{}:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"},o=[{grow:1,field:t.field,style:this._extendStyle(i,t,e),renderer:s}];t.unit&&o.push({bottom:1,value:t.unit}),r.push({layout:"hlinear",itemGap:6,label:t.label,children:o})}),r.push(dh),r.push(_h),i.vars=e,new Ie(null,i)},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate,B:this._BTemplate,C:this._CTemplate,F:this._FTemplate,G:this._GTemplate}}_getDefRenderer(t){}_doInitDefaults(){super._doInitDefaults(),this._viewType=eh.DEFAULT}viewType(){return Tt(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}_getRowValues(){return this.data().internalRowValues(this._row)}inflateParam(t,e,s){const i=super.inflateParam(t,e,s);return void 0!==i?i:(s.name,this._rowInflater.inflateParam(t,e,s))}inflateStock(t,e,s){const i=super.inflateStock(t,e,s);return void 0!==i?i:(s.name,this._rowInflater.inflateStock(t,e,s))}_createHeader(t,e){return new lh(t,e&&e.header())}_getDefaultTemplate(t,e,s){const i=this._prepareFields(t);return(this._templates[this.viewType()]||this._defaultTemplate)(i,e,s)}}class gh extends e{static createTheme(t,e){switch(t){case fh.TYPE:return new fh(e);default:return new ph(e)}}constructor(t){super(),this._options=t}bodyIndented(){return this._bodyMode}getBodyIndent(t){if(this._bodyMode)switch(this._options.rowIndents()){case oe.PARENT:return(t.group.level()-1)*this._indent;case oe.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}else if(t instanceof He)return 0}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(t instanceof He)switch(this._options.rowIndents()){case oe.PARENT:return(t.group.level()-1)*this._indent;case oe.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}}prepareRender(){return this._bodyMode=this.indentsMode()===ne.BODY,this._indent=this._options.indent(),this._endMargin=this._options.endMargin(),this}}class ph extends gh{type(){return ph.TYPE}indentsMode(){return ne.ROW}}ph.TYPE="default";class fh extends gh{type(){return fh.TYPE}indentsMode(){return ne.BODY}getBodyMargin(t){return t.isLeaf()?this._endMargin:0}}fh.TYPE="classic";class wh extends e{static createTheme(t,e){switch(t){case yh.TYPE:return new yh(e);default:return new mh(e)}}constructor(t){super(),this._options=t}bodyIndented(){return this._bodyMode}getBodyIndent(t){if(!this._bodyMode)return 0;if(!(t instanceof ye))return t.group.level()*this._gindent;switch(this._options.rowIndents()){case oe.PARENT:return t.group.level()*this._gindent;case oe.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(!(t instanceof ye))return t.group.level()*this._gindent;switch(this._options.rowIndents()){case oe.PARENT:return t.group.level()*this._gindent;case oe.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}}prepareRender(){return this._bodyMode=this.indentsMode()===ne.BODY,this._indent=this._options.indent(),this._gindent=this._options.groupIndent(),this._endMargin=this._options.endMargin(),this}}class mh extends wh{type(){return mh.TYPE}indentsMode(){return ne.ROW}}mh.TYPE="default";class yh extends wh{type(){return yh.TYPE}indentsMode(){return ne.BODY}getBodyIndent(t){return this._bodyMode&&t instanceof Se?(t.group.level()+1)*this._gindent:super.getBodyIndent(t)}getBodyMargin(t){return this._endMargin}}yh.TYPE="classic";class vh extends ae{_doInitDefaults(){this._rowIndents=oe.INNER,this._indent=vh.INDENT,this._endMargin=bh.END_MARGIN}theme(){return Tt(this._theme,this._defs&&this._defs._theme)}setTheme(t){this._theme=t}rowIndents(){return Tt(this._rowIndents,this._defs&&this._defs._rowIndents)}setRowIndents(t){this._rowIndents=t}indent(){return Tt(this._indent,this._defs&&this._defs._indent)}setIndent(t){this._indent=t}endMargin(){return Tt(this._endMargin,this._defs&&this._defs._endMargin)}setEndMargin(t){this._endMargin=t}}vh.INDENT=12;class bh extends vh{constructor(t,e,s){super(t,s),this._header=new xe(e,s&&s._header),this._footer=new Re(e,s&&s._footer),this._expander=new yr(e,s&&s._expander)}_doInitDefaults(){super._doInitDefaults(),this._groupIndent=bh.GROUP_INDENT}header(){return this._header}footer(){return this._footer}expander(){return this._expander}groupIndent(){return Tt(this._groupIndent,this._defs&&this._defs._groupIndent)}setGroupIndent(t){this._groupIndent=t}getTheme(){const t=this.theme();return this._themeImpl?t!==this._themeImpl.type()&&(this._themeImpl=wh.createTheme(t,this)):this._themeImpl=wh.createTheme(t,this),this._themeImpl}}bh.GROUP_INDENT=12,bh.END_MARGIN=4;class Sh extends vh{constructor(t,e,s){super(t,s),this._expander=new yr(e,s&&s._expander)}_doInitDefaults(){super._doInitDefaults()}expander(){return this._expander}groupLevel(){return Tt(this._groupLevel,this._defs&&this._defs._groupLevel)}setGroupLevel(t){this._groupLevel=t}addMasterHeader(){return this._addMasterHeader}addMasterFooter(){return this._addMasterFooter}addEmptyMasterHeader(){return this._addEmptyMasterHeader}addEmptyMasterFooter(){return this._addEmptyMasterFooter}addDetailHeader(){return this._addDetailHeader}addDetailFooter(){return this._addDetailFooter}addSingleDetailHeader(){return this._addSingleDetailHeader}addSingleDetailFooter(){return this._addSingleDetailFooter}getTheme(){const t=this.theme();return this._themeImpl?t!==this._themeImpl.type()&&(this._themeImpl=gh.createTheme(t,this)):this._themeImpl=gh.createTheme(t,this),this._themeImpl}}class Ch{constructor(t,e,s){this.master=t,this.dv=e,this.dataRow=s}id(){return this.dataRow.id}values(){return this.dataRow.values}level(){return this.master?this.master.level()+1:0}detailCount(){return this.details?this.details.length:0}getDescendants(){const t=[];return function e(s){const i=s.details;if(i)for(let s=0,r=i.length;s<r;s++)t.push(i[s]),e(i[s])}(this),t}}class xh extends e{constructor(t,e,s){if(super(),!(t instanceof nr))throw new Error("데이터객체가 지정돼야 합니다.");if(t instanceof Vh)throw new Error("데이터링크는 다른 데이터링크의 데이터로 지정될 수 없습니다.");if(s.indexOf(t)>=0)throw new Ki(t,"A data is already linked: "+t.name());s.push(this.data=t)}_initDetails(t,e,s){if(t){const i=w.makeArray(t);i.length>0&&(this.details=i.map(t=>new Rh(this,t,e,s)))}}level(){return this.parent.level()+1}detailCount(){return this.details?this.details.length:0}}class Rh extends xh{$_setParentLevel(t){this.parent instanceof Eh?this.parent._levels=Math.max(this.parent._levels,t):this.parent instanceof Rh&&this.parent.$_setParentLevel(t)}constructor(t,e,s,i){if(super(e.data,e.details,s),i[e.data.hash]=this,this.parent=t,this.$_setParentLevel(this.level()+1),this.keyFields=Yn(e.data,e.keyFields),Array.isArray(e.masterFields)&&e.masterFields.length>0?this.masterFields=Yn(t.data,e.masterFields):this.masterFields=Yn(t.data,e.keyFields),this.keyFields.length!==this.masterFields.length)throw new Error("key fields와 master fields의 개수가 동일해야 합니다.");this._initDetails(e.details,s,i)}_doDestory(){this.data=null,this.details&&(this.details.forEach(t=>t.destroy()),this.details=null)}findData(t){if(this.data.name()===t)return this.data;if(this.details)for(let e of this.details){const s=e.findData(t);if(s)return s}}}class Eh extends xh{constructor(t,e,s,i){super(t,e,s),this._levels=1,i[t.hash]=this,this._initDetails(e,s,i)}_doDestory(){this.data=null,this.details.forEach(t=>t.destroy()),this.details=null}findData(t){if(t===this.data.name())return this.data;if(this.details)for(let e of this.details){const s=e.findData(t);if(s)return s}}level(){return 0}}class Vh extends nr{constructor(t,e,s,i){super(t),this._wrapper=i,this._info=new Eh(e,s,this._dvs=[],this._infoMap={}),this._dvMap={},this._dvs.forEach(t=>{this._dvMap[t.name()]=t,t.addListener(this)}),this._root=this._info.data,this._rows=this.$_buildRows()}_doDestory(){this._dvs.forEach(t=>t.removeListener(this)),this._dvs=this._root=this._info=null}source(){return this._root.source()}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._root.readOnly()}fields(){return this._root.fields()}fieldByName(t){return this._root.fieldByName(t)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}getSource(t){return this._rows[t].dv}getSourceRow(t){const e=this._rows[t].dv;return t=e.rowOfDataRow(this._rows[t].dataRow),{dv:e,row:t}}canSort(){return this._root.canSort()}canMove(){return!1}getRowId(t){return this._rows[t].id()}levelRowOfRow(t){return this._rows[t].no}getRowValues(t){Xn.checkRow(this,t);const e=this._rows[t];return e&&Object.assign({},e.dataRow.values)}getValues(t,e,s){if(Array.isArray(e)){nr.checkRow(this,t);const i={},r=this._rows[t],n=r.values(),o=r.dv.source();return e.forEach(t=>{s&&o.checkField(t),i[t]=n[t]}),i}return this.getRowValues(t)}internalRowValues(t){return Object.assign({},this._rows[t].dataRow.values)}getValue(t,e,s){nr.checkRow(this,t);const i=this._rows[t],r=i.dv;return s&&r.checkField(e),i.dataRow.values[e]}getProp(t,e,s,i){nr.checkRow(this,t);const r=this._rows[t],n=r.dv;return i&&n.checkField(e),r.dataRow.getProp(e,s)}getFieldValues(t,e,s){}getSummary(t,e,s){return this._root.getSummary(t,e,s)}updateValue(t,e,s){return this._rows[t].dv.updateValue(-1,e,s)}findRow(t,e=0,s=-1){return this._root.findRow(t,e,s)}findRows(t,e=0,s=-1){return this._root.findRows(t,e,s)}findDistinctRows(t,e,s){return this._root.findDistinctRows(t,e,s)}deleteRow(t,e){Xn.checkRow(this,t);const s=this._rows[t],i=s.dv;i.deleteRow(i.rowOfDataRow(s.dataRow),e)}deleteRows(t,e){if(Array.isArray(t)&&t.length>0){t.forEach(t=>nr.checkRow(this,t));const s=this.$_getRowsMap(t);for(const i in s){const r=this._dvMap[i];r&&(t=s[i].map(t=>r.rowOfDataRow(t)),r.deleteRows(t,e))}}}updateRow(t,e,s=!1){Xn.checkRow(this,t);const i=this._rows[t],r=i.dv,n=r.rowOfDataRow(i.dataRow);return r.updateRow(n,e,s)}appendRow(t){return this._root.appendRow(t)}getRowState(t){return Xn.checkRow(this,t),this.internalRowState(t)}internalRowState(t){return this._rows[t].dataRow.state}$_getRowsMap(t){const e={};return t.forEach(t=>{const s=this._rows[t],i=s.dv.name();e[i]?e[i].push(s.dataRow):e[i]=[s.dataRow]}),e}$_handler(){const t=this._rows.length;this.$_reset(),this._fireEvent("onDataReset"),this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}onDataValueUpdated(t,e,s,i,r){this.$_handler()}onDataRowUpdated(t,e,s){this.$_handler()}onDataRowsUpdated(t,e){this.$_handler()}onDataRangeUpdated(t,e,s){this.$_handler()}onDataRowAdded(t,e){this.$_handler()}onDataRowsAdded(t,e,s){this.$_handler()}onDataCleared(t,e){this.$_handler()}onDataRowDeleted(t,e,s){const i=this.getRowOfId(s);if(i<0)return;const r=this._rows[i],n=this._rows.length;let o;r.details&&(o=r.getDescendants(),o.unshift(r)),this.$_reset(),this._fireEvent("onDataReset"),o?this._fireEvent("onDataRowsDeleted",o,this.$_getRowIds(o)):this._fireEvent("onDataRowDeleted",i,r.id()),o?this._flags._rowsDeleted(w.sortNum(this.$_getRowIds(o))):this._flags._rowDeleted(i),this._fireEvent("onDataCountChanged",this._rows.length,n),this._fireEvent("onDataChanged")}onDataRowsDeleted(t,e,s){if((e=this.getRowsOfIds(t,s)).length>0){const i=this._rows.length;let r=[];e.forEach(e=>{const i=this._rows[e],n=this.$_getRowIds(i.getDescendants());r.push(e),n.length>0&&(r=r.concat(this.getRowsOfIds(t,n)),s=s.concat(n))}),r=w.dedupe(r),s=w.dedupe(s),this.$_reset(),this._fireEvent("onDataRowsDeleted",r,s),this._fireEvent("onDataReset"),this._flags._rowsDeleted(w.sortNum(r)),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}}onDataRangeDeleted(t,e,s){const i=w.makeIntArray(e,e+s),r=i.map(e=>t.getRowId(e));this.onDataRowsDeleted(t,i,r)}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}info(){return this._info}root(){return this._root}levels(){return this._info._levels}setDataTags(t,e){for(const t of this._rows)t.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getDataViews(){return this._dvs.slice(0)}getLevel(t){return this._rows[t].level()}getLinkInfo(t){return this._infoMap[t.hash]}getLinkRows(){return this._rows.slice(0)}getRows(){return this._rows.map(t=>t.dataRow)}getDetailCount(t,e){return e?1:this._rows[t].detailCount()}isLeaf(t){return Xn.checkRow(this,t),this._rows[t].level()===this._info._levels-1}_internalLeaf(t){return this._rows[t].level()===this._info._levels-1}isLast(t){return t===this._rows.length-1}isMaster(t){return Xn.checkRow(this,t),this._rows[t].level()<this._info._levels-1}getRowOf(t,e){for(let s=0,i=this._rows.length;s<i;s++){const i=this._rows[s];if(i.dv===t&&t.getDataRow(e)===i.dataRow)return s}return-1}getRowsOf(t,e){const s=[],i=e.length;for(let r=0,n=this._rows.length;r<n;r++){const n=this._rows[r];if(n.dv===t)for(let o=0;o<i;o++)if(n.dataRow==t.getDataRow(e[o])){s.push(r);break}if(s.length===i)break}return s}getRowOfId(t){for(let e=0,s=this._rows.length;e<s;e++)if(this._rows[e].id()===t)return e;return-1}getRowsOfIds(t,e){const s=[],i=e.length;for(let r=0,n=this._rows.length;r<n;r++){const n=this._rows[r];if(n.dv===t)for(let t=0;t<i;t++)if(n.id()==e[t]){s.push(r);break}if(s.length===i)break}return s}$_collectDetails(t,e,s,i){function r(t,e){const s=[];for(let i=0,r=e.length;i<r;i++)s.push(t.values[e[i]]);return s}function n(t,e){for(let s=0,i=t.length;s<i;s++)if(t[s]!==e[s])return!1;return!0}const o=[];return s.forEach(t=>{const s=t.keyFields.map(t=>t.name),a=t.masterFields.map(t=>t.name),h=function(t,e,s,i,a,h){const l=[],d=r(i.dataRow,h);for(let t=0,h=e.rowCount();t<h;t++)if(s[t]){if(n(r(e.getDataRow(t),a),d)){const r=new Ch(i,e,s[t]);l.push(r),o.push(r),s[t]=null}}return l}(0,t.data,t.drows,e,s,a);h.length>0&&h.forEach(e=>{i.push(e),e.no=t.no++,Array.isArray(t.details)&&(e.details=this.$_collectDetails(t.data,e,t.details,i))})}),o}$_buildRows(){const t=+new Date,e=this._info.details,s=this._root,i=s.getRows(),r=[];e&&e.forEach(t=>function t(e){e.drows=e.data.getRows().slice(0),e.no=0,Array.isArray(e.details)&&e.details.forEach(e=>t(e))}(t));for(let t=0,n=i.length;t<n;t++){const n=new Ch(null,s,i[t]);n.no=t,r.push(n),e&&(n.details=this.$_collectDetails(s,n,e,r))}return e&&e.forEach(t=>function t(e){delete e.drows,Array.isArray(e.details)&&e.details.forEach(e=>t(e))}(t)),console.log("DATA LINK BUILD: "+(+new Date-t)+"ms."),r}$_reset(){this._rows=this.$_buildRows(),this._fireEvent("onDataReset")}$_getRowIds(t){return t.map(t=>t.id())}}class $h extends s{constructor(t,e){super(),this._owner=t,this._defs=e,this._row=new kn(t,e&&e._row),this._tableRow=new Ln(this._owner,e&&e._tableRow),!e&&this._doInitDefaults()}_doInitDefaults(){}owner(){return this._owner}row(){return this._row}tableRow(){return this._tableRow}load(t){return this.assignProps(t)}_changed(){this._owner.invalidateLayout()}}const Ah=[];var Dh;!function(t){t.AFTER="after",t.BEFORE="before"}(Dh||(Dh={}));class kh extends $h{constructor(){super(...arguments),this._drows=[]}_doInitDefaults(){this._visible=!0,this._position=Dh.AFTER}visible(){return Tt(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}position(){return Tt(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}data(){return Tt(this._data,this._defs&&this._defs._data)}setData(t){t!==this._data&&(this._data&&this._data.removeListener(this),this._data=t,this._data&&this._data.addListener(this),this._changed())}rows(){var t;return null===(t=Tt(this._rows,this._defs&&this._defs._rows))||void 0===t?void 0:t.slice(0)}setRows(t){t!=this._rows&&(this._rows=t&&t.slice(0),this._changed())}rowCount(){return this._drows===Ah?this._data.rowCount():this._drows.length}prepareRender(t){if(this.visible){let e=this._rows;if(void 0===e&&this._defs&&(e=this._defs._rows),e&&e.length>0){if(this._drows=[],t=this._dv=this._data||t){const s=t.rowCount();e.forEach(t=>{t>=0&&t<s&&this._drows.push(t)})}}else this._data&&(this._dv=this._data,this._drows=Ah);return this.rowCount()>0}}getRow(t){return this._drows===Ah?t:this._drows[t]}getValue(t,e){return this._dv.getValue(this.getRow(t),e,!0)}}class Lh extends $h{constructor(t,e,s,i){super(e,s),this._landscape=i,this._rowBar=new Vr(t,e,s&&s._rowBar),this._editBar=new Rr(t,e,s&&s._editBar),this._scrollIndicator=new Ro(t,s&&s._scrollIndicator),this._indexBar=new Da(t,s&&s._indexBar),this._scrollBar=new Ba(t,s&&s._scrollBar),this._pageNavigator=new Pa(t,e,s&&s._pageNavigator),this._pageScroller=new Oa(t,s&&s._pageScroller),this._commandBox=new jo(t,s&&s._commandBox),this._selectionMask=new Fa(t,s&&s._selectionMask),this._headRows=new kh(e,s&&s._headRows),this._header=new po(e,s&&s._header),this._footer=new fo(e,s&&s._footer),this._searchBar=new rh(e,s&&s._searchBar),this._searchResultBar=new nh(e,s&&s._searchResultBar),this._fieldBar=new oh(e,s&&s._fieldBar),this._fieldHeader=new ah(e,s&&s._fieldHeader),this._rowGroup=new bh(e,this,s&&s._rowGroup),this._dataGroup=new Sh(e,this,s&&s._dataGroup),this._dataRowInfos=new Wa(e,s&&s._dataRowInfos),this._infoPage=new uh(e,s&&s._infoPage),this._editPage=new Ka(e,s&&s._editPage),this._addPage=new Ka(e,s&&s._addPage),this._singleRow=new ih(e,s&&s._singleRow),this._attachedRow=new hh(e,s&&s._attachedRow),this._formPanel=new Un(t,s&&s._formPanel),this._buttonPanel=new Gn(t,s&&s._buttonPanel),this._searchPanel=new qn(t,s&&s._searchPanel),this._filterPanel=new ho(t,s&&s._filterPanel),this._emptyPage=new Mn(e,s&&s._emptyPage),this._loadingPage=new Pn(e,s&&s._loadingPage),this._rowTemplateArgs={control:t.wrapperOrThis(),large:!1,row:-1}}_doDestory(){super._doDestory(),this._dataLink=this._dv=null}_doInitDefaults(){super._doInitDefaults(),this._rowType=St.NORMAL,this._orientation=Ct.VERTICAL,this._largeSize=Lh.LARGE_SIZE,this._rowsPerLine=1,this._levelIndent=8,this._overScrollEffect=Xt.BALLOON}groupSectionChanged(t){this._changed()}rowCellObjectChanged(t){this._changed()}rowType(){return Tt(this._rowType,this._defs&&this._defs._rowType)}setRowType(t){t!==this._rowType&&(this._rowType=t,this._changed())}isLandscape(){return this._landscape}orientation(){return Tt(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){t!==this._orientation&&(t===Ct.HORIZONTAL&&this._owner.isGrouped()&&I(b.canNotHorzInGrouping),this._orientation=t,this._changed())}largeSize(){return It(this._largeSize,this._defs&&this._defs._largeSize)}setLargeSize(t){t!==this._largeSize&&(this._largeSize=t,this._changed())}rowWidth(){return It(this._rowWidth,this._defs&&this._defs._rowWidth)}setRowWidth(t){t!==this._rowWidth&&(this._rowWidth=t,this._changed())}minRowWidth(){return It(this._minRowWidth,this._defs&&this._defs._minRowWidth)}setMinRowWidth(t){t!==this._minRowWidth&&(this._minRowWidth=t,this._changed())}maxRowWidth(){return It(this._maxRowWidth,this._defs&&this._defs._maxRowWidth)}setMaxRowWidth(t){t!==this._maxRowWidth&&(this._maxRowWidth=t,this._changed())}rowCount(){return It(this._rowCount,this._defs?this._defs._rowCount:NaN)}setRowCount(t){(t=w.toNumber(t)>>>0)!==this._rowCount&&(this._rowCount=t,this._changed())}levelIndent(){return It(this._levelIndent,this._defs?this._defs._levelIndent:NaN)}setLevelIndent(t){(t=It(t,0))!==this._levelIndent&&(this._levelIndent=t,this._changed())}menu(){return Tt(this._menu,this._defs&&this._defs._menu)}setMenu(t){this._menu=t}overScrollEffect(){return Tt(this._overScrollEffect,this._defs&&this._defs._overScrollEffect)}setOverScrollEffect(t){this._overScrollEffect=t}headRows(){return this._headRows}header(){return this._header}footer(){return this._footer}searchBar(){return this._searchBar}searchResultBar(){return this._searchResultBar}fieldBar(){return this._fieldBar}fieldHeader(){return this._fieldHeader}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}dataRowInfos(){return this._dataRowInfos}editBar(){return this._editBar}scrollIndicator(){return this._scrollIndicator}indexBar(){return this._indexBar}scrollBar(){return this._scrollBar}pageNavigator(){return this._pageNavigator}pageScroller(){return this._pageScroller}commandBox(){return this._commandBox}selectionMask(){return this._selectionMask}infoPage(){return this._infoPage}editPage(){return this._editPage}addPage(){return this._addPage}singleRow(){return this._singleRow}attachedRow(){return this._attachedRow}formPanel(){return this._formPanel}buttonPanel(){return this._buttonPanel}searchPanel(){return this._searchPanel}filterPanel(){return this._filterPanel}emptyPage(){return this._emptyPage}loadingPage(){return this._loadingPage}load(t){return super.load(t)}isLarge(){return this.isLandscape()?this._owner.height()>=this.largeSize():this._owner.width()>=this.largeSize()}getDefaultRowTemplate(){return this._runRowTemplate}getRowTemplate(t){const e=this._runRowTemplateCallback;let s;if(e&&(this._rowTemplateArgs.row=t,this._rowTemplateArgs.large=this.isLarge(),s=e(this._rowTemplateArgs)),!s){let e;e=this._dataLink?this._dataLink.getSource(t).name():this._dv.name(),s=e&&this.dataRowInfos().getRowTemplate(e)}return s||this._runRowTemplate}getRowParams(){return this._runRowParams}getRowStyle(){return this._runRowStyle}getRowCommands(){const t=this._owner.rowCommands(),e=[];return w.makeArray(this.row().commands(),!0).forEach(s=>{const i=t.get(s);i&&e.push(i)}),e}prepareRender(){this.$_prepareRunnings(),this._dv=this.owner().data(),this._dataLink=this._dv instanceof Vh?this._dv:null,this._rowBar.visible()&&this._rowBar.prepareRender(),this._editBar.visible()&&this._editBar.prepareRender(),this._scrollIndicator.visible()&&this._scrollIndicator.prepareRender(),this._indexBar.visible()&&this._indexBar.prepareRender(),this._scrollBar.visible()&&this._scrollBar.prepareRender(),this._owner.isPaging()&&this._pageNavigator.visible()&&this._pageNavigator.prepareRender(),this._owner.isPaging()&&this._pageScroller.visible()&&this._pageScroller.prepareRender(),this._commandBox.visible()&&this._commandBox.prepareRender(),this._selectionMask.visible()&&this._selectionMask.prepareRender(),this._fieldBar.visible()&&this._fieldBar._setRowTemplate(this._row.template()),this._dataRowInfos.prepareRender(),this._rowBar.visible()&&this._rowBar.prepareRender()}unprepareRender(){this._rowBar.visible()&&this._rowBar.unprepareRender(),this._editBar.visible()&&this._editBar.unprepareRender()}$_getPanel(t){switch(t){case Un.TYPE:return this._formPanel;case Gn.TYPE:return this._buttonPanel;case qn.TYPE:return this._searchPanel;case ho.TYPE:return this._filterPanel}}$_prepareRunnings(){const t=this._row;this._runRowTemplateCallback=t.templateCallback(),this._runRowTemplate=this.isLarge()&&t.largeTemplate()||t.template(),this._runRowParams=t.$_internalParams(),this._runRowStyle=t.style()}}Lh.LARGE_SIZE=600;class Th extends Oi{constructor(t){super(t,!1,Th.CLASS_NAME)}_doInitDom(t,e){}_doMeasure(t,e,s){return{width:e,height:s}}_doRender(t,e,s){}}Th.CLASS_NAME="rtc-focus-mask";class Mh extends e{constructor(t){super(),this._bodyView=t}_doDestory(){this.stop()}start(){return this._doStart()||this.stop(),this}stop(){this._doStop()}}class Ph extends Oi{constructor(t,e){super(t,!1,Ph.CLASS_NAME),this._panelViews=[],this.pageMoving=!1,this.orderWidth=NaN,this.rightMargin=0,this._owner=e,this.addChild(this._bodyView=this._bodyView=this._createBodyView(t,e.noCache(),!1)),this._bodyView._listView=this,this.addChild(this._sectionContainer=new ce(t,!1,"rtc-sections")),this.addChild(this._panelContainer=new ue(t,!1,"rtc-panels")),this._panelContainer.dom.style.overflow="hidden",this.addChild(this._toolContainer=new ue(t,!1,"rtc-tools"))}_doDestory(){super._doDestory(),this.rowBar=this.editBar=this._renderInfo=this._owner=null,this._panelViews.length=0}isSkeleton(){return!1}createLayoutView(t,e){return e instanceof ti?new Oh[e.type](t,e):new Ea(t,e)}borrowRenderer(t){return this._owner.borrowRenderer(t)}freeRenderer(t){this._owner.freeRenderer(t)}useImage(t){this._owner.useImage(t)}getImageSize(t){return this._owner.getImageSize(t)}getIcon(t,e){return this._owner.getIcon(t,e)}rowBorderVisible(t){return!t._last||!this._owner.rowBorder.skipLast}owner(){return this._owner}data(){return this._owner.data()}isVertical(){return this._vertical}isLandscape(){return this._owner.isLandscape()}itemCount(){return this._bodyView.itemViewCount()}headRowsView(){return this._headRowsView}formPanelView(){return this._formPanelView}buttonPanelView(){return this._buttonPanelView}bodyView(){return this._bodyView}headerView(){return this._headerView}footerView(){return this._footerView}searchBarView(){return this._searchBarView}fieldBarView(){return this._fieldBarView}fieldHeaderView(){return this._fieldHeaderView}scrollIndicatorView(){return this._scrollIndicatorView}indexBarView(){return this._indexBarView}scrollBarView(){return this._scrollBarView}pageNavigatorView(){return this._pageNavigatorView}pageScrollerView(){return this._pageScrollerView}menuView(){return this._menuView}renderInfo(){return this._renderInfo}scrollPos(){return this._bodyView.scrollPos()}scrollOff(){return this._bodyView.scrollOff()}topRow(){return this._bodyView.topRow()}activePanel(){return this._activePanel}menu(){return this._menu}getExpander(t){return this._bodyView.getExpander(t)}_resetScrollStates(){const t=this.scrollPos(),e=this.scrollOff();this.$_setScrollRate(this._scrollIndicatorView,t,e,!0),this.$_setScrollBar(this._scrollBarView,!0)}scrollBy(t){const e=this._bodyView.scrollBy(t);return this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView(),e}scrollToEnd(t){this._bodyView.scrollToEnd(t),this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView()}pageChanged(t){const e=this._pageScrollerView;e&&e.visible&&e.makeVisible(t)}closePanel(t){if(this._activePanel){const e=this._panelContainer.width,s=this._panelContainer.height,i=this.$_getPanelView(this._activePanel);t?i&&this.$_hidePanel(i,e,s,null):(this._activePanel=null,i&&(this._panelContainer.dom.style.pointerEvents="none",this._panelContainer.removeChild(i),i.setVisible(!1)))}}showPanel(t,e){function s(t){return"string"==typeof t?t:isNaN(t)?"":Ot(t)}if(w.isObject(e)){const i=e,r=i.container;if(r instanceof HTMLElement){const e=this.$_getPanelView(this._activePanel=t);e&&(Object.assign(e.dom.style,{left:s(i.left),top:s(i.top),width:s(i.width),height:s(i.height)}),r.appendChild(e.dom))}else e=!0}const i=this._panelContainer.width,r=this._panelContainer.height;if(e)t&&t!==this._activePanel&&(this._activePanel?this.$_hidePanel(this.$_getPanelView(this._activePanel),i,r,()=>{this.$_showPanel(this.$_getPanelView(t),i,r,null)}):this.$_showPanel(this.$_getPanelView(t),i,r,null));else if(t&&t!==this._activePanel){const e=this.$_getPanelView(this._activePanel=t);e?(this._panelContainer.dom.style.pointerEvents="auto",e.setVisible(!0),this._panelContainer.addChild(e)):this._panelContainer.removeChild(e)}}togglePanel(t,e){if(t){const s=this._panelContainer.width,i=this._panelContainer.height,r=t===this._activePanel,n=this.$_getPanelView(t);n&&(e?r?this.$_hidePanel(n,s,i,null):this.$_showPanel(n,s,i,null):(this._activePanel=r?null:t,n.setVisible(!r)?this._panelContainer.addChild(n):this._panelContainer.removeChild(n)))}}getPanel(t){const e=this._activePanel&&this.$_getPanelView(this._activePanel);return e&&e.containsDom(t)?e:null}isInPanel(t){const e=this.getPanel(t);return e&&e.containsDom(t)}isMenuView(t){return this._menuView&&this._menuView.isMenuView(t)}showMenu(t,e){!function(t,e){if(!t)throw new Error(e||t+" is null.")}(!!t,"menu object is required."),this.closePanel(!1),this.hideMenu(!1),t.onShow&&t.show(this.control.wrapperOrThis());let s=this._menuView;s||(s=this._menuView=new ya(this.doc),s.setVisible(!1)),this._panelContainer.addChild(s),s.show(this._menu=t,this.width,this.height,this.canAnimate())}hideMenu(t){return this._menuView&&this._menuView.hide(this.canAnimate())}canMovePage(t,e){const s=this._owner;if(s.isPaging())if(t>0){if(s.page()>0)return!0;e&&this._bodyView.$_showOverEffect(P.LEFT)}else if(t<0){if(s.page()<s.pageCount()-1)return!0;e&&this._bodyView.$_showOverEffect(P.RIGHT)}}canMoveSingle(t,e){return!1}getSpareBody(){return this._spareBodyView||(this._spareBodyView=this._createBodyView(this.doc,this._owner.noCache(),!0),this._spareBodyView._listView=this),this._spareBodyView}refreshPanel(){this._buttonPanelView&&this._buttonPanelView.visible&&this._buttonPanelView.refresh(this,this.width,this.height)}focusedRowChanged(t,e){this._bodyView.focusedRowChanged(t,e)}getLayoutView(t){for(const e of this._layoutViews)if(e&&e.visible&&e.isView(t))return e}addTooltipView(t){this.control.lock(()=>{this._toolContainer.addChild(t)})}removeTooltipView(t){this.control.lock(()=>{this._toolContainer.removeChild(t)})}addFeedback(t){this._toolContainer.appendDom(t)}showToast(t){const e=new Aa(this.doc),s=new $a(t);e.show(this._toolContainer,s)}_doPrepareRender(t,e){this.pageMoving;const s=this._owner,i=s.isEmpty(),r=s.data(),n=s.fullMode(),o=s.isSingleRow(),a=s.getRowCount()>0,h=s.current(),l=this._sectionContainer,d=h.headRows();let _;this._vertical=s.isVertical(),this._renderInfo=e,this.rowBar=h._rowBar.visible()?h._rowBar:null,this.editBar=h._editBar.visible()?h._editBar:null,this.borderLine=o&&!h.singleRow().rowBorderVisible||!h.row().borderLine().visible()?null:h.row().borderLine(),this.focusMask=!o&&h.row().focusMask().visible()?h.row().focusMask():null,this.textFormatter=s.getTextFormatter(),this.boolFormatter=s.getBoolFormatter(),this.numberFormatter=s.getNumberFormatter(),this.dateFormatter=s.getDateFormatter(),d.prepareRender(s.data())?l.addChild(this._headRowsView=new Mo(t,d)):this._headRowsView&&this._headRowsView.setVisible(!1),_=h._scrollIndicator.visible()&&!i,n||!_||this._scrollIndicatorView?this._scrollIndicatorView&&this._scrollIndicatorView.setVisible(a&&_)&&this._scrollIndicatorView.setModel(h.scrollIndicator()):l.addChild(this._scrollIndicatorView=new Vo(t,h.scrollIndicator())),_=h.header().visible(),_&&!this._headerView?l.addChild(this._headerView=new Co(t,h.header())):this._headerView&&this._headerView.setVisible(_)&&this._headerView.setModel(h.header()),_=h.searchBar().visible(),_&&!this._searchBarView?l.addChild(this._searchBarView=new oa(t,h.searchBar())):this._searchBarView&&this._searchBarView.setVisible(_)&&this._searchBarView.setModel(h.searchBar()),_=h.searchResultBar().visible()&&(this._searchPanelView&&this._searchPanelView.canShowResult(s.searchResult())||h.searchBar().canShowResult(s.searchResult())),_&&!this._searchResultView?l.addChild(this._searchResultView=new aa(t,h.searchResultBar())):this._searchResultView&&this._searchResultView.setVisible(_)&&this._searchResultView.setModel(h.searchResultBar()),_=h.fieldBar().visible()&&r&&r.canSort(),_&&!this._fieldBarView?l.addChild(this._fieldBarView=new xa(t,h.fieldBar())):this._fieldBarView&&this._fieldBarView.setVisible(_)&&this._fieldBarView.setModel(h.fieldBar()),_=h.fieldHeader().visible(),_&&!this._fieldHeaderView?l.addChild(this._fieldHeaderView=new Ra(t,h.fieldHeader())):this._fieldHeaderView&&this._fieldHeaderView.setVisible(_)&&this._fieldHeaderView.setModel(h.fieldHeader()),_=h.footer().visible(),_&&!this._footerView?l.addChild(this._footerView=new So(t,h.footer())):this._footerView&&this._footerView.setVisible(_)&&this._footerView.setModel(h.footer()),_=a&&s.indexBar().visible()&&!i,n||!_||this._indexBarView?this._indexBarView&&this._indexBarView.setVisible(a&&_)&&this._indexBarView.setModel(h.indexBar()):l.addChild(this._indexBarView=new No(t,h.indexBar()));let c=this._scrollBarView;_=s.scrollBar().visible()&&!i,!n&&a&&_&&!c?l.addChild(c=this._scrollBarView=new Oo(t,h.scrollBar())):c&&c.setVisible(a&&_)&&c.setModel(h.scrollBar()),_&&c&&c.setVertical(this._vertical),s.isPaging()&&(_=s.pageNavigator().visible(),_&&!this._pageNavigatorView?l.addChild(this._pageNavigatorView=new ko(t,s,h.pageNavigator())):this._pageNavigatorView&&this._pageNavigatorView.setVisible(_)&&this._pageNavigatorView.setModel(h.pageNavigator()),_=s.pageScroller().visible(),_&&!this._pageScrollerView?l.addChild(this._pageScrollerView=new To(t,s,h.pageScroller())):this._pageScrollerView&&this._pageScrollerView.setVisible(_)&&this._pageScrollerView.setModel(h.pageScroller()));const u=this.$_getPanelView(this._activePanel);u&&u.setVisible(!0),this._panelViews.forEach(t=>{t!==u&&!t.animating()&&t.setVisible(!1)}),this._runScrollIndicator=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,this._runPageNavigator=this._pageNavigatorView&&this._pageNavigatorView.visible?this._pageNavigatorView:null,this._headerViews=[this._headerView,this._searchBarView,this._fieldBarView,this._fieldHeaderView],this._layoutViews=[this._headerView,this._footerView,this._fieldHeaderView]}$_measureFull(t,e,s,i){let r=0;this.rightMargin=0,this._headRowsView&&this._headRowsView.visible&&(r+=this._headRowsView.measure(e,null,s,i).height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),r+=this._headerView.measure(e,this,s,i).height),this._searchBarView&&this._searchBarView.visible&&(r+=this._searchBarView.measure(e,t,s,i).height),this._fieldBarView&&this._fieldBarView.visible&&(r+=this._fieldBarView.measure(e,t,s,i).height),this._fieldHeaderView&&this._fieldHeaderView.visible&&(r+=this._fieldHeaderView.measure(e,t,s,i).height),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),r+=this._footerView.measure(e,this,s,i).height),r+=this._bodyView.measure(e,t,s,i).height,this._runPageNavigator&&(r+=this._runPageNavigator.measure(e,this,s,i).height),this._pageScrollerView&&this._pageScrollerView.visible&&(r+=this._pageScrollerView.measure(e,this,s,i).height);const n=this.$_getPanelView(this._activePanel);return n&&!n.animating()&&n.measure(e,this,s,i),{width:s,height:r}}_doMeasure(t,e,s){const i=this._owner;if(i.fullMode())return this.$_measureFull(i,t,e,Number.MAX_SAFE_INTEGER);if(!this._vertical)return this._doMeasureHorz(t,e,s);const r=i.isLandscape(),n=i.searchResult();let o,a=s,h=e,l=0,d=0,_=0,c=0,u=0,g=0;const p=this._runPageNavigator;p&&(p.setPosition(r),o=p.measure(t,this,h,a),p.vertical?h-=o.width:a-=o.height);const f=this._runScrollIndicator;f&&(f.setPosition(r),o=f.measure(t,this,h,a),f.vertical?h-=o.width:a-=o.height),this._headRowsView&&this._headRowsView.visible&&(o=this._headRowsView.measure(t,null,h,a),a-=o.height),this._pageScrollerView&&this._pageScrollerView.visible&&(o=this._pageScrollerView.measure(t,this,h,a),a-=o.height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),l=this._headerView.measure(t,this,h,a).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(n),d=this._searchBarView.measure(t,i,h,a).height),this._fieldBarView&&this._fieldBarView.visible&&(_=this._fieldBarView.measure(t,i,h,a).height),this._fieldHeaderView&&this._fieldHeaderView.visible&&(this._fieldHeaderView.setLayout(this._fieldHeaderView.model().layout()),c=this._fieldHeaderView.measure(t,this,h,a).height),this._searchResultView&&(this._searchResultView.setResult(n),this._searchResultView.visible&&(u=this._searchResultView.measure(t,this,h,a).height)),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),g=this._footerView.measure(t,this,h,a).height),a-=l+d+_+c+u+g,this.rightMargin=0,this._scrollBarView&&this._scrollBarView.visible&&(o=this._scrollBarView.measure(t,this,h,a),this._scrollBarView.model().floating()||(this.rightMargin+=o.width)),this._indexBarView&&this._indexBarView.visible&&(o=this._indexBarView.measure(t,this,h,a),this._indexBarView.model().floating()||(this.rightMargin+=o.width));const w=this.$_getPanelView(this._activePanel);return w&&!w.animating()&&w.measure(t,this,e,a),this._bodyView._searchResult=n,this._bodyView.measure(t,i,h,a),{width:e,height:s}}_doRender(t,e,s){if(!this._vertical)return void this._doRenderHorz(t,e,s);function i(){const i=o.mh;o.resize(e,i).move(u,g),s=-i,g+=i,o.render(t)}const r=this.scrollPos(),n=this.scrollOff(),o=this._headRowsView&&this._headRowsView.visible?this._headRowsView:null,a=this._runPageNavigator,h=this._runScrollIndicator;let l,d=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,_=e,c=s,u=0,g=0,p=s;if(a&&a.vertical){const i=a.mw;a.position===Si.LEFT?(a.resize(i,s).move(u,g),u+=i):a.resize(i,s).move(_-i,g),e-=i,_-=i,a.render(t)}if(h){if(h.vertical){const t=h.mw;h.resize(t,s),h.position===Si.LEFT?(h.move(u,g),u+=t):h.move(_-t,g),e-=t,_-=t}else{const t=h.mh;h.resize(e,t),h.position===Si.TOP?(h.move(u,g),g+=t):(h.move(u,c-t),p-=t),s-=t,c-=t}h.render(t)}if(o&&o.model.position()===Dh.BEFORE&&i(),l=this._pageScrollerView,l&&l.visible){const i=l.mh;l.resize(e,i).move(u,c-i),s-=i,c-=i,l.render(t)}if(a&&!a.vertical){const i=a.mh;a.position===Si.TOP?(a.resize(e,i).move(u,g),g+=i):(a.resize(e,i).move(u,c-i),p-=i),s-=i,c-=i,a.render(t)}if(l=this._footerView,l&&l.visible){const i=l.mh;p-=i,l.resize(e,i).move(u,p),s-=i,c-=i,l.render(t)}if(l=this._searchResultView,l&&l.visible){const i=l.mh;p-=i,l.resize(e,i).move(u,p),s-=i,c-=i,l.render(t)}for(const i of this._headerViews)if(i&&i.visible){const r=i.mh;i.resize(e,r).move(u,g),s-=r,g+=r,i.render(t)}o&&o.model.position()===Dh.AFTER&&i();let f=0;if(l=d,l){const t=l.mw;l.resize(t,s).move(e-t,g),this._scrollBarView.model().floating()||(f+=t)}if(l=this._indexBarView,l&&l.visible){const i=l.mw,r=l.mh;l.resize(i,r).move(e-f-i,(s-r)/2),l.render(t),this._indexBarView.model().floating()||(f+=i)}this._panelContainer.setBounds(0,g,e,s);const w=this.$_getPanelView(this._activePanel);if(w&&!w.animating()){const e=w.mw,s=w.mh;w.resize(e,s),this.$_movePanel(w),w.render(t)}const m=this._bodyView;m.resize(e,Math.max(0,s)).move(u,g),m.render(t),m.isEmpty()&&d&&(d.setVisible(!1),d=null),h&&(this.$_setScrollRate(h,r,n,!1),h.render(t)),d&&(this.$_setScrollBar(d,!1),d.render(t)),this._toolContainer.setBounds(0,0,e,c)}_doMeasureHorz(t,e,s){const i=this._owner,r=i.searchResult();let n,o=s,a=e,h=0,l=0,d=0,_=0;this.rightMargin=0;const c=this._scrollIndicatorView;c&&c.visible&&(n=c.measure(t,this,a,o),o-=n.height);const u=this._runPageNavigator;u&&u.vertical;const g=this._headerView;g&&g.visible&&(g.setLayout(g.model().layout()),h=g.measure(t,this,a,o).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(r),l=this._searchBarView.measure(t,this,a,o).height),this._searchResultView&&(this._searchResultView.setResult(r),this._searchResultView.visible&&(d=this._searchResultView.measure(t,this,a,o).height));const p=this._footerView;p&&p.visible&&(p.setLayout(p.model().layout()),_=p.measure(t,this,a,o).height),o-=h+l+d+_,this._scrollBarView&&this._scrollBarView.visible&&(n=this._scrollBarView.measure(t,this,a,o),this._scrollBarView.model().floating());const f=this.$_getPanelView(this._activePanel);return f&&!f.animating()&&f.measure(t,this,e,o),this._bodyView._searchResult=r,this._bodyView.measure(t,i,a,o),{width:e,height:s}}_doRenderHorz(t,e,s){const i=this.scrollPos(),r=this.scrollOff();let n,o=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,a=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,h=s,l=0;if(n=o,n){const t=n.mh;n.resize(e,t).move(0,l),s-=t,l+=t}if(n=this._footerView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,h-i),s-=i,h-=i,n.render(t)}if(n=this._searchResultView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,h-i),s-=i,h-=i,n.render(t)}if(n=this._headerView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,l),s-=i,l+=i,n.render(t)}if(n=this._searchBarView,n&&n.visible){const i=n.mh;n.resize(e,i).move(0,l),s-=i,l+=i,n.render(t)}if(n=a,n){const t=n.mh;n.resize(e,t).move(0,h-t),this._scrollBarView.model().floating()}const d=this._bodyView;d.resize(e,Math.max(0,s)).move(0,l),d.render(t),d.isEmpty()&&(o&&(o.setVisible(!1),o=null),a&&(a.setVisible(!1),a=null)),o&&(this.$_setScrollRate(o,i,r,!1),o.render(t)),a&&(this.$_setScrollBar(a,!1),a.render(t)),this._panelContainer.move(0,l),this._panelContainer.setHeight(h-l);const _=this.$_getPanelView(this._activePanel);if(_&&!_.animating()){const e=_.mw,s=_.mh;_.resize(e,s).move(0,0),_.render(t)}}_doAfterRender(){this._runPageNavigator=null,this._bodyView.checkItemViewOrders()}$_destroyPanel(t){if(t)return this._panelViews.splice(this._panelViews.indexOf(t),1),t.destroy()}$_getButtonPanel(t){const e=this._panelViews,s=t.getDisplay(this.isLandscape());let i=this._buttonPanelView;return i&&i.display()==s||(this.$_destroyPanel(i),i=Ko.createView(this.doc,t,s),e.push(this._buttonPanelView=i)),i}$_getFormPanel(t){const e=this._panelViews;return this._formPanelView||e.push(this._formPanelView=new Xo(this.doc,t)),this._formPanelView}$_getSearchPanel(t){const e=this._panelViews,s=t.getDisplay(this.isLandscape());let i=this._searchPanelView;return i&&i.display()==s||(this.$_destroyPanel(i),i=ia.createView(this.doc,t,s),e.push(this._searchPanelView=i)),i}$_getFilterPanel(t){const e=this._panelViews;return this._filterPanelView||e.push(this._filterPanelView=new ba(this.doc,t)),this._filterPanelView}$_setScrollRate(t,e,s,i){if(t){const s=this._owner,r=this._bodyView,n=this._vertical;if(s.isSingleRow())t.updateRate(this._owner,e,1,1,i);else if(s.preMode()){const e=r.getPreLength(),s=r.itemLayerOff()+(n?r.height:r.width);t.setRate(s/e,i)}else{const n=r.lastItemView();if(n){const o=this._vertical?n.height:n.width,a=this._vertical?r.height-n.y:r.width-n.x;t.updateRate(s,e+r.itemViewCount()-1,o,a,i)}}}}$_getPageLen(t){const e=this._bodyView._itemPoints();let s=e.length-1;if(s>0){let i=s-t.scrollOff()/(e[1]-e[0]);return i-=(e[s]-(this._vertical?t.height:t.width))/(e[s]-e[s-1]),i}return 0}$_setScrollBar(t,e){if(t&&t.visible){const s=this._bodyView,i=s.scrollPos();if(s._preMode){const r=s.getPreLength(),n=s.getPrePos(i,s.scrollOff());t.setScroll(r,this._vertical?s.height:s.width,n,e)}else{const r=this._owner,n=r.isPaging()?r.pageSize():r.isGrouped()?r.groupModel().visItemCount():r.data().rowCount(),o=this._vertical?s.getItemView(0).height:s.getItemView(0).width,a=i+(s.itemViewCount()>0?s.scrollOff()/o:0),h=this.$_getPageLen(s);t.setScroll(n,h,a,e)}}}$_getPanelView(t){return this._panelViews,t instanceof Gn?this.$_getButtonPanel(t):t instanceof Un?this.$_getFormPanel(t):t instanceof qn?this.$_getSearchPanel(t):t instanceof ho?this.$_getFilterPanel(t):void 0}$_movePanel(t){const e=this._panelContainer.width,s=this._panelContainer.height;let i=0,r=0;switch(t.model().getPosition()){case vn.RIGHT:i=e-t.mw;break;case vn.BOTTOM:r=s-t.mh;break;case vn.CENTER:i+=(e-t.mw)/2,r+=(s-t.mh)/2;break;case vn.LEFT:case vn.TOP:}t.move(i,r)}$_hidePanel(t,e,s,i){function r(e){t.setVisible(!1),e._panelContainer.removeChild(t),e._activePanel=null,i&&i()}if(this._panelContainer.dom.style.pointerEvents="none",this.canAnimate()){const i=function(){switch(t.model().getPosition()){case vn.CENTER:return[{opacity:"1"},{opacity:"0"}];case vn.LEFT:return[{left:"0px"},{left:Ot(-t.width)}];case vn.RIGHT:return[{left:Ot(e-t.width)},{left:Ot(e)}];case vn.BOTTOM:return[{top:Ot(s-t.height)},{top:Ot(s)}];case vn.TOP:default:return[{top:"0px"},{top:Ot(-t.height)}]}}(),n=t.dom.animate(i,{duration:Ph.PANEL_DURATION,fill:"backwards"});t.setAnimating(!0),n.addEventListener("finish",()=>{t.setAnimating(!1),r(this)})}else r(this)}$_showPanel(t,e,s,i){function r(t){i&&i()}if(this._activePanel=t.model(),this._panelContainer.dom.style.pointerEvents="auto",this._panelContainer.addChild(t),t.setVisible(!0),t.refresh(this,e,s),this.$_movePanel(t),this.canAnimate()){const i=function(){switch(t.model().getPosition()){case vn.CENTER:return[{opacity:"0"},{opacity:"1"}];case vn.LEFT:return[{left:Ot(-t.width)},{left:"0px"}];case vn.RIGHT:return[{left:Ot(e)},{left:Ot(e-t.width)}];case vn.BOTTOM:return[{top:Ot(s)},{top:Ot(s-t.height)}];case vn.TOP:default:return[{top:Ot(-t.height)},{top:"0px"}]}}(),n=t.dom.animate(i,{duration:Ph.PANEL_DURATION,fill:"backwards"});t.setAnimating(!0),n.addEventListener("finish",()=>{t.setAnimating(!1),r()})}else r()}}Ph.CLASS_NAME="rtc-list-view",Ph.PANEL_DURATION=250;class Ih extends wo{}class Nh extends wo{}const Oh={vlinear:class extends xo{isCheckHorzExplicits(){return!0}_doPrepareRender(t,e){if(super._doPrepareRender(t,e),this._gaps=[],this._szGap=0,this._visibles.length>0){const t=this.model().itemGap,s=this._gaps;let i=!0;this._visibles.forEach((r,n)=>{r.prepareView(e),r.isSpacer()?(s.push(0),i=!0):i?(s.push(0),i=!1):(s.push(t),this._szGap+=t)})}}_doMeasureLayout(t,e,s,i){const r=this._visibles;let n=this.mw,o=this.mh;if((i-=this._szGap)!==this._prevMax.height){let a=0,h=0;this._measureChildren(r,t,e,s,i,t=>{a+=t.mh,h=Math.max(h,t.mw)}),o=a,n=h,this._prevMax.height=i}if(!isNaN(this._explicitHeight)){const a=i-o;let h=!1;if(a<0&&this._model.canShrink()){const n=[];let o=0,a=0;for(const t of r){const e=It(t.model().getChildProp("shrink"),1);e>0&&(n.push(t),o+=t._expand=e),a+=t.mh}if(h=0!==o){let r=a-i,h=0;if(o>=1){for(const t of n)h+=t.mh*t._expand;for(const i of n){const n=i.mh-i._expand*i.mh/h*r;i.measureLayout(t,e,s,n),i.mh=n}}else if(o>0){r*=o;for(const t of n)h+=t.mh;o=0;for(const t of n)o+=t._expand*=t.mh/h;for(const i of n){const n=i.mh-r*i._expand/o;i.measureLayout(t,e,s,n),i.mh=n}}}}else if(a>0&&this._model.canGrow()){const n=[];let o=0,a=0;for(const t of r){const e=t.model(),s=Nt(e.getChildProp("grow"),e.getChildProp("vgrow"),0);s>0&&(n.push(t),o+=t._expand=s),a+=t.mh}if(h=0!==o){let r=i-a;for(const i of n){const n=i.mh+r*i._expand/o;i.measureLayout(t,e,s,n),i.mh=n}}}if(h){let t=0,e=0;r.forEach(s=>{t+=s.mh,e=Math.max(e,s.mw)}),n=e,o=t}}return{width:n,height:o+this._szGap}}_doLayoutContent(t,e,s){const i=this._model,r=this._visibles,n=r.length,o=this._gaps;let a=0;const h=a;r.forEach((t,e)=>{const s=o[e];t.my=a+s,a+=t.mh+s});if((s-=a-h)>1){const t=i.itemsArrange;let e=!0,o=0;switch(t){case At.CENTER:o=s/2|0;break;case At.END:o=0|s;break;case At.SPACE_BETWEEN:e=!0;case At.SPACE_AROUND:{const t=s/(e?n-1:n+1);let i=e?0:t;r.forEach(e=>{e.my+=0|i,i+=t})}}0!==o&&r.forEach(t=>{t.my+=o})}const l=i.itemsAlign;r.forEach(t=>{const s=t.model(),i=s.getLeftIn(e),r=s.getRightIn(e);let n;(t.mw>e||t.isSpacer())&&(t.mw=e),n=isNaN(i)?isNaN(r)?l===Et.LEFT?0:l===Et.RIGHT?e-t.mw:(e-t.mw)/2:e-t.mw-r:i,t.mx=n,t.applyMeasuredBounds()})}},hlinear:class extends xo{isCheckVertExplicits(){return!0}_doPrepareRender(t,e){if(super._doPrepareRender(t,e),this._gaps=[],this._szGap=0,this._visibles.length>0){const t=this.model().itemGap,s=this._gaps;let i=!0;this._visibles.forEach(r=>{r.prepareView(e),r.isSpacer()?(s.push(0),i=!0):i?(s.push(0),i=!1):(s.push(t),this._szGap+=t)})}}_doMeasureLayout(t,e,s,i){const r=this._visibles;let n=this.mw,o=this.mh;if((s-=this._szGap)!==this._prevMax.width){let a=0,h=0;this._measureChildren(r,t,e,s,i,t=>{a+=t.mw,h=Math.max(h,t.mh)}),n=a,o=h,this._prevMax.width=s}if(!isNaN(this._explicitWidth)){const a=s-n;let h=!1;if(a<0&&this._model.canShrink()){const n=[];let o=0,a=0;for(const t of r){const e=It(t.model().getChildProp("shrink"),1);e>0&&(n.push(t),o+=t._expand=e),a+=t.mw}if(h=0!==o){let r=a-s,h=0;if(o>=1){for(const t of n)h+=t.mw*t._expand;for(const s of n){const n=s.mw-s._expand*s.mw/h*r;s.measureLayout(t,e,n,i),s.mw=n}}else if(o>0){r*=o;for(const t of n)h+=t.mw;o=0;for(const t of n)o+=t._expand*=t.mw/h;for(const s of n){const n=s.mw-r*s._expand/o;s.measureLayout(t,e,n,i),s.mw=n}}}}else if(a>0&&this._model.canGrow()){const n=[];let o=0,a=0;for(const t of r){const e=Nt(t.model().getChildProp("grow"),t.model().getChildProp("hgrow"),0);e>0&&(n.push(t),o+=t._expand=e),a+=t.mw}if(h=0!==o){let r=s-a;for(const s of n){const n=s.mw+r*s._expand/o;s.measureLayout(t,e,n,i),s.mw=n}}}if(h){let t=0,e=0;r.forEach(s=>{t+=s.mw,e=Math.max(e,s.mh)}),n=t,o=e}}return{width:n+this._szGap,height:o}}_doLayoutContent(t,e,s){const i=this._model,r=this._visibles,n=r.length,o=this._gaps;let a=0;const h=a;r.forEach((t,e)=>{const s=o[e];t.mx=a+s,a+=t.mw+s});if((e-=a-h)>1){const t=i.itemsArrange;let s=!1,o=0;switch(t){case At.CENTER:o=e/2|0;break;case At.END:o=0|e;break;case At.SPACE_BETWEEN:s=!0;case At.SPACE_AROUND:{const t=e/(s?n-1:n+1);let i=s?0:t;r.forEach(e=>{e.mx+=0|i,i+=t})}}0!==o&&r.forEach(t=>{t.mx+=o})}const l=i.itemsAlign;r.forEach(t=>{const e=t.model(),i=e.getTopIn(s),r=e.getBottomIn(s);let n;(t.mh>s||t.isSpacer())&&(t.mh=s),n=isNaN(i)?isNaN(r)?l===Vt.TOP?0:l===Vt.BOTTOM?s-t.mh:(s-t.mh)/2:s-t.mh-r:i,t.my=n,t.applyMeasuredBounds()})}},frame:class extends fn{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.forEach(t=>{t.prepareView(e),t.setRelativePositions()})}},stack:class extends fn{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e);const s=this._model.getActiveChild(e,this._model.row);let i=this._visibles.find(t=>t.model().id()===s);i||(i=this._visibles.length>0?this._visibles[this._visibles.length-1]:null),this._visibles.forEach(t=>t._internalVisible(t===i)),i?(this._childView=i,i.prepareView(e),i.setRelativePositions(),this._visibles=[i]):this._visibles=[]}},scroll:class extends cn{constructor(t,e){super(t,e)}scrollable(){return!0}_doInitContent(t,e){super._doInitContent(t,e),e.style.overflow="auto"}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.length>0&&this._visibles[0].prepareView(e)}_doLayoutContent(t,e,s){this._visibles.length>0&&this._visibles[0].applyMeasuredBounds()}_doMeasureLayout(t,e,s,i){return this._measureChildren(this._visibles,t,e,s,i,null),{width:s,height:i}}},form:sa,grid:class extends cn{constructor(t,e){super(t,e)}_doLayoutContent(t,e,s){}_doMeasureLayout(t,e,s,i){this._measureChildren(this._visibles,t,e,s,i,null)}}};class Bh extends ce{constructor(t){super(t,!1,"rtc-search-field"),this.setVisible(!1)}_doInitDom(t,e){["tl","tr","bl","br"].forEach(s=>{const i=t.createElement("span"),r={position:"absolute",width:"5px",height:"5px",borderStyle:"solid"},n=s.charAt(0),o=s.charAt(1);r[le[n]+"Width"]="2px",r[le[o]+"Width"]="2px","b"===n&&(r.bottom="0"),"r"===o&&(r.right="0"),Object.assign(i.style,r),e.appendChild(i)})}}class Fh extends Oi{constructor(t,e){super(t,!0,Fh.CLASS_NAME),this._layoutChanged=!1,this._body=e,this.setVisible(!1)}_doDestory(){this._body=null,super._doDestory()}_doInitDom(t,e){}_getContentPosition(){return"absolute"}_doPrepareRender(t,e){const s=e,i=this._model=s.current().attachedRow(),r=i.layout(),n=this.content;if(this._vertical=s.isVertical(),this.dom.dataset.dir=this._vertical?"v":"h",r)if(this._layoutChanged=!this._layout||r.layout.tid!==this._layout.tid,this._layout=r.layout,this._rowStyle=r.rowStyle,this._layoutChanged&&this._layoutView&&(n.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView)this._layoutView&&this._layoutView.refreshModels(this._layout);else{const e=this._body.listView();this._layoutView=e.createLayoutView(t,this._layout),this._layoutView.build(t,e),n.appendChild(this._layoutView.dom)}else this._layoutView&&(n.removeChild(this._layoutView.dom),this._layoutView=null);if(s.isDataAppending()&&i.indicatorVisible()){!this._indicator||this._indiSize===i.indicatorSize()&&this._indiType===i.indicatorType()||(de.hide(this._indicator),de.clearChildren(this._indicator)),this._indicator||(this._indicator=Ts.create(t),this._indicator.style.position="absolute",this.appendDom(this._indicator));const e=this._indiSize=i.indicatorSize();de.show(this._indicator),de.resize(this._indicator,e,e),Is.render(t,this._indicator,{type:this._indiType=i.indicatorType(),itemCount:10,width:e,height:e})}else this._indicator&&(de.hide(this._indicator),this._indiSize=0)}_doApplyStyles(t){this._rowStyle&&(t=this.content.style,Object.assign(t,this._rowStyle.default))}_doMeasure(t,e,s){const i=this._model,r=this._padding=de.getPadding(this.dom),n=e,o=s,a=r.left+r.right,h=r.top+r.bottom;let l=0;if(e-=a,s-=h,this._indiSize>0&&(l=this._indiSize+2*i.indicatorMargin()),this._space=Math.max(0,It(i.endSpace(),0)),this._vertical){let i=0;if(this._layoutView){const r=this._body.listView();this._layoutView.prepareLayout(t,r),this._layoutView._explicitWidth=e,i+=this._layoutView.measureLayout(t,r,e,s).height+h,e+=a}return i+=l+this._space,{width:n,height:i}}{let i=0;if(this._layoutView){const r=this._body.listView();this._layoutView.prepareLayout(t,r),this._layoutView._explicitHeight=s,i+=this._layoutView.measureLayout(t,r,e,s).width+a,s+=h}return i+=l+this._space,{width:i,height:o}}}_doRender(t,e,s){const i=this._padding,r=this._layoutView;if(e-=i.left+i.right,s-=i.top+i.bottom,this.setContentBounds(i.left,i.top,e,s),this._vertical){let s=0;r&&(r.resizeByMeasure().render(t),s+=r.height+i.top+i.bottom),this._indiSize>0&&this._indicator&&de.move(this._indicator,(e-this._indiSize)/2,s+this._model.indicatorMargin())}else{let e=0;r&&(r.resizeByMeasure().render(t),e+=r.width+i.left+i.right),this._indiSize>0&&this._indicator&&de.move(this._indicator,e+this._model.indicatorMargin(),(s-this._indiSize)/2)}}}Fh.CLASS_NAME="rtc-attached-row";class zh extends ce{_doInitDom(t,e){Object.assign(e.style,{width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"})}}class Hh extends Oi{constructor(t){super(t,!1,Hh.CLASS_NAME),this._vertical=!0,this._rowViewPool=[],this._rowViewMap={},this._touchedRow=-1,this._commandRow=-1,this._noCache=!1,this._positionsDirty=!1,this._arVis=!1,this._scrollPos=0,this._scrollOff=0,this._topRow=0,this._focusedRow=-1,this._rowEnded=!1,this._scrollEnded=!1,this._deletingRowIds=[],this.addChild(this._loadingView=new Ih(t)),this.addChild(this._emptyView=new Nh(t)),this.addChild(this._indentLayer=new ce(t,!1,"rtc-indent-layer")),this.addChild(this._deletingLayer=new ce(t,!1,"rtc-deleting-layer")),this.addChild(this._itemLayer=new ce(t,!1,"rtc-item-layer")),this.addChild(this._itemSubLayer=new ce(t,!1,"rtc-items-sub")),this._itemSubLayer.addChild(this._attachedView=new Fh(t,this)),this._itemSubLayer.addChild(this._searchFieldView=new Bh(t)),this.addChild(this._maskLayer=new zh(t,!1,"rtc-mask-layer")),this.addChild(this._feedback=new ea(t)),this.addChild(this._toolLayer=new ue(t,!1,"rtc-tools")),this._itemLayer.moveY(0),this._itemSubLayer.moveY(0)}_doDestory(){this._focusView=this._focusView&&this._focusView.destroy(),this._selectionView=this._selectionView&&this._selectionView.destroy(),this._commandsView=this._commandsView&&this._commandsView.destroy(),super._doDestory()}listView(){return this._listView}owner(){return this._owner}isVertical(){return this._vertical}data(){return this._listView.data()}scrollPos(){return this._scrollPos}scrollOff(){return this._scrollOff}topRow(){return this._topRow}commandRow(){return this._commandRow}animating(){return!!this._rowAnimation}isRowEnded(){return this._rowEnded}isScrollEnded(){return this._scrollEnded}itemLayerOff(){return-this._itemLayer[this.POS]}length(){return this[this.SIZE]}isEmpty(){return this.itemViewCount()<1}addFeedback(t){this._toolLayer.appendDom(t)}indexOfRow(t){for(let e=0,s=this.itemViewCount();e<s;e++)if(this.getItemView(e).row()===t)return e;return-1}getRowView(t){return this._rowViewMap[this._dv.getRowId(t)]}getRenderer(t,e){let s;if(this._emptyView.visible)s=this._emptyView.simpleViewByDom(e,!0);else if(this._loadingView.visible)s=this._loadingView.simpleViewByDom(e,!0);else if(t>=0){s=this.getRowView(t).simpleViewByDom(e,!0)}return s&&s.renderer()}findSimpleLayoutView(t,e){var s;return null===(s=this.getRowView(t))||void 0===s?void 0:s.simpleViewByTag(e,!0)}findDom(t,e){return this.doc.getElementById(on.getDomId(t,NaN,e))}getRow(t){let e=t;for(;e;){if(e instanceof HTMLDivElement&&Bn.isRowView(e)){const t=this._rowViewOfDom(e);if(t)return t.row();break}e=e.parentElement}}setTouchedRow(t){if(t!==this._touchedRow){if(this._touchedRow>=0){const t=this.getRowView(this._touchedRow);t&&t.setTouched(!1)}if(this._touchedRow=t,this._touchedRow>=0){const t=this.getRowView(this._touchedRow);t&&t.setTouched(!0)}}}scrollBy(t){const e=this.doc,s=this._vertical,i=this.width,r=this.height;let n;if((t>>=0)<0){if(0===this._scrollPos&&0===this._scrollOff)return this.$_scrollEnded(!1),"near";t=s?Math.min(r,-t):Math.min(i,-t),n=this._doScrollNear(e,this._scrollPos,this._scrollOff,t,i,r),n.pos<=0&&n.off<=0?this.$_scrollEnded(!1):this.$_removeEndEffect()}else if(t>0){if(this.isScrollEnded())return this.$_scrollEnded(!0),"far";t=s?Math.min(r,t):Math.min(i,t),n=this._doScrollFar(e,this._scrollPos,this._scrollOff,t,i,r),this._scrollEnded?this.$_scrollEnded(!0):this.$_removeEndEffect()}if(n)return this._scrollPos=n.pos,this._scrollOff=n.off,this._topRow=n.row,this._searchResult&&this.$_renderSearchField(this._searchResult),this.$_renderSelection(e,i,r),!0}setCommands(t,e,s){this.control.lock(()=>{const i=this.getRowView(t);if(i){const r=this.doc,n=this._owner,o=n.isVertical(),a=i.getOffsetBounds(),h=n.commandBox().mode()===Go.SHIFT;let l=this._commandsView;if(this._commandRow=t,l||(l=this._commandsView=new Ho(r,n.commandBox()),this.addChild(this._commandsView)),l.visible=!0,l.setCommands(n.data(),t,e),l.measure(r,null,this.width,this.height),o?l.resize(l.mw,Math.max(a.height,l.mh)):l.resize(Math.max(a.width,l.mw),l.mh),l.render(r),o){const t=a.y+(this._itemLayer.y||0),e=a.x+a.width-l.mw+1,r=a.x-l.mw;l.move(e,t),this._commandPos=i.x,h&&i.move(r,t),s&&this.canAnimate()&&(this._commandsView.dom.animate([{left:a.x+a.width+"px"},{left:e+"px"}],{duration:150,fill:"none"}),h&&i.dom.animate([{left:a.x+"px"},{left:r+"px"}],{duration:150,fill:"none"}))}else{const t=a.x+(this._itemLayer.x||0),e=a.y+a.height-l.mh+1,r=a.y-l.mh;l.move(t,e),this._commandPos=i.y,h&&i.move(t,r),s&&this.canAnimate()&&(this._commandsView.dom.animate([{top:a.y+a.height+"px"},{top:e+"px"}],{duration:150,fill:"none"}),h&&i.dom.animate([{top:a.y+"px"},{top:r+"px"}],{duration:150,fill:"none"}))}}})}clearCommands(t){if(this._commandRow>=0){const t=this.getRowView(this._commandRow);this._commandsView.visible=!1,this._commandRow=-1,t&&(this._owner.isVertical()?t.moveX(this._commandPos):t.moveY(this._commandPos))}}focusedRowChanged(t,e){this._focusedRow=t}canMoveTo(t,e){return!0}_doInitDom(t,e){e.style.overflow="hidden"}_doPrepareRender(t,e){if(e){const t=e.isDataLoading(),s=this._vertical=e.isSingleRow()||e.isVertical();this._preMode=e.preMode(),this._noCache=e.noCache(),this._owner=e,this._dv=e.data(),this.SIZE=s?"height":"width",this.MEASURE_SIZE=s?"mh":"mw",this.POS=s?"y":"x",this._arVis=e.current().attachedRow().visible(),this._positionsDirty=e.isDataChanged(),this._loadingView.setVisible(t&&!e.skeletonVisible),this._emptyView.setVisible(!t&&e.shouldShowEmptyPage())}}_measureLayoutView(t,e,s,i,r,n,o){if(e.visible){const a=this._owner,h=s&&a.getTemplate(s)||wi.get(i),l=pi.Instance.layoutFromTemplate(a.wrapperOrThis(),-1,!1,!1,h,r||{inflateParam:function(t,e,s){},inflateStock:function(t,e,s){}});return e.setLayout(l),e.measure(t,this._listView,n,o),{width:n,height:o}}}_renderLayoutedView(t,e,s,i){if(e.visible)return e.resize(s,i),e.render(t),!0}_createRowAnimation(){let t;if(this._deletingRowIds.length>0){const e=this._deletingRowIds.sort((t,e)=>t-e);t=this._createRowsDeleingAnimation(e),this._deletingRowIds=[]}else this._detailingRow>=0&&(t=this._owner.isRowDetailed(this._detailingRow)?new Uh(this,this._detailingRow):new qh(this,this._detailingRow),this._detailingRow=-1);return t}_doMeasure(t,e,s){this._rowAnimation&&(this._rowAnimation.stop(),this._rowAnimation=null);const i=this._owner.current();let r=this._measureLayoutView(t,this._loadingView,i.loadingPage().template(),"@it_loading_page",i.loadingPage(),e,s)||this._measureLayoutView(t,this._emptyView,i.emptyPage().template(),"@it_empty_page",i.emptyPage(),e,s);return r||(this._rowAnimation=this._createRowAnimation(),this._searchFieldView.setVisible(!!this._searchResult),r=this._vertical?this._doMeasureVert(t,e,s):this._doMeasureHorz(t,e,s)),r}$_renderSelection(t,e,s){const i=this._owner.getSelection();let r=this._selectionView;i?(r||(r=this._selectionView=new Fo(t),this.addChild(r)),r.visible=!0,r.vertical=this._vertical,this._doRenderSelection(t,i,r,e,s)):r&&(r.visible=!1)}$_renderSearchField(t){const e=this._searchFieldView;if(t.isEmpty())e.setVisible(!1);else{const s=t.getCurrrentField(),i=this.getRowView(s.row);if(i){const t=i.simpleViewByModel(s.layout,!0);if(t){const s=this.getClientRect(),i=t.getClientRect();e.setVisible(!0),e.setBounds(i.x-s.x-4,i.y-s.y-2,t.width+8,t.height+4)}else e.setVisible(!1)}else e.setVisible(!1)}}_doRender(t,e,s){this._renderLayoutedView(t,this._loadingView,e,s)||this._renderLayoutedView(t,this._emptyView,e,s)||(this._feedback.resize(e,s),this._vertical?this._doRenderVert(t,e,s):this._doRenderHorz(t,e,s),this.$_renderSelection(t,e,s),this._searchResult&&this.$_renderSearchField(this._searchResult),this.setFocusedRow(this._focusedRow)),this._toolLayer.setBounds(0,0,e,s)}setFocusedRow(t){const e=t>=0?this.getRowView(t):void 0;if(e){this._focusView||(this._focusView=new Th(this.doc)),this._maskLayer.addChild(this._focusView);const t=this._listView.focusMask,s=e.getBounds(),i=e.getNearIndent(t.nearIndent());s.x+=i,s.width-=i+e.getFarIndent(t.farIndent()),this._focusView.setRect(s)}else this._focusView&&this._focusView.remove()}resetFocusedView(){this.setFocusedRow(this._focusedRow)}_doAfterRender(){this._rowAnimation&&this._rowAnimation.start(),x.log("ROW VIEW POOL: ",this._rowViewPool.length)}_moveItemLayer(t){this._vertical?(this._itemLayer.moveY(t),this._itemSubLayer.moveY(t),this._deletingLayer.moveY(t)):(this._itemLayer.moveX(t),this._itemSubLayer.moveX(t),this._deletingLayer.moveX(t))}_canShowAttached(t){return!t.isPaging()&&t.current().attachedRow().visible()}_measureAttached(t,e,s,i,r){const n=this._attachedView;if(this._canShowAttached(e)&&(n.setVisible(!0),n.measure(t,e,i,r).height>0))return n;n.setVisible(!1)}_getRowIndent(t){return 0}_getBodyIndent(t){return 0}_getBodyMargin(t){return 0}_prepareRowView(t,e,s){var i;const r=s.getRowLayout(e);t.setData("state",void 0),t.setLayout(r),t.indent=this._getRowIndent(t),t.bodyIndent=this._getBodyIndent(t),t.bodyMargin=this._getBodyMargin(t),t.alternate=e%2==1,t.rowState=s.data().internalRowState(e),t.detailed=s.isRowDetailed(e),t.checked=s.isRowChecked(e),t.selected=null===(i=s.getSelection())||void 0===i?void 0:i.isRowSelected(e),t.searched=s.isRowSearched(e)}_getRowView(t,e,s,i){const r=this._owner,n=this._rowViewMap,o=this._dv.getRowId(e);let a=n[o];if(a)delete n[o];else{const e=this._rowViewPool;if(e.length>0){for(let t=e.length-1;t>0;t--)if(e[t]._rowid===o){a=e.splice(t,1)[0];break}a||(a=e.pop(),a.$_borrowed())}a||(a=this._createItemView(t)),i?this._itemLayer.insertBefore(a,i):this._itemLayer.addChild(a)}return a.setRow(this._dv,e,o,s),this._prepareRowView(a,e,r),a}_returnRowView(t){this._itemLayer.removeChild(t),delete this._rowViewMap[t._rowid],this._rowViewPool.push(t)}_returnRowViews(t,e){for(let s=t.length-1;s>=e;s--)this._returnRowView(t[s])}_resetRowViews(t){let e=this._rowViewMap;for(const t in e){const s=e[t];this._returnRowView(s)}e=this._rowViewMap={};for(const s of t)s instanceof Bn&&(e[s._rowid]=s)}_addRowView(t,e,s,i,r,n,o){const a=this._getRowView(t,e,s,i),h=a.measure(t,this._listView,n-a.bodyIndent-a.bodyMargin,o);return r?a.resize(n-a.bodyIndent-a.bodyMargin,h.height):a.resize(h.width,o-a.bodyIndent-a.bodyMargin),a.render(t),this._rowViewMap[a._rowid]=a,a}_createItemView(t){return new Bn(t)}_setScrollPos(t,e,s){this._scrollPos=t,this._scrollOff=e,this._topRow=s}$_addDeletingRows(t){this.canAnimate()&&(Array.isArray(t)?this._deletingRowIds=this._deletingRowIds.concat(t):this._deletingRowIds.push(t))}$_setDetailingRow(t){this._detailingRow=t}$_scrollEnded(t){this.$_showOverEffect(t?this._vertical?P.UP:P.RIGHT:this._vertical?P.DOWN:P.LEFT)}$_showOverEffect(t){var e,s,i,r;this._owner.current().overScrollEffect(),this._feedback.showEndBalloon((e=0,s=0,i=this.width,r=this.height,{x:e,y:s,width:i,height:r}),t)}$_removeEndEffect(){this._owner.current().overScrollEffect(),this._feedback.removeEndBalloon()}}Hh.CLASS_NAME="rtc-body",Hh.DELETE_DURATION=300,Hh.DETAIL_DURATION=300;class Wh extends Mh{constructor(t,e){super(t);const s=t.isVertical(),i=e.sort((t,e)=>t-e);this.SIZE=s?"height":"width",this.POS=s?"y":"x",this.MOVE=s?"moveY":"moveX",this._allViews=t.itemViews(),this.$_collectDeleted(i)}_doStart(){return this._doPrepare(),this._rowAni=jr.create(t=>{this._doRun(t)},(t,e)=>{},Hh.DELETE_DURATION),!0}_doStop(){this.$_clear()}_doPrepare(){const t=this._bodyView,e=this.POS,s=this.SIZE,i=this._deletedViews,r=this._views=this._getItemViews(),n=r.slice(0),o=r.length>0?r[0][e]:0;let a=o,h=0;i.forEach(t=>t.rv.newPos=t.rv[e]),r.forEach(t=>t.newPos=t[e]),i.forEach(t=>{const e=t.rv.vindex(),s=n.findIndex(t=>t.vindex()===e);s>=0?n.splice(s,0,t.rv):e>n[n.length-1].vindex()&&n.push(t.rv)}),n.forEach(t=>{t.oldPos=a,a+=t[s],h+=t[s]}),t.isScrollEnded()&&h>t[s]&&(a=h-t[s]+o,r.forEach(t=>{t.oldPos-=a}))}_preparePre(){const t=this.POS,e=this._allViews,s=this._deletedViews,i=this._views=this._getItemViews();let r=0;e.forEach(t=>{t.oldPos=r,r+=t.height}),s.forEach(e=>{e.rv.newPos=e[t]}),i.forEach(e=>{e.newPos=e[t]})}_doRun(t){const e=this.MOVE;this._views.forEach(s=>{s[e](s.oldPos+(s.newPos-s.oldPos)*t)})}$_collectDeleted(t){const e=this._bodyView.isVertical(),s=this._bodyView._rowViewMap,i=this._bodyView._deletingLayer,r=this._deletedViews=[],n=e?this._bodyView.width:this._bodyView.height;for(const o of t){const t=s[o];if(t){const a={};a[e?"left":"top"]=["0px",Ot(-n)],a[e?"height":"width"]=[Ot(e?t.height:t.width),"0px"];const h=t.dom.animate(a,{duration:Hh.DELETE_DURATION,fill:"none"}),l={rv:t,ani:h};h.addEventListener("finish",()=>{i.removeChild(t)}),h.addEventListener("cancel",()=>{i.removeChild(t)}),r.push(l),l.rv.aniTag=e?l.rv.height:l.rv.width,i.addChild(l.rv),delete s[o]}}r.sort((t,e)=>t.rv.row()-e.rv.row())}$_clear(){const t=this._bodyView._rowViewPool,s=this._bodyView._deletingLayer,i=this._deletedViews;if(i)for(let e=i.length-1;e>=0;e--){const r=i[e];r.ani=de.stopAnimation(r.ani),s.removeChild(r.rv),t.push(r.rv),i.splice(e,1)}this._rowAni=e.destroy(this._rowAni)}}class Gh extends Mh{constructor(t,e){super(t),this._rowView=t.getRowView(e),this._oldHeight=this._rowView.height}_doStart(){const t=this._rowView.bottom()-this._bodyView.height;return this._ani=this._createAnimation(),this._moveOthers(this.$_collectOtherViews(),this._rowView.height-this._oldHeight),t>0&&this._bodyView._owner.scrollBy(t),!0}_doStop(){this._ani=de.stopAnimation(this._ani),this._rowView=null}$_collectOtherViews(){const t=this._bodyView.isVertical(),e=[],s=this._rowView.row(),i=this._bodyView,r=i.itemViewCount(),n=i.indexOfRow(s);if(n>=0&&n+1<r)for(let s=n+1;s<r;s++){const r=i.getItemView(s);e.push(r),r.aniTag=t?r.y:r.x}return e}}class Uh extends Gh{_createAnimation(){const t=this._rowView.height;return this._rowView.dom.animate([{height:this._oldHeight+"px"},{height:t+"px"}],{duration:Hh.DETAIL_DURATION,fill:"none"})}_moveOthers(t,e){this._moveAni=jr.create(s=>{t.forEach(t=>this._doStep(t,e,s))},(t,e)=>{this._bodyView.control.invalidateLayout()},Hh.DETAIL_DURATION)}_doStep(t,e,s){t.moveY(t.aniTag-e+e*s)}_doStop(){this._moveAni=e.destroy(this._moveAni),super._doStop()}}class qh extends Uh{}class jh extends Ph{canMoveSingle(t,e){return this._bodyView.canMoveSingle(t,e)}_createBodyView(t,e,s){return e?s?new Zh(t):new tl(t):s?new Zh(t):new Qh(t)}_doMeasure(t,e,s){const i=this.headerView(),r=this.footerView(),n=this._owner,o=n.data(),a=this.renderInfo();return this.reqScrollPos=a&&o?Math.max(0,Math.min(n.getRowCount()-1,a.scrollPos)):0,this.reqScrollOff=a?a.scrollOff:0,n.isSingleRow()&&o?(i&&i.model().setTopRow(this.reqScrollPos),r&&r.model().setTopRow(this.reqScrollPos)):(i&&i.model().setTopRow(NaN),r&&r.model().setTopRow(NaN)),this._bodyView._expander=n.groupExpander(),super._doMeasure(t,e,s)}}class Yh extends Wh{_getItemViews(){return this._bodyView._internalRowViews()}}class Qh extends Hh{constructor(){super(...arguments),this._rowViews=[],this._rowPts=[0],this._singleMode=!1,this.singleMoving=!1}_internalRowPoints(){return this._rowPts}singleView(){return this._singleView}spareSingleView(){return this._spareSingleView||(this._spareSingleView=this.$_createSingleView(this.doc,!0)),this._spareSingleView}canMoveSingle(t,e){if(this._singleMode){const s=this.owner(),i=this._singleView.row(),r=s.getRowCount();if(t>0){if(i>0)return!0;e&&this.$_showOverEffect(P.LEFT)}else if(t<0){if(i<r-1)return!0;e&&this.$_showOverEffect(P.RIGHT)}}}rowViewAt(t){return this._rowViews[t]}_internalRowViews(){return this._rowViews}bottomRow(){return this._topRow+this._rowPts.length-1}isEmpty(){return!this._singleMode&&this._rowPts.length<2}itemViewCount(){return this._rowPts.length-1}_itemPoints(){return this._rowPts}rowViewCount(){return this._rowPts.length-1}lastItemView(){return this._rowViews[this._rowViews.length-1]}getItemViewPoints(){return this._rowPts.slice(0)}itemViews(){return this._rowViews.slice(0)}getItemView(t){return this._rowViews[t]}itemViewAt(t,e,s){const i=this._vertical?e:t,r=this._rowPts;for(let t=0,e=r.length-1;t<e;t++)if(s>0&&(s=Math.min((r[t+1]-r[t])/2,s)),i>=r[t]+s&&i<r[t+1]-s)return this._rowViews[t]}getRowView(t){return this._singleMode?t===this._singleView.row()?this._singleView.rowView():null:super.getRowView(t)}getPreLength(){return this._rowPts[this._rowPts.length-1]+(this._attachedView.visible?this._attachedView[this.SIZE]:0)}getPrePos(t,e){return this._rowPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){if(this._singleMode)return this._singleView.rowView().isDom(t)?this._singleView.rowView():null;for(const e of this._rowViews)if(e.isDom(t))return e}validateViews(){const t=this._listView.owner(),e=this.height,s=this._rowViews,i=this._rowViewMap,r=this._rowPts,n=r.length;if(r.length!==s.length+1)throw`Invalid length: ${r.length}, ${s.length}`;if(0!==s.length){if(s[0].row()!==t.getRowAt(this.scrollPos()))throw`Invalid top index: ${this.scrollPos()}, ${s[0].row()}`;s.forEach(t=>{if(!i[t._rowid])throw`Invalid map: ${t.row()} is not in view map.`});for(let t in i)if(!s.find(e=>e._rowid===+t))throw`Invalid map: ${t} is not in view array.`;if(-r[0]!==this.scrollOff())throw`Invalid start: ${r[0]}, ${this.scrollOff()}`;for(let t=1;t<n;t++)if(r[t]<0||r[t]<=r[t-1])throw`Invalid pos: ${t}, ${r[t]}`;for(let t=1;t<n-1;t++)if(r[t]>e)throw`Invalid end pos: ${t}, ${r[t]}`;if(r[n-1]<e&&0!==r[0])throw"Invalid first pos: "+r[0];r[0];for(let t=0;t<n-1;t++){const e=r[t+1]-r[t];if(e!==s[t].height)throw`Invalid height: ${t}, ${e}, ${s[t].height}`}}}$_createSingleView(t,e){return new Kh(t,this,this._owner.current().singleRow(),e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._indentLayer.setVisible(!1),this._singleMode=e&&e.isSingleRow(),e&&(this._singleMode?(this._singleView||(this.insertBefore(this._singleView=this.$_createSingleView(t,!1),this._feedback),this._singleView._doPrepareRender(t,e)),this._singleView.setVisible(!0)):this._singleView&&(this._singleView.setVisible(!1),this._spareSingleView&&this._spareSingleView.setVisible(!1)))}$_clearRowViews(){this._itemLayer.clear(),this._returnRowViews(this._rowViews,0),this._rowViews=[],this._rowViewMap={}}_measureSingle(t,e,s){const i=this._listView,r=i.reqScrollPos,n=i.reqScrollOff;this.$_clearRowViews(),this._setScrollPos(r,n,r);const o=this._singleView._doMeasureVert(t,e,s);return this._singleView.mh=o.height,o}_doMeasureVert(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[];let a,h=i.reqScrollPos,l=i.reqScrollOff,d=h,_=s+l,c=0;for(;_>0&&d<n;){const n=r.getRowAt(d),a=this._getRowView(t,n,null,null),h=a.measure(t,i,e,s);o.push(a),_-=h.height,c=Math.max(c,h.width),d++}if(d===n&&_>0&&(a=this._measureAttached(t,r,!0,e,_))&&(_-=a.mh),_>0)for(l>0&&(_>l?(_-=l,l=0):(l-=_,_=0));h>0&&_>0;){const n=this._getRowView(t,r.getRowAt(h-1),null,null),a=n.measure(t,i,e,s);o.unshift(n),_>=a.height?_-=a.height:(l=a.height-_,_=0),c=Math.max(c,a.width),h--}return o.length>0?(this._setScrollPos(h,l,o[0].row()),!r.isPaging()&&T(o[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:c,height:s-_}}_doMeasureHorz(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner();let n=i.reqScrollPos,o=i.reqScrollOff;const a=r.getRowCount(),h=this._rowViews=[];let l=n,d=e+o,_=0;for(;d>0&&l<a;){const n=r.getRowAt(l),o=this._getRowView(t,n,null,null),a=o.measure(t,i,e,s);h.push(o),d-=a.width,_=Math.max(_,a.height),l++}if(r.isDataAppending(),d>0)for(o>0&&(d>o?(d-=o,o=0):(o-=d,d=0));n>0&&d>0;){const a=this._getRowView(t,r.getRowAt(n-1),null,null),l=a.measure(t,i,e,s);h.unshift(a),d>=l.width?d-=l.width:(o=l.width-d,d=0),_=Math.max(_,l.height),n--}return h.length>0?(this._setScrollPos(n,o,h[0].row()),!r.isPaging()&&h.length>0&&T(h[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:e-d,height:_}}_doRenderVert(t,e,s){if(this._singleMode){const i=Math.max(s,this._singleView.mh);this._singleView.resize(e,i),this._singleView.move(0,-this._scrollOff),this._singleView._doRenderVert(t,e,i)}else this._renderVert(t,this.scrollOff(),e,s),this._resetRowViews(this._rowViews)}_doRenderHorz(t,e,s){if(this._singleMode){const i=Math.max(e,this._singleView.mw);this._singleView.resize(i,s),this._singleView.move(-this._scrollOff,0),this._singleView._doRenderHorz(t,i,s)}else this._renderHorz(t,this.scrollOff(),e,s),this._resetRowViews(this._rowViews)}_doAfterRender(){this._singleMode?this._singleView._doAfterRender():super._doAfterRender()}_doRenderSelection(t,e,s,i,r){let n=e.start,o=e.end;const a=this.topRow(),h=this.rowViewCount();if(s.visible=n<a+h&&o>=a){n-=a,o-=a;const h=It(this._rowPts[n],-20),l=It(this._rowPts[o+1]-h,(this._vertical?r:i)+20);this._vertical?(s.measure(t,e,i,l),s.move(0,h).resize(i,l)):(s.measure(t,e,l,r),s.move(h,0).resize(l,r)),s.render(t)}}_doScrollNear(t,e,s,i,r,n){const o=this._listView.owner(),a=this._vertical,h=this._rowViews;let l,d=e,_=s;for(_>0&&(i>_?(i-=_,_=0):(_-=i,i=0));i>0&&d>0;){const e=h.length>0?h[0]:null;l=this._addRowView(t,o.getRowAt(--d),null,e,a,r,n),h.unshift(l),(i-=a?l.height:l.width)<=0&&(_=-i)}for(a?this._renderVert(t,_,r,n,!1,!1):this._renderHorz(t,_,r,n,!1,!1);h.length>1;){const t=h[h.length-1];if(!(t.y>=n))break;this._returnRowView(t),h.pop(),this._rowPts.pop()}return h.length>0?{pos:d,off:_,row:h[0].row()}:{pos:0,off:0,row:-1}}$_scrollSingle(t){const e=this._singleView.height-this.height;let s=this._scrollOff;return t>>=0,s=Math.min(e,Math.max(0,s+t)),this._singleView.moveY(-s),this._scrollOff=s,s<=0&&t<0?(this.$_scrollEnded(!1),"near"):s>=e&&t>0?(this.$_scrollEnded(!0),"far"):0!==t}scrollBy(t){return this._singleMode?this.$_scrollSingle(t):super.scrollBy(t)}_doScrollFar(t,e,s,i,r,n){function o(t){w[0]=t,u.forEach((t,e)=>w[e+1]=w[e]+t[l.SIZE]),w[w.length-1]}function a(){const t=u[0];l._returnRowView(t),u.splice(0,1),w.pop(),o(0)}function h(){if(g&&!p.visible)return p.setVisible(!0),f=p.measure(t,d,r,n)[l.SIZE],S=!0,!0}const l=this,d=this._listView.owner(),_=d.getEndRow(),c=this._vertical,u=this._rowViews,g=this._arVis,p=this._attachedView;let f=p.visible?c?p.height:p.width:0;const w=this._rowPts,m=c?n:r;w[w.length-1];let y=e,v=s;const b=w[1]-w[0];let S=!1;for(T(v===-w[0],"-off가 pts[0]과 동일해야 한다."),v>0&&(i>=b-v?(i-=b-v,v=0,y++,a()):(v+=i,i=0,o(-v)));i>0;){const t=y-e,s=w[t+1]-w[t];(i-=s)<0?(v=s+i,o(-v)):u.length>0&&u[u.length-1].row()<_?(y++,a()):(o(-v),i=0)}return function(){let e=w[w.length-1]+f;for(;e<m;){let s=m-e;const i=u.length>0?u[u.length-1].row():_;if(i===_){if(h()&&(e+=f,s-=f,s<=0))break;if(v>=s){v-=s,o(-v);break}for(s-=v,v=0;s>0&&y>0;){y--;const i=l._addRowView(t,y,null,null,c,r,n),o=i[l.SIZE];u.unshift(i),e+=o,o>s?(v=o-s,s=0):(s-=o,v=0)}o(-v)}else if(i<_){const s=l._addRowView(t,i+1,null,null,c,r,n),o=s[l.SIZE];u.push(s),w.push(w[w.length-1]+o),e+=o}else{if(!h())break;e+=f}}}(),T(v===-w[0],"off가 pts[0]과 동일해야 한다 2."),c?this._renderVert(t,v,r,n,!1,S):this._renderHorz(t,v,r,n,!1,S),{pos:y,off:v,row:u.length>0?u[0].row():-1}}_createRowsDeleingAnimation(t){return new Yh(this,t)}isRowVisible(t,e){return t>=this._scrollPos&&t<this._scrollPos+this._rowViews.length}makeRowVisible(t){if(this._singleMode)return;let e=this._scrollPos,s=this._scrollOff;if(t===e){if(s>0)return{pos:t,off:0}}else{if(t<e)return{pos:t,off:0};if(t===e+this._rowViews.length-1){const i=this.height,r=this._rowPts,n=t-e+1;let o=r[n]-i;if(o>0){let t=0;for(;t<n&&o>0;){const i=r[t+1]-r[t];if(i>o){s+=o;break}i>=o&&(e++,s=0,o-=i),t++}}return{pos:e,off:e===t?0:s}}if(t>=e+this._rowViews.length)return this._vertical?this.$_pullUpVert(t):this.$_pullUpHorz(t)}}$_pullUpVert(t){let e=this.height;const s=this.doc,i=this._listView,r=i.owner(),n=r.data(),o=this.width,a=this.height,h=new Bn(s);let l=t;for(this._itemLayer.addChild(h);l>=0;){h.setRow(n,l,n.getRowId(l),null),this._prepareRowView(h,l,r);if(e-=h.measure(s,i,a,o).height,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(h),{pos:l,off:0}}$_pullUpHorz(t){let e=this.width;const s=this.doc,i=this._listView,r=i.owner(),n=r.data(),o=this.width,a=this.height,h=new Bn(s);let l=t;for(this._itemLayer.addChild(h);l>=0;){h.setRow(n,l,n.getRowId(l),null),this._prepareRowView(h,l,r);if(e-=h.measure(s,i,a,o).width,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(h),{pos:l,off:0}}scrollToEnd(t){const e=this._listView,s=e.owner(),i=this.doc,r=this._vertical,n=this._rowViews=[],o=this.width,a=this.height;let h=r?a:o,l=0;const d=t<0&&this._measureAttached(i,s,r,o,a);for(d&&(h-=r?d.mh:d.mw),t=t<0?s.getEndRow():t;t>=0;){const s=this._getRowView(i,t,null,null),r=s.measure(i,e,o,a);if(n.unshift(s),h-=r[this.SIZE],h<=0){l=-h;break}t--}this._setScrollPos(t,l,t),r?this._renderVert(i,l,o,a,!0,!!d):this._renderHorz(i,l,o,a,!0,!!d),this._resetRowViews(this._rowViews)}checkItemViewOrders(){const t=Array.from(this._itemLayer.dom.children);if(t.length>1)for(let e=1;e<t.length;e++);}$_checkPositions(){if(this._positionsDirty){this._rowViews[0].row(),this._positionsDirty=!1}}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._arVis,a=this._attachedView,h=this._rowViews,l=this._commandRow,d=h.length,_=this._rowPts=[-e];let c=_[0],u=0;for(this.$_checkPositions();u<d&&c<i;){const e=h[u++],s=e.mh;e.isRow(l)?e.moveY(c):e.move(0,c),r&&e.resize(e.mw,s).render(t),c+=s,_.push(c)}this._returnRowViews(h,u),h.length=u,a.visible?c>=i?a.setVisible(!1):(a.move(0,c),n&&a.resize(s,a.mh).render(t),c+=a.mh):o&&(c<i||c++),this._rowEnded=0===h.length||h[h.length-1].row()===this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&c<=i}_renderHorz(t,e,s,i,r=!0,n=!0){const o=this._arVis,a=this._attachedView,h=this._rowViews,l=this._commandRow,d=h.length,_=this._rowPts=[-e];let c=_[0],u=0;for(this.$_checkPositions();u<d&&c<s;){const e=h[u++],s=e.mw;e.isRow(l)?e.moveX(c):e.move(c,0),r&&e.resize(s,i).render(t),c+=s,_.push(c)}this._returnRowViews(h,u),h.length=u,a.visible?c>=s?a.setVisible(!1):(a.move(c,0),n&&a.resize(a.mw,i).render(t),c+=a.mw):o&&(c<s||c++),this._rowEnded=0===h.length||h[h.length-1].row()===this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&c<=s}}class Zh extends Qh{constructor(){super(...arguments),this._page=-1}get page(){return this._page}setPage(t,e,s){if(s||t!==this._page){const s=this.doc;this._page=t,t>=0&&(this.measure(s,e.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(s))}}scrollPos(){return 0}scrollOff(){return 0}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner(),n=this._page,o=r.getPageRows(n),a=o.length,h=this._rowViews=[];let l=0,d=s,_=0;for(;d>0&&l<a;){const r=o[l],n=this._getRowView(t,r,null,null),a=n.measure(t,i,e,s);h.push(n),d-=a.height,_=Math.max(_,a.width),l++}return{width:_,height:s-d}}}class Xh extends Bn{isFixedHeight(){return!0}}class Kh extends Oi{constructor(t,e,s,i){super(t,!1,Kh.CLASS_NAME),this._requestRow=-1,this._row=-1,this._dimmed=0,this._model=s,this._bodyView=e,this._spare=i,this.addChild(this._rowView=new Xh(t)),this._prevView=new Bn(t),this._nextView=new Bn(t),this.appendDom(this._mask=t.createElement("div")),Object.assign(this._mask.style,{width:"100%",height:"100%",background:"#333",opacity:"0",pointerEvents:"none"})}_doDestory(){super._doDestory()}isSpare(){return this._spare}row(){return this._row}setRow(t,e){if(t!==this._row&&t>=0){const s=this.doc;e=e||this,this._requestRow=t,this.measure(s,e._bodyView.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(s)}}rowView(){return this._rowView}getRow(t){const e=this._rowView;if(e&&e.containsDom(t))return{dv:e._dv,row:e.row()}}isRowEnded(){return!this._rowView||this._rowView.row()===this._bodyView.owner().getRowCount()-1}scrollBy(t){return t>0?"near":t<0?"far":void 0}setDimmed(t){this._model.maskEffect()&&t!==this._dimmed&&(this._dimmed=t,this.dom.style.opacity=t>0?Math.max(.3,1-t)+"":"",this._mask.style.opacity=t>0?t+"":"0")}_doPrepareRender(t,e){const s=this._row=this._requestRow>=0?this._requestRow:this._bodyView.listView().reqScrollPos,i=e.data(),r=e.getRowLayout(s),n=this._rowView;n.setRow(i,s,i.getRowId(s),null),r.layout instanceof ti&&r.layout.setNoShrink(e.current().singleRow().noShrink()),n.setLayout(r),this._requestRow=-1}_doMeasure(t,e,s){return this._bodyView.owner().isVertical()?this._doMeasureVert(t,e,s):this._doMeasureHorz(t,e,s)}_doRender(t,e,s){return this._bodyView.owner().isVertical()?this._doRenderVert(t,e,s):this._doRenderHorz(t,e,s)}_doAfterRender(){}_doMeasureVert(t,e,s){return this._rowView.measure(t,this._bodyView.listView(),e,s)}_doMeasureHorz(t,e,s){return this._doMeasureVert(t,e,s)}_doRenderVert(t,e,s){this._rowView.resize(e,s),this._rowView.render(t)}_doRenderHorz(t,e,s){this._doRenderVert(t,e,s)}}Kh.CLASS_NAME="rtc-single-body";class Jh extends Yh{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);this._bodyView._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}}class tl extends Qh{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[],a=this._rowPts=[0];let h,l=i.reqScrollPos,d=i.reqScrollOff,_=0,c=0,u=0;for(;_<n;){const n=r.getRowAt(_),h=this._getRowView(t,n,null,null),l=h.measure(t,i,e,s);o.push(h),c+=l.height,a.push(c),u=Math.max(u,l.width),_++}if((h=this._measureAttached(t,r,!0,e,c))&&(c+=h.mh),o.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(l,d),s);this._setScrollPos(t.pos,t.off,o[t.pos].row())}}else this.$_scrollTo(0,s),this._setScrollPos(0,0,-1);return{width:u,height:c}}_doMeasureHorz(t,e,s){if(this._singleMode)return this._measureSingle(t,e,s);const i=this._listView,r=i.owner(),n=r.getRowCount(),o=this._rowViews=[],a=this._rowPts=[0];let h,l=i.reqScrollPos,d=i.reqScrollOff,_=0,c=0,u=0;for(;_<n;){const n=r.getRowAt(_),h=this._getRowView(t,n,null,null),l=h.measure(t,i,e,s);o.push(h),c+=l.width,a.push(c),u=Math.max(u,l.height),_++}if((h=this._measureAttached(t,r,!1,e,s))&&(c+=h.mw),o.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(l,d),e);this._setScrollPos(t.pos,t.off,o[t.pos].row())}}else this.$_scrollTo(0,e),this._setScrollPos(0,0,-1);return{width:c,height:u}}_doScrollNear(t,e,s,i,r,n){const o=this.$_scrollBy(-i);return{pos:o.pos,off:o.off,row:o.row}}_doScrollFar(t,e,s,i,r,n){const o=this.$_scrollBy(i);return{pos:o.pos,off:o.off,row:o.row}}scrollToEnd(t){if(t<0){const t=this._listView.owner(),e=this.doc,s=this._vertical,i=this.width,r=this.height,n=this._measureAttached(e,t,s,i,r);n.resize(s?i:n.mw,s?n.mh:r),n.render(e)}this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE])}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._attachedView,a=this._rowViews,h=this._commandRow,l=a.length;let d=0,_=0;for(;_<l;){const e=a[_++];e.isRow(h)?e.moveY(d):e.move(0,d),r&&e.resizeByMeasure().render(t),d+=e.mh}o.visible&&(o.move(0,d),n&&o.resize(s,o.mh).render(t),d+=o.mh),this.$_checkEnded()}_renderHorz(t,e,s,i,r=!0,n=!0){const o=this._attachedView,a=this._rowViews,h=this._commandRow,l=a.length;let d=0,_=0;for(s=Number.MAX_SAFE_INTEGER;_<l&&d<s;){const e=a[_++];e.isRow(h)?e.moveX(d):e.move(d,0),r&&e.resizeByMeasure().render(t),d+=e.mw}o.visible&&(o.move(d,0),n&&o.resize(o.mw,i).render(t),d+=o.mw),this.$_checkEnded()}_createRowsDeleingAnimation(t){return new Jh(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(t,e){const s=this._rowViews,i=this.MEASURE_SIZE;let r=0;for(let e=0;e<t;e++)r+=s[e][i];return r+=e,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(t,e){const s=this._rowViews,i=this.MEASURE_SIZE,r=s.length;if(r>0){const n=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,o=this._rowPts,a=o[r]+n;e=It(e,this[this.SIZE]);let h=r-1,l=0,d=t=Math.max(0,Math.min(t,a-e)),_=0,c=0;for(;c<r;){const t=s[c][i];if(t>d){h=c,l=d,_+=l;break}d-=t,_+=t,c++}if(d=a-o[h]-l,d<e)if(d=e-d,l>=d)l-=d,_-=d;else for(;h>0&&d>0;){const t=s[--h][i];d>t?(d-=t,_-=t,l=0):(l=d,_-=d,d=0)}return this._moveItemLayer(-_),this.$_checkEnded(),{pos:h,off:l,row:s[h].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){const t=this._rowPts,e=t.length-1;if(e>0){const s=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,r=t[e]+i,n=-this._itemLayer[this.POS];this._rowEnded=t[e-1]-n<=s,this._scrollEnded=r-n<=s}else this._rowEnded=this._scrollEnded=!0}}class el extends Ph{clickItem(t){this._bodyView.$_clickItem(t)}makeItemVisible(t){return this._bodyView.makeItemVisible(t.index)}_createBodyView(t,e,s){return e?new ll(t):new rl(t)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._bodyView._expander=this._owner.dataExpander()}rowBorderVisible(t){if(super.rowBorderVisible(t))return!t._groupLast||!this._owner.rowBorder.skipGroupLast}}class sl extends Wh{_getItemViews(){return this._bodyView._internalItemViews()}}class il extends Bn{}class rl extends Hh{constructor(){super(...arguments),this._headerPool=[],this._headerPoolMap={},this._headerMap={},this._footerPool=[],this._footerPoolMap={},this._footerMap={},this._itemViews=[],this._itemPts=[0],this._rowCount=0}_internalItemViews(){return this._itemViews}_internalItemPoints(){return this._itemPts}getGroupItem(t){const e=this._headerMap;for(const s in e)if(e[s].isView(t))return e[s].model();const s=this._footerMap;for(const e in s)if(s[e].isView(t))return s[e].model()}$_clickItem(t){t instanceof be&&this.$_clickHeader(t)}$_clickHeader(t){if(t){switch(this.owner().current().rowGroup().header().clickAction()){case fe.EXPAND:this.owner().groupModel().toggle(t.group,!1);break;case fe.COMMAND:}return!0}}bottomRow(){return this._topRow+this._rowCount-1}itemViewCount(){return this._itemPts.length-1}_itemPoints(){return this._itemPts}rowViewCount(){return this._rowCount}getItemViewPoints(){return this._itemPts.slice(0)}itemViews(){return this._itemViews.slice(0)}getItemView(t){return this._itemViews[t]}itemViewAt(t,e,s){const i=this._itemPts;for(let t=0,r=i.length-1;t<r;t++)if(e>=i[t]+s&&e<i[t+1]-s)return this._itemViews[t]}lastItemView(){return this._itemViews[this._itemViews.length-1]}getPreLength(){return this._itemPts[this._itemPts.length-1]}getPrePos(t,e){return this._itemPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){for(const e of this._itemViews)if(e instanceof Bn&&e.isDom(t))return e}validateViews(){this.height;const t=this._itemViews;this._rowViewMap,this._headerMap,this._footerMap;const e=this._itemPts;if(e.length,e.length!==t.length+1)throw`Invalid length: ${e.length}, ${t.length}`}$_itemCount(t){return this._pageItems?this._pageItems.length:t.visItemCount()}$_getItem(t,e){return this._pageItems?this._pageItems[e]:t.getVisItem(e)}_createItemView(t){return new il(t)}_getGroupOptions(t){return t.current().rowGroup()}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._options=this._getGroupOptions(e),this._theme=this._options.getTheme().prepareRender(),this._indented=this._theme.bodyIndented(),this._indentLayer.setVisible(this._indented),this._indentLayer.setData("theme",this._theme.type()),this._pageItems=e.isPaging()?e.pageModel().getGroupItems():null}_doMeasure(t,e,s){this._itemViews=[];const i=this._listView,r=i.renderInfo(),n=i.owner().groupModel(),o=this.$_itemCount(n);return i.reqScrollPos=r?Math.max(0,Math.min(o-1,r.scrollPos)):0,i.reqScrollOff=r?r.scrollOff:0,super._doMeasure(t,e,s)}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner();r.current().rowGroup();const n=r.groupModel(),o=this.$_itemCount(n),a=this._itemViews;let h,l=i.reqScrollPos,d=i.reqScrollOff,_=l,c=s+d,u=0;for(;c>0&&_<o;){const r=this.$_getItem(n,_);let o=this.$_getItemView(t,r,null);const h=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);a.push(o),c-=h.height,u=Math.max(u,h.width),_++}if(_===o&&c>0&&(h=this._measureAttached(t,r,!0,e,c))&&(c-=h.mh),c>0)for(d>0&&(c>d?(c-=d,d=0):(d-=c,c=0));l>0&&c>0;){const r=this.$_getItem(n,l-1),o=this.$_getItemView(t,r,null),h=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);a.unshift(o),c>=h.height?c-=h.height:(d=h.height-c,c=0),u=Math.max(u,h.width),l--}return a.length>0?this._setScrollPos(l,d,this.$_getTopRow()):this._setScrollPos(0,0,-1),{width:u,height:s-c}}_doMeasureHorz(t,e,s){this._listView.owner().groupModel(),this._itemViews;return{width:e,height:s-0}}_doRender(t,e,s){this._indentLayer.visible&&this._indentLayer.setBounds(0,0,e,s),super._doRender(t,e,s)}_doRenderVert(t,e,s){this._renderVert(t,this.scrollOff(),e,s),this._resetRowViews(this._itemViews),this.$_resetGroupViews(this._itemViews)}_doRenderHorz(t,e,s){}_doRenderSelection(t,e,s,i,r){let n=e.start,o=e.end;const a=this.scrollPos(),h=this.itemViewCount();if(s.visible=n<a+h&&o>=a){n-=a,o-=a;const h=It(this._itemPts[n],-20),l=It(this._itemPts[o+1]-h,(this._vertical?r:i)+20);this._vertical?(s.measure(t,e,i,l),s.move(0,h).resize(i,l)):(s.measure(t,e,l,r),s.move(h,0).resize(l,r)),s.render(t)}}_doScrollNear(t,e,s,i,r,n){const o=this._listView.owner(),a=o.isVertical(),h=o.groupModel(),l=this._itemViews;let d,_,c=e,u=s;for(u>0&&(i>u?(i-=u,u=0):(u-=i,i=0));i>0&&c>0;){const e=l.length>0?l[0]:null;d=this.$_getItem(h,--c),_=this.$_addItemView(t,a,d,e,r,n),l.unshift(_),(i-=_.height)<=0&&(u=-i)}return this._renderVert(t,u,r,n,!1,!1),l.length>0?{pos:c,off:u,row:this.$_getTopRow()}:{pos:0,off:0,row:-1}}_doScrollFar(t,e,s,i,r,n){function o(t){y[0]=t,p.forEach((t,e)=>y[e+1]=y[e]+t.height),y[y.length-1]}function a(){const t=p[0];l.$_returnItemView(t),p.splice(0,1),y.pop(),o(0)}function h(){if(f&&!w.visible)return w.setVisible(!0),m=w.measure(t,d,r,n).height,x=!0,!0}const l=this,d=this._listView.owner(),_=d.groupModel(),c=d.isPaging()?l._pageItems[0].vindex:0,u=this.$_itemCount(_),g=d.isVertical(),p=this._itemViews,f=this._arVis,w=this._attachedView;let m=w.visible?w.height:0;const y=this._itemPts,v=g?n:r;y[y.length-1];let b=e,S=s;const C=y[1]-y[0];let x=!1;for(T(S===-y[0],"-off가 pts[0]과 동일해야 한다."),S>0&&(i>=C-S?(i-=C-S,S=0,b++,a()):(S+=i,i=0,o(-S)));i>0;){const t=b-e,s=y[t+1]-y[t];(i-=s)<0?(S=s+i,o(-S)):p.length>0&&p[p.length-1].model().vindex-c<u?(b++,a()):(o(-S),i=0)}return function(){let e=y[y.length-1]+m;for(;e<v;){const s=p[p.length-1].model().vindex+1-c;let i=v-e;if(s===u){if(h()&&(e+=m,i-=m,i<=0))break;if(S>=i){S-=i,o(-S);break}for(i-=S,S=0;i>0&&b>0;){b--;const s=l.$_addItemView(t,g,l.$_getItem(_,b),null,r,n),o=g?s.height:s.width;p.unshift(s),e+=o,o>i?(S=o-i,i=0):(i-=o,S=0)}o(-S)}else if(s<u){const i=l.$_addItemView(t,g,l.$_getItem(_,s),null,r,n),o=g?i.height:i.width;p.push(i),y.push(y[y.length-1]+o),e+=o}else{if(!h())break;e+=m}}}(),T(S===-y[0],"off가 pts[0]과 동일해야 한다 2."),this._renderVert(t,S,r,n,!1,x),{pos:b,off:S,row:p.length>0?this.$_getTopRow():-1}}_createRowsDeleingAnimation(t){return new sl(this,t)}scrollToEnd(t){this._itemViews.forEach(t=>this.$_returnItemView(t));const e=this._itemViews=[],s=this._listView,i=s.owner(),r=i.isVertical(),n=i.groupModel(),o=this.doc,a=this.width,h=this.height;let l=h,d=0;const _=t<0&&this._measureAttached(o,i,r,a,h);_&&(l-=_.mh);let c=t<0?n.visItemCount()-1:n.visIndexOfRow(t);for(;c>=0;){const t=this.$_getItem(n,c);let i=this.$_getItemView(o,t,null);const r=i.measure(o,s,a,h);if(e.unshift(i),l-=r.height,l<=0){d=-l;break}c--}this._setScrollPos(t,d,this.$_getTopRow()),r?this._renderVert(o,d,a,h,!0):this._renderHorz(o,d,a,h,!0)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("theme",this._theme.type()),r.setData("no",s.no),r}canMoveTo(t,e){const s=this.getRowView(t);if(s)return console.log(s.group().hash,e.group().hash),e instanceof Bn&&s.group()===e.group()}$_getItemView(t,e,s){var i;let r;if(e instanceof He)r=this._getRowView(t,e.row(),e,s),r._gindex=e.vindex;else if(e instanceof ye)r=this._getRowView(t,e.row(),e,s),r._gindex=e.vindex;else if(e instanceof be){if(r=this._headerMap[e.index],r)delete this._headerMap[e.index];else{const i=this._headerPoolMap[e.index];i>=0?(r=this._headerPool[i],this._headerPool.splice(i,1),delete this._headerPoolMap[e.index]):r=this._headerPool.pop(),r||(r=new ol(t)),r.indent=this.$_getItemIndent(e),s?this._itemLayer.insertBefore(r,s):this._itemLayer.addChild(r),r.setModel(e)}r.setTheme(this._theme.type()),r.setItemData("exp",e.group.expanded()?"1":"0")}else if(e instanceof Se){if(r=this._footerMap[e.index],r)delete this._footerMap[e.index];else{const i=this._footerPoolMap[e.index];i>=0?(r=this._footerPool[i],this._footerPool.splice(i,1),delete this._footerPoolMap[e.index]):r=this._footerPool.pop(),r||(r=new al(t)),r.indent=this.$_getItemIndent(e),s?this._itemLayer.insertBefore(r,s):this._itemLayer.addChild(r),r.setModel(e)}r.bodyIndent=this._getBodyIndent(r),r.bodyMargin=this._getBodyMargin(r),r.setTheme(this._theme.type())}const n=this._listView.owner();if(r instanceof nl)r.setLayout(n.getGroupItemLayout(r.model()));else if(e instanceof ye){const t=e.row();r.alternate=e.vindex%2==1,r.detailed=n.isRowDetailed(t),r.checked=n.isRowChecked(t),r.selected=null===(i=n.getSelection())||void 0===i?void 0:i.isRowSelected(t)}return r.dom._idx_=e.vindex,!r.hasData("state")&&r.setData("state","g"),r}$_getItemIndent(t){return t.group.level()*this._options.groupIndent()}$_addItemView(t,e,s,i,r,n){if(s instanceof ye){const o=this._addRowView(t,s.row(),s,i,e,r,n);return!o.hasData("state")&&o.setData("state","g"),o.dom._idx_=s.vindex,o}{const e=this.$_getItemView(t,s,i),o=e.measure(t,this._listView,r-e.bodyIndent-e.bodyMargin,n);return e.resize(r-e.bodyIndent-e.bodyMargin,o.height),e.render(t),e instanceof ol?this._headerMap[s.index]=e:this._footerMap[s.index]=e,e}}$_resetGroupViews(t){for(const t in this._headerMap){const e=this._headerMap[t];this.$_returnItemView(e)}this._headerMap={};for(const e of t)e instanceof ol&&(this._headerMap[e.model().index]=e);for(const t in this._footerMap){const e=this._footerMap[t];this.$_returnItemView(e)}this._footerMap={};for(const e of t)e instanceof al&&(this._footerMap[e.model().index]=e)}$_returnItemView(t){if(t instanceof Bn)this._returnRowView(t);else if(this._itemLayer.removeChild(t),t instanceof ol){const e=t.model().index;delete this._headerMap[e],this._headerPool.push(t),this._headerPoolMap[e]=this._headerPool.length-1}else if(t instanceof al){const e=t.model().index;delete this._footerMap[e],this._footerPool.push(t),this._footerPoolMap[e]=this._footerPool.length-1}else N(b.unknownItemViewType,t)}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._arVis,a=this._attachedView,h=this._itemViews,l=h.length,d=this._itemPts=[-e];let _,c=d[0],u=0;for(this._rowCount=0;u<l&&c<i;){const e=h[u++],s=e.mh;e.move(0+e.bodyIndent,c),r&&e.resize(e.mw,s).render(t),c+=s,d.push(c),e instanceof Bn&&(_=e,this._rowCount++)}for(let t=u;t<l;t++)this.$_returnItemView(h[t]);h.length=u,a.visible?c>i?a.setVisible(!1):(a.move(0,c),n&&a.resize(s,a.mh).render(t),c+=a.mh):o&&(c<i||c++),this._rowEnded=0===h.length||_&&_.row()===this.owner().getEndRow(),this._scrollEnded=this._rowEnded&&c<=i}_renderHorz(t,e,s,i,r=!0){}$_getTopRow(){for(const t of this._itemViews)if(t instanceof Bn)return t.row();return-1}checkItemViewOrders(){const t=Array.from(this._itemLayer.dom.children);if(t.length>1)for(let e=1;e<t.length;e++);}isRowVisible(t,e){return this.isItemVisible(this.indexOfRow(t),e)}isItemVisible(t,e){if(this._itemViews.length>0)return t>=this._itemViews[0].gindex()&&t<=this._itemViews[this._itemViews.length-1].gindex()}makeRowVisible(t){const e=this._listView.owner().groupModel().visIndexOfRow(t);return e>=0?this.makeItemVisible(e):null}makeItemVisible(t){const e=this._listView.owner(),s=e.isPaging()?this._pageItems[0].vindex:0,i=e.groupModel(),r=this._scrollPos,n=this._scrollOff;if(!(t<0||t>=i.itemCount()))if((t=i.getItem(t).vindex-s)===r){if(n>0)return{pos:t,off:0}}else{if(t<r)return{pos:t,off:0};if(t===r+this._itemViews.length-1)return{pos:r+1,off:0};if(t>=r+this._itemViews.length)return this.$_pullUpVert(i,t)}}$_pullUpVert(t,e){const s=this.doc,i=this._listView,r=this.width,n=this.height,o=this._itemViews=[];let a=.7*n>>0,h=e;for(;h>=0;){const e=this.$_getItem(t,h);let l=this.$_getItemView(s,e,null);const d=l.measure(s,i,r,n);if(o.unshift(l),a-=d.height,a<=0)break;h--}const l=h,d=-a;return this._setScrollPos(l,d,this.$_getTopRow()),this._doRenderVert(this.doc,r,n),{pos:l,off:d}}$_pullUpHorz(t,e){this.doc;this._listView.owner().data(),this.width,this.height}}class nl extends Nn{model(){return this._model}group(){return this._model.group}row(){return this._model.row()}dv(){return null}gindex(){return this._model.index}vindex(){return this._model.index}setModel(t){return this._model=t,this}getItemStyle(t){return this._model.getStyle()}}class ol extends nl{getItemClass(){return ol.CLASS_NAME}_getExpander(){const t=this._owner.getExpander(this.gindex());if(t){const e=t.position(),s=e===dr.HEAD?Ri.NEAR:e===dr.FOOT?Ri.FAR:void 0;if(e)return{pos:s,size:18}}}_isExpanded(){return this._model.group.expanded()}}ol.CLASS_NAME="rtc-item rtc-group-header";class al extends nl{getItemClass(){return al.CLASS_NAME}_toggleExpanded(){}}al.CLASS_NAME="rtc-group-footer";class hl extends sl{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);this._bodyView._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}}class ll extends rl{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(t,e,s){const i=this._listView,r=i.owner(),n=r.groupModel(),o=this.$_itemCount(n),a=this._itemViews,h=this._itemPts=[0];let l,d=i.reqScrollPos,_=i.reqScrollOff,c=0,u=0,g=0;for(;c<o;){const r=this.$_getItem(n,c);let o=this.$_getItemView(t,r,null);const l=o.measure(t,i,e-o.bodyIndent-o.bodyMargin,s);a.push(o),u+=l.height,h.push(u),g=Math.max(g,l.width),c++}if((l=this._measureAttached(t,r,!0,e,u))&&(u+=l.mh),a.length>0){if(this._preMode){const t=this.$_scrollTo(this.$_scrollOff(d,_),s);this._setScrollPos(t.pos,t.off,a[t.pos].row())}}else this.$_scrollTo(0,s),this._setScrollPos(0,0,-1);return{width:g,height:u}}_doMeasureHorz(t,e,s){this._listView.owner().groupModel(),this._itemViews;return{width:0,height:0}}_renderVert(t,e,s,i,r=!0,n=!0){const o=this._attachedView,a=this._itemViews,h=a.length;let l=0,d=0;for(this._rowCount=0;d<h;){const e=a[d++];e.move(0+e.bodyIndent,l),r&&e.resizeByMeasure().render(t),l+=e.mh,e instanceof Bn&&this._rowCount++}o.visible&&(l>i?o.setVisible(!1):(o.move(0,l),n&&o.resize(s,o.mh).render(t),l+=o.mh)),this.$_checkEnded()}_renderHorz(t,e,s,i,r=!0){}_doScrollNear(t,e,s,i,r,n){const o=this.$_scrollBy(-i);return{pos:o.pos,off:o.off,row:o.row}}_doScrollFar(t,e,s,i,r,n){const o=this.$_scrollBy(i);return{pos:o.pos,off:o.off,row:o.row}}scrollToEnd(t){if(t<0){const t=this._listView.owner(),e=this.doc,s=this._vertical,i=this.width,r=this.height,n=this._measureAttached(e,t,s,i,r);n.resize(s?i:n.mw,s?n.mh:r),n.render(e)}this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE])}_createRowsDeleingAnimation(t){return new hl(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(t,e){const s=this._itemViews,i=this.MEASURE_SIZE;let r=0;for(let e=0;e<t;e++)r+=s[e][i];return r+=e,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(t,e){const s=this._itemViews,i=this.MEASURE_SIZE,r=s.length;if(r>0){const n=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,o=this._itemPts,a=o[r]+n;e=It(e,this[this.SIZE]);let h=r-1,l=0,d=t=Math.max(0,Math.min(t,a-e)),_=0,c=0;for(;c<r;){const t=s[c][i];if(t>d){h=c,l=d,_+=l;break}d-=t,_+=t,c++}if(d=a-o[h]-l,d<e)if(d=e-d,l>=d)l-=d,_-=d;else for(;h>0&&d>0;){const t=s[--h][i];d>t?(d-=t,_-=t,l=0):(l=d,_-=d,d=0)}return this._moveItemLayer(-_),this.$_checkEnded(),{pos:h,off:l,row:s[h].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){const t=this._itemPts,e=t.length-1;if(e>0){const s=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,r=t[e]+i,n=-this._itemLayer[this.POS];this._rowEnded=t[e-1]-n<=s,this._scrollEnded=r-n<=s}else this._rowEnded=this._scrollEnded=!0}}class dl extends Bn{}class _l extends rl{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t){return new dl(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("master",s.isLeaf()?"0":"1"),r}}class cl extends ll{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t){return new dl(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,s,i){const r=super._getRowView(t,e,s,i);return r.setData("master",s.isLeaf()?"0":"1"),r}}class ul extends el{_createBodyView(t,e,s){return e?new cl(t):new _l(t)}rowBorderVisible(t){if(super.rowBorderVisible(t))return!this._owner.rowBorder.leafOnly||!t._master}}class gl extends on{_doPrepare(t,e){e._btn=this.$_getButton(t,e)}_getStyleTarget(t){return t._btn.style}_doMeasure(t,e,s,i){const r=t.doc,n=this._model,o=n.label,a=n.imageUrl,l=e._btn,d=h?l.firstElementChild:l;let _,c,u=de.childByClass(d,gl.IMAGE_CLASS),g=de.childByClass(d,gl.SHAPE_CLASS),p=n.buttonWidth,f=n.buttonHeight;if(this._setContext(t,l,n),n.borderless&&de.setData(l,"borderless",1),n.borderless||de.setData(d,"image",1),this._setClass(d,t.row),a){g=de.remove(g),u||(u=t.doc.createElement("img"),u.className=gl.IMAGE_CLASS,u.style.pointerEvents="none",u.style.verticalAlign="middle",de.setAttr(u,"aria-hidden",!0),d.appendChild(u));let e=n.imageWidth,s=n.imageHeight;if(u.src=a,!u.complete&&t.useImage(a),isNaN(e)&&isNaN(s)){const i=h&&t.getImageSize(a);i?(e=i.width,s=i.height):(e=u.naturalWidth,s=u.naturalHeight)}isNaN(e)||(u.width=e),isNaN(s)||(u.height=s),_=u}else if(c=n.shape){u=de.remove(u);const e=n.getShapeSize();if(g&&g._name_===c)g&&de.resize(g,e.width,e.height);else{const s=t.manager().owner().shapes(),i=s.createStock(t.doc,c,gl.SHAPE_CLASS)||s.createCustom(c,null,null);g=de.remove(g),i&&(i instanceof ki&&i.setShape(s.getCustom(c)),i.appendTo(d),g=i._svg.svg,g._name_=c,g.style.verticalAlign="middle",i.resize(e.width,e.height))}_=g}if(_)h?this.$_arrangeafari(r,d,_):this.$_arrange(r,d,_);else{let t=de.childByClass(d,gl.LABEL_CLASS),e=de.childByClass(d,gl.BR_CLASS);u=de.remove(u),g=de.remove(g),e=de.remove(e),t||(t=this.$_createSpan(r),d.appendChild(t)),t.textContent=o,de.setData(d,"image",void 0)}if(isNaN(p)||(d.style.width=p+"px"),isNaN(f)||(d.style.height=f+"px"),de.setDisabled(d.parentElement,n.disabled),ce.TESTING)return isNaN(p)&&(p=d.offsetWidth),isNaN(f)&&(f=d.offsetHeight),{width:Math.ceil(p),height:Math.ceil(f)}}$_createSpan(t){const e=t.createElement("span");return e.className=gl.LABEL_CLASS,e.style.pointerEvents="none",e.style.verticalAlign="middle",e}$_arrange(t,e,s){const i=this._model,r=i.label;let n=de.childByClass(e,gl.LABEL_CLASS),o=de.childByClass(e,gl.BR_CLASS);if(r&&i.labelPosition!==ee.NONE)switch(n||(n=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case ee.LEFT:o=de.remove(o),s.style.paddingLeft="4px",e.insertBefore(n,s);break;case ee.RIGHT:o=de.remove(o),s.style.paddingRight="4px",e.appendChild(n);break;case ee.TOP:e.insertBefore(n,s),e.insertBefore(o||de.createBR(t,gl.BR_CLASS),s),s.style.paddingTop="4px";break;default:s.style.paddingBottom="4px",e.appendChild(n),e.insertBefore(o||de.createBR(t,gl.BR_CLASS),n)}else o=de.remove(o),n||(n=this.$_createSpan(t)),e.insertBefore(n,s),n.textContent=""}$_arrangeafari(t,e,s){const i=this._model,r=i.label;let n=de.childByClass(e,gl.LABEL_CLASS);if(r&&i.labelPosition!==ee.NONE)switch(n||(n=this.$_createSpan(t)),n.textContent=r,i.labelPosition){case ee.LEFT:e.style.flexDirection="row",s.style.paddingLeft="4px",e.insertBefore(n,s);break;case ee.RIGHT:e.style.flexDirection="row",s.style.paddingRight="4px",e.appendChild(n);break;case ee.TOP:e.insertBefore(n,s),s.style.paddingTop="4px",e.style.flexDirection="column";break;default:e.style.flexDirection="column",s.style.paddingBottom="4px",e.appendChild(n)}else n=de.remove(n)}_doRender(t,e,s,i){}_doUnprepare(t,e){e._btn=null}setValue(t,e){}$_getButton(t,e){let s=e.getElementsByClassName(gl.BUTTON_CLASS)[0];if(!s&&(s=t.createElement("button"),s.type="button",s.className=gl.BUTTON_CLASS,s._clkable="1",Object.assign(s.style,$i),e.appendChild(s),h)){const e=t.doc.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.boxSizing="border-box",s.appendChild(e)}return s}}gl.BUTTON_CLASS="rtc-button-button",gl.BR_CLASS="rtc-button-br",gl.LABEL_CLASS="rtc-button-label",gl.IMAGE_CLASS="rtc-button-image",gl.SHAPE_CLASS="rtc-button-shape";class pl extends hn{_doPrepare(t,e){e[gt]=this.$_getBox(t,e)}_getStyleTarget(t){}_measureBox(t,e){e.checked=this._model.isTrue(this._value)}_doMeasure(t,e,s,i){const r=this._model,n=e[gt],o=e.getElementsByClassName(pl.LABEL_CLASS)[0];let a=r.getBoxWidth(),h=r.getBoxHeight();if(this._setClass(n,t.row),isNaN(t._explicitWidth)||de.setWidth(e.firstElementChild.firstElementChild,t._explicitWidth),this._setContext(t,n,r),this._measureBox(t,n),isNaN(a)||(n.style.width=a+"px"),isNaN(h)||(n.style.height=a+"px"),o.style.whiteSpace=r.labelWrap&&isNaN(t._explicitWidth)?"pre-wrap":"pre",o.textContent=r.getLabel(n.checked),ce.TESTING)return isNaN(a)&&(a=n.offsetWidth),isNaN(h)&&(h=n.offsetHeight),{width:a,height:h}}_doRender(t,e,s,i){}_doUnprepare(t,e){}getValue(t){const e=this._getBoxClass(),s=de.childByClass(t,e);if(s){return s.checked?this._model.trueValue:this._model.falseValue}}setValue(t,e){}_getBoxType(){return"checkbox"}_getBoxClass(){return pl.BOX_CLASS}$_getBox(t,e){const s=this._getBoxClass();let i=e.getElementsByClassName(s)[0];if(!i){const r=t.doc.createElement("div");r.style.position="relative";const n=t.doc.createElement("div");n.style.display="flex",n.style.alignItems="center",i=t.doc.createElement("input"),i.className=s,i.style.marginRight="5px",i.style.flex="none",i.type=this._getBoxType(),i.onclick=function(){console.log("> CLICKED",i.type,i.id,s)};const o=t.doc.createElement("label");o.className=pl.LABEL_CLASS,Object.assign(o.style,{flexGrow:1}),n.appendChild(i),n.appendChild(o),r.appendChild(n),e.appendChild(r)}return i}}pl.BOX_CLASS="rtc-check-box",pl.LABEL_CLASS="rtc-check-label";class fl extends Ai{draw(t){const e=t.model;let s=e.getStyle();const i=Math.ceil((parseFloat(s.strokeWidth)||0)/2),{cx:r,cy:n,rx:o,ry:a}=e.getExtents(t.width,t.height),h=e.startAngle||0;let l=(e.endAngle||0)-h;this._svg.clear(),this._svg.arc(r,n,o-i,a-i,h,l,e.clockwise,s),l*=e.getValueRate(t.value),s=e.getValueStyle(),this._svg.arc(r,n,o-i,a-i,h,l,e.clockwise,s),this._svg.setSize(t.width,t.height)}_doInit(t){}}class wl extends an{_doPrepare(t,e){}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model();let n=r.getGaugeWidth(),o=r.getGaugeHeight();return this._setClass(e,t.row),{width:n,height:o}}_doRender(t,e,s,i){const r=this._getShape(t,e);console.log("GAUGE",this._value),r.draw({model:this.model(),value:this._value,width:s,height:i})}_doUnprepare(t,e){}setValue(t,e){}_getShape(t,e){let s,i=e.getElementsByClassName(wl.SVG_CLASS)[0];return i?s=new fl(i,wl.SVG_CLASS):(s=new fl(t.doc,wl.SVG_CLASS),s.appendTo(e)),s}}wl.SVG_CLASS="rtc-gauge-svg";class ml extends on{_doPrepare(t,e){this._img=this.$_getImage(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model(),n=this._img,o=t.getIcon(r.iconSet,r.iconName);let a,h;if(this._setClass(n,t.row),n.src=o.url,n.alt=r.hint||o.url,isNaN(o.width)||(n.width=a=o.width),isNaN(o.height)||(n.height=h=o.height),ce.TESTING)return isNaN(a)&&(a=n.offsetWidth||0),isNaN(h)&&(h=n.offsetHeight||0),{width:a,height:h}}_doRender(t,e,s,i){}_doUnprepare(t,e){this._img=null}setValue(t,e){}$_getImage(t,e){let s=e.getElementsByClassName(ml.IMAGE_CLASS)[0];return s||(s=t.doc.createElement("img"),s.className=ml.IMAGE_CLASS,e.appendChild(s)),s}}ml.IMAGE_CLASS="rtc-icon-image";class yl extends an{_doPrepare(t,e){e[ut]=this.$_getImage(t,e)}_getStyleTarget(t){return t[ut].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[ut],{url:o,isNull:a}=r.getUrl(this._value);let h=a?r.nullWidth:r.imageWidth,l=a?r.nullHeight:r.imageHeight;const d=n.alt=r.alt||r.hint||"";if(this._setClass(n,t.row),de.setAttr(n,"aria-hidden",r.decorative||!d),n.src=o,!n.complete&&t.useImage(o),isNaN(h)&&isNaN(l)&&(h=n.naturalWidth,isNaN(h)||(l=n.naturalHeight)),isNaN(this._imageWidth=h)||(n.width=h),isNaN(this._imageHeight=l)||(n.height=l),ce.TESTING)return h=Nt(n.width,h,0),l=Nt(n.height,l,0),{width:Math.ceil(h),height:Math.ceil(l)}}_doRender(t,e,s,i){if(isNaN(this._imageWidth)&&isNaN(this._imageHeight)){const t=e[ut];t.width=s,t.height=i}}_doUnprepare(t,e){e[ut]=null}setValue(t,e){}$_getImage(t,e){let s=e.getElementsByClassName(yl.IMAGE_CLASS)[0];if(!s){const i=t.doc.createElement("div");s=t.doc.createElement("img"),s.className=yl.IMAGE_CLASS,i.appendChild(s),e.appendChild(i)}return s}}yl.IMAGE_CLASS="rtc-image-image";class vl extends hn{_doPrepare(t,e){e[gt]=this.$_getInput(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[gt];let o=r.boxWidth,a=r.boxHeight;if(this._setClass(n,t.row),n.style.maxWidth="",isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),isNaN(a)&&!isNaN(t._explicitHeight)&&(a=t._explicitHeight*r.getFitHeight()),!isNaN(o)&&de.setWidth(n,o),!isNaN(a)&&de.setHeight(n,a),r.autoHide?n.dataset.autohide="1":delete n.dataset.autohide,this._setContext(t,n,r),n.value=Tt(this._valueToText(this._value),this._valueToText(this._getDefaultValue())),this._prepareInput(n),ce.TESTING)return{width:o||0,height:a||0}}_doRender(t,e,s,i){const r=e[gt];r.style.width||(r.style.maxWidth=s+"px")}_doUnprepare(t,e){e[gt]=null}getValue(t){const e=de.childByClass(t,vl.INPUT_CLASS);return e&&this._textToValue(e.value)}setValue(t,e){const s=de.childByClass(t,vl.INPUT_CLASS);s&&(s.value=this._valueToText(e))}_initInput(t){}_prepareInput(t){}_getDefaultValue(){return""}_valueToText(t){return t}_textToValue(t){return t}$_getInput(t,e){let s=e.getElementsByClassName(vl.INPUT_CLASS)[0];if(!s){const i=t.doc.createElement("div");s=t.doc.createElement("input"),s.className=vl.INPUT_CLASS,s.type=this._getInputType(),s.style.boxSizing="border-box",s.onkeydown=function(t){"1"===s.dataset.autohide&&"Enter"===t.key&&(t.preventDefault(),t.currentTarget.blur())},s.onfocus=t=>{_e.currentInput=s.id},this._initInput(s),i.appendChild(s),e.appendChild(i)}return s}}vl.INPUT_CLASS="rtc-input-input";class bl extends an{_getStyleTarget(t){return t[ct].firstElementChild.style}needBounds(){return!0}_doPrepare(t,e){const s=this._model,i=e[ct].firstElementChild,r=i.style;this._setClass(i,t.row),Object.assign(r,s.singleLine?Sl.SPAN_STYLE_SINGLE:s.wrap?Sl.SPAN_STYLE_WRAP:Sl.SPAN_STYLE),r.maxWidth="",r.maxHeight="",r.lineHeight="",i.textContent=s.getText(t,this._value,t.manager().owner().lineSepReg())}_doMeasure(t,e,s,i){const r=e[ct],n=r.firstElementChild;return r.style.maxWidth=s+"px",r.style.maxHeight=i+"px",{width:n.offsetWidth+1,height:r.offsetHeight}}_doRender(t,e,s,i){const r=e[ct].firstElementChild;r.style.maxWidth=s+"px",r.style.maxHeight=i+"px"}_doUnprepare(t,e){e[ct]=null}setValue(t,e){}}bl.SPAN_STYLE={whiteSpace:"pre",wordWrap:"normal",textOverflow:"ellipsis",overflow:"hidden"},bl.SPAN_STYLE_WRAP={whiteSpace:"pre-wrap",textOverflow:"ellipsis",overflow:"hidden"},bl.SPAN_STYLE_SINGLE={whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"};class Sl extends bl{_doPrepare(t,e){e[ct]=this.$_getSpan(t,e),super._doPrepare(t,e)}$_getSpan(t,e){let s=e.getElementsByClassName(Sl.SPAN_CLASS)[0];if(!s){s=t.createElement("div"),s.className=Sl.SPAN_CLASS;const i=t.createElement("span");s.appendChild(i),e.appendChild(s)}return s}}Sl.SPAN_CLASS="rtc-text-span";class Cl extends Sl{_doMeasure(t,e,s,i){super._doMeasure(t,e,s,i);const r=e[ct];return{width:Math.ceil(r.offsetWidth),height:Math.ceil(r.offsetHeight)}}}class xl extends bl{_doPrepare(t,e){const s=e[ct]=this.$_getAnchor(t,e);super._doPrepare(t,e),s.firstElementChild.href=this._model.getLink(t)}setValue(t,e){}$_getAnchor(t,e){let s=e.getElementsByClassName(xl.ANCHOR_CLASS)[0];if(!s){s=t.createElement("div"),s.className=xl.ANCHOR_CLASS;const i=t.doc.createElement("a");s.appendChild(i),e.appendChild(s)}return s}}xl.ANCHOR_CLASS="rtc-link-anchor";class Rl extends an{_doPrepare(t,e){e[ft]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model();let n=this._barWidth=r.barWidth,o=this._barHeight=r.barHeight;const a=e[ft],h=r.minValue,l=r.maxValue,d=r.lowValue,_=r.highValue,c=r.optimumValue,u=w.pickNum(r.value,this._value);if(this._setClass(a,t.row),isNaN(h)||(a.min=h),isNaN(l)||(a.max=l),isNaN(d)||(a.low=d),isNaN(_)||(a.high=_),isNaN(c)||(a.optimum=c),isNaN(u)||(a.value=u),isNaN(n)||(a.style.width=n+"px"),isNaN(o)||(a.style.height=o+"px"),ce.TESTING)return n=a.offsetWidth,o=a.offsetHeight,{width:n,height:o}}_doRender(t,e,s,i){const r=e[ft];isNaN(this._barWidth)&&(r.style.width=s+"px"),isNaN(this._barHeight)&&(r.style.height=i+"px")}_doUnprepare(t,e){e[ft]=null}setValue(t,e){}$_getBar(t,e){let s=e.getElementsByClassName(Rl.BAR_CLASS)[0];return s||(s=t.doc.createElement("meter"),s.className=Rl.BAR_CLASS,e.appendChild(s)),s}}Rl.BAR_CLASS="rtc-meter-bar";class El extends an{_doPrepare(t,e){e[ft]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this.model(),n=e[ft];let o=r.barWidth,a=r.barHeight;const h=r.minValue,l=r.maxValue,d=+this._value;if(this._setClass(n,t.row),!isNaN(h)&&!isNaN(l)&&!isNaN(d)&&l>h?(n.max=l-h,n.value=d-h):delete n.value,isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),isNaN(a)&&!isNaN(t._explicitHeight)&&(o=t._explicitHeight*r.getFitHeight()),!isNaN(o)&&de.setWidth(n,o),!isNaN(a)&&de.setHeight(n,a),ce.TESTING)return o=isNaN(o)?n.offsetWidth:o,a=isNaN(a)?n.offsetHeight:a,{width:o,height:a}}_doRender(t,e,s,i){e[ft]}_doUnprepare(t,e){e[ft]=null}setValue(t,e){}$_getBar(t,e){let s=e.getElementsByClassName(El.BAR_CLASS)[0];return s||(s=t.doc.createElement("progress"),s.className=El.BAR_CLASS,e.appendChild(s)),s}}El.BAR_CLASS="rtc-progress-bar";var Vl,$l=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){self,t.exports=(()=>{var t={192:(t,e)=>{var s,i,r=function(){var t=function(t,e){var s=t,i=o[e],r=null,n=0,h=null,f=[],w={},y=function(t,e){r=function(t){for(var e=new Array(t),s=0;s<t;s+=1){e[s]=new Array(t);for(var i=0;i<t;i+=1)e[s][i]=null}return e}(n=4*s+17),v(0,0),v(n-7,0),v(0,n-7),S(),b(),x(t,e),s>=7&&C(t),null==h&&(h=E(s,i,f)),R(h,e)},v=function(t,e){for(var s=-1;s<=7;s+=1)if(!(t+s<=-1||n<=t+s))for(var i=-1;i<=7;i+=1)e+i<=-1||n<=e+i||(r[t+s][e+i]=0<=s&&s<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=i&&i<=4)},b=function(){for(var t=8;t<n-8;t+=1)null==r[t][6]&&(r[t][6]=t%2==0);for(var e=8;e<n-8;e+=1)null==r[6][e]&&(r[6][e]=e%2==0)},S=function(){for(var t=a.getPatternPosition(s),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var n=t[e],o=t[i];if(null==r[n][o])for(var h=-2;h<=2;h+=1)for(var l=-2;l<=2;l+=1)r[n+h][o+l]=-2==h||2==h||-2==l||2==l||0==h&&0==l}},C=function(t){for(var e=a.getBCHTypeNumber(s),i=0;i<18;i+=1){var o=!t&&1==(e>>i&1);r[Math.floor(i/3)][i%3+n-8-3]=o}for(i=0;i<18;i+=1)o=!t&&1==(e>>i&1),r[i%3+n-8-3][Math.floor(i/3)]=o},x=function(t,e){for(var s=i<<3|e,o=a.getBCHTypeInfo(s),h=0;h<15;h+=1){var l=!t&&1==(o>>h&1);h<6?r[h][8]=l:h<8?r[h+1][8]=l:r[n-15+h][8]=l}for(h=0;h<15;h+=1)l=!t&&1==(o>>h&1),h<8?r[8][n-h-1]=l:h<9?r[8][15-h-1+1]=l:r[8][15-h-1]=l;r[n-8][8]=!t},R=function(t,e){for(var s=-1,i=n-1,o=7,h=0,l=a.getMaskFunction(e),d=n-1;d>0;d-=2)for(6==d&&(d-=1);;){for(var _=0;_<2;_+=1)if(null==r[i][d-_]){var c=!1;h<t.length&&(c=1==(t[h]>>>o&1)),l(i,d-_)&&(c=!c),r[i][d-_]=c,-1==(o-=1)&&(h+=1,o=7)}if((i+=s)<0||n<=i){i-=s,s=-s;break}}},E=function(t,e,s){for(var i=d.getRSBlocks(t,e),r=_(),n=0;n<s.length;n+=1){var o=s[n];r.put(o.getMode(),4),r.put(o.getLength(),a.getLengthInBits(o.getMode(),t)),o.write(r)}var h=0;for(n=0;n<i.length;n+=1)h+=i[n].dataCount;if(r.getLengthInBits()>8*h)throw"code length overflow. ("+r.getLengthInBits()+">"+8*h+")";for(r.getLengthInBits()+4<=8*h&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*h||(r.put(236,8),r.getLengthInBits()>=8*h));)r.put(17,8);return function(t,e){for(var s=0,i=0,r=0,n=new Array(e.length),o=new Array(e.length),h=0;h<e.length;h+=1){var d=e[h].dataCount,_=e[h].totalCount-d;i=Math.max(i,d),r=Math.max(r,_),n[h]=new Array(d);for(var c=0;c<n[h].length;c+=1)n[h][c]=255&t.getBuffer()[c+s];s+=d;var u=a.getErrorCorrectPolynomial(_),g=l(n[h],u.getLength()-1).mod(u);for(o[h]=new Array(u.getLength()-1),c=0;c<o[h].length;c+=1){var p=c+g.getLength()-o[h].length;o[h][c]=p>=0?g.getAt(p):0}}var f=0;for(c=0;c<e.length;c+=1)f+=e[c].totalCount;var w=new Array(f),m=0;for(c=0;c<i;c+=1)for(h=0;h<e.length;h+=1)c<n[h].length&&(w[m]=n[h][c],m+=1);for(c=0;c<r;c+=1)for(h=0;h<e.length;h+=1)c<o[h].length&&(w[m]=o[h][c],m+=1);return w}(r,i)};w.addData=function(t,e){var s=null;switch(e=e||"Byte"){case"Numeric":s=c(t);break;case"Alphanumeric":s=u(t);break;case"Byte":s=g(t);break;case"Kanji":s=p(t);break;default:throw"mode:"+e}f.push(s),h=null},w.isDark=function(t,e){if(t<0||n<=t||e<0||n<=e)throw t+","+e;return r[t][e]},w.getModuleCount=function(){return n},w.make=function(){if(s<1){for(var t=1;t<40;t++){for(var e=d.getRSBlocks(t,i),r=_(),n=0;n<f.length;n++){var o=f[n];r.put(o.getMode(),4),r.put(o.getLength(),a.getLengthInBits(o.getMode(),t)),o.write(r)}var h=0;for(n=0;n<e.length;n++)h+=e[n].dataCount;if(r.getLengthInBits()<=8*h)break}s=t}y(!1,function(){for(var t=0,e=0,s=0;s<8;s+=1){y(!0,s);var i=a.getLostPoint(w);(0==s||t>i)&&(t=i,e=s)}return e}())},w.createTableTag=function(t,e){t=t||2;var s="";s+='<table style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",s+='">',s+="<tbody>";for(var i=0;i<w.getModuleCount();i+=1){s+="<tr>";for(var r=0;r<w.getModuleCount();r+=1)s+='<td style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: 0px;",s+=" width: "+t+"px;",s+=" height: "+t+"px;",s+=" background-color: ",s+=w.isDark(i,r)?"#000000":"#ffffff",s+=";",s+='"/>';s+="</tr>"}return(s+="</tbody>")+"</table>"},w.createSvgTag=function(t,e,s,i){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,s=r.alt,i=r.title),t=t||2,e=void 0===e?4*t:e,(s="string"==typeof s?{text:s}:s||{}).text=s.text||null,s.id=s.text?s.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var n,o,a,h,l=w.getModuleCount()*t+2*e,d="";for(h="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=r.scalable?"":' width="'+l+'px" height="'+l+'px"',d+=' viewBox="0 0 '+l+" "+l+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=i.text||s.text?' role="img" aria-labelledby="'+V([i.id,s.id].join(" ").trim())+'"':"",d+=">",d+=i.text?'<title id="'+V(i.id)+'">'+V(i.text)+"</title>":"",d+=s.text?'<description id="'+V(s.id)+'">'+V(s.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',o=0;o<w.getModuleCount();o+=1)for(a=o*t+e,n=0;n<w.getModuleCount();n+=1)w.isDark(o,n)&&(d+="M"+(n*t+e)+","+a+h);return(d+='" stroke="transparent" fill="black"/>')+"</svg>"},w.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var s=w.getModuleCount()*t+2*e,i=e,r=s-e;return m(s,s,(function(e,s){if(i<=e&&e<r&&i<=s&&s<r){var n=Math.floor((e-i)/t),o=Math.floor((s-i)/t);return w.isDark(o,n)?0:1}return 1}))},w.createImgTag=function(t,e,s){t=t||2,e=void 0===e?4*t:e;var i=w.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=w.createDataURL(t,e),r+='"',r+=' width="',r+=i,r+='"',r+=' height="',r+=i,r+='"',s&&(r+=' alt="',r+=V(s),r+='"'),r+"/>"};var V=function(t){for(var e="",s=0;s<t.length;s+=1){var i=t.charAt(s);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return w.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,s,i,r,n,o=1*w.getModuleCount()+2*t,a=t,h=o-t,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},d={"██":"▀","█ ":"▀"," █":" ","  ":" "},_="";for(e=0;e<o;e+=2){for(i=Math.floor((e-a)/1),r=Math.floor((e+1-a)/1),s=0;s<o;s+=1)n="█",a<=s&&s<h&&a<=e&&e<h&&w.isDark(i,Math.floor((s-a)/1))&&(n=" "),a<=s&&s<h&&a<=e+1&&e+1<h&&w.isDark(r,Math.floor((s-a)/1))?n+=" ":n+="█",_+=t<1&&e+1>=h?d[n]:l[n];_+="\n"}return o%2&&t>0?_.substring(0,_.length-o-1)+Array(o+1).join("▀"):_.substring(0,_.length-1)}(e);t-=1,e=void 0===e?2*t:e;var s,i,r,n,o=w.getModuleCount()*t+2*e,a=e,h=o-e,l=Array(t+1).join("██"),d=Array(t+1).join("  "),_="",c="";for(s=0;s<o;s+=1){for(r=Math.floor((s-a)/t),c="",i=0;i<o;i+=1)n=1,a<=i&&i<h&&a<=s&&s<h&&w.isDark(r,Math.floor((i-a)/t))&&(n=0),c+=n?l:d;for(r=0;r<t;r+=1)_+=c+"\n"}return _.substring(0,_.length-1)},w.renderTo2dContext=function(t,e){e=e||2;for(var s=w.getModuleCount(),i=0;i<s;i++)for(var r=0;r<s;r++)t.fillStyle=w.isDark(i,r)?"black":"white",t.fillRect(i*e,r*e,e,e)},w};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],s=0;s<t.length;s+=1){var i=t.charCodeAt(s);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var s=function(){for(var s=w(t),i=function(){var t=s.read();if(-1==t)throw"eof";return t},r=0,n={};;){var o=s.read();if(-1==o)break;var a=i(),h=i()<<8|i();n[String.fromCharCode(o<<8|a)]=h,r+=1}if(r!=e)throw r+" != "+e;return n}(),i="?".charCodeAt(0);return function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);if(n<128)e.push(n);else{var o=s[t.charAt(r)];"number"==typeof o?(255&o)==o?e.push(o):(e.push(o>>>8),e.push(255&o)):e.push(i)}}return e}};var e,s,i,r,n,o={L:1,M:0,Q:3,H:2},a=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],s=1335,i=7973,n=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(r={}).getBCHTypeInfo=function(t){for(var e=t<<10;n(e)-n(s)>=0;)e^=s<<n(e)-n(s);return 21522^(t<<10|e)},r.getBCHTypeNumber=function(t){for(var e=t<<12;n(e)-n(i)>=0;)e^=i<<n(e)-n(i);return t<<12|e},r.getPatternPosition=function(t){return e[t-1]},r.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return(t+e)%2==0};case 1:return function(t,e){return t%2==0};case 2:return function(t,e){return e%3==0};case 3:return function(t,e){return(t+e)%3==0};case 4:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case 5:return function(t,e){return t*e%2+t*e%3==0};case 6:return function(t,e){return(t*e%2+t*e%3)%2==0};case 7:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},r.getErrorCorrectPolynomial=function(t){for(var e=l([1],0),s=0;s<t;s+=1)e=e.multiply(l([1,h.gexp(s)],0));return e},r.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},r.getLostPoint=function(t){for(var e=t.getModuleCount(),s=0,i=0;i<e;i+=1)for(var r=0;r<e;r+=1){for(var n=0,o=t.isDark(i,r),a=-1;a<=1;a+=1)if(!(i+a<0||e<=i+a))for(var h=-1;h<=1;h+=1)r+h<0||e<=r+h||0==a&&0==h||o==t.isDark(i+a,r+h)&&(n+=1);n>5&&(s+=3+n-5)}for(i=0;i<e-1;i+=1)for(r=0;r<e-1;r+=1){var l=0;t.isDark(i,r)&&(l+=1),t.isDark(i+1,r)&&(l+=1),t.isDark(i,r+1)&&(l+=1),t.isDark(i+1,r+1)&&(l+=1),0!=l&&4!=l||(s+=3)}for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(s+=40);for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(s+=40);var d=0;for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t.isDark(i,r)&&(d+=1);return s+Math.abs(100*d/e/e-50)/5*10},r),h=function(){for(var t=new Array(256),e=new Array(256),s=0;s<8;s+=1)t[s]=1<<s;for(s=8;s<256;s+=1)t[s]=t[s-4]^t[s-5]^t[s-6]^t[s-8];for(s=0;s<255;s+=1)e[t[s]]=s;return{glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}}}();function l(t,e){if(void 0===t.length)throw t.length+"/"+e;var s=function(){for(var s=0;s<t.length&&0==t[s];)s+=1;for(var i=new Array(t.length-s+e),r=0;r<t.length-s;r+=1)i[r]=t[r+s];return i}(),i={getAt:function(t){return s[t]},getLength:function(){return s.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),s=0;s<i.getLength();s+=1)for(var r=0;r<t.getLength();r+=1)e[s+r]^=h.gexp(h.glog(i.getAt(s))+h.glog(t.getAt(r)));return l(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=h.glog(i.getAt(0))-h.glog(t.getAt(0)),s=new Array(i.getLength()),r=0;r<i.getLength();r+=1)s[r]=i.getAt(r);for(r=0;r<t.getLength();r+=1)s[r]^=h.gexp(h.glog(t.getAt(r))+e);return l(s,0).mod(t)}};return i}var d=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var s={};return s.totalCount=t,s.dataCount=e,s};return{getRSBlocks:function(s,i){var r=function(e,s){switch(s){case o.L:return t[4*(e-1)+0];case o.M:return t[4*(e-1)+1];case o.Q:return t[4*(e-1)+2];case o.H:return t[4*(e-1)+3];default:return}}(s,i);if(void 0===r)throw"bad rs block @ typeNumber:"+s+"/errorCorrectionLevel:"+i;for(var n=r.length/3,a=[],h=0;h<n;h+=1)for(var l=r[3*h+0],d=r[3*h+1],_=r[3*h+2],c=0;c<l;c+=1)a.push(e(d,_));return a}}}(),_=function(){var t=[],e=0,s={getBuffer:function(){return t},getAt:function(e){var s=Math.floor(e/8);return 1==(t[s]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)s.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(s){var i=Math.floor(e/8);t.length<=i&&t.push(0),s&&(t[i]|=128>>>e%8),e+=1}};return s},c=function(t){var e=t,s={getMode:function(){return 1},getLength:function(t){return e.length},write:function(t){for(var s=e,r=0;r+2<s.length;)t.put(i(s.substring(r,r+3)),10),r+=3;r<s.length&&(s.length-r==1?t.put(i(s.substring(r,r+1)),4):s.length-r==2&&t.put(i(s.substring(r,r+2)),7))}},i=function(t){for(var e=0,s=0;s<t.length;s+=1)e=10*e+r(t.charAt(s));return e},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return s},u=function(t){var e=t,s={getMode:function(){return 2},getLength:function(t){return e.length},write:function(t){for(var s=e,r=0;r+1<s.length;)t.put(45*i(s.charAt(r))+i(s.charAt(r+1)),11),r+=2;r<s.length&&t.put(i(s.charAt(r)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return s},g=function(e){var s=t.stringToBytes(e);return{getMode:function(){return 4},getLength:function(t){return s.length},write:function(t){for(var e=0;e<s.length;e+=1)t.put(s[e],8)}}},p=function(e){var s=t.stringToBytesFuncs.SJIS;if(!s)throw"sjis not supported.";!function(t,e){var i=s("友");if(2!=i.length||38726!=(i[0]<<8|i[1]))throw"sjis not supported."}();var i=s(e);return{getMode:function(){return 8},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,s=0;s+1<e.length;){var r=(255&e[s])<<8|255&e[s+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(s+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13),s+=2}if(s<e.length)throw"illegal char at "+(s+1)}}},f=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,s,i){s=s||0,i=i||t.length;for(var r=0;r<i;r+=1)e.writeByte(t[r+s])},writeString:function(t){for(var s=0;s<t.length;s+=1)e.writeByte(t.charCodeAt(s))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var s=0;s<t.length;s+=1)s>0&&(e+=","),e+=t[s];return e+"]"}};return e},w=function(t){var e=t,s=0,i=0,r=0,n={read:function(){for(;r<8;){if(s>=e.length){if(0==r)return-1;throw"unexpected end of file./"+r}var t=e.charAt(s);if(s+=1,"="==t)return r=0,-1;t.match(/^\s$/)||(i=i<<6|o(t.charCodeAt(0)),r+=6)}var n=i>>>r-8&255;return r-=8,n}},o=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return n},m=function(t,e,s){for(var i=function(t,e){var s=t,i=e,r=new Array(t*e),n={setPixel:function(t,e,i){r[e*s+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(s),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(s),t.writeShort(i),t.writeByte(0);var e=o(2);t.writeByte(2);for(var r=0;e.length-r>255;)t.writeByte(255),t.writeBytes(e,r,255),r+=255;t.writeByte(e.length-r),t.writeBytes(e,r,e.length-r),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,s=1+(1<<t),i=t+1,n=a(),o=0;o<e;o+=1)n.add(String.fromCharCode(o));n.add(String.fromCharCode(e)),n.add(String.fromCharCode(s));var h,l,d,_=f(),c=(h=_,l=0,d=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;l+e>=8;)h.writeByte(255&(t<<l|d)),e-=8-l,t>>>=8-l,d=0,l=0;d|=t<<l,l+=e},flush:function(){l>0&&h.writeByte(d)}});c.write(e,i);var u=0,g=String.fromCharCode(r[u]);for(u+=1;u<r.length;){var p=String.fromCharCode(r[u]);u+=1,n.contains(g+p)?g+=p:(c.write(n.indexOf(g),i),n.size()<4095&&(n.size()==1<<i&&(i+=1),n.add(g+p)),g=p)}return c.write(n.indexOf(g),i),c.write(s,i),c.flush(),_.toByteArray()},a=function(){var t={},e=0,s={add:function(i){if(s.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return s};return n}(t,e),r=0;r<e;r+=1)for(var n=0;n<t;n+=1)i.setPixel(n,r,s(n,r));var o=f();i.write(o);for(var a=function(){var t=0,e=0,s=0,i="",r={},n=function(t){i+=String.fromCharCode(o(63&t))},o=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return r.writeByte=function(i){for(t=t<<8|255&i,e+=8,s+=1;e>=6;)n(t>>>e-6),e-=6},r.flush=function(){if(e>0&&(n(t<<6-e),t=0,e=0),s%3!=0)for(var r=3-s%3,o=0;o<r;o+=1)i+="="},r.toString=function(){return i},r}(),h=o.toByteArray(),l=0;l<h.length;l+=1)a.writeByte(h[l]);return a.flush(),"data:image/gif;base64,"+a};return t}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],s=0;s<t.length;s++){var i=t.charCodeAt(s);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(s++,i=65536+((1023&i)<<10|1023&t.charCodeAt(s)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},void 0===(i="function"==typeof(s=function(){return r})?s.apply(e,[]):s)||(t.exports=i)},796:(t,e,s)=>{s.d(e,{default:()=>Q});var i=function(){return(i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=function(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<s;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,r++)i[r]=n[o];return i},n=function(t){return!!t&&"object"==typeof t&&!Array.isArray(t)};function o(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(!e.length)return t;var a=e.shift();return void 0!==a&&n(t)&&n(a)?(t=i({},t),Object.keys(a).forEach((function(e){var s=t[e],i=a[e];Array.isArray(s)&&Array.isArray(i)?t[e]=i:n(s)&&n(i)?t[e]=o(Object.assign({},s),i):t[e]=i})),o.apply(void 0,r([t],e))):t}function a(t,e){var s=document.createElement("a");s.download=e,s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}function h(t){var e=t.originalHeight,s=t.originalWidth,i=t.maxHiddenDots,r=t.maxHiddenAxisDots,n=t.dotSize,o={x:0,y:0},a={x:0,y:0};if(e<=0||s<=0||i<=0||n<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var h=e/s;return o.x=Math.floor(Math.sqrt(i/h)),o.x<=0&&(o.x=1),r&&r<o.x&&(o.x=r),o.x%2==0&&o.x--,a.x=o.x*n,o.y=1+2*Math.ceil((o.x*h-1)/2),a.y=Math.round(a.x*h),(o.y*o.x>i||r&&r<o.y)&&(r&&r<o.y?(o.y=r,o.y%2==0&&o.x--):o.y-=2,a.y=o.y*n,o.x=1+2*Math.ceil((o.y/h-1)/2),a.x=Math.round(a.y/h)),{height:a.y,width:a.x,hideYDots:o.y,hideXDots:o.x}}const l={L:.07,M:.15,Q:.25,H:.3},d="dots",_="rounded",c="classy",u="classy-rounded",g="square",p="extra-rounded";var f=function(){return(f=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const w=function(){function t(t){var e=t.context,s=t.type;this._context=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r,n=this._context;switch(this._type){case d:r=this._drawDot;break;case c:r=this._drawClassy;break;case u:r=this._drawClassyRounded;break;case _:r=this._drawRounded;break;case p:r=this._drawExtraRounded;break;case g:default:r=this._drawSquare}r.call(this,{x:t,y:e,size:s,context:n,getNeighbor:i})},t.prototype._rotateFigure=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,a=t.draw,h=e+i/2,l=s+i/2;r.translate(h,l),o&&r.rotate(o),a(),r.closePath(),o&&r.rotate(-o),r.translate(-h,-l)},t.prototype._basicDot=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(0,0,e/2,0,2*Math.PI)}}))},t.prototype._basicSquare=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.rect(-e/2,-e/2,e,e)}}))},t.prototype._basicSideRounded=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(0,0,e/2,-Math.PI/2,Math.PI/2),s.lineTo(-e/2,e/2),s.lineTo(-e/2,-e/2),s.lineTo(0,-e/2)}}))},t.prototype._basicCornerRounded=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(0,0,e/2,-Math.PI/2,0),s.lineTo(e/2,e/2),s.lineTo(-e/2,e/2),s.lineTo(-e/2,-e/2),s.lineTo(0,-e/2)}}))},t.prototype._basicCornerExtraRounded=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(-e/2,e/2,e,-Math.PI/2,0),s.lineTo(-e/2,e/2),s.lineTo(-e/2,-e/2)}}))},t.prototype._basicCornersRounded=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(0,0,e/2,-Math.PI/2,0),s.lineTo(e/2,e/2),s.lineTo(0,e/2),s.arc(0,0,e/2,Math.PI/2,Math.PI),s.lineTo(-e/2,-e/2),s.lineTo(0,-e/2)}}))},t.prototype._basicCornersExtraRounded=function(t){var e=t.size,s=t.context;this._rotateFigure(f(f({},t),{draw:function(){s.arc(-e/2,e/2,e,-Math.PI/2,0),s.arc(e/2,-e/2,e,Math.PI/2,Math.PI)}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size,r=t.context;this._basicDot({x:e,y:s,size:i,context:r,rotation:0})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size,r=t.context;this._basicSquare({x:e,y:s,size:i,context:r,rotation:0})},t.prototype._drawRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,l=n?+n(0,1):0,d=o+a+h+l;if(0!==d)if(d>2||o&&a||h&&l)this._basicSquare({x:e,y:s,size:i,context:r,rotation:0});else{if(2===d){var _=0;return o&&h?_=Math.PI/2:h&&a?_=Math.PI:a&&l&&(_=-Math.PI/2),void this._basicCornerRounded({x:e,y:s,size:i,context:r,rotation:_})}if(1===d)return _=0,h?_=Math.PI/2:a?_=Math.PI:l&&(_=-Math.PI/2),void this._basicSideRounded({x:e,y:s,size:i,context:r,rotation:_})}else this._basicDot({x:e,y:s,size:i,context:r,rotation:0})},t.prototype._drawExtraRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,l=n?+n(0,1):0,d=o+a+h+l;if(0!==d)if(d>2||o&&a||h&&l)this._basicSquare({x:e,y:s,size:i,context:r,rotation:0});else{if(2===d){var _=0;return o&&h?_=Math.PI/2:h&&a?_=Math.PI:a&&l&&(_=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:s,size:i,context:r,rotation:_})}if(1===d)return _=0,h?_=Math.PI/2:a?_=Math.PI:l&&(_=-Math.PI/2),void this._basicSideRounded({x:e,y:s,size:i,context:r,rotation:_})}else this._basicDot({x:e,y:s,size:i,context:r,rotation:0})},t.prototype._drawClassy=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,l=n?+n(0,1):0;0!==o+a+h+l?o||h?a||l?this._basicSquare({x:e,y:s,size:i,context:r,rotation:0}):this._basicCornerRounded({x:e,y:s,size:i,context:r,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:s,size:i,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:s,size:i,context:r,rotation:Math.PI/2})},t.prototype._drawClassyRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,l=n?+n(0,1):0;0!==o+a+h+l?o||h?a||l?this._basicSquare({x:e,y:s,size:i,context:r,rotation:0}):this._basicCornerExtraRounded({x:e,y:s,size:i,context:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:s,size:i,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:s,size:i,context:r,rotation:Math.PI/2})},t}(),m="square",y="extra-rounded";var v=function(){return(v=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const b=function(){function t(t){var e=t.context,s=t.type;this._context=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r,n=this._context;switch(this._type){case m:r=this._drawSquare;break;case y:r=this._drawExtraRounded;break;case"dot":default:r=this._drawDot}r.call(this,{x:t,y:e,size:s,context:n,rotation:i})},t.prototype._rotateFigure=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,a=t.draw,h=e+i/2,l=s+i/2;r.translate(h,l),o&&r.rotate(o),a(),r.closePath(),o&&r.rotate(-o),r.translate(-h,-l)},t.prototype._basicDot=function(t){var e=t.size,s=t.context,i=e/7;this._rotateFigure(v(v({},t),{draw:function(){s.arc(0,0,e/2,0,2*Math.PI),s.arc(0,0,e/2-i,0,2*Math.PI)}}))},t.prototype._basicSquare=function(t){var e=t.size,s=t.context,i=e/7;this._rotateFigure(v(v({},t),{draw:function(){s.rect(-e/2,-e/2,e,e),s.rect(-e/2+i,-e/2+i,e-2*i,e-2*i)}}))},t.prototype._basicExtraRounded=function(t){var e=t.size,s=t.context,i=e/7;this._rotateFigure(v(v({},t),{draw:function(){s.arc(-i,-i,2.5*i,Math.PI,-Math.PI/2),s.lineTo(i,-3.5*i),s.arc(i,-i,2.5*i,-Math.PI/2,0),s.lineTo(3.5*i,-i),s.arc(i,i,2.5*i,0,Math.PI/2),s.lineTo(-i,3.5*i),s.arc(-i,i,2.5*i,Math.PI/2,Math.PI),s.lineTo(-3.5*i,-i),s.arc(-i,-i,1.5*i,Math.PI,-Math.PI/2),s.lineTo(i,-2.5*i),s.arc(i,-i,1.5*i,-Math.PI/2,0),s.lineTo(2.5*i,-i),s.arc(i,i,1.5*i,0,Math.PI/2),s.lineTo(-i,2.5*i),s.arc(-i,i,1.5*i,Math.PI/2,Math.PI),s.lineTo(-2.5*i,-i)}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation;this._basicDot({x:e,y:s,size:i,context:r,rotation:n})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation;this._basicSquare({x:e,y:s,size:i,context:r,rotation:n})},t.prototype._drawExtraRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation;this._basicExtraRounded({x:e,y:s,size:i,context:r,rotation:n})},t}(),S="square";var C=function(){return(C=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const x=function(){function t(t){var e=t.context,s=t.type;this._context=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r,n=this._context;switch(this._type){case S:r=this._drawSquare;break;case"dot":default:r=this._drawDot}r.call(this,{x:t,y:e,size:s,context:n,rotation:i})},t.prototype._rotateFigure=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,a=t.draw,h=e+i/2,l=s+i/2;r.translate(h,l),o&&r.rotate(o),a(),r.closePath(),o&&r.rotate(-o),r.translate(-h,-l)},t.prototype._basicDot=function(t){var e=t.size,s=t.context;this._rotateFigure(C(C({},t),{draw:function(){s.arc(0,0,e/2,0,2*Math.PI)}}))},t.prototype._basicSquare=function(t){var e=t.size,s=t.context;this._rotateFigure(C(C({},t),{draw:function(){s.rect(-e/2,-e/2,e,e)}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation;this._basicDot({x:e,y:s,size:i,context:r,rotation:n})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size,r=t.context,n=t.rotation;this._basicSquare({x:e,y:s,size:i,context:r,rotation:n})},t}(),R="radial";var E=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],V=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const $=function(){function t(t){this._canvas=document.createElement("canvas"),this._canvas.width=t.width,this._canvas.height=t.height,this._options=t}return Object.defineProperty(t.prototype,"context",{get:function(){return this._canvas.getContext("2d")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height},enumerable:!1,configurable:!0}),t.prototype.getCanvas=function(){return this._canvas},t.prototype.clear=function(){var t=this.context;t&&t.clearRect(0,0,this._canvas.width,this._canvas.height)},t.prototype.drawQR=function(t){return e=this,i=function(){var e,s,i,r,n,o,a,d,_,c=this;return function(t,e){var s,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,i&&(r=2&n[0]?i.return:n[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],i=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}}(this,(function(u){switch(u.label){case 0:return e=t.getModuleCount(),s=Math.min(this._options.width,this._options.height)-2*this._options.margin,i=Math.floor(s/e),r={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(u.sent(),!this._image)return[2];n=this._options,o=n.imageOptions,a=n.qrOptions,d=o.imageSize*l[a.errorCorrectionLevel],_=Math.floor(d*e*e),r=h({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:_,maxHiddenAxisDots:e-14,dotSize:i}),u.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots((function(t,s){var i,n,o,a,h,l;return!(c._options.imageOptions.hideBackgroundDots&&t>=(e-r.hideXDots)/2&&t<(e+r.hideXDots)/2&&s>=(e-r.hideYDots)/2&&s<(e+r.hideYDots)/2||(null===(i=E[t])||void 0===i?void 0:i[s])||(null===(n=E[t-e+7])||void 0===n?void 0:n[s])||(null===(o=E[t])||void 0===o?void 0:o[s-e+7])||(null===(a=V[t])||void 0===a?void 0:a[s])||(null===(h=V[t-e+7])||void 0===h?void 0:h[s])||(null===(l=V[t])||void 0===l?void 0:l[s-e+7]))})),this.drawCorners(),this._options.image&&this.drawImage({width:r.width,height:r.height,count:e,dotSize:i}),[2]}}))},new((s=void 0)||(s=Promise))((function(t,r){function n(t){try{a(i.next(t))}catch(t){r(t)}}function o(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(n,o)}a((i=i.apply(e,[])).next())}));var e,s,i},t.prototype.drawBackground=function(){var t=this.context,e=this._options;if(t){if(e.backgroundOptions.gradient){var s=e.backgroundOptions.gradient,i=this._createGradient({context:t,options:s,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});s.colorStops.forEach((function(t){var e=t.offset,s=t.color;i.addColorStop(e,s)})),t.fillStyle=i}else e.backgroundOptions.color&&(t.fillStyle=e.backgroundOptions.color);t.fillRect(0,0,this._canvas.width,this._canvas.height)}},t.prototype.drawDots=function(t){var e=this;if(!this._qr)throw"QR code is not defined";var s=this.context;if(!s)throw"QR code is not defined";var i=this._options,r=this._qr.getModuleCount();if(r>i.width||r>i.height)throw"The canvas is too small.";var n=Math.min(i.width,i.height)-2*i.margin,o=Math.floor(n/r),a=Math.floor((i.width-r*o)/2),h=Math.floor((i.height-r*o)/2),l=new w({context:s,type:i.dotsOptions.type});s.beginPath();for(var d=function(s){for(var i=function(i){return t&&!t(s,i)?"continue":_._qr.isDark(s,i)?void l.draw(a+s*o,h+i*o,o,(function(n,o){return!(s+n<0||i+o<0||s+n>=r||i+o>=r)&&!(t&&!t(s+n,i+o))&&!!e._qr&&e._qr.isDark(s+n,i+o)})):"continue"},n=0;n<r;n++)i(n)},_=this,c=0;c<r;c++)d(c);if(i.dotsOptions.gradient){var u=i.dotsOptions.gradient,g=this._createGradient({context:s,options:u,additionalRotation:0,x:a,y:h,size:r*o});u.colorStops.forEach((function(t){var e=t.offset,s=t.color;g.addColorStop(e,s)})),s.fillStyle=s.strokeStyle=g}else i.dotsOptions.color&&(s.fillStyle=s.strokeStyle=i.dotsOptions.color);s.fill("evenodd")},t.prototype.drawCorners=function(t){var e=this;if(!this._qr)throw"QR code is not defined";var s=this.context;if(!s)throw"QR code is not defined";var i=this._options,r=this._qr.getModuleCount(),n=Math.min(i.width,i.height)-2*i.margin,o=Math.floor(n/r),a=7*o,h=3*o,l=Math.floor((i.width-r*o)/2),d=Math.floor((i.height-r*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(n){var _,c,u,g,p,f,m,y,v,S,C=n[0],R=n[1],$=n[2];if(!t||t(C,R)){var A=l+C*o*(r-7),D=d+R*o*(r-7);if(null===(_=i.cornersSquareOptions)||void 0===_?void 0:_.type){var k=new b({context:s,type:null===(c=i.cornersSquareOptions)||void 0===c?void 0:c.type});s.beginPath(),k.draw(A,D,a,$)}else{var L=new w({context:s,type:i.dotsOptions.type});s.beginPath();for(var T=function(t){for(var e=function(e){if(!(null===(u=E[t])||void 0===u?void 0:u[e]))return"continue";L.draw(A+t*o,D+e*o,o,(function(s,i){var r;return!!(null===(r=E[t+s])||void 0===r?void 0:r[e+i])}))},s=0;s<E[t].length;s++)e(s)},M=0;M<E.length;M++)T(M)}if(null===(g=i.cornersSquareOptions)||void 0===g?void 0:g.gradient){var P=i.cornersSquareOptions.gradient,I=e._createGradient({context:s,options:P,additionalRotation:$,x:A,y:D,size:a});P.colorStops.forEach((function(t){var e=t.offset,s=t.color;I.addColorStop(e,s)})),s.fillStyle=s.strokeStyle=I}else(null===(p=i.cornersSquareOptions)||void 0===p?void 0:p.color)&&(s.fillStyle=s.strokeStyle=i.cornersSquareOptions.color);if(s.fill("evenodd"),null===(f=i.cornersDotOptions)||void 0===f?void 0:f.type){var N=new x({context:s,type:null===(m=i.cornersDotOptions)||void 0===m?void 0:m.type});s.beginPath(),N.draw(A+2*o,D+2*o,h,$)}else{L=new w({context:s,type:i.dotsOptions.type}),s.beginPath();var O=function(t){for(var e=function(e){if(!(null===(y=V[t])||void 0===y?void 0:y[e]))return"continue";L.draw(A+t*o,D+e*o,o,(function(s,i){var r;return!!(null===(r=V[t+s])||void 0===r?void 0:r[e+i])}))},s=0;s<V[t].length;s++)e(s)};for(M=0;M<V.length;M++)O(M)}if(null===(v=i.cornersDotOptions)||void 0===v?void 0:v.gradient){P=i.cornersDotOptions.gradient;var B=e._createGradient({context:s,options:P,additionalRotation:$,x:A+2*o,y:D+2*o,size:h});P.colorStops.forEach((function(t){var e=t.offset,s=t.color;B.addColorStop(e,s)})),s.fillStyle=s.strokeStyle=B}else(null===(S=i.cornersDotOptions)||void 0===S?void 0:S.color)&&(s.fillStyle=s.strokeStyle=i.cornersDotOptions.color);s.fill("evenodd")}}))},t.prototype.loadImage=function(){var t=this;return new Promise((function(e,s){var i=t._options,r=new Image;if(!i.image)return s("Image is not defined");"string"==typeof i.imageOptions.crossOrigin&&(r.crossOrigin=i.imageOptions.crossOrigin),t._image=r,r.onload=function(){e()},r.src=i.image}))},t.prototype.drawImage=function(t){var e=t.width,s=t.height,i=t.count,r=t.dotSize,n=this.context;if(!n)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";var o=this._options,a=Math.floor((o.width-i*r)/2),h=Math.floor((o.height-i*r)/2),l=a+o.imageOptions.margin+(i*r-e)/2,d=h+o.imageOptions.margin+(i*r-s)/2,_=e-2*o.imageOptions.margin,c=s-2*o.imageOptions.margin;n.drawImage(this._image,l,d,_<0?0:_,c<0?0:c)},t.prototype._createGradient=function(t){var e,s=t.context,i=t.options,r=t.additionalRotation,n=t.x,o=t.y,a=t.size;if(i.type===R)e=s.createRadialGradient(n+a/2,o+a/2,0,n+a/2,o+a/2,a/2);else{var h=((i.rotation||0)+r)%(2*Math.PI),l=(h+2*Math.PI)%(2*Math.PI),d=n+a/2,_=o+a/2,c=n+a/2,u=o+a/2;l>=0&&l<=.25*Math.PI||l>1.75*Math.PI&&l<=2*Math.PI?(d-=a/2,_-=a/2*Math.tan(h),c+=a/2,u+=a/2*Math.tan(h)):l>.25*Math.PI&&l<=.75*Math.PI?(_-=a/2,d-=a/2/Math.tan(h),u+=a/2,c+=a/2/Math.tan(h)):l>.75*Math.PI&&l<=1.25*Math.PI?(d+=a/2,_+=a/2*Math.tan(h),c-=a/2,u-=a/2*Math.tan(h)):l>1.25*Math.PI&&l<=1.75*Math.PI&&(_+=a/2,d+=a/2/Math.tan(h),u-=a/2,c-=a/2/Math.tan(h)),e=s.createLinearGradient(Math.round(d),Math.round(_),Math.round(c),Math.round(u))}return e},t}();var A=function(){return(A=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const D=function(){function t(t){var e=t.svg,s=t.type;this._svg=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r;switch(this._type){case d:r=this._drawDot;break;case c:r=this._drawClassy;break;case u:r=this._drawClassyRounded;break;case _:r=this._drawRounded;break;case p:r=this._drawExtraRounded;break;case g:default:r=this._drawSquare}r.call(this,{x:t,y:e,size:s,getNeighbor:i})},t.prototype._rotateFigure=function(t){var e,s=t.x,i=t.y,r=t.size,n=t.rotation,o=void 0===n?0:n,a=s+r/2,h=i+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*o/Math.PI+","+a+","+h+")")},t.prototype._basicDot=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(i+s/2)),e._element.setAttribute("cy",String(r+s/2)),e._element.setAttribute("r",String(s/2))}}))},t.prototype._basicSquare=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(i)),e._element.setAttribute("y",String(r)),e._element.setAttribute("width",String(s)),e._element.setAttribute("height",String(s))}}))},t.prototype._basicSideRounded=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+i+" "+r+"v "+s+"h "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, 0 "+-s)}}))},t.prototype._basicCornerRounded=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+i+" "+r+"v "+s+"h "+s+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},t.prototype._basicCornerExtraRounded=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+i+" "+r+"v "+s+"h "+s+"a "+s+" "+s+", 0, 0, 0, "+-s+" "+-s)}}))},t.prototype._basicCornersRounded=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+i+" "+r+"v "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+s/2+" "+s/2+"h "+s/2+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size;this._basicDot({x:e,y:s,size:i,rotation:0})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size;this._basicSquare({x:e,y:s,size:i,rotation:0})},t.prototype._drawRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,h=r?+r(0,1):0,l=n+o+a+h;if(0!==l)if(l>2||n&&o||a&&h)this._basicSquare({x:e,y:s,size:i,rotation:0});else{if(2===l){var d=0;return n&&a?d=Math.PI/2:a&&o?d=Math.PI:o&&h&&(d=-Math.PI/2),void this._basicCornerRounded({x:e,y:s,size:i,rotation:d})}if(1===l)return d=0,a?d=Math.PI/2:o?d=Math.PI:h&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:s,size:i,rotation:d})}else this._basicDot({x:e,y:s,size:i,rotation:0})},t.prototype._drawExtraRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,h=r?+r(0,1):0,l=n+o+a+h;if(0!==l)if(l>2||n&&o||a&&h)this._basicSquare({x:e,y:s,size:i,rotation:0});else{if(2===l){var d=0;return n&&a?d=Math.PI/2:a&&o?d=Math.PI:o&&h&&(d=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:s,size:i,rotation:d})}if(1===l)return d=0,a?d=Math.PI/2:o?d=Math.PI:h&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:s,size:i,rotation:d})}else this._basicDot({x:e,y:s,size:i,rotation:0})},t.prototype._drawClassy=function(t){var e=t.x,s=t.y,i=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,h=r?+r(0,1):0;0!==n+o+a+h?n||a?o||h?this._basicSquare({x:e,y:s,size:i,rotation:0}):this._basicCornerRounded({x:e,y:s,size:i,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:s,size:i,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:s,size:i,rotation:Math.PI/2})},t.prototype._drawClassyRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,h=r?+r(0,1):0;0!==n+o+a+h?n||a?o||h?this._basicSquare({x:e,y:s,size:i,rotation:0}):this._basicCornerExtraRounded({x:e,y:s,size:i,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:s,size:i,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:s,size:i,rotation:Math.PI/2})},t}();var k=function(){return(k=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const L=function(){function t(t){var e=t.svg,s=t.type;this._svg=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r;switch(this._type){case m:r=this._drawSquare;break;case y:r=this._drawExtraRounded;break;case"dot":default:r=this._drawDot}r.call(this,{x:t,y:e,size:s,rotation:i})},t.prototype._rotateFigure=function(t){var e,s=t.x,i=t.y,r=t.size,n=t.rotation,o=void 0===n?0:n,a=s+r/2,h=i+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*o/Math.PI+","+a+","+h+")")},t.prototype._basicDot=function(t){var e=this,s=t.size,i=t.x,r=t.y,n=s/7;this._rotateFigure(k(k({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+(i+s/2)+" "+r+"a "+s/2+" "+s/2+" 0 1 0 0.1 0zm 0 "+n+"a "+(s/2-n)+" "+(s/2-n)+" 0 1 1 -0.1 0Z")}}))},t.prototype._basicSquare=function(t){var e=this,s=t.size,i=t.x,r=t.y,n=s/7;this._rotateFigure(k(k({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+i+" "+r+"v "+s+"h "+s+"v "+-s+"zM "+(i+n)+" "+(r+n)+"h "+(s-2*n)+"v "+(s-2*n)+"h "+(2*n-s)+"z")}}))},t.prototype._basicExtraRounded=function(t){var e=this,s=t.size,i=t.x,r=t.y,n=s/7;this._rotateFigure(k(k({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+i+" "+(r+2.5*n)+"v "+2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*n+" "+2.5*n+"h "+2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*n+" "+2.5*-n+"v "+-2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*-n+" "+2.5*-n+"h "+-2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*-n+" "+2.5*n+"M "+(i+2.5*n)+" "+(r+n)+"h "+2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*n+" "+1.5*n+"v "+2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*-n+" "+1.5*n+"h "+-2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*-n+" "+1.5*-n+"v "+-2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*n+" "+1.5*-n)}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size,r=t.rotation;this._basicDot({x:e,y:s,size:i,rotation:r})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size,r=t.rotation;this._basicSquare({x:e,y:s,size:i,rotation:r})},t.prototype._drawExtraRounded=function(t){var e=t.x,s=t.y,i=t.size,r=t.rotation;this._basicExtraRounded({x:e,y:s,size:i,rotation:r})},t}();var T=function(){return(T=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const M=function(){function t(t){var e=t.svg,s=t.type;this._svg=e,this._type=s}return t.prototype.draw=function(t,e,s,i){var r;switch(this._type){case S:r=this._drawSquare;break;case"dot":default:r=this._drawDot}r.call(this,{x:t,y:e,size:s,rotation:i})},t.prototype._rotateFigure=function(t){var e,s=t.x,i=t.y,r=t.size,n=t.rotation,o=void 0===n?0:n,a=s+r/2,h=i+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*o/Math.PI+","+a+","+h+")")},t.prototype._basicDot=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(T(T({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(i+s/2)),e._element.setAttribute("cy",String(r+s/2)),e._element.setAttribute("r",String(s/2))}}))},t.prototype._basicSquare=function(t){var e=this,s=t.size,i=t.x,r=t.y;this._rotateFigure(T(T({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(i)),e._element.setAttribute("y",String(r)),e._element.setAttribute("width",String(s)),e._element.setAttribute("height",String(s))}}))},t.prototype._drawDot=function(t){var e=t.x,s=t.y,i=t.size,r=t.rotation;this._basicDot({x:e,y:s,size:i,rotation:r})},t.prototype._drawSquare=function(t){var e=t.x,s=t.y,i=t.size,r=t.rotation;this._basicSquare({x:e,y:s,size:i,rotation:r})},t}();var P=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],I=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const N=function(){function t(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t}return Object.defineProperty(t.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),t.prototype.getElement=function(){return this._element},t.prototype.clear=function(){var t,e=this._element;this._element=e.cloneNode(!1),null===(t=null==e?void 0:e.parentNode)||void 0===t||t.replaceChild(this._element,e),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs)},t.prototype.drawQR=function(t){return e=this,i=function(){var e,s,i,r,n,o,a,d,_,c=this;return function(t,e){var s,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,i&&(r=2&n[0]?i.return:n[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],i=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}}(this,(function(u){switch(u.label){case 0:return e=t.getModuleCount(),s=Math.min(this._options.width,this._options.height)-2*this._options.margin,i=Math.floor(s/e),r={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(u.sent(),!this._image)return[2];n=this._options,o=n.imageOptions,a=n.qrOptions,d=o.imageSize*l[a.errorCorrectionLevel],_=Math.floor(d*e*e),r=h({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:_,maxHiddenAxisDots:e-14,dotSize:i}),u.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots((function(t,s){var i,n,o,a,h,l;return!(c._options.imageOptions.hideBackgroundDots&&t>=(e-r.hideXDots)/2&&t<(e+r.hideXDots)/2&&s>=(e-r.hideYDots)/2&&s<(e+r.hideYDots)/2||(null===(i=P[t])||void 0===i?void 0:i[s])||(null===(n=P[t-e+7])||void 0===n?void 0:n[s])||(null===(o=P[t])||void 0===o?void 0:o[s-e+7])||(null===(a=I[t])||void 0===a?void 0:a[s])||(null===(h=I[t-e+7])||void 0===h?void 0:h[s])||(null===(l=I[t])||void 0===l?void 0:l[s-e+7]))})),this.drawCorners(),this._options.image&&this.drawImage({width:r.width,height:r.height,count:e,dotSize:i}),[2]}}))},new((s=void 0)||(s=Promise))((function(t,r){function n(t){try{a(i.next(t))}catch(t){r(t)}}function o(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(n,o)}a((i=i.apply(e,[])).next())}));var e,s,i},t.prototype.drawBackground=function(){var t,e,s=this._element,i=this._options;if(s){var r=null===(t=i.backgroundOptions)||void 0===t?void 0:t.gradient,n=null===(e=i.backgroundOptions)||void 0===e?void 0:e.color;(r||n)&&this._createColor({options:r,color:n,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"background-color"})}},t.prototype.drawDots=function(t){var e,s,i=this;if(!this._qr)throw"QR code is not defined";var r=this._options,n=this._qr.getModuleCount();if(n>r.width||n>r.height)throw"The canvas is too small.";var o=Math.min(r.width,r.height)-2*r.margin,a=Math.floor(o/n),h=Math.floor((r.width-n*a)/2),l=Math.floor((r.height-n*a)/2),d=new D({svg:this._element,type:r.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(e=r.dotsOptions)||void 0===e?void 0:e.gradient,color:r.dotsOptions.color,additionalRotation:0,x:h,y:l,height:n*a,width:n*a,name:"dot-color"});for(var _=function(e){for(var r=function(r){return t&&!t(e,r)?"continue":(null===(s=c._qr)||void 0===s?void 0:s.isDark(e,r))?(d.draw(h+e*a,l+r*a,a,(function(s,o){return!(e+s<0||r+o<0||e+s>=n||r+o>=n)&&!(t&&!t(e+s,r+o))&&!!i._qr&&i._qr.isDark(e+s,r+o)})),void(d._element&&c._dotsClipPath&&c._dotsClipPath.appendChild(d._element))):"continue"},o=0;o<n;o++)r(o)},c=this,u=0;u<n;u++)_(u)},t.prototype.drawCorners=function(){var t=this;if(!this._qr)throw"QR code is not defined";var e=this._element,s=this._options;if(!e)throw"Element code is not defined";var i=this._qr.getModuleCount(),r=Math.min(s.width,s.height)-2*s.margin,n=Math.floor(r/i),o=7*n,a=3*n,h=Math.floor((s.width-i*n)/2),l=Math.floor((s.height-i*n)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(e){var r,d,_,c,u,g,p,f,w,m,y,v,b=e[0],S=e[1],C=e[2],x=h+b*n*(i-7),R=l+S*n*(i-7),E=t._dotsClipPath,V=t._dotsClipPath;if(((null===(r=s.cornersSquareOptions)||void 0===r?void 0:r.gradient)||(null===(d=s.cornersSquareOptions)||void 0===d?void 0:d.color))&&((E=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+b+"-"+S),t._defs.appendChild(E),t._cornersSquareClipPath=t._cornersDotClipPath=V=E,t._createColor({options:null===(_=s.cornersSquareOptions)||void 0===_?void 0:_.gradient,color:null===(c=s.cornersSquareOptions)||void 0===c?void 0:c.color,additionalRotation:C,x:x,y:R,height:o,width:o,name:"corners-square-color-"+b+"-"+S})),null===(u=s.cornersSquareOptions)||void 0===u?void 0:u.type){var $=new L({svg:t._element,type:s.cornersSquareOptions.type});$.draw(x,R,o,C),$._element&&E&&E.appendChild($._element)}else for(var A=new D({svg:t._element,type:s.dotsOptions.type}),k=function(t){for(var e=function(e){if(!(null===(g=P[t])||void 0===g?void 0:g[e]))return"continue";A.draw(x+t*n,R+e*n,n,(function(s,i){var r;return!!(null===(r=P[t+s])||void 0===r?void 0:r[e+i])})),A._element&&E&&E.appendChild(A._element)},s=0;s<P[t].length;s++)e(s)},T=0;T<P.length;T++)k(T);if(((null===(p=s.cornersDotOptions)||void 0===p?void 0:p.gradient)||(null===(f=s.cornersDotOptions)||void 0===f?void 0:f.color))&&((V=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+b+"-"+S),t._defs.appendChild(V),t._cornersDotClipPath=V,t._createColor({options:null===(w=s.cornersDotOptions)||void 0===w?void 0:w.gradient,color:null===(m=s.cornersDotOptions)||void 0===m?void 0:m.color,additionalRotation:C,x:x+2*n,y:R+2*n,height:a,width:a,name:"corners-dot-color-"+b+"-"+S})),null===(y=s.cornersDotOptions)||void 0===y?void 0:y.type){var N=new M({svg:t._element,type:s.cornersDotOptions.type});N.draw(x+2*n,R+2*n,a,C),N._element&&V&&V.appendChild(N._element)}else{A=new D({svg:t._element,type:s.dotsOptions.type});var O=function(t){for(var e=function(e){if(!(null===(v=I[t])||void 0===v?void 0:v[e]))return"continue";A.draw(x+t*n,R+e*n,n,(function(s,i){var r;return!!(null===(r=I[t+s])||void 0===r?void 0:r[e+i])})),A._element&&V&&V.appendChild(A._element)},s=0;s<I[t].length;s++)e(s)};for(T=0;T<I.length;T++)O(T)}}))},t.prototype.loadImage=function(){var t=this;return new Promise((function(e,s){var i=t._options,r=new Image;if(!i.image)return s("Image is not defined");"string"==typeof i.imageOptions.crossOrigin&&(r.crossOrigin=i.imageOptions.crossOrigin),t._image=r,r.onload=function(){e()},r.src=i.image}))},t.prototype.drawImage=function(t){var e=t.width,s=t.height,i=t.count,r=t.dotSize,n=this._options,o=Math.floor((n.width-i*r)/2),a=Math.floor((n.height-i*r)/2),h=o+n.imageOptions.margin+(i*r-e)/2,l=a+n.imageOptions.margin+(i*r-s)/2,d=e-2*n.imageOptions.margin,_=s-2*n.imageOptions.margin,c=document.createElementNS("http://www.w3.org/2000/svg","image");c.setAttribute("href",n.image||""),c.setAttribute("x",String(h)),c.setAttribute("y",String(l)),c.setAttribute("width",d+"px"),c.setAttribute("height",_+"px"),this._element.appendChild(c)},t.prototype._createColor=function(t){var e=t.options,s=t.color,i=t.additionalRotation,r=t.x,n=t.y,o=t.height,a=t.width,h=t.name,l=a>o?a:o,d=document.createElementNS("http://www.w3.org/2000/svg","rect");if(d.setAttribute("x",String(r)),d.setAttribute("y",String(n)),d.setAttribute("height",String(o)),d.setAttribute("width",String(a)),d.setAttribute("clip-path","url('#clip-path-"+h+"')"),e){var _;if(e.type===R)(_=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",h),_.setAttribute("gradientUnits","userSpaceOnUse"),_.setAttribute("fx",String(r+a/2)),_.setAttribute("fy",String(n+o/2)),_.setAttribute("cx",String(r+a/2)),_.setAttribute("cy",String(n+o/2)),_.setAttribute("r",String(l/2));else{var c=((e.rotation||0)+i)%(2*Math.PI),u=(c+2*Math.PI)%(2*Math.PI),g=r+a/2,p=n+o/2,f=r+a/2,w=n+o/2;u>=0&&u<=.25*Math.PI||u>1.75*Math.PI&&u<=2*Math.PI?(g-=a/2,p-=o/2*Math.tan(c),f+=a/2,w+=o/2*Math.tan(c)):u>.25*Math.PI&&u<=.75*Math.PI?(p-=o/2,g-=a/2/Math.tan(c),w+=o/2,f+=a/2/Math.tan(c)):u>.75*Math.PI&&u<=1.25*Math.PI?(g+=a/2,p+=o/2*Math.tan(c),f-=a/2,w-=o/2*Math.tan(c)):u>1.25*Math.PI&&u<=1.75*Math.PI&&(p+=o/2,g+=a/2/Math.tan(c),w-=o/2,f-=a/2/Math.tan(c)),(_=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",h),_.setAttribute("gradientUnits","userSpaceOnUse"),_.setAttribute("x1",String(Math.round(g))),_.setAttribute("y1",String(Math.round(p))),_.setAttribute("x2",String(Math.round(f))),_.setAttribute("y2",String(Math.round(w)))}e.colorStops.forEach((function(t){var e=t.offset,s=t.color,i=document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset",100*e+"%"),i.setAttribute("stop-color",s),_.appendChild(i)})),d.setAttribute("fill","url('#"+h+"')"),this._defs.appendChild(_)}else s&&d.setAttribute("fill",s);this._element.appendChild(d)},t}(),O="canvas";for(var B={},F=0;F<=40;F++)B[F]=F;const z={type:O,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:B[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};var H=function(){return(H=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function W(t){var e=H({},t);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map((function(t){return H(H({},t),{offset:Number(t.offset)})})),e}function G(t){var e=H({},t);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=H(H({},e.imageOptions),{hideBackgroundDots:Boolean(e.imageOptions.hideBackgroundDots),imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=H({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=W(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=H({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=W(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=H({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=W(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=H({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=W(e.backgroundOptions.gradient))),e}var U=s(192),q=s.n(U),j=function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function o(t){try{h(i.next(t))}catch(t){n(t)}}function a(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,a)}h((i=i.apply(t,e||[])).next())}))},Y=function(t,e){var s,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,i&&(r=2&n[0]?i.return:n[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],i=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};const Q=function(){function t(t){this._options=t?G(o(z,t)):z,this.update()}return t._clearContainer=function(t){t&&(t.innerHTML="")},t.prototype._getQRStylingElement=function(t){return void 0===t&&(t="png"),j(this,void 0,void 0,(function(){var e,s,i;return Y(this,(function(r){switch(r.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==t.toLowerCase()?[3,2]:(s=void 0,e=void 0,this._svg&&this._svgDrawingPromise?(e=this._svg,s=this._svgDrawingPromise):(e=new N(this._options),s=e.drawQR(this._qr)),[4,s]);case 1:return r.sent(),[2,e];case 2:return s=void 0,i=void 0,this._canvas&&this._canvasDrawingPromise?(i=this._canvas,s=this._canvasDrawingPromise):(i=new $(this._options),s=i.drawQR(this._qr)),[4,s];case 3:return r.sent(),[2,i]}}))}))},t.prototype.update=function(e){t._clearContainer(this._container),this._options=e?G(o(this._options,e)):this._options,this._options.data&&(this._qr=q()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===O?(this._canvas=new $(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new N(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))},t.prototype.append=function(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===O?this._canvas&&t.appendChild(this._canvas.getCanvas()):this._svg&&t.appendChild(this._svg.getElement()),this._container=t}},t.prototype.getRawData=function(t){return void 0===t&&(t="png"),j(this,void 0,void 0,(function(){var e,s,i;return Y(this,(function(r){switch(r.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getQRStylingElement(t)];case 1:return e=r.sent(),"svg"===t.toLowerCase()?(s=new XMLSerializer,i=s.serializeToString(e.getElement()),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+i],{type:"image/svg+xml"})]):[2,new Promise((function(s){return e.getCanvas().toBlob(s,"image/"+t,1)}))]}}))}))},t.prototype.download=function(t){return j(this,void 0,void 0,(function(){var e,s,i,r,n;return Y(this,(function(o){switch(o.label){case 0:if(!this._qr)throw"QR code is empty";return e="png",s="qr","string"==typeof t?(e=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof t&&null!==t&&(t.name&&(s=t.name),t.extension&&(e=t.extension)),[4,this._getQRStylingElement(e)];case 1:return i=o.sent(),"svg"===e.toLowerCase()?(r=new XMLSerializer,n='<?xml version="1.0" standalone="no"?>\r\n'+(n=r.serializeToString(i.getElement())),a("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n),s+".svg")):a(i.getCanvas().toDataURL("image/"+e),s+"."+e),[2]}}))}))},t}()}},e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}return s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s(796)})().default})),Al=(Vl=$l)&&Vl.__esModule&&Object.prototype.hasOwnProperty.call(Vl,"default")?Vl.default:Vl;$l.QRCodeStyling;class Dl extends an{_doPrepare(t,e){(e._shape=new Al({qrOptions:{errorCorrectionLevel:ps.Q}})).append(e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e._shape,o=this._value,a=null==o?"":String(o),{w:h,h:l}=r.getQrcodeSize();if(n.update({type:r.output||"canvas",width:h,height:l,data:a,dotsOptions:{},backgroundOptions:{}}),ce.TESTING)return{width:h,height:l}}_doRender(t,e,s,i){}_doUnprepare(t,e){e._shape=null}setValue(t,e){}}Dl.SPAN_CLASS="rtc-qrcode-span";class kl extends Dl{_doPrepare(t,e){e._shape=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const{w:r,h:n}=this._model.getQrcodeSize();return{width:r,height:n}}}class Ll extends on{_doPrepare(t,e){e[pt]=this.$_buildGroup(t,this._model,e)}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const r=this._model,n=r.values,o=n?n.length:0,a=e[pt].firstElementChild;let h=0,l=0;if(this._setClass(a,t.row),this._setContext(t,e,r),o>0){const s=t.value(),i=r.labels||[],h=r.labelWrap&&!isNaN(t._explicitWidth)?"pre-wrap":"pre",l=r.boxGap+"px",d=r.itemGap+"px";n.forEach((r,_)=>{const c=a.children[_],u=c.firstElementChild,g=c.children[1],p=e.id+"-"+_;h&&de.setWidth(c,t._explicitWidth),u.checked=r===s,u.id=p,u.name=e.id,u.style.marginRight=l,g.style.whiteSpace=h,g.textContent=i[_]||n[_],g.htmlFor=p,_<o-1&&(c.style.marginBottom=d)})}return h=e.offsetWidth,l=e.offsetHeight,{width:h,height:l}}_doRender(t,e,s,i){e[pt]}_doUnprepare(t,e){e[pt]=null}setValue(t,e){}$_buildGroup(t,e,s){let i,r=s.getElementsByClassName(Ll.CLASS_NAME)[0];r?i=r.firstElementChild:(r=t.doc.createElement("div"),r.className=Ll.CLASS_NAME,i=t.doc.createElement("div"),i.className=Ll.GROUP_CLASS,Object.assign(i.style,{display:"flex",flexDirection:"column"}),r.appendChild(i),s.appendChild(r));const n=e.valueCount;for(;i.children.length<n;){const e=t.doc.createElement("div"),s=t.doc.createElement("input"),r=t.doc.createElement("label");Object.assign(e.style,{display:"flex"}),s.className=Ll.BOX_CLASS,s.type="radio",Object.assign(s.style,{flex:"none"}),r.className=Ll.LABEL_CLASS,Object.assign(r.style,{flexGrow:1}),e.appendChild(s),e.appendChild(r),i.appendChild(e)}for(;i.children.length>n;)i.lastElementChild.remove();return r}}Ll.CLASS_NAME="rtc-radiogroup",Ll.GROUP_CLASS="rtc-radiogroup-group",Ll.BOX_CLASS="rtc-radiogroup-box",Ll.LABEL_CLASS="rtc-radiogroup-label";class Tl extends pl{_measureBox(t,e){super._measureBox(t,e);const s=this._model;e.name=(s.group||"_dlist_radio_group_")+t.row}setValue(t,e){}_getBoxType(){return"radio"}_getBoxClass(){return Tl.BOX_CLASS}}Tl.BOX_CLASS="rtc-radio-box";class Ml extends on{_doPrepare(t,e){e[pt]=this.$_getGroup(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){return{width:0,height:0}}_doRender(t,e,s,i){}_doUnprepare(t,e){}setValue(t,e){}$_getGroup(t,e){let s=e.getElementsByClassName(Ml.GROUP_CLASS)[0];return s||(s=t.doc.createElement("div"),s.className=Ml.GROUP_CLASS,e.appendChild(s)),s}}Ml.GROUP_CLASS="rtc-rating-group";class Pl extends on{_doDisposeContent(t){t.getElementsByClassName(Pl.BOX_CLASS)[0].onchange=null}_doPrepare(t,e){e[gt]=this.$_getSelect(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[gt];let o=r.boxWidth;if(this._setClass(n,t.row),isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),!isNaN(o)&&de.setWidth(n,o),this._setContext(t,n,r),r.itemsChanged&&(de.clearChildren(n),r.isGrouped?this.$_buildGroups(t.doc,r,n):this.$_buildOptions(t.doc,r,n)),n.value=t.value(),ce.TESTING){return{width:n.offsetWidth,height:n.offsetHeight}}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[gt]=null}setValue(t,e){}$_getSelect(t,e){let s=e.getElementsByClassName(Pl.BOX_CLASS)[0];if(!s){const i=t.doc.createElement("div");s=t.doc.createElement("select"),s.className=Pl.BOX_CLASS,s.onchange=t=>{const e={id:s.id,field:s._fld_,selectedIndex:s.selectedIndex,selectedValue:s.value};console.log("select changed",e,t)},i.appendChild(s),e.appendChild(i)}return s}$_buildOptions(t,e,s){const i=e._values,r=i?i.length:0;if(r>0){const n=e._labels,o=n?n.length:0;for(let e=0;e<r;e++){const r=t.createElement("option");r.value=i[e],r.text=o>e?n[e]:i[e],s.add(r)}}}$_buildGroups(t,e,s){const i=e._groups;i.length;for(let e of i){const i=e.values,r=e.labels,n=i?i.length:0,o=r?r.length:0,a=t.createElement("optgroup");if(a.label=e.group,n>0){for(let e=0;e<n;e++){const s=t.createElement("option");s.value=i[e],s.text=o>e?r[e]:i[e],a.appendChild(s)}s.add(a)}}}}Pl.BOX_CLASS="rtc-select-box";class Il extends on{_doDisposeContent(){this._shape=e.destroy(this._shape)}_doPrepare(t,e){this._shape=this.$_getShape(t,e)}_getStyleTarget(t){return this._shape&&this._shape.styleTarget()}_doMeasure(t,e,s,i){const r=this.model();let n=r.getShapeWidth()||t._explicitWidth,o=r.getShapeHeight()||t._explicitHeight;if(this._shape){const e=this._shape.dom();this._setClass(e,t.row);const s=r.hint||"";this._shape.resize(n,o),de.resize(e,n,o),de.setAttr(e,"aria-label",s),de.setAttr(e,"aria-hidden",r.decorative||!s)}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[wt]=null}setValue(t,e){}$_getShape(t,e){const s=t.manager().owner().shapes(),i=this._model.getShapeName(),r=e.getElementsByClassName(Il.SVG_CLASS)[0];let n;return r&&e._name_===i?r&&(n=s.createStock(r,i,Il.SVG_CLASS)||s.createCustom(i,r,null)):(r&&r.remove(),n=s.createStock(t.doc,i,Il.SVG_CLASS)||s.createCustom(i,null,null),n&&(n instanceof ki&&n.setShape(s.getCustom(i)),n.appendTo(e),e._name_=i,this._shape=n)),n}}Il.SVG_CLASS="rtc-shape-svg";class Nl extends Il{_doPrepare(t,e){this._shape=e[wt]=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){const r=this.model();return{width:r.getShapeWidth()||t._explicitWidth,height:r.getShapeHeight()||t._explicitHeight}}}class Ol extends ln{_doMeasure(t,e,s,i){const r=this._model,n=this._values=this._getValues(t,r.baseValue);let o=It(r.chartWidth,t._explicitWidth),a=It(r.chartHeight,t._explicitHeight);return this._setClass(this._svg.svg,t.row),isNaN(o)?o=this._measureChart(t,this._svg,n.values):this._wPoint=NaN,isNaN(a)&&(a=Math.min(Ol.DEF_HEIGHT,i)),{width:o,height:a}}_doRender(t,e,s,i){this._svg.setSize(s,i),this._svg.clear(),this._values.values.length&&this._renderChart(t,this._svg,this._values,s,i)}setValue(t,e){}_measureChart(t,e,s){return(this._wPoint=Math.max(1,It(this._model.pointWidth,1)))*s.length}}Ol.DEF_HEIGHT=30;class Bl extends Ol{_getSvgClass(){return Bl.SVG_CLASS}_renderChart(t,e,s,i,r){const n=this._model,o=s.values,a=s.hasBelow,h=It(n.maxValue,s.max),l=o.length,d=It(this._wPoint,i/l),_=d*this._model.pointSize;let c=0;if(a);else{let t=It(n.minValue,n.baseValue);isNaN(t)&&(t=s.min,n.minPadding>0&&(t-=(h-t)*n.minPadding));for(let i=0;i<l;i++){const a=o[i],u=c+d/2,g=r-(o[i]-t)*r/(h-t),p=e.rect(u-_/2,g,_,r,null).style;0===i&&n.firstStyle&&Object.assign(p,n.firstStyle),i===l-1&&n.lastStyle&&Object.assign(p,n.lastStyle),a===s.max&&n.maxStyle&&Object.assign(p,n.maxStyle),a===s.min&&n.minStyle&&Object.assign(p,n.minStyle),c+=d}}}}Bl.SVG_CLASS="rtc-sparkbar-svg";class Fl extends Ol{_getSvgClass(){return Fl.SVG_CLASS}_renderChart(t,e,s,i,r){const n=this._model,o=s.values,a=It(n.maxValue,s.max),h=o.length,l=It(this._wPoint,i/h),d=[];let _=0,c=n.minValue;isNaN(c)&&(c=s.min,n.minPadding>0&&(c-=(a-c)*n.minPadding));for(let t=0;t<h;t++){const e=_+l/2,s=r-(o[t]-c)*r/(a-c);d.push(e,s),_+=l}e.polyline(d)}}Fl.SVG_CLASS="rtc-sparkline-svg";class zl extends Bl{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){return{width:10,height:10}}_doRender(t,e,s,i){}}class Hl extends Fl{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,s,i){return{width:10,height:10}}_doRender(t,e,s,i){}}class Wl extends ln{_getSvgClass(){return Wl.SVG_CLASS}_doMeasure(t,e,s,i){const r=this.model();let n=t._explicitWidth||r.getSvgWidth(),o=t._explicitHeight||r.getSvgHeight();if(this._svg){const e=this._svg,s=r.shapes,i=e.svg;e.clear(),Array.isArray(s)?s.forEach(t=>e.path(t)):s&&e.path(s),e.setViewSize(r.getVboxWidth(),r.getVboxHeight()),e.setSize(r.getSvgWidth(),r.getSvgHeight()),this._setClass(i,t.row);const a=r.hint||"";de.resize(i,n,o),de.setAttr(i,"aria-label",a),de.setAttr(i,"aria-hidden",r.decorative||!a)}}_doRender(t,e,s,i){}setValue(t,e){}}Wl.SVG_CLASS="rtc-svg-svg";class Gl extends hn{getValue(t){let e=t.getElementsByClassName(Gl.BOX_CLASS)[0];return e instanceof HTMLInputElement&&!!e.checked}_doDisposeContent(t){let e=t.getElementsByClassName(Gl.CLASS_NAME)[0];if(e){e.firstElementChild.children[1].onclick=null}}_doPrepare(t,e){e[pt]=this.$_getSwitch(t,e)}_getStyleTarget(t){}_doMeasure(t,e,s,i){const r=this._model,n=e[pt].firstElementChild,o=n.firstElementChild,a=n.children[1],h=w.pickNum(r.boxSize,Gl.DEF_SIZE);let l=1.7*h,d=h;if(this._setClass(n,t.row),this._setContext(t,o,r),a.id=r.id+"_span",o.checked=r.isTrue(this._value),n.style.setProperty("--switch-size",h+"px"),n.style.setProperty("--switch-on",.7*h+"px"),r.style&&r.style.backgroundColor&&n.style.setProperty("--switch-color",r.style.backgroundColor),a.style.width=l+"px",a.style.height=d+"px",ce.TESTING)return{width:l,height:d}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[pt]=null}setValue(t,e){}$_getSwitch(t,e){let s=e.getElementsByClassName(Gl.CLASS_NAME)[0];if(!s){s=t.doc.createElement("div"),s.className=Gl.CLASS_NAME;const i=t.doc.createElement("div");i.className=Gl.SWITCH_CLASS,Object.assign(i.style,{});const r=t.doc.createElement("input");r.className=Gl.BOX_CLASS,r.type="checkbox",r.style.display="none";const n=t.doc.createElement("div");n.className=Gl.SPAN_CLASS,Object.assign(n.style,{position:"relative",display:"block"}),n.onclick=function(t){const e=t.target.parentElement.getElementsByClassName(Gl.BOX_CLASS)[0];e.checked=!e.checked},n._clkable=!0,i.appendChild(r),i.appendChild(n),s.appendChild(i),e.appendChild(s)}return s}}Gl.CLASS_NAME="rtc-switch",Gl.SWITCH_CLASS="rtc-switch-switch",Gl.BOX_CLASS="rtc-switch-box",Gl.SPAN_CLASS="rtc-switch-span",Gl.SWITCH_SIZE="--dl-switch-size",Gl.SWITCH_COLOR="--dl-switch-color",Gl.DEF_SIZE=24;class Ul extends bl{_doPrepare(t,e){e[ct]=this.$_getLabel(t,e),super._doPrepare(t,e)}$_getLabel(t,e){let s=e.getElementsByClassName(Ul.LABEL_CLASS)[0];if(!s){s=t.createElement("div"),s.className=Ul.LABEL_CLASS;const i=t.doc.createElement("label");s.appendChild(i),e.appendChild(s)}return s}}Ul.LABEL_CLASS="rtc-label-label";class ql extends on{_doPrepare(t,e){e[wt]=this.$_getShape(t,e)}_getStyleTarget(t){return t[wt].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[wt],o=n.firstElementChild;this._setClass(o,t.row),o.textContent=r.letter,o.setAttribute("x",50+100*(r.offsetX||0)+"%"),o.setAttribute("y",50+100*(r.offsetY||0)+"%");const a=o.getBoundingClientRect();if(n.style.width=a.width+"px",n.style.height=a.height+"px",ce.TESTING)return{width:20,height:30}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[wt]=null}setValue(t,e){}$_getShape(t,e){let s=e.getElementsByClassName(ql.SVG_CLASS)[0];if(!s){const i=t.doc.createElementNS(Ls,"text");i.setAttribute("x","50%"),i.setAttribute("y","50%"),i.setAttribute("dominant-baseline","middle"),i.setAttribute("text-anchor","middle"),s=t.doc.createElementNS(Ls,"svg"),s.classList.add(ql.SVG_CLASS),s.appendChild(i),e.appendChild(s)}return s}}ql.SVG_CLASS="rtc-letter-svg";class jl extends on{_doPrepare(t,e){e[ct]=this.$_getSpan(t,e)}_getStyleTarget(t){return t[ct].style}_doMeasure(t,e,s,i){const r=this.model(),n=this._wLine=r.thickness||0,o=e[ct],a=t.layout._parent,h=this._horz="horizontal"===r.dir||"vertical"!==r.dir&&a.canContainVspace(),l=It(t._explicitWidth,h?s:n),d=It(t._explicitHeight,h?n:i),_=o.style;return this._setClass(o,t.row),_.borderWidth=h?`0 0 ${n}px 0`:`0 ${n}px 0 0`,_.borderColor=r.lineColor,_.borderStyle=r.lineStyle,{width:l,height:d}}_doRender(t,e,s,i){const r=e[ct],n=this._wLine;this._horz?i!==n&&(de.setHeight(r,n),de.moveY(r,(i-n)/2)):s!==n&&(de.setWidth(r,n),de.moveX(r,(s-n)/2))}_doUnprepare(t,e){e[ct]=null}setValue(t,e){}$_getSpan(t,e){let s=e.getElementsByClassName(jl.SPAN_CLASS)[0];return s||(s=t.createElement("span"),s.className=jl.SPAN_CLASS,Object.assign(s.style,{display:"block",position:"absolute",boxSizing:"border-box",width:"100%",height:"100%"}),e.appendChild(s)),s}}jl.SPAN_CLASS="rtc-line-span";class Yl extends on{_doPrepare(t,e){e[wt]=this.$_getSVG(t,e)}_getStyleTarget(t){return t[wt].style}_doMeasure(t,e,s,i){const r=this.model(),n=e[wt];let o=r.getSpinnerWidth()||t._explicitWidth,a=r.getSpinnerHeight()||t._explicitHeight;if(this._setClass(n,t.row),n){const t=n._sts_,e=r.hint||"";let s;switch(r.spinnerType){case Ms.SPOKES:s="rtc-spinner-spoke";break;default:s="rtc-spinner-default"}return t&&n.classList.remove(t),n.classList.add(s),n._sts_=s,de.setAttr(n,"aria-label",e),de.setAttr(n,"aria-hidden",!e),de.clearChildren(n),void de.resize(n,o,a)}}_doRender(t,e,s,i){const r=this.model(),n=e[wt];de.resize(n,s,i),Is.render(t.doc,n,{type:r.spinnerType,width:s,height:i,itemCount:r.itemCount,duration:r.duration})}_doUnprepare(t,e){e[wt]=null}setValue(t,e){}$_getSVG(t,e){let s=e.getElementsByClassName(Yl.SVG_CLASS)[0];if(!s){const i=t.doc;s=Ts.create(i),s.classList.add(Yl.SVG_CLASS),e.appendChild(s)}return s}}Yl.SVG_CLASS="rtc-spinner-svg";class Ql extends Yl{_doMeasure(t,e,s,i){const r=this.model();return{width:r.getSpinnerWidth()||t._explicitWidth,height:r.getSpinnerHeight()||t._explicitHeight}}_doRender(t,e,s,i){}}const Zl="①".charCodeAt(0);class Xl extends an{_doPrepare(t,e){e[ct]=this.$_getDiv(t,e)}_doMeasure(t,e,s,i){const r=this._model,n=t.manager().data(),o=n&&n.fieldByName(r.field||t.layout.getField()),a=o&&n instanceof ao&&n.isSorted(o),h=this._orderVis=this.$_getOrderVisible(t,r),{span:l,dir:d,order:_}=this.$_getSpans(e);let c=0,u=0;return this._setClass(l,t.row),l.textContent=r.label||(o?o.displayText():r.field||this._value),a?(de.show(d),d.textContent=a.dir===Dt.ASCENDING?"↓":"↑",c=d.offsetWidth,h?(de.show(_),_.textContent=String.fromCharCode(Zl+a.order),c+=_.offsetWidth):de.hide(_)):(de.hide(d),de.hide(_)),c+=l.offsetWidth,u=Math.max(l.offsetHeight,d.offsetHeight),h&&(u=Math.max(u,_.offsetHeight)),{width:this._wSpans=c,height:u}}_doRender(t,e,s,i){const{span:r,dir:n,order:o}=this.$_getSpans(e);let a;switch(t.align()){case Et.LEFT:a=0;break;case Et.RIGHT:a=Math.max(0,s=this._wSpans);break;default:a=(s-this._wSpans)/2}de.move(r,a,(i-r.offsetHeight)/2),a+=r.offsetWidth,de.move(n,a,(i-n.offsetHeight)/2),this._orderVis&&(a+=n.offsetWidth,de.move(o,a,(i-o.offsetHeight)/2))}_doUnprepare(t,e){e[ct]=null}setValue(t,e){}$_getDiv(t,e){function s(){const e=t.doc.createElement("span");return e.style.position="absolute",i.appendChild(e),e}let i=e.getElementsByClassName(Xl.FIELD_CLASS)[0];return i||(i=t.createElement("div"),i.className=Xl.FIELD_CLASS,de.setStyle(s(),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),s().className=Xl.DIR_CLASS,s().className=Xl.ORDER_CLASS,e.appendChild(i)),i}$_getSpans(t){const e=t[ct].children;return{span:e[0],dir:e[1],order:e[2]}}$_getOrderVisible(t,e){const s=e.orderVisibility;if(s===Ps.VISIBLE)return!0;if(s===Ps.HIDDEN)return!1;const i=t.manager().layoutContainer;return!(!i||!i[Xl.IS_FIELD_ORDER_VISIBLE])&&i[Xl.IS_FIELD_ORDER_VISIBLE]()}}Xl.FIELD_CLASS="rtc-field-field",Xl.DIR_CLASS="rtc-field-dir",Xl.ORDER_CLASS="rtc-field-order",Xl.IS_FIELD_ORDER_VISIBLE="isFieldOrderVisible";const Kl={width:"",color:"transparent",borderRadius:"5px"},Jl=Object.assign(Kl,{backgroundColor:"#e0e0e0",backgroundImage:"linear-gradient(90deg, #e0e0e0, #efefef 50%, #e0e0e0)",backgroundRepeat:"no-repeat"});class td extends on{setAnimation(t){this._ani=t}_doPrepare(t,e){e[ct]=this.$_getDiv(t,e)}_doMeasure(t,e,s,i){this._model;const r=e[ct];if(this._setClass(r,t.row),r.style.width=isNaN(t._explicitWidth)?"":t._explicitWidth+"px",r.textContent="Hello",ce.TESTING){const t=e[ct];return{width:Math.ceil(t.offsetWidth),height:Math.ceil(t.offsetHeight)}}}_doRender(t,e,s,i){const r=e[ct],n=this._ani;if(r.style.maxWidth=s+"px",n){const t=e[ct],s=n.container.getBoundingClientRect(),i=t.getBoundingClientRect();t.style.backgroundSize=`50px ${s.height}px`,t.animate([{backgroundPositionX:s.x-i.x+"px"},{backgroundPositionX:s.x+s.width-i.x+"px"}],{duration:It(n.duration,n.duration||1200),iterations:1/0})}}_doUnprepare(t,e){e[ct]=null}setValue(t,e){}$_getDiv(t,e){let s=e.getElementsByClassName(td.DUMMY_CLASS)[0];return s||(s=t.createElement("div"),s.className=td.DUMMY_CLASS,Object.assign(s.style,bl.SPAN_STYLE),Object.assign(s.style,t.manager().isSkeleton()?Jl:Kl),s.style.display="inline-blick",e.appendChild(s)),s}}td.DUMMY_CLASS="rtc-dummy-dummy";class ed extends an{_doPrepare(t,e){const s=e[ut]=this.$_getHtml(t,e);this._setClass(s,t.row)}_getStyleTarget(t){return t[ut].style}needBounds(){return!0}_doMeasure(t,e,s,i){const r=e[ut];return{width:Math.ceil(r.offsetWidth),height:Math.ceil(r.offsetHeight)}}_doRender(t,e,s,i){}_doUnprepare(t,e){e[ut]=null}setValue(t,e){}$_getHtml(t,e){const s=this.model();let i=e.getElementsByClassName(ed.HTML_CLASS)[0];i&&i.$_tid_!==s.tid&&(e.removeChild(i),i=null),i||(i=t.doc.createElement("div"),i.className=ed.HTML_CLASS,i.$_tid_=s.tid,e.appendChild(i)),i.style.width="";let r=s.html;if(!r&&s.domid){const e=t.manager().owner().getTemplateHtml(s.domid);if(e instanceof HTMLElement){let i=bt.parse(s.useInner?e.innerHTML:e.outerHTML);r=i instanceof bt?t.inflate(i):i}}return i.innerHTML=r,i}}ed.HTML_CLASS="rtc-html-html";class sd extends vl{_initInput(t){t.style.backgroundColor="white"}_prepareInput(t){this._value instanceof Date&&!isNaN(+this._value)?t.style.height="":t.style.height="1.8em"}_getDefaultValue(){return new Date}_textToValue(t){return new Date(t)}setValue(t,e){}}const id={button:gl,check:pl,date:class extends sd{_getInputType(){return"date"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+w.pad(t.getMonth()+1)+"-"+w.pad(t.getDate()):t}},datetime:class extends sd{_getInputType(){return"datetime-local"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+w.pad(t.getMonth()+1)+"-"+w.pad(t.getDate())+"T"+w.pad(t.getHours())+":"+w.pad(t.getMinutes()):t}},dummy:td,field:Xl,gauge:wl,html:ed,icon:ml,image:yl,input:class extends vl{_getInputType(){return"text"}},label:Ul,letter:ql,line:jl,link:xl,meter:Rl,number:class extends vl{_getInputType(){return"number"}},progress:El,qrcode:Dl,radio:Tl,radiogroup:Ll,rating:Ml,select:Pl,shape:Il,spacer:dn,sparkbar:Bl,sparkline:Fl,spinner:Yl,svg:Wl,switch:Gl,text:Sl,time:class extends sd{_getInputType(){return"time"}_valueToText(t){return t instanceof Date?w.pad(t.getHours())+":"+w.pad(t.getMinutes()):t}_textToValue(t){const e=t?t.split(":"):null;let s=this._value;return s instanceof Date||(s=new Date),e&&(e.length>0&&s.setHours(+e[0]),e.length>1&&s.setMinutes(+e[1]),e.length>2&&s.setSeconds(+e[2])),s}}};class rd{static setTesting(){id.qrcode=kl,id.shape=Nl,id.sparkbar=zl,id.sparkline=Hl,id.svg=Wl,id.text=Cl,id.spinner=Ql}setTesting(){this._renderer=new ds,this._default=new Cl(this._renderer)}constructor(){this._impls={},this._renderer=new ds,this._default=new Sl(this._renderer)}borrow(t){if(t){const e=t.type(),s=(this._impls[e]||(this._impls[e]=[])).pop()||this.$_createImpl(e);if(s)return s.setModel(t),s}return this._default}free(t){if(t!==this._default){const e=t.model(),s=e?e.type():this.$_getType(t.constructor);let i=this._impls[s];i||(i=this._impls[s]=[]),i.push(t)}}$_getType(t){for(let e in id)if(t===id[e])return e}$_createImpl(t){return new id[t]}}class nd extends Zr{constructor(t){super(t.control),this._handler=()=>{this.list.scrollBy(this._delta);const t=this.list.listView().bodyView().itemViews();let e,s=-1;if(this._delta<0){const i=t[0];i instanceof Bn&&(s=i.row(),e="start")}else{const i=t[t.length-1];i instanceof Bn&&(s=i.row(),e="end")}this._edge=e,this._scrollCallback(t,s,e)},this._body=t.bodyView(),this._vertical=this._body.isVertical()}get list(){return this.control}checkScroll(t,e,s,i){const r=this._vertical?e:t,n=this._vertical?this._body.y:this._body.x,o=n+(this._vertical?this._body.height:this._body.width);let a=0;if(r<=n+7?this._body.scrollPos()>0&&(a=-10):r>=o-7&&(this._body.isScrollEnded()||(a=10)),0!==a)return this._timer||(this._scrollCallback=s,this._endScrollCallback=i,this._delta=a,this._timer=setInterval(this._handler,30)),!0;this.$_ended(!1)}end(){try{this.$_ended(!0)}finally{super.end()}}$_ended(t){if(this._timer)try{t&&this._endScrollCallback&&this._endScrollCallback(this._edge)}finally{clearInterval(this._timer),this._timer=void 0,this._scrollCallback=void 0,this._endScrollCallback=void 0}}}class od extends Zr{constructor(t){super(t.control),this._view=t}_doStart(t,e,s,i,r){return this._off=this._view.dom.offsetTop,!0}_doDrag(t,e,s,i,r){const n=this._view.calcPosition(r-this._off);return this.control.setScrollIndex(n,0),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}}class ad extends Zr{constructor(t){super(t)}canSwipe(){return!0}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){const n=this.control;return n.isVertical()?Math.abs(s-r)>Math.abs(e-i)&&n.scrollBy(s-r):Math.abs(e-i)>Math.abs(s-r)&&n.scrollBy(e-i),!0}_canAccept(t,e,s){return!0}_doEnded(){this.control.releaseLock()}}class hd extends nd{constructor(t){super(t),this._callback=(t,e,s)=>{if(e>=0){let e;e="start"===s?t[0]:t[t.length-1],this.$_resizeSelection(e)}},this._endCallback=t=>{}}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){if(this.checkScroll(i,r,this._callback,this._endCallback))return!0;const n=this.control,o=n.listView().bodyView(),a=n.toElement(o,i,r),h=o.itemViewAt(a.x,a.y,ce.TESTING?0:this.handle.height/2);return this.$_resizeSelection(h),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}$_resizeSelection(t){if(t){const e=this.control,s=e.getSelection(),i=t.vindex(),r=this.handle.isEnd()?i:NaN,n=this.handle.isEnd()?NaN:i;It(r,s.end)>=It(n,s.start)&&e.resizeSelection(n,r)}}}class ld extends Zr{constructor(t){super(t.control),this._view=t}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){return this._view.scrollBy(i-e),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){}}class dd extends Zr{constructor(t){super(t),this._nextPage=-1,this._listView=t.listView()}_doStart(t,e,s,i,r){return this._dx=i-e,this.$_preparePageMove(this._dx),!0}_doDrag(t,e,s,i,r){return this._dx=i-e,this.$_movePage(this._dx),!0}_doCanceled(){this.$_cancelPageMove()}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){this.$_commitPageMove(this._dx)}_doSwipe(t){return this.$_swipePageMove(t)}_doEnded(){this.$_endPageMove(this._dx)}$_preparePageMove(t){const e=this._listView,s=e.bodyView();let i=e.getSpareBody();this._bodyPos=s.x,this.control.lock(()=>{e.addChild(i),i.setPage(e.owner().page()+(t<0?1:-1),s,!1),i.moveX(0)}),this._nextPage=-1,e.pageMoving=!0}$_unpreparePageMove(){const t=this._listView,e=t.bodyView(),s=t.getSpareBody();e.moveX(this._bodyPos),t.removeChild(s),s.setPage(-1),e.$_removeEndEffect(),t.pageMoving=!1,this._nextPage>=0&&(t.owner().setPage(this._nextPage),this.control.updateNow())}$_movePage(t){if(0===t)return;const e=this._listView,s=e.owner(),i=e.bodyView(),r=e.getSpareBody(),n=s.page(),o=i.width;let a=i.x+t;i.moveX(a),a=i.x,a<this._bodyPos?(r.setPage(n+1,i,!1),r.moveX(a+o+1)):a>this._bodyPos&&(r.setPage(n-1,i,!1),r.moveX(a-o-1))}$_cancelPageMove(){}$_commitPageMove(t){const e=this._listView,s=e.bodyView(),i=e.owner(),r=e.getSpareBody(),n=i.page(),o=this._bodyPos,a=s.width;(r.page>n&&r.x<=o+.55*a||r.page<n&&s.x>=o+.45*a)&&(this._nextPage=r.page)}$_swipePageMove(t){const e=this._listView,s=e.bodyView(),i=e.owner().page(),r=this._bodyPos,n=s.width,o=e.getSpareBody().x;return t===P.LEFT&&o<r+n?(this._nextPage=i+1,!0):t===P.RIGHT&&o+n>r?(this._nextPage=i-1,!0):void 0}$_endPageMove(t){const e=this._listView;if(e.canAnimate()){const t=e.getSpareBody(),s=e.bodyView(),i=this._nextPage>=0,r=e.width;let n=i?0:t.x<0?-r:r;t.dom.animate([{left:t.x+"px"},{left:n+"px"}],{duration:100,fill:"none"}).addEventListener("finish",()=>{this.$_unpreparePageMove()}),n=i?s.x<0?-r:r:0,s.dom.animate([{left:s.x+"px"},{left:n+"px"}],{duration:100,fill:"none"})}else this.$_unpreparePageMove()}}class _d extends Zr{constructor(t){super(t),this._nextRow=-1,this._bodyView=t.listView().bodyView(),this._singleView=this._bodyView.singleView(),this._spareView=this._bodyView.spareSingleView()}_doStart(t,e,s,i,r){return this._dx=i-e,this.$_prepareSingleMove(),!0}_doDrag(t,e,s,i,r){return this._dx=i-e,this.$_moveSingle(i-e),!0}_doCanceled(){this.$_cancelMoveSingle()}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){this.$_commitMoveSingle(this._dx)}_doSwipe(t){return this.$_swipeMoveSingle(t)}_doEnded(){this.$_endSingleMove(this._dx)}$_prepareSingleMove(){const t=this._bodyView,e=this._singleView,s=this._spareView;this._singlePos=e.x,this.control.lock(()=>{t.insertBefore(s,e),s.moveX(0),s.setDimmed(1)}),this._nextRow=-1,t.singleMoving=!0}$_unprepareSingleMove(){const t=this._bodyView,e=this._singleView,s=this._spareView;e.moveX(this._singlePos),t.removeChild(s),s.setRow(-1,e),t.$_removeEndEffect(),t.singleMoving=!1,this._nextRow>=0&&(t.owner().setScrollIndex(this._nextRow),e.setRow(this._nextRow,e),this.control.updateNow())}$_moveSingle(t){if(0===t)return;const e=this._singleView,s=this._spareView,i=e.row(),r=e.width;let n=e.x+t;e.moveX(n),n=e.x,n<this._singlePos?(s.setRow(i+1,e),s.moveX(n+r+1),s.setDimmed(w.clamp((s.x-.55*r)/(.45*r),0,1))):(s.setRow(i-1,e),s.moveX(n-r-1),s.setDimmed(w.clamp((.45*r-n)/(.45*r),0,1)))}$_cancelMoveSingle(){}$_getNextRow(){const t=this._singleView,e=this._spareView,s=t.row(),i=this._singlePos,r=t.width;return e.row()>s&&e.x<=i+.55*r||e.row()<s&&t.x>=i+.45*r?e.row():-1}$_commitMoveSingle(t){this._nextRow=this.$_getNextRow()}$_swipeMoveSingle(t){const e=this._bodyView,s=this._singleView,i=s.row(),r=this._singlePos,n=s.width,o=e.spareSingleView().x;return s.setDimmed(0),t===P.LEFT&&o<r+n?(this._nextRow=i+1,!0):t===P.RIGHT&&o+n>r?(this._nextRow=i-1,!0):void 0}$_endSingleMove(t){const e=this._bodyView;if(e.canAnimate()){const t=this._singleView,s=this._spareView,i=this._nextRow>=0,r=e.width;let n=i?0:s.x<0?-r:r;t.setDimmed(0),s.dom.style.left=n+"px";const o=s.dom.animate([{left:s.x+"px"},{left:n+"px"}],{duration:100,fill:"none"});o&&(console.log("END ANIMATE"),o.addEventListener("finish",()=>{this.$_unprepareSingleMove()}),n=i?t.x<0?-r:r:0,t.dom.animate([{left:t.x+"px"},{left:n+"px"}],{duration:100,fill:"none"}))}else this.$_unprepareSingleMove()}}class cd extends Zr{constructor(t){super(t.control),this._view=t}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){return this._view.scrollBy(r-s),!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}_doEnded(){this.control.releaseLock()}}let ud="y",gd="top",pd="height",fd="moveY";class wd extends nd{constructor(t){super(t),this._off=0,this._scrolling=!1,this._callback=(t,e,s)=>{const i="start"===s;if(this._scrolling=!0,this.$_resetItems(t),e>=0){let e;e=i?t[0]:t[t.length-1],this._body.canMoveTo(this._row,e)?this.$_setTarget(e,i,!0):this.$_swapViews(-1,i,!0)}else this.$_swapViews(-1,i,!0)},this._endCallback=t=>{this._target&&setTimeout(()=>{this.list.makeRowVisible(this._target)},0)},this._vertical||(ud="x",gd="left",pd="width",fd="moveX"),this.$_resetItems(this._body.itemViews()),this._targetFeedback=this.$_createTargetFeedback(t.doc)}$_createTargetFeedback(t){const e=t.createElement("div");return e.className="rtc-row-move-target",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}setRequest(t){const e=this._body.getRowView(this._row=t.row);return this._target=this._pts=void 0,this._hRow=e.height,this._pRow=e[ud],this._rowFeedback=this.$_createFeedback(e),this}_doStart(t,e,s,i,r){const n=this._body,o=this.control.toElement(n,i,r);return this._off=o[ud]-this._pRow,this.control.setLock(),this.$_resetItems(n.itemViews()),de.setVisible(this._targetFeedback,!1),n.addFeedback(this._targetFeedback),this.$_moveFeedback(this._rowFeedback,i,r),!0}_doDrag(t,e,s,i,r){if(this.$_moveFeedback(this._rowFeedback,i,r),this.checkScroll(i,r,this._callback,this._endCallback))return!0;const n=this._body,o=this._vertical,a=this._off,h=o?r<s:i<e,l=this._hRow;this._scrolling&&(this._scrolling=!1,this.$_resetItems(n.itemViews()),this.$_swapViews(this._row,h,!1)),i+=o?0:h?-a:l-a,r+=o?h?-a:l-a:0;const d=this.control.toElement(n,i,r),_=this.$_itemViewAt(d[ud]+n.scrollOff());let c=_&&_.view;return c&&c.row()!==this._row&&(n.canMoveTo(this._row,c)?(h&&_.pos>c.height/2||!h&&_.pos<c.height/2)&&(c=null):c=null),c&&this.$_setTarget(c,h,!1),de.setVisible(this._targetFeedback,!!this._target),!0}_doCanceled(){}_canAccept(t,e,s){return this._target>=0&&this._target!==this._row}_doCompleted(t,e,s){const i=this.control.data();i instanceof Xn&&(console.log("MOVE",this._row,this._target),i.moveRow(this._row,this._target))}_doEnded(){super._doEnded(),this._views.forEach(t=>t.visible=!0),this._rowFeedback.remove(),this._rowFeedback=null,this._targetFeedback.remove(),this.control.releaseLock(),this.control.invalidateLayout()}$_resetItems(t){const e=this._pts=[0];(this._views=t).forEach(t=>{e.push(e[e.length-1]+t[pd])})}$_itemViewAt(t){const e=this._pts;for(let s=0,i=e.length-1;s<i;s++)if(t>=e[s]&&t<e[s+1])return{view:this._views[s],pos:t-e[s]}}$_createFeedback(t){const e=t.dom.cloneNode(!0);return Object.assign(e.style,{boxShadow:"0px 0px 5px"}),this._body.listView().addFeedback(e),e}$_moveFeedback(t,e,s){this._vertical?de.move(this._rowFeedback,0,s-this._off):de.move(this._rowFeedback,e-this._off,0)}$_swapViews(t,e,s){const i=[],r=this._views,n=r.slice(0),o=-this._body.scrollOff();let a,h=0;if(a=r.findIndex(t=>t.row()===this._row),a>=0){const e=n.splice(a,1)[0];s||(a=r.findIndex(e=>e.row()===t),a>=0&&n.splice(a,0,e)),e.move(-1e5,-1e4)}return i.push(h),n.forEach(e=>{e.aniTag=e[ud],e.row()===t&&de.setRect(this._targetFeedback,e.getBounds()),e[fd](h+o),h+=e.height,i.push(h)}),this._prevUp=e,this._views=n,this._pts=i,this._target=t,n}$_setTarget(t,e,s){if(t.row()===this._row||this._target&&e===this._prevUp&&t.row()===this._target)s&&this.$_swapViews(t.row(),e,s);else{const i=this.$_swapViews(t.row(),e,s);s||i.forEach(t=>{const e=i.findIndex(e=>e.row()===t.row()),s=t.aniTag,r=t[ud];t instanceof Bn&&e>=0&&r!==s&&de.animate(t.dom,gd,Ot(s),Ot(r))})}}}class md extends nd{constructor(t){super(t),this._callback=(t,e)=>{this._views=t.filter(t=>t instanceof Bn),this.$_checkRow(e)},this._vertical,this._views=this._body.itemViews().filter(t=>t instanceof Bn)}setRequest(t){return this}_doStart(t,e,s,i,r){return!0}_doDrag(t,e,s,i,r){if(this.checkScroll(i,r,this._callback,null))return!0;for(const e of this._views)if(e.rowCell.displayOfDom(t)===cr.CHECK){this.$_checkRow(e.row());break}return!0}_doCanceled(){}_canAccept(t,e,s){return!0}_doCompleted(t,e,s){}$_checkRow(t){if(t>=0&&t!==this._prev){switch(this._body._owner.current()._rowBar.check().dragMode()){case lr.CHECK:this.list.checkRow(t,!0);break;case lr.UNCHECK:this.list.checkRow(t,!1);break;case lr.TOGGLE:this.list.toggleChecked(t)}this._prev=t}}}class yd{constructor(){this._handler=()=>{this._off<=0||this._control.listView().bodyView().isScrollEnded()?(clearInterval(this._timer),this._timer=null):(this._control.scrollBy(Math.min(this._step*this._dir,this._off)),this._off-=this._step)}}run(t,e,s){const i=t.listView().bodyView().getItemView(0),r=t.isVertical()?i.height:i.width;this._control=t,this._dir=e,this._step=s,this._off=e>0?r-t.scrollOff():t.scrollOff(),this._timer=setInterval(this._handler,20)}}class vd extends class extends class{constructor(t){this._touchIds=[],this._touches=[],this._tapped=0,this._firstTime=0,this._secondTime=0,this._control=t}get control(){return this._control}get dragTracker(){return this._dragTracker}setDragTracker(t){t!=this._dragTracker&&(this._dragTracker&&this._dragTracker.cancel(),this._dragTracker=t)}get dragging(){return this._dragTracker&&this._dragTracker.dragging}touchX(){return this._touchX}touchY(){return this._touchY}touchStart(t){clearTimeout(this._longTimer);const e=this._touchElement=w.cast(t.target,Element);if(!e)return;const s=t.changedTouches;let i,r;if(s.length>0&&(i=s[0],r=this.$_touchPoint(i),this._dragTracker&&this.$_stopDragTracker(e,r.x,r.y),this._prevX=r.x,this._prevY=r.y),t.touches.length>1||this._touchIds.length>0){for(let t=0;t<s.length;t++)this._touchIds.push(s[t].identifier);this._touchId=this._touchId||s[0].identifier}else i&&(this._touchIds.push(this._touchId=i.identifier),0===this._tapped?(this._firstTime=t.timeStamp,this._touchX=r.x,this._touchY=r.y):this._secondTime=t.timeStamp,this._touches=[{x:r.x,y:r.y,t:t.timeStamp}],this._longTimer=setTimeout(()=>{this._touchId=void 0,this._tapped=0,this._doLongPressed(e,this._touchX,this._touchY)},this._control.longPressDelay));return this._doTouchStart(e)}_stopEvent(t){t.cancelable&&t.preventDefault(),t.stopImmediatePropagation()}$_doDrag(t,e,s,i){if(!this.$_drag(e,this._prevX,this._prevY,s,i))return this.$_stopDragTracker(e,s,i,!0),this._stopEvent(t),!0}$_startMove(t,e,s,i){clearTimeout(this._longTimer),this._tapped=0,this.$_startDrag(e,this._prevX,this._prevY,s,i)&&(this._clearTouchEffects(),s!==this._prevX||i!==this._prevY?this.$_doDrag(t,e,s,i):this._stopEvent(t))}canPinch(){return!1}touchMove(t){t.touches.length>1&&!this.canPinch()&&t.preventDefault();const e=this.$_findTouch(t);if(e){const{x:s,y:i}=this.$_touchPoint(e),r=this.dragging,n=document.elementFromPoint?document.elementFromPoint(s,i):t.target;s<0||s>=this._control.dom().offsetWidth||i<0||i>=this._control.dom().offsetHeight?r&&this.$_stopDragTracker(n,s,i,!0):r?this.$_doDrag(t,n,s,i):(!this._dragTracker&&Math.abs(this._prevX-s)>3||Math.abs(this._prevY-i)>3||this._dragTracker&&!r)&&this.$_startMove(t,n,s,i),this._prevX=s,this._prevY=i,this._touches.push({x:s,y:i,t:t.timeStamp}),this._doTouchMove(n)}this.dragging&&this._stopEvent(t)}touchEnd(t){const e=w.cast(t.target,Element);if(clearTimeout(this._longTimer),this._clearTouchEffects(),void 0===this._touchId)this.$_clearTouches();else{const s=this.$_findTouch(t);if(s)if(this._dragTracker&&!this._dragTracker.canSwipe()||!this.$_checkSwipe(e,t)){const{x:i,y:r}=this.$_touchPoint(s);let n=document.elementFromPoint?document.elementFromPoint(i,r):t.target;e&&e.contains(n)&&(n=e),this.dragging?(this._touchId=void 0,this._tapped=0,this.$_stopDragTracker(n,i,r)):0===this._tapped?(this._tapped=1,this._doTap(n,this._touchX,this._touchY,i,r)):1===this._tapped&&(this._touchId=void 0,t.timeStamp-this._firstTime<300?(this._tapped=0,this._doDoubleTap(n,this._touchX,this._touchY,i,r)):(this._firstTime=this._secondTime,this._touchX=this._prevX,this._touchY=this._prevY,this._doTap(n,this._touchX,this._touchY,i,r)))}else this._touchId=void 0,this._tapped=0;else this.dragging&&this.$_stopDragTracker(e,this._prevX,this._prevY)}this._dragTracker=null,t.touches.length<=0&&this.$_clearTouches(),this.$_removeTouches(t.changedTouches),this._doTouchEnd(e)&&this._stopEvent(t)}touchCancel(t){console.log("CANCEL"),clearTimeout(this._longTimer),this._clearTouchEffects()}touchLeave(t){if(console.log("LEAVE"),clearTimeout(this._longTimer),this._clearTouchEffects(),this.dragging){const e=w.cast(t.target,Element);this.$_stopDragTracker(e,this._prevX,this._prevY)}}click(t){const e=w.cast(t.target,Element);e&&this._doClick(e)}keyPress(t){this._doKeyPress(t)}wheel(t){this._doWheel(t)}requestDrag(t){const e=this.getTrackerFromRequest(t);e&&this.setDragTracker(e)}getTrackerFromRequest(t){}_doClick(t){}_doTouchStart(t){return!1}_doTouchMove(t){}_doTouchEnd(t){return!0}_doTap(t,e,s,i,r){}_doDoubleTap(t,e,s,i,r){}_doLongPressed(t,e,s){}_doKeyPress(t){}_doWheel(t){return this.control.scrollBy(t.deltaY)}_doSwipe(t,e,s,i,r){return!1}_getDragTracker(t,e,s){return null}$_startDrag(t,e,s,i,r){return this._dragTracker||this.setDragTracker(this._getDragTracker(t,i-e,r-s)),!!this._dragTracker&&this._dragTracker.start(t,e,s,i,r)}$_drag(t,e,s,i,r){return this._dragTracker.drag(t,e,s,i,r)}$_stopDragTracker(t,e,s,i=!1){this.dragging&&(i?this._dragTracker.cancel():this._dragTracker.drop(null,e,s),this._dragTracker=null)}$_touchPoint(t){const e=this._control.dom().getBoundingClientRect();return{x:t.pageX-e.left,y:t.pageY-e.top}}$_clearTouches(){this._touchIds=[]}$_removeTouches(t){for(let e=t.length-1;e>=0;e--){const s=this._touchIds.indexOf(t[e].identifier);s>=0&&this._touchIds.splice(s,1)}}$_findTouch(t){const e=t.changedTouches;for(let t=0,s=e.length;t<s;t++){const s=e[t];if(s.identifier===this._touchId)return s}}$_checkSwipe(t,e){const s=this._touches,i=s.length;if(i<2)return;const r=s[i-1];let n=s[i-2];if(r.t-n.t<=100)for(let t=i-3;t>=0&&(n=s[t],!(r.t-n.t>100));t--);const o=n.x,a=n.y,h=r.x,l=r.y,d=Math.sqrt(Math.pow(o-h,2)+Math.pow(a-l,2))/Math.max(16,r.t-n.t);if(d>.1){const e=this._dragTracker,s=Math.log(.1/d)/Math.log(.998),i=d*(1-Math.pow(.998,s+1))/(1-.998);let r,n=Math.round(180*Math.atan2(l-a,h-o)/Math.PI);if(n<0&&(n=360+n),r=n>45&&n<=135?P.DOWN:n>135&&n<=225?P.LEFT:n>225&&n<=315?P.UP:P.RIGHT,this.dragging){if(e.swipe(r))return!0;this.$_stopDragTracker(t,this._prevX,this._prevY)}return this._doSwipe(t,e,r,1.6*s,1.3*i)}return!1}_clearTouchEffects(){}}{constructor(t){super(t),this._listControl=t}get control(){return this._listControl}get listView(){return this._listControl.listView()}}{constructor(t){super(t),this._clickRow=-1}$_isClickable(t,e){return t instanceof HTMLAnchorElement||(!!(t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLLabelElement||t._clkable)||(t instanceof HTMLButtonElement&&e instanceof un||(!!(e instanceof zi&&e.enabled())||(!!(e instanceof Oi&&e.clickable())||void 0))))}_doTouchStart(t){const e=this.control,s=e.fullMode(),i=e.listView(),r=i.bodyView(),n=r.getRow(t),o=r instanceof rl?r.getGroupItem(t):null,a=e.elementOfDom(t);let h;return clearTimeout(this._touchTimer),i.menuView()&&i.menuView().clearTouched(),e.releaseLock(),this._clickDom=t,this._clickRow=n,this._clickItem=o,this._flingScroller=this._flingScroller&&this._flingScroller.destroy(),!(i.isMenuView(t)||!i.hideMenu(!0))||!this.$_isClickable(t,a)&&((!e.editPageView()||!e.editPageView().visible)&&(a instanceof zo||r.clearCommands(!0),!(a instanceof Jr)&&(a instanceof fa?i.menuView().setTouched(a):a instanceof Bo?(h=this._rowSelectTracker||(this._rowSelectTracker=new hd(i)),this._rowSelectTracker.handle=a):a instanceof bo||e.isSingleRow()||(s?this.$_rowTouched(this._clickRow):this._touchTimer=setTimeout(()=>{this.$_rowTouched(this._clickRow)},50)),h&&this.setDragTracker(h),!s)))}_doTouchMove(t){this.dragging&&(this._clearTouchEffects(),this.control.listView().isInPanel(t)||this.control.closePanel(!0))}_doTouchEnd(t){const e=this.control.elementOfDom(t);return e instanceof fa&&this.listView.menuView().clearTouched(),!this.$_isClickable(t,e)}_clearTouchEffects(){clearTimeout(this._touchTimer),this.$_rowTouched(-1)}_processClick(t){const e=this.control,s=e.listView(),i=e.rowPageView(),r=s.bodyView(),n=e.elementOfDom(t),o=s.activePanel(),a=s.getLayoutView(t);let h=!a&&s.getPanel(t),l=!!o;if(n instanceof fa||!s.isMenuView(t))if(n instanceof Oi&&n.clickable()){const{x:s,y:i}=e.toElement(n,this.touchX(),this.touchY());n.click(t,s,i)}else if(n instanceof Yo)l=h.clickButton(n,e);else if(n instanceof zi)n.enabled()&&n.click(e);else if(n instanceof fa)s.menuView().clickItem(e.wrapperOrThis(),n)&&e.closeMenu(!0);else if(n instanceof In)n.parent instanceof dl?e.dataGroup().toggle(e.getDataGroupOfRow(n.parent.row(),!0),!1):n.parent instanceof Bn||n.parent instanceof Nn&&e.groupModel().toggle(n.parent.model().group,!1);else if(n instanceof Hi)n.enabled()&&n.click();else if(n instanceof rn)n.click(e.rowBar(),t);else if(n instanceof nn)n.click(e.editBar(),t);else if(a)a.clickable()&&a.click(t,NaN,NaN);else if(h)l=h.click(t,NaN,NaN);else{let s=!1;if(i){const r=i.getRenderer(t);r&&(r.clicked(e,-1,null),s=!0)}if(!s){const i=this._clickRow>=0&&r.getRow(t)===this._clickRow?this._clickRow:-1,n=r.getRenderer(i,t);if(n){const r=t._fld_;s=n.clicked(e,i,r)}else r instanceof rl&&this._clickItem&&this._clickItem===r.getGroupItem(t)&&(e.$_groupItemClicked(this._clickItem),s=!0);!s&&i>=0&&e.$_rowClicked(i)}}else s.menu().autoHide&&s.hideMenu(!0);l&&s.activePanel()!==o&&(l=!1),l&&e.closePanel(!0)}_doTap(t,e,s,i,r){if(t!==this._clickDom)return;const n=this.control,o=n.listView().bodyView(),a=n.elementOfDom(t);a instanceof Bo||n.clearSelection(),a instanceof zo||o.clearCommands(!0),this.$_isClickable(t,a)||this._processClick(t)}_doClick(t){if(t!==this._clickDom)return;this.control.listView().bodyView().clearCommands(!0),this._processClick(t)}_doLongPressed(t,e,s){const i=this.control,r=this.listView.bodyView(),n=r.getRow(t);if(n>=0&&n===this._clickRow){const e=t===this._clickDom&&r.getRenderer(n,t);let s=!1;if(e){const i=t._fld_;s=e.longPressed(this.control,n,i)}s||i.$_rowLongPressed(n)}}_doSwipe(t,e,s,i,r){const n=this.control;if(n.elementOfDom(t)instanceof zi)return;const o=n.listView(),a=n.rowPageView(),h=this._clickRow,l=n.fitRowWhenScroll?1:.3;if(o.isInPanel(t)||n.closePanel(!0),a&&a.layoutBack().contains(t)){const t=s===P.UP?1:-1;return this._flingScroller=new Xr(r,i,l,(e,s)=>!0===a.scrollBy(-e*t)).run(),!0}if(o.bodyView().containsDom(t))if(n.isVertical()){if(s===P.UP||s===P.DOWN){const t=s===P.UP?1:-1;if(!n.fullMode())return this._flingScroller=new Xr(r,i,l,(e,s)=>!0!==n.scrollBy(e*t),()=>{n.fitRowWhenScroll&&o.scrollOff()>0&&(new yd).run(n,t,l)}).run(),!0}else if(h>=0)return n.swipeRow(h),!0}else if(s===P.LEFT||s===P.RIGHT){const t=s===P.LEFT?1:-1;if(!n.fullMode()&&(!this.dragTracker||this.dragTracker.canSwipe()))return x.log("FLING HORZ",s,r,i),this._flingScroller=new Xr(r,i,l,(e,s)=>!0!==n.scrollBy(e*t),()=>{n.fitRowWhenScroll&&o.scrollOff()>0&&(new yd).run(n,t,l)}).run(),!0}else if(h>=0)return n.swipeRow(h),!0}_doKeyPress(t){const e=t.target,s=t.key,i=this.control,r=i.elementOfDom(t.target);"Enter"===s&&e instanceof HTMLInputElement&&(e.blur(),r instanceof oa&&r.canEnter()?r.search():r instanceof ia&&r.search()&&i.closePanel(!0),this.$_moveToNextInput(e))}getTrackerFromRequest(t){const e=this.listView;return t instanceof en?(this._rowMoveTracker||(this._rowMoveTracker=new wd(e)),this._rowMoveTracker.setRequest(t)):t instanceof sn?(this._checkTracker||(this._checkTracker=new md(e)),this._checkTracker.setRequest(t)):void 0}_getDragTracker(t,e,s){const i=this.control,r=i.current(),n=i.isSingleRow(),o=i.rowPageView(),a=i.listView(),h=a.scrollBarView(),l=a.pageScrollerView(),d=i.elementOfDom(t);let _;return d instanceof Jr?_=this.getTrackerFromRequest(d.getDragRequest(t,r)):d instanceof zi&&d.enabled()||(h&&h.isView(t)?_=this._scrollBarTracker||(this._scrollBarTracker=new od(h)):l&&l.isView(t)?_=this._pageScrollTracker||(this._pageScrollTracker=new ld(l)):o?_=this._rowPageTracker||(this._rowPageTracker=new cd(o)):a.bodyView().containsDom(t)&&(n&&Math.abs(e)>=Math.abs(s)?a.canMoveSingle(e,!0)&&(_=this._singleRowTracker||(this._singleRowTracker=new _d(i))):i.current().row().swipeAction()===Kt.PAGE&&Math.abs(e)>=Math.abs(s)?a.canMovePage(e,!0)&&(_=this._pageMoveTracker||(this._pageMoveTracker=new dd(i))):n||i.fullMode()||(_=this._bodyTracker||(this._bodyTracker=new ad(i))))),_}$_rowTouched(t){this.control.$_rowTouched(t)}$_moveToNextInput(t){}}const bd={rowStyle:{padding:"5px 6px"}};var Sd;!function(t){t.Developer="dev",t.Evaluation="evl",t.Limited="lim",t.Enterprise="ent"}(Sd||(Sd={}));class Cd{constructor(t,e){this.label=t,"string"==typeof e?this.className=e:e&&(this.style=Object.assign({},e))}getStyle(){return this.style}run(t,e,s){this._canRun(t,e,s)&&(this.enableCallback&&!1===this.enableCallback(t,this.label,e,s)||this._doRun(t,e,s))}_canRun(t,e,s){return!0}}class xd extends Cd{constructor(t,e){super(e.label||t,e.style),this.className=e.className,this.enableCallback=e.enableCallback,this._runner=e.run}_doRun(t,e,s){this._runner(t,e,s)}}class Rd{constructor(){this._commandMap={"@info":new Vd,"@edit":new $d,"@create":new Ad,"@delete":new Dd,"@moveup":new kd,"@movedown":new Ld},this.row=-1}registeredCommands(){return Object.keys(this._commandMap)}register(t,e,s){t||I(b.requireCommandName),!s&&t in this._commandMap&&N(b.commandNameDuplicated,t),w.isObject(e)&&"function"==typeof e.run&&(this._commandMap[t]=new xd(t,e))}unregister(t){}get(t){const e=this._commandMap[t];return"function"==typeof e?new e:e}update(t,e){if(e){const s=this._commandMap[t];return s&&w.assignStyleAndProps(s,e)}}}class Ed extends Cd{constructor(t,e){super(t),this.className=e}}class Vd extends Ed{constructor(){super(Vd.LABEL,"rtc-command-info")}_doRun(t,e,s){t.showInfoPage(s,{},!0)}}Vd.LABEL="자세히";class $d extends Ed{constructor(){super($d.LABEL,"rtc-command-edit")}_doRun(t,e,s){t.showEditPage(s,{},!0)}}$d.LABEL="수정";class Ad extends Ed{constructor(){super(Ad.LABEL,"rtc-command-create")}_doRun(t,e,s){t.showEditPage(-1,{},!0)}}Ad.LABEL="추가";class Dd extends Ed{constructor(){super(Dd.LABEL,"rtc-command-delete"),this.confirm=!1}_doRun(t,e,s){e&&s>=0&&s<e.rowCount()&&(this.confirm?window.confirm(this.confirmMessage||Dd.MESSAGE)&&e.deleteRow(s,!1):e.deleteRow(s,!1))}}Dd.LABEL="삭제",Dd.MESSAGE="정말로 삭제하시겠습니까?";class kd extends Ed{constructor(){super(kd.LABEL,"rtc-command-moveup")}_doRun(t,e,s){alert("Move Up!")}}kd.LABEL="↑";class Ld extends Ed{constructor(){super(Ld.LABEL,"rtc-command-movedown")}_doRun(t,e,s){alert("Move Down!")}}Ld.LABEL="↓";class Td extends e{constructor(t,e){super(),this._owner=t,this._fields=e||[],this._current=-1}_doDestory(){this._owner=null}fields(){return this._fields}count(){return this._fields.length}isEmpty(){return 0===this._fields.length}current(){return this._current}getCurrrentField(){return this.isEmpty()?null:this._fields[this._current]}moveFirst(){return this.isEmpty()?null:(0!==this._current&&(this._current=0,this._owner.searchIndexChanged(this)),this._fields[this._current])}movePrev(){return this.isEmpty()?null:(this._current!==(this._fields.length+this._current-1)%this._fields.length&&(this._current=(this._fields.length+this._current-1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveNext(){return this.isEmpty()?null:(this._current!==(this._current+1)%this._fields.length&&(this._current=(this._current+1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveLast(){return this.isEmpty()?null:(this._current!==this._fields.length-1&&(this._current=this._fields.length-1,this._owner.searchIndexChanged(this)),this._fields[this._current])}clear(){this._owner.clearSearch(this)}}const Md=function(t,e,s){if(t==e)return!0;let i=w.toStr(t),r=w.toStr(e);return i&&r?(s.matchCase||(i&&(i=i.toLowerCase()),r&&(r=r.toLowerCase())),s.matchWholeWord?i===r:r.indexOf(i)>=0):void 0};class Pd{constructor(t){this._owner=t}search(t,e,s){let i;return t=Object.assign({},this._owner.searchOptions(),t),this.filtering=t.filtering,s instanceof nr?i=this.$_searchData(s,t,e):s instanceof Ce&&(i=this.$_searchGroup(s,t,e)),i}$_search(t,e,s,i,r){const n=this._owner.getSearchLayout(i).getSimples();if(n)for(let o of n){o.row=i,o.dv=t;const n=o.getValue();if(Md(s,n,e)){const e={dv:t,row:i,value:n,field:o instanceof Zs?o.field:void 0,layout:o};r.push(e)}}}$_searchData(t,e,s){const i=t.rowCount(),r=e.fromRow||0,n=[];if(e.searchAll){const o=isNaN(e.toRow)||e.toRow<0?r:e.toRow;if(o<=r){for(let o=r;o<i;o++)this.$_search(t,e,s,o,n);for(let i=0;i<r;i++)this.$_search(t,e,s,i,n)}else for(let i=r;i<o;i++)this.$_search(t,e,s,i,n)}else{let o=r;do{if(this.$_search(t,e,s,o,n),n.length>0)break;o=(o+1)%i}while(o!==r)}return new Td(this._owner,n)}$_searchGroup(t,e,s){const i=t.data(),r=t.itemCount(),n=Math.max(e.fromRow>=0?t.visIndexOfRow(e.fromRow):-1,t.firstVisRow().vindex),o=[];if(e.searchAll){const a=isNaN(e.toRow)||e.toRow<0?n:Math.max(n,t.visIndexOfRow(e.toRow));if(a<=n){for(let a=n;a<r;a++){const r=t.getItem(a).row();r>=0&&this.$_search(i,e,s,r,o)}for(let r=0;r<n;r++){const n=t.getItem(r).row();n>=0&&this.$_search(i,e,s,n,o)}}else for(let r=n;r<a;r++){const n=t.getItem(r).row();n>=0&&this.$_search(i,e,s,n,o)}}else{let a=n;do{const n=t.getItem(a).row();if(n>=0&&this.$_search(i,e,s,n,o),o.length>0)break;a=(a+1)%r}while(a!==n)}return new Td(this._owner,o)}}class Id extends Ph{isSkeleton(){return!0}_createBodyView(t,e,s){return new Od(t)}}class Nd extends Nn{dv(){}row(){return-1}model(){}group(){}gindex(){return-1}vindex(){return-1}getItemStyle(t){}getItemClass(){return Nd.CLASS_NAME}_doMeasure(t,e,s){const i=super._doMeasure(t,e,s);if(this._layoutView instanceof cn){const t=this._layoutView.simplesByRenderer(Bs.TYPE),e={container:this.dom,duration:1e3};for(let s of t)s.rendererImpl().setAnimation(e)}return i}_doApplyStyles(t){this.dom.className=this.getItemClass()}}Nd.CLASS_NAME="rtc-skeleton-row";class Od extends Hh{constructor(){super(...arguments),this._rowViews=[],this._rowPool=[]}isRowEnded(){return!0}isScrollEnded(){return!0}footerView(){}bottomRow(){return this._topRow}itemViewCount(){return 0}rowViewCount(){return 0}getItemView(t){}itemViews(){return[]}itemViewAt(t,e){}lastItemView(){}getItemViewPoints(){}validateViews(){}getPreLength(){return 0}getPrePos(t,e){}getExpander(t){}scrollToEnd(t){}checkItemViewOrders(){}isRowVisible(t,e){return!1}makeRowVisible(t){}_itemPoints(){}_rowViewOfDom(t){}_createRowsDeleingAnimation(t){}_doRenderSelection(t,e,s,i,r){}_doScrollNear(t,e,s,i,r,n){}_doScrollFar(t,e,s,i,r,n){}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._rowPool=this._rowPool.concat(this._rowViews),this._rowViews=[],this._itemLayer.clear()}_doMeasureVert(t,e,s){const i=this._listView,r=this._rowPool,n=this._rowViews;let o,a=0,h=s,l=0;for(;h>0&&a<1e4;){const d=r.pop()||new Nd(t),_=i.owner().getSkeletonLayout();d.setLayout(_),this._itemLayer.addChild(d),o=d.measure(t,i,e,s),n.push(d),h-=o.height,l=Math.max(l,o.width),a++}return{width:l,height:s-h}}_doMeasureHorz(t,e,s){}_doRenderVert(t,e,s){const i=this._rowViews,r=i.length,n=this._rowPts=[0];let o=n[0],a=0;for(;a<r&&o<s;){const e=i[a++],s=e.mh;e.move(0,o),e.resize(e.mw,s).render(t),o+=s,n.push(o)}}_doRenderHorz(t,e,s){}}class Bd extends Oi{constructor(t,e,s){super(t,!1,s),this._animated=0,this._layoutChanged=!1,this._hHeader=0,this._hLayout=0,this._scrollPos=0,this._model=e,this.appendDom(this._layoutBack=this.$_createLayoutBack(t)),this.addChild(this._headerView=new Co(t,e.header())),this.setVisible(!1)}_doDestory(){super._doDestory()}model(){return this._model}setModel(t){this._model=t}row(){return this._row}layoutBack(){return this._layoutBack}setRow(t,e){this._dv=t,this._row=e}refresh(t,e,s,i=!1){const r=this.doc;t=It(t,this.width),e=It(e,this.height),(this._silent=i)&&this._doSilentRefresh();try{this.measure(r,s,t,e),this.resize(t,e),this.render(r)}finally{i&&(this._silent=!1)}}_doSilentRefresh(){}$_getDuration(){const t=this._model.effectDuration();return t>=.1?1e3*t:Bd.SHOW_DURATION}show(t,e,s){if(this.visible)return;const i=w.now(),r=this.$_getDuration();if(!(this._animated>0&&i-this._animated<r)&&(this._scrollPos=0,this._internalVisible(!0),this.refresh(e.width,e.height,t),this._doShow(),s&&this.canAnimate())){const t=this.dom.animate(function(t,e){switch(e){case ie.RIGHT:return[{left:-t.width+"px"},{left:"0"}];case ie.LEFT:return[{left:t.width+"px"},{left:"0"}];case ie.DOWN:return[{top:-t.height+"px"},{top:"0"}];default:return[{top:t.height+"px"},{top:"0"}]}}(e,this._showDirection=this._model.getShowDirection()),{duration:r,fill:"none"});this._animated=w.now(),t.addEventListener("finish",()=>{this._animated=0})}}_doShow(){}hide(t,e){if(!this.visible)return;const s=w.now(),i=this.$_getDuration();if(!(this._animated>0&&s-this._animated<i))if(this._doHide(),e&&this.canAnimate()){const e=this.dom.animate(function(t,e){switch(e){case ie.RIGHT:return[{left:"0"},{left:t.width+"px"}];case ie.LEFT:return[{left:"0"},{left:-t.width+"px"}];case ie.DOWN:return[{top:"0"},{top:t.height+"px"}];default:return[{top:"0"},{top:-t.height+"px"}]}}(t,this._model.getHideDirection(this._showDirection)),{duration:i,fill:"none"});this._animated=w.now(),e.addEventListener("finish",()=>{this._animated=0,this.setVisible(!1),this.control.invalidateLayout()})}else this.setVisible(!1)}_doHide(){}getRenderer(t){return this._layoutView instanceof cn&&this._layoutView.getRenderer(t)}scrollBy(t){return this.setScrollPos(this._scrollPos-t),0===this._scrollPos||this._scrollPos>=this._hLayout-this.height+this._hHeader}setScrollPos(t){const e=this._hHeader,s=this._layoutBack;if((t=Math.max(0,Math.min(t,this._hLayout-(this.height-e))))!==this._scrollPos){const i=this._scrollPos=t;s.style.top=e-i+"px"}}$_createLayoutBack(t){const e=t.createElement("div");return e.className="rtc-row-page-back",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}_doPrepareRender(t,e){if(this._layoutManager=e,!this._silent||!this._layout){const{layout:e,rowProps:s,rowStyle:i}=this._getLayout(this._dv,this._row);this._headerView.setModel(this._model.header()),this._layoutChanged=!this._layout||e.tid!==this._layout.tid,this._layout=e,this._rowStyle=i,this._layoutChanged&&this._layoutView&&(this._layoutBack.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this._layoutView=this._layoutManager.createLayoutView(t,this._layout),this._layoutBack.appendChild(this._layoutView.dom),this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,this._layoutManager))}}_doApplyStyles(t){const e=this._rowStyle&&this._rowStyle.default;e&&Object.assign(this._layoutBack.style,e)}_doMeasure(t,e,s){const i=this._headerView,r=this._layoutView,n=this._padding=de.getPadding(this._layoutBack);let o=0,a=e,h=s;i.setVisible(i.model().visible())&&(i.setLayout(i.model().layout()),h-=o=i.measure(t,this._layoutManager,a,h).height),a-=n.left+n.right,h-=n.top+n.bottom,this._layout.setRow(this._dv,this._row,-1),r._explicitWidth=a,r.prepareLayout(t,this._layoutManager);const l=r.measureLayout(t,this._layoutManager,a,h);return l.width+=n.left+n.right,l.height+=n.top+n.bottom,{width:e,height:Math.max(s,l.height+o)}}_doRender(t,e,s){const i=this._padding,r=this._layoutView;let n=this._headerView,o=0;if(s=Math.max(s,n.mh+r.mh+i.top+i.bottom),n&&n.visible){const i=this._hHeader=n.mh;n.resize(e,i).move(0,o),s-=i,o+=i,n.render(t)}else this._hHeader=0;s=this._hLayout=Math.max(0,s),de.resize(this._layoutBack,e,s),de.move(this._layoutBack,0,o),r.resize(e-i.left-i.right,s-i.top-i.bottom),r.render(t)}_doAfterRender(){this._layoutManager=null}}Bd.SHOW_DURATION=300;class Fd extends Bd{constructor(t,e){super(t,e,Fd.CLASS_NAME),this._model=e}_getLayout(t,e){return this._model.getLayout(t,e)}}Fd.CLASS_NAME="rtc-row-info-page";class zd extends Bd{constructor(t,e){super(t,e,zd.CLASS_NAME),this._changeHandler=t=>{const e=this.model(),s=this._layoutView;if(s instanceof cn){const i=s.childOfDom(t.target);if(i instanceof gn){const t=i.getEditValue(this.control);e.valueChanged(this._ctx,t.field,t.value,i.value())}}},this._ctx={getValue:t=>this.getFieldValue(t),setValue:(t,e)=>{this.setFieldValue(t,e)},isVisible:t=>this.isFieldVisible(t),setVisible:(t,e)=>{this.setFieldVisible(t,e)}}}model(){return this._model}setModel(t){this._model=t}getValues(t){if(this._layoutView instanceof cn)return this._layoutView.getValues(t)}getFieldValue(t){const e=this._layoutView;if(e instanceof cn){const s=e.simpleById(t,!0);if(s instanceof gn){const t=s.getEditValue(this.control);return void 0!==t?t.value:void 0}}}setFieldValue(t,e){const s=this._layoutView;if(s instanceof cn){const i=s.simpleById(t,!0);i instanceof gn&&i.setEditValue(this.control,e)}this.refresh(this.width,this.height,this.control._listView,!0)}isFieldVisible(t){const e=this._layoutView;if(e instanceof cn){const s=e.simpleById(t,!0);return s&&s.visible}}setFieldVisible(t,e){const s=this._layoutView;if(s instanceof cn){const i=s.simpleById(t,!0);i&&(i.layout.visible=e,this.refresh(this.width,this.height,this.control._listView,!0))}}commit(t){return this._model.commit(this._ctx,t)}_getLayout(t,e){return this._model.getLayout(t,e)}_doShow(){const t=this.dom;this.$_clearHandlers(),t.addEventListener("change",this._changeHandler)}_doHide(){this.$_clearHandlers()}_doSilentRefresh(){this._layoutView instanceof cn&&this._layoutView.saveEditValues(this.control)}$_clearHandlers(){this.dom.removeEventListener("change",this._changeHandler)}}zd.CLASS_NAME="rtc-row-edit-page";class Hd extends e{constructor(t){super(),this._body=t,this._view=t.singleView(),this._spare=t.spareSingleView()}_doDestory(){this._body=null}run(t,e){return this.$_prepare(this._model=t),this._endCallback=e,this._doRun(),this}stop(){this.$_unprepare()}$_prepare(t){this._body.control.lock(()=>{this._body.addChild(this._spare)}),this._doPrepare(t)}$_unprepare(){this._doUnprepare(),this._body.removeChild(this._spare)}}class Wd extends Hd{constructor(){super(...arguments),this._handler=()=>{const t=this._model.changeDuration(),e=w.now(),s=e-this._started;let i=this._width-this._pos;if(s>=t||i<=0)this.$_stop(),this._endCallback(this._view.row());else{const r=t-s;i*=(e-this._prev)/r,this._prev=e}i&&(this._pos+=i,this._view.moveX(-this._pos),this._spare.moveX(this._width-this._pos))}}_doPrepare(t){this._nextRow=(this._view.row()+1)%this._view.rowView().dv().rowCount(),this._width=this._view.width,this._pos=0,this._spare.setRow(this._nextRow,this._view),this._view.moveX(0),this._spare.moveX(this._width)}_doUnprepare(){this.$_stop()}_doRun(){this._started=this._prev=w.now(),this._timer=setInterval(this._handler,20)}$_stop(){this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._view.setRow(this._nextRow,null),this._view.moveX(0))}}class Gd extends Hd{_doPrepare(t){}_doUnprepare(){}_doRun(){}}class Ud extends Gd{}class qd extends e{constructor(t){super(),this._rowHandler=()=>{const t=w.now();t>=this._prev+this._model.duration()&&(this._doStartChange(this._model),this._prev=t)},this._owner=t,this._body=t.bodyView()}_doDestory(){this._owner=this._body=null}start(t){this.stop(),this._doStart(t)&&(this._model=t,this._prev=w.now(),this._rowTimer=setInterval(this._rowHandler,10))}stop(){this._rowTimer&&(clearTimeout(this._rowTimer),this._rowTimer=void 0,this._doStop(),this._model=void 0)}_showNext(){this._prev=w.now()}}class jd extends qd{constructor(){super(...arguments),this._scrollHandler=()=>{let t=this._body.scrollPos()!==this._startRow?0:this.$_getScrollAmount();const e=this._model.changeDuration(),s=w.now(),i=s-this._started;if(i>=e||t<=0)this.$_stopChange(),this._showNext();else{const r=e-i;t*=(s-this._prev2)/r,this._prev2=s}t&&this._owner.scrollBy(t)}}_doStart(t){return!0}_doStop(){}_doStartChange(t){this.$_stopChange(),this._started=this._prev2=w.now(),this._startRow=this._body.scrollPos(),this._scrollTimer=setInterval(this._scrollHandler,20)}$_getScrollAmount(){return this._body.getItemView(0).height-this._body.scrollOff()}$_stopChange(){this._scrollTimer&&(clearTimeout(this._scrollTimer),this._scrollTimer=void 0)}}class Yd extends qd{constructor(){super(...arguments),this._endCallback=t=>{this._showNext(),this._owner.setScrollIndex(t,0)}}_doStart(t){return!0}_doStop(){this.$_stopChange()}_doStartChange(t){this.$_stopChange();const e=this._model.changeEffect(),s=this._body;let i;switch(e){case Ja.SLIDE:i=new Wd(s);break;case Ja.FLIP:i=new Ud(s)}(this._changer=i)&&i.run(this._model,this._endCallback)}$_stopChange(){this._changer&&(this._changer.stop(),this._changer=null)}}class Qd extends e{constructor(t){super()}get width(){return this._width}set width(t){t!=this._width&&(this._width=t,this._widthDim=function(t,e){let s,i,r;if(null==t||Number.isNaN(t)){if(e)return null;r=0,s=!0}else if(!(s=!isNaN(r=+t))){const s=t.trim(),n=s.charCodeAt(s.length-1);if(n===V?r=1===s.length?NaN:parseFloat(s):n===E&&(r=1===s.length?1:parseFloat(s),i=!0),isNaN(r)){if(e)return null;N(b.invalidSizeValue,t)}}return{size:r,rated:i,fixed:s}}(t,!0))}getProxy(){return{width:this._width}}}class Zd extends e{constructor(t){super(),this._minColumnWidth=Zd.MIN_COLUMN_WIDTH,t?(this._name=t.name,this._cols=t.cols,this._rows=t.rows,this._columns=this.$_buildColumns(t.columns),t.hasOwnProperty("minColumnWidth")&&(this._minColumnWidth=+t.minColumnWidth),this._width=t.width,this._height=t.height):(this._cols=0,this._rows=0,this._columns=[])}get name(){return this._name}get cols(){return this._cols}get rows(){return this._rows}get width(){return this._width}get height(){return this._height}get minColumnWidth(){return this._minColumnWidth}columnCount(){return this._columns.length}get columns(){return this._columns.map(t=>t.getProxy())}getColumn(t){return this._columns[t].getProxy()}getColumnWidths(t){}$_buildColumns(t){const e=Array.isArray(t)?t.map(t=>new Qd(t)):[];if(!isNaN(this._cols)&&this._cols>e.length)for(let t=e.length;t<this._cols;t++)e.push(new Qd(null));return e}}Zd.MIN_COLUMN_WIDTH=100;class Xd{constructor(t){this._row=-1,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0},this._stocks={value:t=>(this._dv.checkField(t),this._values||(this._values=this._data.internalRowValues(this._row)),this._values[t]),no:()=>this._row+1,row:()=>this._row,detail_count:()=>this._dg?this._dg.getDetailCount(this._row):0,is_landscape:()=>this._owner.isLandscape(),is_portrait:()=>this._owner.isPortrait()},this._owner=t}inflateParam(t,e,s){const i=s.name;if(this.templateParams){const s=this.templateParams[i];if("function"==typeof s){const i=this._args;return i.control=this._owner.wrapperOrThis(),i.row=t,i.field=e,i.values=this._values=this._values||Object.freeze(this._dv.internalRowValues(t)),s(i)}if(void 0!==s)return s}const r=this._owner.getRowParams(t);if(r){const s=r[i];if("function"==typeof s){const i=this._args;return i.control=this._owner.wrapperOrThis(),i.row=t,i.field=e,i.values=this._values=this._values||Object.freeze(this._dv.internalRowValues(t)),s(i)}return s}}inflateStock(t,e,s){const i=this._stocks[s.name];return i?i(e):this._dv.containsField(s.name)?this._stocks.value(s.name):(console.error("Invalid stock param: "+s.source),s.source)}setData(t){this._data=t,this._dg=t instanceof Vh?t:null}setRow(t){if(this._data instanceof Vh){const e=this._data.getSourceRow(t);this._dv=e.dv,this._row=e.row}else this._dv=this._data,this._row=t;return this._values=void 0,this}}class Kd{constructor(t){this._owner=t,this._rowInflater=new Xd(t)}prepareRender(){this._rowInflater.setData(this._owner.data())}getRowInflater(t){return this._rowInflater.setRow(t)}getRowLayout(t,e,s){const i=this._owner,r=i.getRowTemplate(e);return{layout:pi.Instance.layoutFromTemplate(t||i.wrapperOrThis(),e,!1,s,r,this._rowInflater.setRow(e)),rowProps:r.rowProps,rowStyle:r.rowStyle}}getGroupItemLayout(t){const e=this._owner.groupModel();let s,i;t instanceof be?(i=e.getHeaderTemplate(t),s=!t.group.expanded()):t instanceof Se&&(i=e.getFooterTemplate(t));const r=this._owner._templates.get(i)||mi.get(i)||wi.get(i);return{layout:pi.Instance.layoutFromTemplate(e,t,s,!1,r,e)}}inflate(t,e){return t.inflate(this._owner.wrapperOrThis(),void 0,e,this._rowInflater)}}class Jd{constructor(){this.matchCase=!1,this.matchWholeWord=!1,this.useRegExp=!1,this.dataOnly=!0,this.ignoreFormat=!0,this.searchAll=!0,this.fromRow=0,this.toRow=-1,this.circular=!0,this.filtering=!1}assign(t){w.assign(this,t)}}class t_ extends _e{constructor(t,e,s){super(t,e,t_.CLASS_NAME),this._alwaysFirstGroupHeader=!0,this._searchOptions=new Jd,this._renderMode=Ht.DEFAULT,this._tableModels={},this._flags=sr.Instance,this._templates=new M,this._runTextFormatter=qt(""),this._runBoolFormatter=jt(t_.BOOLEAN_FORMAT),this._runNumberFormatter=Yt(t_.NUMBER_FORMAT),this._runDateFormatter=Qt(t_.DATE_FORMAT),this._imageList=[],this._imageList2={},this._imageSizes={},this._imageLoaded=t=>{const e=t.target;h&&(this._imageSizes[e._src_]={width:e.naturalWidth,height:e.naturalHeight}),this.bodyView().animating()||this.invalidateLayout(!0),(this._infoPageView&&this._infoPageView.visible||this._editPageView&&this._editPageView.visible)&&setTimeout(()=>{const t=this._infoPageView;t&&t.visible&&t.refresh(NaN,NaN,this._listView,!0);const e=this._editPageView;e&&e.visible&&e.refresh(NaN,NaN,this._listView,!0),this.listView().refreshPanel()},0)},this._menus={},this._layoutNeeded=!0,this._dataLoading=!1,this._dataAppending=!1,this._dataChanged=!1,this._topRow=-1,this._scrollIndex=0,this._scrollOff=0,this._lastRowRevealed=!1,this._focusedRow=-1,this._rowClickArgs={control:this.wrapperOrThis(),row:-1,cancel:!1},this.fitRowWhenScroll=!1,this.fitRowWhenClick=!0,this.skeletonVisible=!1,this.alwaysEmptyPage=!1,this.selectable=!1,this.autoClearSelection=!1,this._renderMode=s,this._fullMode=s===Ht.FULL,this._preMode=s===Ht.PRE,this._noCache=this._fullMode||this._preMode,this.addElement(this._listView=this._defaultListView=new jh(t,this))}_doDestory(){super._doDestory(),this._shapes=this._shapes.destroy()}optionItemChanged(t){this.invalidateLayout()}autoScrollChanged(t){t instanceof An&&!this._singleRow?t.enabled()?this._rowScroller||(this._rowScroller=new jd(this),this._rowScroller.start(this._current.row().autoScroll())):this._rowScroller&&(this._rowScroller.stop(),this._rowScroller=void 0):t instanceof sh&&this._singleRow&&(t.enabled()?this._singleScroller||(this._singleScroller=new Yd(this),this._singleScroller.start(this._current.singleRow().autoScroll())):(this._singleScroller.stop(),this._singleScroller=void 0))}getTemplateHtml(t){const e=this._htmlTempls[t];return e&&e.cloneNode(!0)}sectionChanged(t){this.invalidateLayout()}sectionLayoutChanged(t){this.invalidateLayout()}onDataReset(t){}onDataValueUpdated(t,e,s,i,r){}onDataRowUpdated(t,e,s){}onDataRowsUpdated(t,e){}onDataRowAdded(t,e){}onDataRowsAdded(t,e,s){}onDataCleared(t,e){}onDataLoaded(t,e){}onDataRowDeleted(t,e,s){this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(s)}onDataRowsDeleted(t,e,s){this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(s)}onDataRangeDeleted(t,e,s){}onDataRowMoved(t,e,s){}onDataRowsMoved(t,e,s,i){}onDataCountChanged(t,e,s){this.isPaging()&&(this._pageModel.$_reset(),this.invalidateLayout())}onDataStateChanged(t,e){}onDataStatesChanged(t,e){}onDataChanged(t){this._dataChanged=!0,this._noCache,this.invalidateLayout()}onDataFlagChanged(t,e,s,i){er.isCheckedFlag(i)?this.onRowCheck&&this.onRowCheck({control:this.wrapperOrThis(),row:s}):er.isDetailedFlag(i)?this.onRowDetail&&this.onRowDetail({control:this.wrapperOrThis(),row:s}):(i=er.isUserFlag(i),this.onRowFlagChange&&this.onRowFlagChange({control:this.wrapperOrThis(),row:s,flag:i})),this.invalidateLayout()}onDataFlagsChanged(t,e,s,i){er.isCheckedFlag(i)?this.onRowsCheck&&this.onRowsCheck({control:this.wrapperOrThis(),rows:s}):er.isDetailedFlag(i)?this.onRowsDetail&&this.onRowsDetail({control:this.wrapperOrThis(),rows:s}):(i=er.isUserFlag(i),this.onRowsFlagChange&&this.onRowsFlagChange({control:this.wrapperOrThis(),rows:s,flag:i})),this.invalidateLayout()}onDataFlagAllChanged(t,e,s){er.isCheckedFlag(s)?this.onAllRowsCheck&&this.onAllRowsCheck({control:this.wrapperOrThis()}):er.isDetailedFlag(s)?this.onAllRowsDetail&&this.onAllRowsDetail({control:this.wrapperOrThis()}):(s=er.isUserFlag(s),this.onAllRowsFlagChange&&this.onAllRowsFlagChange({control:this.wrapperOrThis(),flag:s})),this.invalidateLayout()}onDataViewFilterChanged(t){this.invalidateLayout()}onDataViewSortChanged(t){this.invalidateLayout()}onGroupExpanded(t,e){this.invalidateLayout()}onGroupChecked(t,e){this.invalidateLayout()}onDataGroup2Expanded(t,e){this.invalidateLayout()}onPageChanged(t,e,s){this.setScrollIndex(0,0),this.invalidateLayout(),this._listView.pageChanged(e)}pageIndexClick(t){this.setPage(t)}preMode(){return this._preMode}fullMode(){return this._fullMode}noCache(){return this._noCache}description(){return this._description}setDescription(t){t!==this._description&&(this._description=t,this.invalidate())}renderMode(){return this._renderMode}rowInfos(){return this._current.dataRowInfos()}groupExpander(){return this._current.rowGroup().expander()}dataExpander(){return this._current.dataGroup().expander()}rowBar(){return this._current._rowBar}editBar(){return this._current._editBar}scrollIndicator(){return this._current._scrollIndicator}indexBar(){return this._current._indexBar}scrollBar(){return this._current._scrollBar}pageNavigator(){return this._current._pageNavigator}pageScroller(){return this._current._pageScroller}commandBox(){return this._current._commandBox}selectionMask(){return this._current._selectionMask}options(){return this._defaults}portrait(){return this._portrait}landscape(){return this._landscape}current(){return this._current}data(){return this._data}setData(t){if(t!=this._data){const e=this._groupModel;this._data&&(e&&this._data.removeListener(e),this._data.removeListener(this)),this._flags=sr.Instance,this._data&&this._data.removeFlags(this),this._data=t,this._defRowTempl=new s_(this),this._data&&(this._data.addListener(this),e&&this._data.addListener(e),this._flags=this._data.addFlags(this)),this._dataGroup?this._data instanceof Vh?this._dataGroup.refresh(this._data):this.$_destroyGroupModel(this._dataGroup):this._rowGroup&&(this._data instanceof Vh?this.$_destroyGroupModel(this._rowGroup):this._rowGroup.refresh(this._data)),this.invalidateLayout()}return t}isRowGrouped(){return this._rowGroup&&this._rowGroup.levels()>0}isDataGrouped(){return this._dataGroup&&this._dataGroup.levels()>0}isGrouped(){return this._groupModel&&this._groupModel.levels()>0}isPaging(){return!!this._pageModel}pageSize(){return this._pageModel?this._pageModel.size():NaN}pageCount(){return this._pageModel?this._pageModel.pageCount():NaN}page(){return this._pageModel?this._pageModel.page():NaN}setPage(t){if(!this.isPaging())throw new Error("Control is not a paging mode.");this._pageModel.setPage(t)}isVertical(){return this._current.orientation()===Ct.VERTICAL}isLandscape(){return this.orientation()===xt.LANDSCAPE}setDataLoading(t){return t!=this._dataLoading&&(this._dataLoading=t,this.invalidateLayout(),!0)}isDataLoading(){return this._dataLoading}setDataAppending(t,e){return this._dataAppending!==t&&(this._dataAppending=t,e&&t?this.scrollToEnd(-1):this.invalidateLayout(),!0)}isDataAppending(){return this._dataAppending}isDataEmpty(){return!this._data||this._data.source().rowCount()<1}isEmpty(){return!this._data||this._data.rowCount()<1}shouldShowEmptyPage(){return this.isDataEmpty()||this.alwaysEmptyPage&&this.isEmpty()}isDataChanged(){return this._dataChanged}scrollIndex(){return this._scrollIndex}setScrollIndex(t,e){this.isEmpty()||(t=Math.max(0,It(t,0)))===this._scrollIndex&&this._scrollOff===e||(this._reqScrollIndex=Math.max(0,t),this._reqScrollOff=It(e,0),this.invalidateLayout())}scrollOff(){return this._scrollOff}topRow(){return this._topRow}setTopRow(t){const e=this._rowGroup?this._rowGroup.visIndexOfRow(t):t;this.setScrollIndex(e,0)}textFormatter(){return this._textFormatter}setTextFormatter(t){t!==this._textFormatter&&(this._textFormatter=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormatter(){return this._boolFormatter}setBoolFormatter(t){t!==this._boolFormatter&&(this._boolFormatter=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormatter(){return this._numberFormatter}setNumberFormatter(t){t!==this._numberFormatter&&(this._numberFormatter=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormatter(){return this._dateFormatter}setDateFormatter(t){t!==this._dateFormatter&&(this._dateFormatter=t,this._runDateFormatter=void 0,this.invalidateLayout())}textFormat(){return this._textFormat}setTextFormat(t){t!==this._textFormat&&(this._textFormat=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormat(){return this._boolFormat}setBoolFormat(t){t!==this._boolFormat&&(this._boolFormat=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormat(){return this._numberFormat}setNumberFormat(t){t!==this._numberFormat&&(this._numberFormat=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormat(){return this._dateFormat}setDateFormat(t){t!==this._dateFormat&&(this._dateFormat=t,this._runDateFormatter=void 0,this.invalidateLayout())}groupModel(){return this._rowGroup||this._dataGroup}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}pageModel(){return this._pageModel}get layoutViewManager(){return this._listView}get alwaysFirstGroupHeader(){return this._alwaysFirstGroupHeader}set alwaysFirstGroupHeader(t){t!==this._alwaysFirstGroupHeader&&(this._alwaysFirstGroupHeader=t,this.isRowGrouped()&&this.invalidateLayout())}focusedRow(){return this._focusedRow}rowCommands(){return this._rowCommands}commandRow(){return this.bodyView().commandRow()}setCommandRow(t,e){if(t>=0){this.makeRowVisible(t)&&this.updateNow();const s=this._current.getRowCommands();this.bodyView().setCommands(t,s,e)}else this.bodyView().clearCommands(e)}listView(){return this._listView}bodyView(){return this._listView.bodyView()}rowPageView(){return this._rowPageView}infoPageView(){return this._infoPageView}editPageView(){return this._editPageView}leafRowCount(){return this._dataGroup?this._dataGroup.leafRowCount():this._data?this._data.rowCount():0}checkedRowCount(){return this._flags.checkedCount()}lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}setLineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._lineSepReg=w.makeLineSeparator(this._lineSeparator),this.invalidateLayout())}shapes(){return this._shapes}lineSepReg(){return this._lineSepReg}searchOptions(){return this._searchOptions}setSearchOptions(t){this._searchOptions.assign(t)}searchResult(){return this._searchResult}useImage(t){if(t&&!this._imageList2[t]){const e=new Image;e.src=t,e._src_=t,e.onload=this._imageLoaded,this._imageList2[t]=e}}getImageSize(t){return this._imageSizes[t]}registerShape(t,e,s,i){this._shapes.registerCustom(t,e,s,i)}registerShapes(t){this._shapes.registerCustoms(t)}registerIconSet(t,e){t&&e?(e instanceof kt||!w.isObject(e)||(e=new kt(e)),this._iconSets[t]=e):t&&delete this._iconSets[t]}getIcon(t,e){const s=this._iconSets[t];if(s)return{width:s.width,height:s.height,url:s.getUrl(e)}}registerTemplate(t,e,s){return s?yi(null,mi,t,e):yi(this,this._templates,t,e)}getStockTemplate(t){return wi.get(t)}getUserTemplate(t){return this._templates.get(t)||mi.get(t)}getTemplate(t){return this._templates.get(t)||mi.get(t)||wi.get(t)}getRowTemplate(t){const e=this._current.getRowTemplate(t);return this._templates.get(e)||mi.get(e)||wi.get(e)||this._defRowTempl}getDefaultRowTemplate(){const t=this._current.getDefaultRowTemplate();return this._templates.get(t)||mi.get(t)||wi.get(t)||this._defRowTempl}getRowInflater(t){return this._layoutPool.getRowInflater(t)}getRowParams(t){return this._current.getRowParams()}inflateField(t,e){return this._layoutPool.inflate(t,e)}registerTableModel(t,e){w.isObject(e)&&(!(t=t||e.name)&&I(b.requireTableName),this._tableModels[t]instanceof Zd&&N(b.alreadyTableExists,t),this._tableModels[t]=new Zd(e))}getTableModel(t){return this._tableModels[t]}getRowLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t))}getSearchLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t)).layout}getSkeletonLayout(){return this._layoutPool.getRowLayout(gi,0,!1)}searchIndexChanged(t){const e=t.getCurrrentField();this.makeRowVisible(e.row),this.invalidateLayout()}getGroupItemLayout(t){return this._layoutPool.getGroupItemLayout(t)}getRowStyle(t){return{itemDef:this._current.getRowStyle(),levelDef:void 0,dynamic:void 0}}borrowRenderer(t){return this._rendererPool.borrow(t)}freeRenderer(t){this._rendererPool.free(t)}getTextFormatter(){return this._runTextFormatter}getBoolFormatter(){return this._runBoolFormatter}getNumberFormatter(){return this._runNumberFormatter}getDateFormatter(){return this._runDateFormatter}getRowCount(){return this._pageModel?this._pageModel.rowCount():this._data?this._data.visRowCount():0}getStartRow(){return this._pageModel?this._pageModel.startRow():0}getEndRow(){return this._pageModel?this._pageModel.endRow():this.data?this._data.visRowCount()-1:0}getEndIndex(){return this.isGrouped()?this._groupModel.visItemCount()-1:this.getEndRow()}getRowAt(t){return this._pageModel?this._pageModel.getRow(t):t}clearGroupBy(){if(this.isGrouped()){const t=this._groupModel;this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=this._rowGroup=this._dataGroup=null,this.invalidateLayout()}}$_destroyGroupModel(t){t&&(this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=null,t===this._rowGroup&&(this._rowGroup=null),t===this._dataGroup&&(this._dataGroup=null))}$_destroyPageModel(){this._pageModel&&(this._pageModel.removeListener(this),this._pageModel=this._pageModel.destroy())}rowGroupBy(t){this.current().orientation()===Ct.HORIZONTAL&&I(b.canNotHorzGrouping),this._data||I(b.dataMustSet),t&&0!==t.length||I(b.requireGroupingInfos),this._data instanceof Vh&&I(b.canNotRowGrouping),this.$_destroyPageModel(),this.$_destroyGroupModel(this._dataGroup);let e=this._rowGroup;const s=this.isRowGrouped(),i=this._current;for(let e=0;e<t.length;e++){const s=t[e];"string"==typeof s&&(t[e]={field:s})}t.forEach(t=>{t.header=t.header||i.rowGroup().header(),t.footer=t.footer||i.rowGroup().footer()}),e?e.clear():(e=this._rowGroup=new $e,this._data&&this._data.addListener(e),e.addListener(this)),e.build(this._data,this._current.rowGroup(),t),0==e.levels()?this.$_destroyGroupModel(e):this._groupModel=e,this.isRowGrouped()!==s&&this.invalidateLayout()}dataGroupBy(t){this.current().orientation()===Ct.HORIZONTAL&&I(b.canNotHorzGrouping),this._data||I(b.dataMustSet),this._data instanceof Vh||I(b.canNotDataGrouping),this.$_destroyPageModel(),this.$_destroyGroupModel(this._rowGroup);let e=this._dataGroup;const s=this.isDataGrouped();e?e.clear():(e=this._dataGroup=new je,this._data&&this._data.addListener(e),e.addListener(this)),e.build(this._data,this._current.dataGroup(),t),this._groupModel=e,this.isDataGrouped()!==s&&this.invalidateLayout()}isMaster(t){return this._data.isMaster(t)}setPaging(t){this.$_destroyPageModel(),t&&(this._pageModel=new Ye(this._rowGroup||this._dataGroup||this._data,t),this._pageModel.addListener(this),this.invalidateLayout())}getPageRows(t){return this._pageModel.getPageRows(t)}isSingleRow(){return this._singleRow}getSummary(t){return this._data&&this._data.getSummary(t)}scrollBy(t){if(this._fullMode||this.isEmpty())return!1;if(0===(t=t>0?Math.ceil(t):Math.floor(t)))return!1;const e=this._listView;this.setLock();try{const s=e.scrollBy(t);return!0===s&&(this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow()),this.$_checkRowEnded(),!0===s}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}scrollToEnd(t){if(this.isEmpty()||t>=this._data.rowCount())return;t=It(t,-1);const e=this._listView;this.setLock();try{e.scrollToEnd(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this.$_checkRowEnded()}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}findView(t,e){return this.bodyView().findSimpleLayoutView(t,e)}findElement(t,e){return this.bodyView().findDom(t,e)}isRowCheckable(t){return this._flags.isCheckable(t)}isRowChecked(t){return this._flags.isChecked(t)}checkRow(t,e){return this._flags.setChecked(t,e)}toggleChecked(t){this._flags.setChecked(t,!this._flags.isChecked(t))}checkAll(t){return this._flags.checkAll(t)}isRowSearched(t){if(this._searchResult&&!this._searchModel.filtering)return this._flags.isSearched(t)}isRowDetailed(t){return this._flags.isDetailed(t)}setRowDetailed(t,e,s,i){this._flags.setDetailed(t,e,s),i&&this.bodyView().$_setDetailingRow(t)}$_getFlags(){return this._flags}getSelection(){return this._selection}clearSelection(){if(this._selection)return this._selection=null,this.onSelectionClear&&this.onSelectionClear({control:this.wrapperOrThis()}),this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:-1,newEnd:-1,oldStart:-1,oldEnd:-1}),this.invalidateLayout(),!0}setSelection(t,e){const s=this._data;this.clearSelection(),e=isNaN(e)?t:e,s&&t>=0&&t<s.rowCount()&&e>=0&&e<s.rowCount()&&(this._selection=new za(this.isGrouped()?this._groupModel:s,t,e),t=this._selection.start,e=this._selection.end,this.onSelectionAdd&&this.onSelectionAdd({control:this.wrapperOrThis(),start:t,end:e}),this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:t,newEnd:e,oldStart:t,oldEnd:e}),this.invalidateLayout())}resizeSelection(t,e){const s=this._selection;if(s){const i=s.start,r=s.end;s.resize(e,t)&&(this.onSelectionChange&&this.onSelectionChange({control:this.wrapperOrThis(),newStart:t,newEnd:e,oldStart:i,oldEnd:r}),this.invalidateLayout())}}swipeRow(t){let e=!1;if(this.onRowSwipe){const s={control:this.wrapperOrThis(),row:t};this.onRowSwipe(s),e=s.cancel}if(!e)switch(this._current.row().swipeAction()){case Kt.COMMAND:this.setCommandRow(t,!0);break;case Kt.PAGE:case Kt.TAP:case Kt.INFO:case Kt.EDIT:case Kt.ROW_BAR:case Kt.EDIT_BAR:}}closePanel(t){this._listView.closePanel(t)}showPanel(t,e){this._listView.showPanel(t,e)}togglePanel(t,e){this._listView.togglePanel(this.current().$_getPanel(t),e)}showFormPanel(t,e){t&&this.current().formPanel()._setActionTemplate(t),this.showPanel(this.current().formPanel(),e)}showButtonPanel(t){this.showPanel(this.current().buttonPanel(),t)}showSearchPanel(t,e){this.showPanel(this.current().searchPanel(),e)}showFilterPanel(t,e){const s=this.current().filterPanel();s.setModel(t),this.showPanel(s,e)}registerMenu(t,e){t&&(w.isObject(e)?this._menus[t]=e:this.unregisterMenu(t))}unregisterMenu(t){delete this._menus[t]}showMenu(t,e){"string"==typeof t?t=this._menus[t]:t||(t=this._menus[this._current.menu()]),t&&t.items&&t.items.length>0&&this._listView.showMenu(new da(this,t),e)}closeMenu(t){this._listView.hideMenu(t)}toggleMenu(t,e){this._listView.hideMenu(e)||this.showMenu(t,e)}clearSearch(t){if(this._searchResult&&(!t||t===this._searchResult)&&(this._flags.clearSearched(),this.invalidateLayout(),this._searchResult=this._searchResult.destroy(),this._searchFilter)){const t=this._data;t instanceof ao&&t.removeFilter(this._searchFilter,!0),this._searchFilter=null}}search(t,e){if(this.clearSearch(null),this._data){const s=this._groupModel||this._data,i=this._searchModel=new Pd(this),r=e?i.search(t,e,s):null,n=r&&r.fields();if(n&&n.length>0)for(const t of n)this._flags.setSearched(t.row,!0);if(this._searchResult=r,i.filtering){const t=this._data;if(this._searchFilter=t_.SEARCH_FILTER+w.irandom(1e4),t instanceof ao){n&&n.forEach(e=>e.drow=t._rows[e.row]);const e=this._flags.getSearchedRows();t.setDataTags(e,1);const s={name:this._searchFilter,filter:(e,s)=>t.isDataTag(e,1)};t.addFilter(s,!0,!0),n&&n.forEach(t=>t.row=t.drow.newIdx)}}return r&&r.moveNext(),this.invalidateLayout(),r}return null}isRowPageVisible(){return this._rowPageView&&this._rowPageView.visible}closeRowPage(t,e){let s=this._rowPageView;if(s&&s.visible){if(s instanceof zd&&t)try{const t=s.getValues(this._listView);if(!s.commit(t))return}catch(t){return console.error(t),void alert(t.message||t)}this._rowPageView=null,s.hide(this._listView.getOffsetBounds(),e)}}isInfoPageVisible(){return this._infoPageView&&this._infoPageView.visible}showInfoPage(t,e,s){if(this._rowPageView)return void console.warn("이미 Row Info View가 표시되고 있습니다.");let i,r=this._infoPageView;if(this._data instanceof Vh){const e=this._data.getSourceRow(t);i=e.dv,t=e.row}else i=this._data;if(i&&t>=0&&t<i.rowCount()){const n=this._current.infoPage();r?r.setModel(n):(r=this._infoPageView=new Fd(this.doc(),n),this.addElement(r)),n.setModel(e),r.setRow(i,t),r.show(this._listView,this._listView.getOffsetBounds(),s),this._rowPageView=r}}isEditPageVisible(){return this._editPageView&&this._editPageView.visible}showEditPage(t,e,s){if(this._rowPageView)return void console.warn("이미 Row Edit View가 표시되고 있습니다.");let i,r=this._editPageView;if(this._data instanceof Vh){const e=this._data.getSourceRow(t);i=e.dv,t=e.row}else i=this._data;if(i&&t<i.rowCount()){const n=t>=0?this._current.editPage():this._current.addPage();r?r.setModel(n):(r=this._editPageView=new zd(this.doc(),n),this.addElement(r)),n.setModel(e),r.setRow(i,t),r.show(this._listView,this._listView.getOffsetBounds(),s),this._rowPageView=r}}makeRowVisible(t){const e=this._data;if(e&&t>=0&&t<e.rowCount()){const e=this.bodyView().makeRowVisible(t);if(e&&(e.pos!==this._scrollIndex||e.off!==this._scrollOff))return this.setScrollIndex(e.pos,e.off),!0}}makeGroupItemVisible(t){if(t instanceof me){const e=this._listView.makeItemVisible(t);if(e)return this.setScrollIndex(e.pos,e.off),!0}}setFocusedRow(t){const e=this._focusedRow,s=this._data;if(s&&t>=0&&t<s.rowCount()?e!==t&&(this._focusedRow=t):e>=0&&(this._focusedRow=-1),this._focusedRow!==e&&(this.bodyView().setFocusedRow(this._focusedRow),this._listView.focusedRowChanged(this._focusedRow,e),this.onFocusedRowChange)){const t={control:this.wrapperOrThis(),row:this._focusedRow,oldRow:e};this.onFocusedRowChange(t)}}getEditValues(){if(this._rowPageView===this._editPageView)return this._editPageView.getValues(this._listView)}addTooltipView(t){this._listView.addTooltipView(t)}removeTooltipView(t){this._listView.removeTooltipView(t)}showToast(t){"string"==typeof t&&(t={message:t}),t&&(t.message||t.html)&&this._listView.showToast(t)}getDataGroupOfRow(t,e){const s=this._dataGroup;return s&&s.itemOfRow(t,e).group}_prepareRenderers(t){const e=t.children,s=this._htmlTempls={};for(let i=e.length-1;i>=0;i--){const r=e[i];t.removeChild(r),r instanceof HTMLElement&&r.id&&(s[r.id]=r)}}invalidateLayout(t=!1){this.invalidate(t),this._layoutNeeded=!0}_windowResized(){this.invalidateLayout()}_creatDefaultTool(){return new vd(this)}_doInitModel(){this._defaults=new Lh(this,this,null,!1).load(bd),this._current=this._portrait=new Lh(this,this,this._defaults,!1),this._landscape=new Lh(this,this,this._defaults,!0),this._layoutPool=new Kd(this),this._iconSets={},this._shapes=new Ao(this),this._rendererPool=new rd,this._defRowTempl=new s_(this),this._rowCommands=new Rd}_doInitView(t){this._current=this.orientation()===xt.LANDSCAPE?this._landscape:this._portrait}_doOrientationChanged(t){this.closePanel(!1),this._current=t===xt.LANDSCAPE?this._landscape:this._portrait,this._orientationChanged&&this._orientationChanged(t),this.invalidateLayout()}_doControlObjectChanged(t,e){this.invalidateLayout()}_doBeforeRender(){this._layoutNeeded&&(this._current.prepareRender(),this._defRowTempl.clear(),this._layoutPool.prepareRender()),this._singleRow=this._current.singleRow().visible();const t=this._listView;this.isDataLoading()&&this.skeletonVisible?(this._skeletonListView||(this._skeletonListView=new Id(this.doc(),this)),this._listView=this._skeletonListView):this._singleRow?this._listView=this._defaultListView:this.isRowGrouped()?(this._groupedListView||(this._groupedListView=new el(this.doc(),this)),this._listView=this._groupedListView):this.isDataGrouped()?(this._dataListView||(this._dataListView=new ul(this.doc(),this)),this._listView=this._dataListView):this._listView=this._defaultListView,t&&this._listView!==t&&this.removeElement(t),this.addElement(this._listView),this._listView.visible=!0,void 0===this._runTextFormatter&&(this._runTextFormatter=this._textFormatter||qt(this._textFormat)),void 0===this._runBoolFormatter&&(this._runBoolFormatter=this._boolFormatter||jt(this._boolFormat)),void 0===this._runNumberFormatter&&(this._runNumberFormatter=this._numberFormatter||Yt(this._numberFormat)),void 0===this._runDateFormatter&&(this._runDateFormatter=this._dateFormatter||Qt(this._dateFormat));const e=this._current.row().borderLine();this.rowBorder={style:e.style()||this.getCssVar("--dl-row-border-line"),masterStyle:e.masterStyle()||this.getCssVar("--dl-master-border-line"),skipLast:e.skipLast(),skipGroupLast:e.skipGroupLast(),leafOnly:e.leafOnly()}}_doRender(t){this._rowPageView?this.$_renderRowList(t):this._fullMode?this.$_renderFull(t):this.$_renderDefault(t)}$_renderRowList(t){}$_renderFull(t){const e=(t,e,s)=>{this._listView.measure(t,{scrollPos:0,scrollOff:0},e,s)},s=t=>{const e=this._listView;e.resizeByMeasure().move(0,0),e.render(t)};try{const i=this.doc(),r=w.watch();e(i,t.width,Number.MAX_SAFE_INTEGER),x.log("ListControl measured in "+r.elapsedText(!0)),s(i),this._setSize(NaN,this._listView.height),x.log("ListControl rendered in "+r.elapsedText())}finally{this._layoutNeeded=!1}}$_renderDefault(t){const e=(t,e,s)=>{let i=this._scrollIndex,r=this._scrollOff;isNaN(this._reqScrollIndex)||(i=this._reqScrollIndex,r=It(this._reqScrollOff,0));const n={scrollPos:i,scrollOff:r};this._listView.measure(t,n,e,s)},s=t=>{const e=this._listView,s=this._scrollIndex;e.resizeByMeasure().move(0,0),e.render(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this._scrollIndex!=s&&this.onScroll&&this.onScroll({control:this,top:this._scrollIndex})};try{const i=this.doc(),r=+new Date;e(i,t.width,t.height);const n=+new Date;x.log("ListControl measured in "+(n-r)+"ms."),s(i),x.log("ListControl rendered in "+(+new Date-n)+"ms."),this.$_checkRowEnded()}finally{this._layoutNeeded=!1,this._reqScrollIndex=this._reqScrollOff=NaN}}_doAfterRender(){this._dataChanged=!1,this.$_clearUsedImages(),this._current.unprepareRender()}$_rowTouched(t){this._current.row().touchEffect()&&this.bodyView().setTouchedRow(t)}$_performRowClick(t,e){switch(e){case Zt.SELECT:this.isGrouped()?this.setSelection(this._groupModel.indexOfRow(t),NaN):this.setSelection(t,NaN);break;case Zt.CHECK:this.isRowCheckable(t)&&this.checkRow(t,!this.isRowChecked(t));break;case Zt.COMMAND:break;case Zt.EXPAND:if(this.isDataGrouped()){const e=this._dataGroup;e&&e.toggle(e.itemOfRow(t,!0).group,!1)}break;case Zt.DETAIL:this.setRowDetailed(t,!this.isRowDetailed(t),!1,!0);break;case Zt.DETAILEX:this.setRowDetailed(t,!this.isRowDetailed(t),!0,!0);break;case Zt.LINK:const e=this._current.row().link(),s=e.getLink(this.wrapperOrThis(),this._data,t);s&&(e.target()?window.open(s,e.target()):location.href=s);break;case Zt.INFO:this.showInfoPage(t,null,!0);break;case Zt.EDIT:this.showEditPage(t,null,!0);break;case Zt.MOVE:this.activeTool().requestDrag(new en(t))}}$_rowClicked(t){if(t>=0){const e=this._current;if(this.fitRowWhenClick&&this.makeRowVisible(t),e.row().focusable()&&this.setFocusedRow(t),this.onRowClick){const e=this._rowClickArgs;if(e.control=this.wrapperOrThis(),e.row=t,e.cancel=!1,this.onRowClick(e),e.cancel)return}let s=e.row().clickAction();if(this.isDataGrouped()&&this._data.isMaster(t)){const t=e.row().masterClickAction();t&&(s=t)}this.$_performRowClick(t,s)}}$_rowLongPressed(t){if(t>=0){const e=this._current;if(this.onRowLongPress){const e=this._rowClickArgs;if(e.control=this.wrapperOrThis(),e.row=t,e.cancel=!1,this.onRowLongPress(e),e.cancel)return}let s=e.row().pressAction();if(this.isDataGrouped()&&this._data.isMaster(t)){const t=e.row().masterPressAction();t&&(s=t)}this.$_performRowClick(t,s)}}$_groupItemClicked(t){t instanceof ye?this.$_rowClicked(t.row()):(this.fitRowWhenClick&&this.makeGroupItemVisible(t),this._listView.clickItem(t))}$_clearUsedImages(){const t=this._imageList;for(let e=t.length-1;e>=0;e--){const s=t[e];s.parentElement&&!s.complete||(s.onload=null,t.splice(e,1))}const e=this._imageList2;for(const t in e){const s=e[t];s.complete&&(s.onload=null,delete e[t],h&&delete this._imageSizes[t])}}$_checkRowEnded(){const t=this.bodyView().isRowEnded();t&&!this._lastRowRevealed&&setTimeout(()=>{this.onLastRowRevealed&&this.onLastRowRevealed({control:this.wrapperOrThis()})},0),this._lastRowRevealed=t}}t_.CLASS_NAME="rtc-control",t_.SEARCH_FILTER="@_dlist_search_filter_",t_.NUMBER_FORMAT="",t_.BOOLEAN_FORMAT="False:True",t_.DATE_FORMAT="yyyy.MM.dd HH:mm";let e_=1;class s_{constructor(t){this.id=e_++,this.detailId=e_++,this.collapsedId=e_++,this._rowStyle=new Ft,this._layouts={},this._control=t}get rowProps(){}get rowStyle(){return this._rowStyle}get layout(){function t(t){const e=t&&t.fields()||[],s=[],i={layout:ai.TYPE,children:s};for(let t of e)s.push({field:t.name});return i.style={backgroundColor:"#efefef"},new Te(null,i,null)}const e=this._control.data();if(e instanceof Vh){const s=e.getSource(this.target);let i=this._layouts[s.hash];return i||(i=t(s),this._layouts[s.hash]=i),i}return this._layout||(this._layout=t(e)),this._layout}get detailed(){return null}clear(){this._layout=null}}class i_ extends i{get control(){return this.$_c.wrapper()}get cellStyle(){return this.$_c.cellStyle()}set cellStyle(t){this.$_c.setCellStyle(t)}get cellStyleCallback(){return this.$_c.cellStyleCallback()}set cellStyleCallback(t){this.$_c.setCellStyleCallback(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get styleCallback(){return this.$_c.styleCallback()}set styleCallback(t){this.$_c.setStyleCallback(t)}}class r_ extends i_{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get rowOffset(){return this.$_c.rowOffset()}set rowOffset(t){this.$_c.setRowOffset(t)}get minWidth(){return this.$_c.minWidth()}set minWidth(t){this.$_c.setMinWidth(t)}get fitWidth(){return this.$_c.fitWidth()}set fitWidth(t){this.$_c.setFitWidth(t)}get prefix(){return this.$_c.prefix()}set prefix(t){this.$_c.setPrefix(t)}get suffix(){return this.$_c.suffix()}set suffix(t){this.$_c.setSuffix(t)}}class n_ extends i_{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get masterVisible(){return this.$_c.masterVisible()}set masterVisible(t){this.$_c.setMasterVisible(t)}get dragMode(){return this.$_c.dragMode()}set dragMode(t){this.$_c.setDragMode(t)}}class o_ extends i_{get label(){return this.$_c.label()}set label(t){this.$_c.setLabel(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class a_ extends i_{get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class h_ extends i_{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get shape(){return this.$_c.shape()}set shape(t){this.$_c.setShape(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get shapeCallback(){return this.$_c.shapeCallback()}set shapeCallback(t){this.$_c.setShapeCallback(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class l_ extends i_{get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}}class d_ extends o_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}}class __ extends i_{}class c_ extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class u_ extends c_{get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get gapLeft(){return this.$_c.gapLeft()}set gapLeft(t){this.$_c.setGapLeft(t)}get gapRight(){return this.$_c.gapRight()}set gapRight(t){this.$_c.setGapRight(t)}get gapTop(){return this.$_c.gapTop()}set gapTop(t){this.$_c.setGapTop(t)}get gapBottom(){return this.$_c.gapBottom()}set gapBottom(t){this.$_c.setGapBottom(t)}}class g_ extends u_{constructor(t){super(),t.setWrapper(this),this._order=t.order().createWrapper(r_),this._check=t.check().createWrapper(n_),this._shape=t.shape().createWrapper(h_),this._letter=t.letter().createWrapper(l_),this._image=t.image().createWrapper(a_),this._button=t.button().createWrapper(o_),this._move=t.move().createWrapper(__)}get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get order(){return this._order}get check(){return this._check}get shape(){return this._shape}get letter(){return this._letter}get image(){return this._image}get button(){return this._button}get move(){return this._move}}class p_ extends o_{get confirmMessage(){return this.$_c.confirmMessage()}set confirmMessage(t){this.$_c.setConfirmMessage(t)}}class f_ extends o_{get editHeader(){return this.$_c.editHeader()}set editHeader(t){this.$_c.setEditHeader(t)}get editTemplate(){return this.$_c.editTemplate()}set editTemplate(t){this.$_c.setEditTemplate(t)}}class w_ extends f_{get appending(){return this.$_c.appending}set appending(t){this.$_c.appending=t}}class m_ extends o_{get infoHeader(){return this.$_c.infoHeader()}set infoHeader(t){this.$_c.setInfoHeader(t)}get infoTemplate(){return this.$_c.infoTemplate()}set infoTemplate(t){this.$_c.setInfoTemplate(t)}}class y_ extends o_{get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}get url(){return this.$_c.url()}set url(t){this.$_c.setUrl(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class v_ extends u_{constructor(t){super(),t.setWrapper(this),this._delete=t.delete().createWrapper(p_),this._add=t.add().createWrapper(w_),this._edit=t.edit().createWrapper(f_),this._info=t.info().createWrapper(m_),this._link=t.link().createWrapper(y_),this._custom=t.custom().createWrapper(o_),this._move=t.move().createWrapper(__)}get action(){return this.$_c.action()}set action(t){this.$_c.setAction(t)}get delete(){return this._delete}setDelete(t){this._delete.assignProps(t)}get add(){return this._add}get edit(){return this._edit}get info(){return this._info}get link(){return this._link}get custom(){return this._custom}get move(){return this._move}}class b_ extends c_{get onLetterClick(){return this.$_c.onLetterClick()}set onLetterClick(t){this.$_c.setOnLetterClick(t)}get length(){return this.$_c.length()}set length(t){this.$_c.setLength(t)}get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get minWidth(){return this.$_c.minWidth()}set minWidth(t){this.$_c.setMinWidth(t)}get maxWidth(){return this.$_c.maxWidth()}set maxWidth(t){this.$_c.setMaxWidth(t)}get spaceCharacter(){return this.$_c.spaceCharacter()}set spaceCharacter(t){this.$_c.setSpaceCharacter(t)}get caseSensitive(){return this.$_c.caseSensitive()}set caseSensitive(t){this.$_c.setCaseSensitive(t)}get letters(){return this.$_c.letters()}set letters(t){this.$_c.setLetters(t)}get indexField(){return this.$_c.indexField()}set indexField(t){this.$_c.setIndexField(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}}class S_ extends c_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get showSelection(){return this.$_c.showSelection()}set showSelection(t){this.$_c.setShowSelection(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get tooltipVisible(){return this.$_c.tooltipVisible()}set tooltipVisible(t){this.$_c.setTooltipVisible(t)}get tooltipValue(){return this.$_c.tooltipValue()}set tooltipValue(t){this.$_c.setTooltipValue(t)}get firstTooltip(){return this.$_c.firstTooltip()}set firstTooltip(t){this.$_c.setFirstTooltip(t)}get lastTooltip(){return this.$_c.lastTooltip()}set lastTooltip(t){this.$_c.setLastTooltip(t)}get tooltipStyle(){return this.$_c.tooltipStyle()}set tooltipStyle(t){this.$_c.setTooltipStyle(t)}}class C_ extends c_{get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get thumbWidth(){return this.$_c.thumbWidth()}set thumbWidth(t){this.$_c.setThumbWidth(t)}get minThumbLength(){return this.$_c.minThumbLength()}set minThumbLength(t){this.$_c.setMinThumbLength(t)}}class x_ extends i{get action(){return this.$_c.action()}get label(){return this.$_c.label()}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get disabledClass(){return this.$_c.disabledClass()}set disabledClass(t){this.$_c.setDisabledClass(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get disabled(){return this.$_c.disabled()}}class R_ extends c_{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(x_),this._prev=t.prev().createWrapper(x_),this._next=t.next().createWrapper(x_),this._last=t.last().createWrapper(x_)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get first(){return this._first}get prev(){return this._prev}get next(){return this._next}get last(){return this._last}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get itemGap2(){return this.$_c.itemGap2()}set itemGap2(t){this.$_c.setItemGap2(t)}}class E_ extends i{get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}}class V_ extends E_{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}}class $_ extends c_{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(V_),this._last=t.last().createWrapper(V_),this._index=t.index().createWrapper(E_),this._current=t.current().createWrapper(E_)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}get first(){return this._first}get last(){return this._last}get index(){return this._index}get current(){return this._current}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}}class A_ extends c_{get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get minCellWidth(){return this.$_c.minCellWidth()}set minCellWidth(t){this.$_c.setMinCellWidth(t)}get minCellHeight(){return this.$_c.minCellHeight()}set minCellHeight(t){this.$_c.setMinCellHeight(t)}}class D_ extends c_{get showHandle(){return this.$_c.showHandle()}set showHandle(t){this.$_c.setShowHandle(t)}}class k_ extends i{get rootUrl(){return this.$_c.rootUrl()}set rootUrl(t){this.$_c.setRootUrl(t)}get linkField(){return this.$_c.linkField()}set linkField(t){this.$_c.setLinkField(t)}get linkCallback(){return this.$_c.linkCallback()}set linkCallback(t){this.$_c.setLinkCallback(t)}get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}}class L_ extends i{get enabled(){return this.$_c.enabled()}set enabled(t){this.$_c.setEnabled(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get backward(){return this.$_c.backward()}set backward(t){this.$_c.setBackward(t)}get duration(){return this.$_c.duration()}set duration(t){this.$_c.setDuration(t)}get changeDuration(){return this.$_c.changeDuration()}set changeDuration(t){this.$_c.setChangeDuration(t)}}class T_ extends L_{get rowsPerScroll(){return this.$_c.rowsPerScroll()}set rowsPerScroll(t){this.$_c.setRowsPerScroll(t)}}class M_ extends i{constructor(t){super(),t.setWrapper(this),this._link=t.link().createWrapper(k_),this._borderLine=t.borderLine().createWrapper(ic),this._focusMask=t.focusMask().createWrapper(rc),this._autoScroll=t.autoScroll().createWrapper(T_)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get largeTemplate(){return this.$_c.largeTemplate()}set largeTemplate(t){this.$_c.setLargeTemplate(t)}get templateCallback(){return this.$_c.templateCallback()}set templateCallback(t){this.$_c.setTemplateCallback(t)}get templateParams(){return this.$_c.templateParams()}set templateParams(t){this.$_c.setTemplateParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get minHeight(){return this.$_c.minHeight()}set minHeight(t){this.$_c.setMinHeight(t)}get maxHeight(){return this.$_c.maxHeight()}set maxHeight(t){this.$_c.setMinHeight(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}get masterClickAction(){return this.$_c.masterClickAction()}set masterClickAction(t){this.$_c.setMasterClickAction(t)}get pressAction(){return this.$_c.pressAction()}set pressAction(t){this.$_c.setPressAction(t)}get masterPressAction(){return this.$_c.masterPressAction()}set masterPressAction(t){this.$_c.setMasterPressAction(t)}get swipeAction(){return this.$_c.swipeAction()}set swipeAction(t){this.$_c.setSwipeAction(t)}get commands(){return this.$_c.commands()}set commands(t){this.$_c.setCommands(t)}get link(){return this._link}get borderLine(){return this._borderLine}get focusMask(){return this._focusMask}get autoScroll(){return this._autoScroll}get focusable(){return this.$_c.focusable()}set focusable(t){this.$_c.setFocusable(t)}get touchEffect(){return this.$_c.touchEffect()}set touchEffect(t){this.$_c.setTouchEffect(t)}get deleteAnimation(){return this.$_c.deleteAnimation()}set rowDeleteAnimation(t){this.$_c.setDeleteAnimation(t)}}class P_ extends i{get control(){return this.$_c.owner().wrapper()}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class I_ extends P_{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get layoutStyle(){return this.$_c.layoutStyle()}set layoutStyle(t){this.$_c.setLayoutStyle(t)}}class N_ extends I_{get buttons(){const t=this.$_c.buttons();return t&&t.map(t=>Object.assign({},t))}set buttons(t){this.$_c.setButtons(t)}get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}getButton(t){const e=this.$_c.getButton(t);return e&&Object.assign({},e)}setButton(t){this.$_c.setButton(t)}removeButton(t){this.$_c.removeButton(t)}showButton(t){this.$_c.setButtonVisible(t,!0)}hideButton(t){this.$_c.setButtonVisible(t,!1)}setButtonEnabled(t,e){this.$_c.setButtonEnabled(t,e)}getButtonState(t){return this.$_c.getButtonState(t)}setButtonState(t,e){this.$_c.setButtonState(t,e)}}class O_ extends N_{get caption(){return this.$_c.caption()}set caption(t){this.$_c.setCaption(t)}get captionAlign(){return this.$_c.captionAlign()}set captionAlign(t){this.$_c.setCaptionAlign(t)}get captionColor(){return this.$_c.captionColor()}set captionColor(t){this.$_c.setCaptionColor(t)}get showCheck(){return this.$_c.showCheck()}set showCheck(t){this.$_c.setShowCheck(t)}get autoCheck(){return this.$_c.autoCheck()}set autoCheck(t){this.$_c.setAutoCheck(t)}}class B_ extends N_{}class F_ extends I_{get showOrder(){return this.$_c.showOrder()}set showOrder(t){this.$_c.setShowOrder(t)}}class z_ extends P_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get resetVisible(){return this.$_c.resetVisible()}set resetVisible(t){this.$_c.setResetVisible(t)}get optionsVisible(){return this.$_c.optionsVisible()}set optionsVisible(t){this.$_c.setOptionsVisible(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class H_ extends P_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get clearWhenClose(){return this.$_c.clearWhenClose()}set clearWhenClose(t){this.$_c.setClearWhenClose(t)}}class W_ extends P_{get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}}class G_ extends i{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get showMode(){return this.$_c.showMode()}set showMode(t){this.$_c.setShowMode(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get minSize(){return this.$_c.minSize()}set minSize(t){this.$_c.setMinSize(t)}get maxSize(){return this.$_c.maxSize()}set maxSize(t){this.$_c.setMaxSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}}class U_ extends G_{get buttons(){return this.$_c.buttons()}set buttons(t){this.$_c.setButtons(t)}get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}}class q_ extends U_{get buttonPosition(){return this.$_c.buttonPosition()}set buttonPosition(t){this.$_c.setButtonPosition(t)}get cancelLabel(){return this.$_c.cancelLabel()}set cancelLabel(t){this.$_c.setCancelLabel(t)}get okLabel(){return this.$_c.okLabel()}set okLabel(t){this.$_c.setOkLabel(t)}}class j_ extends q_{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}}class Y_ extends U_{get arrange(){return this.$_c.arrange()}set arrange(t){this.$_c.setArrange(t)}get align(){return this.$_c.align()}set align(t){this.$_c.setAlign(t)}}class Q_ extends q_{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get matchCaseLabel(){return this.$_c.matchCaseLabel()}set matchCaseLabel(t){this.$_c.setMatchCaseLabel(t)}get wholeWordLabel(){return this.$_c.wholeWordLabel()}set wholeWordLabel(t){this.$_c.setWholeWordLabel(t)}get regExpLabel(){return this.$_c.regExpLabel()}set regExpLabel(t){this.$_c.setRegExpLabel(t)}get searchNextLabel(){return this.$_c.searchNextLabel()}set searchNextLabel(t){this.$_c.setSearchNextLabel(t)}get searchAllLabel(){return this.$_c.searchAllLabel()}set searchAllLabel(t){this.$_c.setSearchAllLabel(t)}get lineGap(){return this.$_c.lineGap()}set lineGap(t){this.$_c.setLineGap(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class Z_ extends q_{get autoApply(){return this.$_c.autoApply()}set autoApply(t){this.$_c.setAutoApply(t)}}class X_ extends i{get visible(){return this.$_c.visible}set visible(t){this.$_c.setVisible(t)}get collapsedVisible(){return this.$_c.collapsedVisible}set collapsedVisible(t){this.$_c.setCollapsedVisible(t)}get template(){return this.$_c.template}set template(t){this.$_c.setTemplate(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}}class K_ extends X_{}class J_ extends i{constructor(t){super(),t.setWrapper(this)}get theme(){return this.$_c.theme()}set theme(t){this.$_c.setTheme(t)}get rowIndents(){return this.$_c.rowIndents()}set rowIndents(t){this.$_c.setRowIndents(t)}get indent(){return this.$_c.indent()}set indent(t){this.$_c.setIndent(t)}}class tc extends J_{constructor(t){super(t),this._header=t.header().createWrapper(X_),this._footer=t.footer().createWrapper(K_),this._expander=t.expander().createWrapper(d_)}get header(){return this._header}get footer(){return this._footer}get expander(){return this._expander}get groupIndent(){return this.$_c.groupIndent()}set groupIndent(t){this.$_c.setGroupIndent(t)}get endMargin(){return this.$_c.endMargin()}set endMargin(t){this.$_c.setEndMargin(t)}}class ec extends J_{constructor(t){super(t),this._expander=t.expander().createWrapper(d_)}get expander(){return this._expander}}class sc extends i{getInfo(t){return this.$_c.getInfo(t)}setInfo(t,e){this.$_c.setInfo(t,e)}setInfos(t){this.$_c.setInfos(t)}setMaster(t){this.$_c.setMaster(t)}}class ic extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get masterStyle(){return this.$_c.masterStyle()}set masterStyle(t){this.$_c.setMasterStyle(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}get skipLast(){return this.$_c.skipLast()}set skipLast(t){this.$_c.setSkipLast(t)}get skipGroupLast(){return this.$_c.skipGroupLast()}set skipGroupLast(t){this.$_c.setSkipGroupLast(t)}get leafOnly(){return this.$_c.leafOnly()}set leafOnly(t){this.$_c.setLeafOnly(t)}}class rc extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}}class nc extends O_{}class oc extends i{constructor(t){super(),t.setWrapper(this),this._header=this._createHeader(t)}get header(){return this._header}get fitSize(){return this.$_c.fitSize()}set fitSize(t){this.$_c.setFitSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get effectDuration(){return this.$_c.effectDuration()}set effectDuration(t){this.$_c.setEffectDuration(t)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get showDirection(){return this.$_c.showDirection()}set showDirection(t){this.$_c.setShowDirection(t)}get hideDirection(){return this.$_c.hideDirection()}set hideDirection(t){this.$_c.setHideDirection(t)}get allFields(){return this.$_c.allFields()}set allFields(t){this.$_c.setAllFields(t)}get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}get templateVars(){return this.$_c.templateVars()}set templateVars(t){this.$_c.setTemplateVars(t)}get templateParams(){return this.$_c.templateParams2()}set templateParams(t){this.$_c.setTemplateParams2(t)}}class ac extends nc{}class hc extends oc{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}_createHeader(t){return t.header().createWrapper(ac)}}class lc extends nc{}class dc extends oc{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}_createHeader(t){return t.header().createWrapper(lc)}}class _c extends L_{get changeEffect(){return this.$_c.changeEffect()}set changeEffect(t){this.$_c.setChangeEffect(t)}}class cc extends i{constructor(t){super(),t.setWrapper(this),this._autoScroll=t.autoScroll().createWrapper(_c)}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get noShrink(){return this.$_c.noShrink()}set noShrink(t){this.$_c.setNoShrink(t)}get maskEffect(){return this.$_c.maskEffect()}set maskEffect(t){this.$_c.setMaskEffect(t)}get showPrev(){return this.$_c.showPrev()}set showPrev(t){this.$_c.setShowPrev(t)}get showNext(){return this.$_c.showNext()}set showNext(t){this.$_c.setShowNext(t)}get rowChangeDir(){return this.$_c.rowChangeDir()}set rowChangeDir(t){this.$_c.setRowChangeDir(t)}get rowNavigator(){return this.$_c.rowNavigator()}set rowNavigator(t){this.$_c.setRowNavigator(t)}get rowBorderVisible(){return this.$_c.rowBorderVisible()}set rowBorderVisible(t){this.$_c.setRowBorderVisible(t)}get autoScroll(){return this._autoScroll}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class uc extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get endSpace(){return this.$_c.endSpace()}set endSpace(t){this.$_c.setEndSpace(t)}get rowTemplate(){return this.$_c.rowTemplate()}set rowTemplate(t){this.$_c.setRowTemplate(t)}get indicatorVisible(){return this.$_c.indicatorVisible()}set indicatorVisible(t){this.$_c.setIndicatorVisible(t)}get indicatorType(){return this.$_c.indicatorType()}set indicatorType(t){this.$_c.setIndicatorType(t)}get indicatorSize(){return this.$_c.indicatorSize()}set indicatorSize(t){this.$_c.setIndicatorSize(t)}get indicatorMargin(){return this.$_c.indicatorMargin()}set indicatorMargin(t){this.$_c.setIndicatorMargin(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class gc extends i{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get templateParams(){return this.$_c.templateParams2()}set templateParams(t){this.$_c.setTemplateParams2(t)}}class pc extends gc{get messageVisible(){return this.$_c.messageVisible()}set messageVisible(t){this.$_c.setMessageVisible(t)}get message(){return this.$_c.message()}set message(t){this.$_c.setMessage(t)}get loadVisible(){return this.$_c.loadVisible()}set loadVisible(t){this.$_c.setLoadVisible(t)}get loadLabel(){return this.$_c.loadLabel()}set loadLabel(t){this.$_c.setLoadLabel(t)}get onLoadClick(){return this.$_c.onLoadClick()}set onLoadClick(t){this.$_c.setOnLoadClick(t)}}class fc extends gc{}class wc extends i{constructor(t){super()}}class mc extends wc{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t&&t.$_d))}get rows(){return this.$_c.rows()}set rows(t){this.$_c.setRows(t)}}class yc extends wc{constructor(t){super(t),this._rowBar=new g_(t._rowBar),this._editBar=new v_(t._editBar),this._indexBar=t._indexBar.createWrapper(b_),this._scrollIndicator=t._scrollIndicator.createWrapper(S_),this._scrollBar=t._scrollBar.createWrapper(C_),this._pageNavigator=new R_(t._pageNavigator),this._pageScroller=new $_(t._pageScroller),this._commandBox=t._commandBox.createWrapper(A_),this._selectionMask=t._selectionMask.createWrapper(D_),this._row=new M_(t.row()),this._headRows=t.headRows().setWrapper(new mc(t.headRows())),this._header=t._header.createWrapper(O_),this._footer=t._footer.createWrapper(B_),this._searchBar=t._searchBar.createWrapper(z_),this._searchResultBar=t._searchResultBar.createWrapper(H_),this._fieldBar=t._fieldBar.createWrapper(W_),this._fieldHeader=t._fieldHeader.createWrapper(F_),this._formPanel=t._formPanel.createWrapper(j_),this._buttonPanel=t._buttonPanel.createWrapper(Y_),this._searchPanel=t._searchPanel.createWrapper(Q_),this._filterPanel=t._filterPanel.createWrapper(Z_),this._rowGroup=new tc(t._rowGroup),this._dataGroup=new ec(t._dataGroup),this._rowInfos=t._dataRowInfos.createWrapper(sc),this._infoPage=new hc(t._infoPage),this._editPage=new dc(t._editPage),this._addPage=new dc(t._addPage),this._singleRow=new cc(t._singleRow),this._attachedRow=t._attachedRow.createWrapper(uc),this._emptyPage=t._emptyPage.createWrapper(pc),this._loadingPage=t._loadingPage.createWrapper(fc)}get rowType(){return this.$_c.rowType()}set rowType(t){this.$_c.setRowType(t)}get isLandScape(){return this.$_c.isLandscape()}get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get largeSize(){return this.$_c.largeSize()}set largeSize(t){this.$_c.setLargeSize(t)}get rowWidth(){return this.$_c.rowWidth()}set rowWidth(t){this.$_c.setRowWidth(t)}get minRowWidth(){return this.$_c.minRowWidth()}set minRowWidth(t){this.$_c.setMinRowWidth(t)}get maxRowWidth(){return this.$_c.maxRowWidth()}set maxRowWidth(t){this.$_c.setMaxRowWidth(t)}get rowCount(){return this.$_c.rowCount()}set rowCount(t){this.$_c.setRowCount(t)}get levelIndent(){return this.$_c.levelIndent()}set levelIndent(t){this.$_c.setLevelIndent(t)}get menu(){return this.$_c.menu()}set menu(t){this.$_c.setMenu(t)}get rowBar(){return this._rowBar}get editBar(){return this._editBar}get indexBar(){return this._indexBar}get scrollIndicator(){return this._scrollIndicator}get scrollBar(){return this._scrollBar}get pageNavigator(){return this._pageNavigator}get pageScroller(){return this._pageScroller}get commandBox(){return this._commandBox}get row(){return this._row}get header(){return this._header}get footer(){return this._footer}get searchBar(){return this._searchBar}get searchResultBar(){return this._searchResultBar}get fieldBar(){return this._fieldBar}get fieldHeader(){return this._fieldHeader}get formPanel(){return this._formPanel}get buttonPanel(){return this._buttonPanel}get searchPanel(){return this._searchPanel}get filterPanel(){return this._filterPanel}get rowGroup(){return this._rowGroup}get dataGroup(){return this._dataGroup}get rowInfos(){return this._rowInfos}get singleRow(){return this._singleRow}get attachedRow(){return this._attachedRow}get emptyPage(){return this._emptyPage}get loadingPage(){return this._loadingPage}get infoPage(){return this._infoPage}get editPage(){return this._editPage}get addView(){return this._addPage}assign(t){t&&(this.assignProps(t),t.rowInfos&&this._rowInfos.setInfos(t.rowInfos))}}class vc extends yc{constructor(t,e,s,i){super(t),this._owner=e,this._portrait=s,this._landscape=i}get portrait(){return this._portrait}get landscape(){return this._landscape}get current(){return this._owner.current}}function bc(t){return t&&{_idx:t.header().index,level:t.level(),field:t.field(),value:t.value(),expanded:t.expanded()}}class Sc extends i{constructor(t,e,s=Ht.DEFAULT){super();const i=new t_(t,e,s).setWrapper(this).$_c;this._current=this._portrait=i.portrait().setWrapper(new yc(i.portrait())),this._landscape=i.landscape().setWrapper(new yc(i.landscape())),this._options=i.options().setWrapper(new vc(i.options(),this,this._portrait,this._landscape)),i._orientationChanged=t=>{this._current=this.$_c.current().isWrapper(this._landscape)?this._landscape:this._portrait}}destory(){this.$_c=this.$_c.destroy()}get onScroll(){return this.$_c.onScroll}set onScroll(t){this.$_c.onScroll=t}get onRowClick(){return this.$_c.onRowClick}set onRowClick(t){this.$_c.onRowClick=t}get onRowLongPress(){return this.$_c.onRowLongPress}set onRowLongPress(t){this.$_c.onRowLongPress=t}get onRowSwipe(){return this.$_c.onRowSwipe}set onRowSwipe(t){this.$_c.onRowSwipe=t}get onButtonClick(){return this.$_c.onButtonClick}set onButtonClick(t){this.$_c.onButtonClick=t}get onRowCheck(){return this.$_c.onRowCheck}set onRowCheck(t){this.$_c.onRowCheck=t}get onRowsCheck(){return this.$_c.onRowsCheck}set onRowsCheck(t){this.$_c.onRowsCheck=t}get onAllRowsCheck(){return this.$_c.onAllRowsCheck}set onAllRowsCheck(t){this.$_c.onAllRowsCheck=t}get onRowDetail(){return this.$_c.onRowDetail}set onRowDetail(t){this.$_c.onRowDetail=t}get onRowsDetail(){return this.$_c.onRowsDetail}set onRowsDetail(t){this.$_c.onRowsDetail=t}get onAllRowsDetail(){return this.$_c.onAllRowsDetail}set onAllRowsDetail(t){this.$_c.onAllRowsDetail=t}get onRowFlagChange(){return this.$_c.onRowFlagChange}set onRowFlagChange(t){this.$_c.onRowFlagChange=t}get onRowsFlagChange(){return this.$_c.onRowsFlagChange}set onRowsFlagChange(t){this.$_c.onRowsFlagChange=t}get onAllRowsFlagChange(){return this.$_c.onAllRowsFlagChange}set onAllRowsFlagChange(t){this.$_c.onAllRowsFlagChange=t}get onSelectionAdd(){return this.$_c.onSelectionAdd}set onSelectionAdd(t){this.$_c.onSelectionAdd=t}get onSelectionClear(){return this.$_c.onSelectionClear}set onSelectionClear(t){this.$_c.onSelectionClear=t}get onSelectionChange(){return this.$_c.onSelectionChange}set onSelectionChange(t){this.$_c.onSelectionChange=t}get onLastRowRevealed(){return this.$_c.onLastRowRevealed}set onLastRowRevealed(t){this.$_c.onLastRowRevealed=t}get onBeforeGroupExpand(){return this.$_c.onBeforeGroupExpand}set onBeforeGroupExpand(t){this.$_c.onBeforeGroupExpand=t}get onGroupExpand(){return this.$_c.onGroupExpand}set onGroupExpand(t){this.$_c.onGroupExpand=t}get onBeforeGroupCollapse(){return this.$_c.onBeforeGroupCollapse}set onBeforeGroupCollapse(t){this.$_c.onBeforeGroupCollapse=t}get onGroupCollapse(){return this.$_c.onGroupCollapse}set onGroupCollapse(t){this.$_c.onGroupCollapse=t}get onBeforePageChange(){return this.$_c.onBeforePageChange}set onBeforePageChange(t){this.$_c.onBeforePageChange=t}get onPageChange(){return this.$_c.onPageChange}set onPageChange(t){this.$_c.onPageChange=t}get onFocusedRowChange(){return this.$_c.onFocusedRowChange}set onFocusedRowChange(t){this.$_c.onFocusedRowChange=t}get onEditFieldChange(){return this.$_c.onEditFieldChange}set onEditFieldChange(t){this.$_c.onEditFieldChange=t}get onEditCommit(){return this.$_c.onEditCommit}set onEditCommit(t){this.$_c.onEditCommit=t}get orientation(){return this.$_c.orientation()}get syncOrientation(){return this.$_c.syncOrientation()}set syncOrientation(t){this.$_c.setSyncOrientation(t)}get screenOrientation(){return this.$_c.screenOrientation()}get syncScreenOrientation(){return this.$_c.syncScreenOrientation()}set screenSyncOrientation(t){this.$_c.setScreenSyncOrientation(t)}get renderMode(){return this.$_c.renderMode()}get description(){return this.$_c.description()}set description(t){this.$_c.setDescription(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t?t.$_d:null))}get textFormatter(){return this.$_c.textFormatter()}set textFormatter(t){this.$_c.setTextFormatter(t)}get boolFormatter(){return this.$_c.boolFormatter()}set boolFormatter(t){this.$_c.setBoolFormatter(t)}get numberFormatter(){return this.$_c.numberFormatter()}set numberFormatter(t){this.$_c.setNumberFormatter(t)}get dateFormatter(){return this.$_c.dateFormatter()}set dateFormatter(t){this.$_c.setDateFormatter(t)}get textFormat(){return this.$_c.textFormat()}set textFormat(t){this.$_c.setTextFormat(t)}get boolFormat(){return this.$_c.boolFormat()}set boolFormat(t){this.$_c.setBoolFormat(t)}get numberFormat(){return this.$_c.numberFormat()}set numberFormat(t){this.$_c.setNumberFormat(t)}get dateFormat(){return this.$_c.dateFormat()}set dateFormat(t){this.$_c.setDateFormat(t)}get options(){return this._options}setOptions(t){return t&&this._options.assign(t),this}get portrait(){return this._portrait}setPortrait(t){return t&&this._portrait.assign(t),this}get landscape(){return this._landscape}setLandscape(t){return t&&this._landscape.assign(t),this}get current(){return this._current}get isEmpty(){return this.$_c.isEmpty()}get topRow(){return this.$_c.topRow()}set topRow(t){this.$_c.setTopRow(t)}get isRowGrouped(){return this.$_c.isRowGrouped()}get isDataGrouped(){return this.$_c.isRowGrouped()}get isPaging(){return this.$_c.isPaging()}get isSingleRow(){return this.$_c.isSingleRow()}get pageSize(){return this.$_c.pageSize()}get pageCount(){return this.$_c.pageCount()}get page(){return this.$_c.page()}set page(t){this.$_c.setPage(t)}get registeredRowCommands(){return this.$_c.rowCommands().registeredCommands()}get commandRow(){return this.$_c.commandRow()}get checkedRowCount(){return this.$_c.checkedRowCount()}get lineSeparator(){return this.$_c.lineSeparator()}set lineSeparator(t){this.$_c.setLineSeparator(t)}get searchOptions(){return Object.assign({},this.$_c.searchOptions())}set searchOptions(t){this.$_c.setSearchOptions(t)}get fitRowWhenScroll(){return this.$_c.fitRowWhenScroll}set fitRowWhenScroll(t){this.$_c.fitRowWhenScroll=t}get fitRowWhenClick(){return this.$_c.fitRowWhenClick}set fitRowWhenClick(t){this.$_c.fitRowWhenClick=t}get scrollIndex(){return this.$_c.scrollIndex()}set scrollIndex(t){this.$_c.setScrollIndex(t,0)}get focusedRow(){return this.$_c.focusedRow()}get dataLoading(){return this.$_c.isDataLoading()}setDataLoading(t){return this.$_c.setDataLoading(t)}get dataAppending(){return this.$_c.isDataAppending()}setDataAppending(t,e=!0){return this.$_c.setDataAppending(t,e)}get skeletonVisible(){return this.$_c.skeletonVisible}set skeletonVisible(t){this.$_c.skeletonVisible=t}get alwaysEmptyPage(){return this.$_c.alwaysEmptyPage}set alwaysEmptyPage(t){this.$_c.alwaysEmptyPage=t}get selectable(){return this.$_c.selectable}set selectable(t){this.$_c.selectable=t}setConfig(t){for(let t=0,e=arguments.length;t<e;t++){const e=arguments[t];if(!Lt(e))return;const s=e.props;if(Lt(s)){const t=this.$_c,e=s.rowCommands,i=s.icons,r=s.menus;if(s.shapes&&t.registerShapes(s.shapes),s.templates&&this.registerTemplates(s.templates),e)for(const s in e)s.startsWith("@")?t.rowCommands().update(s,e[s]):t.rowCommands().register(s,e[s],!0);if(i&&(Array.isArray(i)?i.forEach(e=>t.registerIconSet(e.name,e)):w.isObject(i)&&t.registerIconSet(i.name,i)),r)for(const t in r)this.$_c.registerMenu(t,r[t]);this.assignProps(s)}this.setOptions(e.options),this.setPortrait(e.portrait),this.setLandscape(e.landscape)}return this}registerTemplate(t,e){return e=e||t.name||vi(),this.$_c.registerTemplate(e,t,!1),e}registerTemplates(t){if(Lt(t))for(let e in t)this.registerTemplate(t[e],e)}registerSharedTemplate(t,e){return e=e||t.name||vi(),this.$_c.registerTemplate(e,t,!0),e}registerSharedTemplates(t){if(Lt(t))for(let e in t)this.registerSharedTemplate(t[e],e)}registerShape(t){t&&this.$_c.registerShape(t.name,t.d,t.width,t.height)}registerShapes(t){const e={};Array.isArray(t)&&t.forEach(t=>{t.name&&(e[t.name]=t)}),this.$_c.registerShapes(e)}registerIconSet(t,e){if(!t)throw new Error("IconSet의 이름이 지정돼야 합니다.");this.$_c.registerIconSet(t,e)}rowGroupBy(t){t&&!Array.isArray(t)&&(t=[t]),this.$_c.rowGroupBy(t)}groupOfRow(t){const e=this.$_c._group;return e?bc(e.groupOfRow(t)):null}parentOfGroup(t){if(t){const e=this.$_c._group;if(e){const s=e.getItem(t._idx);return s&&bc(s.group.parent)}}}childrenOfGroup(t){if(t){const e=this.$_c._group;if(e){const s=e.getItem(t._idx);if(s)return s.group.children.map(t=>bc(t))}}}expandGroup(t){return this.$_c._group,!1}collapseGroup(t){return this.$_c._group,!1}dataGroupBy(t){this.$_c.dataGroupBy(t)}setPaging(t){return this.$_c.setPaging(t),this}clearSelection(){this.$_c.clearSelection()}setSelection(t,e){this.$_c.setSelection(t,e)}resizeSelection(t,e=NaN){this.$_c.resizeSelection(e,t)}isRowSelected(t){const e=this.$_c.getSelection();return e&&e.isRowSelected(t)}getSelectedRows(){const t=this.$_c.getSelection();return t&&t.getSelectedRows()}isRowChecked(t){return this.$_c.isRowChecked(t)}getCheckedRows(t=!0){return this.$_c.$_getFlags().getCheckedRows(t)}checkRow(t,e){return this.$_c.checkRow(t,e)}toggleChecked(t){this.$_c.toggleChecked(t)}checkRows(t,e){return this.$_c.$_getFlags().checkRows(t,e)}checkRowRange(t,e,s){return this.$_c.$_getFlags().checkRange(t,e,s)}checkAllRows(t){return this.$_c.$_getFlags().checkAll(t)}checkAll(t){if(!this.$_c.isDataGrouped())return this.checkAllRows(t)}isRowCheckable(t){return this.$_c.isRowCheckable(t)}setCheckable(t,e){const s=this.$_c.$_getFlags();return s&&s.setCheckable(t,e)}isRowDetailed(t){return this.$_c.isRowDetailed(t)}getDetailedRows(t){return this.$_c.$_getFlags().getDetailedRows(t)}setRowDetailed(t,e,s=!1){this.$_c.setRowDetailed(t,e,s,!1)}setRowsDetailed(t,e,s){return this.$_c.$_getFlags().detailRows(e,s)}setRowRangeDetailed(t,e,s,i){return this.$_c.$_getFlags().detailRange(e,s,i)}setAllRowsDetailed(t){return this.$_c.$_getFlags().detailAll(t)}isRowFlagged(t,e){return this.$_c.$_getFlags().hasUserFlag(t,e)}getFlaggedRows(t,e){return this.$_c.$_getFlags().getUserFlaggedRows(t,e)}setRowFlagAll(t,e){return this.$_c.$_getFlags().setUserFlagAll(t,e)}setRowFlag(t,e,s){return this.$_c.$_getFlags().setUserFlag(t,e,s)}setRowsFlag(t,e,s){return this.$_c.$_getFlags().setUserFlags(t,e,s)}setRowRangeFlag(t,e,s,i){return this.$_c.$_getFlags().setUserFlagRange(t,e,s,i)}registerRowCommand(t,e,s=!1){this.$_c.rowCommands().register(t,e,s)}unregisterRowCommands(t){this.$_c.rowCommands().unregister(t)}getRowCommand(t){return this.$_c.rowCommands().get(t)}updateRowCommand(t,e){this.$_c.rowCommands().update(t,e)}setCommandRow(t,e=!0){this.$_c.setCommandRow(t,e)}closePanel(t=!0){this.$_c.closePanel(t)}showFormPanel(t=!0){this.$_c.showFormPanel(null,t)}showButtonPanel(t=!0){this.$_c.showButtonPanel(t)}showSearchPanel(t,e=!0){this.$_c.showSearchPanel(t,e)}showFilterPanel(t,e=!0){this.$_c.showFilterPanel(t,e)}showMenu(t,e=!0){this.$_c.showMenu(t,e)}closeMenu(t=!0){this.$_c.closeMenu(t)}showInfoPage(t,e,s=!0){this.$_c.showInfoPage(t,e,s)}closeInfoPage(){this.$_c.isInfoPageVisible()&&this.$_c.closeRowPage(!1,!0)}showEditPage(t,e,s=!0){this.$_c.showEditPage(t,e,s)}closeEditPage(t,e=!0){this.$_c.isEditPageVisible()&&this.$_c.closeRowPage(t,e)}getEditValues(){return this.$_c.getEditValues()}search(t,e){const s=this.$_c.search(e,t);return s?s.fields():void 0}makeRowVisible(t){this.$_c.makeRowVisible(t)}setFocusedRow(t){this.$_c.setFocusedRow(t)}scrollToEnd(t){this.$_c.scrollToEnd(t)}showToast(t){this.$_c.showToast(t)}}class Cc extends e{isRowUpdated(t){throw R}isRowDeleted(t){throw R}getValue(t,e,s=!0){throw R}getValues(t,e,s=!0){throw R}findRow(t,e,s){throw R}findRows(t,e,s){throw R}findDistinctRows(t,e,s){throw R}}class xc extends Cc{createLinkView(t,e){return new Vc(t,this,e)}}class Rc extends xc{constructor(t,e,s){super(),this.$_d=t instanceof Xn?t:new Xn(t,e,s,this)}$_doDestory(){this.$_d=this.$_d.destroy()}get onValueUpdate(){return this.$_d.onValueUpdate}set onValueUpdate(t){this.$_d.onValueUpdate=t}get onRowUpdate(){return this.$_d.onRowUpdate}set onRowUpdate(t){this.$_d.onRowUpdate=t}get onRowsUpdate(){return this.$_d.onRowsUpdate}set onRowsUpdate(t){this.$_d.onRowsUpdate=t}get onRowAdd(){return this.$_d.onRowAdd}set onRowAdd(t){this.$_d.onRowAdd=t}get onRowsAdd(){return this.$_d.onRowsAdd}set onRowsAdd(t){this.$_d.onRowsAdd=t}get onRowsClear(){return this.$_d.onRowsClear}set onRowsClear(t){this.$_d.onRowsClear=t}get onRowDelete(){return this.$_d.onRowDelete}set onRowDelete(t){this.$_d.onRowDelete=t}get onRowsDelete(){return this.$_d.onRowsDelete}set onRowsDelete(t){this.$_d.onRowsDelete=t}get onRowRangeDelete(){return this.$_d.onRowRangeDelete}set onRowRangeDelete(t){this.$_d.onRowRangeDelete=t}get onRowMove(){return this.$_d.onRowMove}set onRowMove(t){this.$_d.onRowMove=t}get onRowsMove(){return this.$_d.onRowsMove}set onRowsMove(t){this.$_d.onRowsMove=t}get onRowStateChange(){return this.$_d.onRowStateChange}set onRowStateChange(t){this.$_d.onRowStateChange=t}get onRowStatesChange(){return this.$_d.onRowStatesChange}set onRowStatesChange(t){this.$_d.onRowStatesChange=t}get onRowCountChange(){return this.$_d.onRowCountChange}set onRowCountChange(t){this.$_d.onRowCountChange=t}get onDataChange(){return this.$_d.onDataChange}set onDataChange(t){this.$_d.onDataChange=t}get title(){return this.$_d.title()}get fieldCount(){return this.$_d.fieldCount()}get fields(){return this.$_d.fields().map(t=>t.proxy())}get readonly(){return this.$_d.readOnly()}get softDeleting(){return this.$_d.softDeleting()}get restorable(){return this.$_d.restorable()}get validator(){return this.$_d.validator()}getField(t){return this.$_d.getField(t).proxy()}createView(t,e){return new Ec(t,this,e)}setRowCount(t,e=!1){this.$_d.setRowCount(t)}isEmpty(t){return this.$_d.isEmpty(t)}getValues(t,e,s=!0){return this.$_d.getValues(t,e,s)}loadData(t){return this.$_d.loadData(t),this}insertRow(t,e){return this.$_d.insertRow(t,e)}appendRow(t){return this.$_d.appendRow(t)}insertRows(t,e){return this.$_d.insertRows(t,e)}appendRows(t){return this.$_d.appendRows(t)}deleteAll(t=!1){return this.$_d.deleteAll(t)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){return this.$_d.deleteRows(t,e)}deleteRange(t,e,s=!1){return this.$_d.deleteRange(t,e,s)}updateRow(t,e,s=!1){return this.$_d.updateRow(t,e,s)}updateRows(t,e,s=!1){return this.$_d.updateRows(t,e,s)}updateRange(t,e,s,i=!1){return this.$_d.updateRange(t,e,s,i)}restoreRow(t){return this.$_d.restoreRow(t)}restoreRows(t){return this.$_d.restoreRows(t)}moveRow(t,e){return this.$_d.moveRow(t,e)}moveRows(t,e,s){return this.$_d.moveRows(t,e,s)}get name(){return this.$_d.name()}get source(){return this}get rowCount(){return this.$_d.rowCount()}isRowUpdated(t){return this.$_d.getRowState(t)===Qi.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Qi.DELETED}getValue(t,e,s=!0){if(e){const i=w.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}findRow(t,e=0,s=-1){return this.$_d.findRow(t,e,s)}findRows(t,e=0,s=-1){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e=0,s=-1){return this.$_d.findDistinctRows(t,e,s)}}class Ec extends xc{constructor(t,e,s){super(),this.$_d=new ao(t,e.$_d,s,this),this._source=e}$_doDestory(){this.$_d=this.$_d.destroy()}get onSortChange(){return this.$_d.onSortChange}set onSortChange(t){this.$_d.onSortChange=t}get onFilterChange(){return this.$_d.onFilterChange}set onFilterChange(t){this.$_d.onFilterChange=t}get source(){return this._source}get fields(){return this.$_d.fields().map(t=>t.proxy())}get autoSort(){return this.$_d.autoSort()}set autoSort(t){this.$_d.setAutoSort(t)}snapshot(t){return new Rc(this.$_d.snapshot(t))}build(t=!1){return this.$_d.build(t),this}sort(t,e=!1){return this.$_d.sort(t,e),this}addSort(t,e,s,i=!1){return this.$_d.addSort(t,e,s,i),this}appendSort(t,e,s=!1){return this.$_d.appendSort(t,e,s),this}removeSort(t,e=!1){return this.$_d.removeSort(t,e),this}toggleSort(t,e=!1){return this.$_d.toggleSort(t,e),this}select(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}selectAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}slice(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}sliceAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}dedupe(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!1,i),this}dedupeAfter(t,e,s=!0,i=!1){return this.$_d.addFilter({name:t,filter:e,enabled:s},!0,i),this}addFilter(t,e=!1){return this.$_d.addFilter(t,!1,e),this}addPostFilter(t,e=!1){return this.$_d.addFilter(t,!0,e),this}addFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!1,e),this}addPostFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!0,e),this}removeFilter(t,e=!1){return this.$_d.removeFilter(t,e),this}removeFilters(t,e=!1){return this.$_d.removeFilters(t,e),this}clearFilters(t=!1){return this.$_d.clearFilters(t),this}enableFilter(t,e,s=!0){return this.$_d.enableFilter(t,e,s),this}enableFilters(t,e,s=!0){return this.$_d.enableFilters(t,e,s),this}enableAllFilters(t,e=!0){return this.$_d.enableAllFilters(t,!0),this}get name(){return this.$_d.name()}get rowCount(){return this.$_d.rowCount()}getValue(t,e,s){if(e){const i=w.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}getValues(t,e,s=!0){return this.$_d.getValues(t,e,s)}isRowUpdated(t){return this.$_d.getRowState(t)===Qi.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Qi.DELETED}findRow(t,e=0,s=-1){return this.$_d.findRow(t,e,s)}findRows(t,e=0,s=-1){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e=0,s=-1){return this.$_d.findDistinctRows(t,e,s)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}appendRows(t){return this.source.appendRows(t)}}class Vc extends Cc{constructor(t,e,s){function i(t){return Array.isArray(t)?t.map(t=>r(t)):[r(t)]}function r(t){return t?{data:t.data.$_d,keyFields:t.keyFields,masterFields:t.masterFields,details:t.details?i(t.details):null}:null}super(),this.$_d=new Vh(t,e.$_d,i(s),this)}$_doDestory(){this.$_d=this.$_d.destroy()}isMaster(t){return this.$_d.isMaster(t)}isLeaf(t){return this.$_d.isLeaf(t)}get name(){return this.$_d.name()}get source(){return this._data.source}get rowCount(){return this.$_d.rowCount()}getValue(t,e,s){if(e){const i=w.getFieldProp(e);return i?this.$_d.getProp(t,i.field,i.props,s):this.$_d.getValue(t,e,s)}}getValues(t){return this.$_d.getRowValues(t)}isRowUpdated(t){return this.$_d.getRowState(t)===Qi.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Qi.DELETED}findRow(t,e,s){return this.$_d.findRow(t,e,s)}findRows(t,e,s){return this.$_d.findRows(t,e,s)}findDistinctRows(t,e,s){return this.$_d.findDistinctRows(t,e,s)}getDataViews(){return this.$_d.getDataViews().map(t=>t.wrapper())}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}}class $c{static getVersion(){return"0.9.11"}static setLocale(t,e){e&&S(t,e),(t=>{b=y[v=t],b||(b=y[v="ko"])})(t)}static registerLocale(t,e){S(t,e)}static setLogging(t){x.setLogging(t)}static setBounding(t){ce.BOUNDING=t}static destroy(){wi.destroy(),mi.destroy()}static registerTemplate(t,e){return yi(null,mi,t,e)}static unregisterTemplates(t){if("string"!=typeof t)return mi.removeAll(t);mi.remove(t)}static createListData(t,e,s){return new Rc(t,e,s)}static createDataView(t,e,s){return e instanceof Rc||I(b.dataMustSet),new Ec(t,e,s)}static createDataLink(t,e,s){return e instanceof xc||I(b.dataMustSet),new Vc(t,e,s)}static createListControl(t,e,s=Ht.DEFAULT){return new Sc(t,e,s)}}return $c.RtRenderMode=Ht,$c.RtRowBarDisplay=cr,$c.RtRowBorderIndent=mn,$c.RtControlObjectPosition=Si,$c.RtScrollIndicatorMode=eo,$c.RtRowIndents=oe,$c.RtDataSource=Cc,$c.RtData=Rc,$c.RtDataView=Ec,$c.RtControl=Sc,$c}));
